<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ:Rootana: midas/drivers/bus/lrs1821.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>midas/drivers/bus/lrs1821.h</h1><a href="lrs1821_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/********************************************************************\</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">  Name:         lrs1821.h</span>
<a name="l00004"></a>00004 <span class="comment">  Created by:   Stefan Ritt</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">  Cotents:      Header file for LeCroy 1821 segment manager interface.</span>
<a name="l00007"></a>00007 <span class="comment">                Includes logical names for 1821 registers and macros.</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">  $Log: lrs1821.h,v $</span>
<a name="l00010"></a>00010 <span class="comment">  Revision 1.1.1.1  2005/06/20 23:37:07  mucap</span>
<a name="l00011"></a>00011 <span class="comment">  Importing release 1.9.5 of the MIDAS source code as distributed by PSI.</span>
<a name="l00012"></a>00012 <span class="comment">  (Next, I&apos;ll commit our local customizations.)</span>
<a name="l00013"></a>00013 <span class="comment"></span>
<a name="l00014"></a>00014 <span class="comment">  Revision 1.2  2004/01/08 08:40:08  midas</span>
<a name="l00015"></a>00015 <span class="comment">  Implemented standard indentation</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">  Revision 1.1  1999/12/20 10:18:11  midas</span>
<a name="l00018"></a>00018 <span class="comment">  Reorganized driver directory structure</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment">  Revision 1.2  1998/10/12 12:18:57  midas</span>
<a name="l00021"></a>00021 <span class="comment">  Added Log tag in header</span>
<a name="l00022"></a>00022 <span class="comment"></span>
<a name="l00023"></a>00023 <span class="comment"></span>
<a name="l00024"></a>00024 <span class="comment">\********************************************************************/</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#ifndef _LRS1821_H_</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#define _LRS1821_H_</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="mfbstd_8h.html">mfbstd.h</a>&quot;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/*---- Base IO-address for 1691 module. Must match with jumpers ----*/</span>
<a name="l00032"></a><a class="code" href="lrs1821_8h.html#ab33a3ff8977a5c4e3cbd87dde2810ea7">00032</a> <span class="preprocessor">#define BASE_1691 0x200</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 <span class="comment">/*---- IO registers in 1691 ----------------------------------------*/</span>
<a name="l00035"></a><a class="code" href="lrs1821_8h.html#af15d8f66718e35a20f889bd2f11603f9">00035</a> <span class="preprocessor">#define REG0      BASE_1691</span>
<a name="l00036"></a><a class="code" href="lrs1821_8h.html#a23aa3147ae7bf4349320c486c2a11cf0">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define REG1      BASE_1691 + 2</span>
<a name="l00037"></a><a class="code" href="lrs1821_8h.html#ac75dcec9cbb55e54a2e08815451fd75d">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define REG2      BASE_1691 + 4</span>
<a name="l00038"></a><a class="code" href="lrs1821_8h.html#af1780f97dc4d4fe05dbfa7f76b450680">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define REG3      BASE_1691 + 6</span>
<a name="l00039"></a><a class="code" href="lrs1821_8h.html#a4649f692e9e47fd1c6767a113f4a0d9e">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define REG4      BASE_1691 + 8</span>
<a name="l00040"></a><a class="code" href="lrs1821_8h.html#a16cf66b61967e7b16ca0fd42d5bf634b">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define REG5      BASE_1691 + 10</span>
<a name="l00041"></a><a class="code" href="lrs1821_8h.html#a618cd7aaa684faf6269eaca438f742df">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define REG6      BASE_1691 + 12</span>
<a name="l00042"></a><a class="code" href="lrs1821_8h.html#a4086398f913f7dc4ddfc472f84b1656c">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define REG7      BASE_1691 + 14</span>
<a name="l00043"></a><a class="code" href="lrs1821_8h.html#a671ee4cc5791feb053a0e017c161bf04">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define RCL       BASE_1691 + 16</span>
<a name="l00044"></a><a class="code" href="lrs1821_8h.html#a137c9e7c0bc9e12f455df0a6e41c0287">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define DMA       BASE_1691 + 17</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="comment">/*--- port commands ------------------------------------------------*/</span>
<a name="l00047"></a>00047 <span class="preprocessor">#if defined( __MSDOS__ )</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#include &lt;dos.h&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#define OUTP(_p, _d) outportb(_p, _d)</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define OUTPW(_p, _d) outport(_p, _d)</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#define INP(_p) inportb(_p)</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define INPW(_p) inport(_p)</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#elif defined( _MSC_VER )</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#include &lt;windows.h&gt;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &lt;conio.h&gt;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#define OUTP(_p, _d) _outp((unsigned short) (_p), (int) (_d))</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#define OUTPW(_p, _d) _outpw((unsigned short) (_p), (unsigned short) (_d))</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#define INP(_p) _inp((unsigned short) (_p))</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><span class="preprocessor">#define INPW(_p) _inpw((unsigned short) (_p))</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00062"></a>00062 <span class="comment">/*--- out port command, first hi-byte, then lo-byte ----------------*/</span>
<a name="l00063"></a><a class="code" href="lrs1821_8h.html#a0c5d75d430f6ae28ada36ebbf73e783e">00063</a> <span class="preprocessor">#define OUTWR(port, data)   OUTP(port+1, ((data)&gt;&gt;8)); OUTP(port, data)</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a>00065 <span class="comment">/*---- logicals for 1691 -------------------------------------------*/</span>
<a name="l00066"></a><a class="code" href="lrs1821_8h.html#a226fcdeff443b761e403337d942abb51">00066</a> <span class="preprocessor">#define TAKE_CONTROL 0x10       // communication to 1821 over rear-panel</span>
<a name="l00067"></a><a class="code" href="lrs1821_8h.html#ac2e389417b21a770511b0c3ab16c6ebf">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define BYPASS       0x20       // bypass 1821 front-panel address</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00069"></a>00069 <span class="comment">/*---- 1821 ROM number &amp; arbitration level -------------------------*/</span>
<a name="l00070"></a>00070 <span class="preprocessor">#ifndef ROM_NO</span>
<a name="l00071"></a><a class="code" href="lrs1821_8h.html#a0693a965f1f6c168a0cd948df859c144">00071</a> <span class="preprocessor"></span><span class="preprocessor"># define ROM_NO      0</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a>00074 <span class="preprocessor">#ifndef ARB_LEVEL</span>
<a name="l00075"></a><a class="code" href="lrs1821_8h.html#ac4b752808eb90f1695ab8d216fc47163">00075</a> <span class="preprocessor"></span><span class="preprocessor"># define ARB_LEVEL   1</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="comment">/*---- REG0 bitmap -------------------------------------------------*/</span>
<a name="l00079"></a><a class="code" href="lrs1821_8h.html#addf0736b03de88fbee735c10ba4e3b99">00079</a> <span class="preprocessor">#define MMS0         0x0001     // Menu Memory Select bits</span>
<a name="l00080"></a><a class="code" href="lrs1821_8h.html#af9d01c2131fd1ce5eb9c6ae7d84a985c">00080</a> <span class="preprocessor"></span><span class="preprocessor">#define MMS1         0x0002</span>
<a name="l00081"></a><a class="code" href="lrs1821_8h.html#a5f34b45b5d6d7ef3cdde5acc474b3ce3">00081</a> <span class="preprocessor"></span><span class="preprocessor">#define MMS2         0x0004</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a><a class="code" href="lrs1821_8h.html#a8705b351c18a733d8510549396aa35c7">00083</a> <span class="preprocessor">#define CLKSPD       0x0008     // 0: Clock with 128 nsec period, 1: 32 nsec</span>
<a name="l00084"></a><a class="code" href="lrs1821_8h.html#a9cd47e5f06daf73466ebb7eabed4af18">00084</a> <span class="preprocessor"></span><span class="preprocessor">#define LPROC        0x0010</span>
<a name="l00085"></a><a class="code" href="lrs1821_8h.html#abbbcf3c42c997889127cc676754a6fea">00085</a> <span class="preprocessor"></span><span class="preprocessor">#define HOST         0x0020</span>
<a name="l00086"></a><a class="code" href="lrs1821_8h.html#a67481fc0148df36eb20f078ff1ce2d7c">00086</a> <span class="preprocessor"></span><span class="preprocessor">#define ATTN         0x0040     // Request Sequencer Attention</span>
<a name="l00087"></a><a class="code" href="lrs1821_8h.html#a3a6e2ba411a111c7650a2c97decfd059">00087</a> <span class="preprocessor"></span><span class="preprocessor">#define PLOAD        0x0080     // Sequencer Program Load bit</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a><a class="code" href="lrs1821_8h.html#a8e787c1bd60d7314c215493e3dafbf1a">00089</a> <span class="preprocessor">#define PDD0         0x0100     // PDATA Bus Destination Select</span>
<a name="l00090"></a><a class="code" href="lrs1821_8h.html#aa2e233421c50f2f33fdc7a4d118f1a9d">00090</a> <span class="preprocessor"></span><span class="preprocessor">#define PDD1         0x0200</span>
<a name="l00091"></a><a class="code" href="lrs1821_8h.html#a87cdb3379fb66655d8db096e8987b4fe">00091</a> <span class="preprocessor"></span><span class="preprocessor">#define PDS0         0x0400     // PDATA Bus Source Select</span>
<a name="l00092"></a><a class="code" href="lrs1821_8h.html#af6d9b490a32b46a4abb9c63b45a5ba27">00092</a> <span class="preprocessor"></span><span class="preprocessor">#define PDS1         0x0800</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>
<a name="l00094"></a><a class="code" href="lrs1821_8h.html#a04cfc47c84309660da78fc8a479679c3">00094</a> <span class="preprocessor">#define PAD0         0x1000     // PADDR Bus Destination Select</span>
<a name="l00095"></a><a class="code" href="lrs1821_8h.html#a01d2fb85e309555aba53cd538c19e8f6">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define PAD1         0x2000</span>
<a name="l00096"></a><a class="code" href="lrs1821_8h.html#a9a876c167413e4e92729fda8220bfc87">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define PAS0         0x4000     // PADDR Bus Source Select</span>
<a name="l00097"></a><a class="code" href="lrs1821_8h.html#ae6e57a838b853ca6f223cd903bb3b1de">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define PAS1         0x8000</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span>
<a name="l00099"></a><a class="code" href="lrs1821_8h.html#ab74733f6694aeac4583d429d9f055b4d">00099</a> <span class="preprocessor">#define PD_HOST_TO_SEQ   (PDS1 | PDD0)</span>
<a name="l00100"></a><a class="code" href="lrs1821_8h.html#aa0e58442854f37a6adad6323d9c0bde4">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define PD_PMAR_TO_SEQ   (PDD0)</span>
<a name="l00101"></a><a class="code" href="lrs1821_8h.html#a9e801fd8baebbea4bfb78a824ee50a52">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define PD_MENU_TO_HOST  (PDD1)</span>
<a name="l00102"></a><a class="code" href="lrs1821_8h.html#a1fcfc6ad10dff7b83b3f61c908fc0786">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define PD_SEQ_TO_HOST   (PDS0 | PDD1)</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a><a class="code" href="lrs1821_8h.html#af407c81b0b267451e96ab5bddc29a0d8">00104</a> <span class="preprocessor">#define PA_HOST_TO_SEQ   (PAS1 | PAD0)</span>
<a name="l00105"></a><a class="code" href="lrs1821_8h.html#ac1efe0c07b528ba47ec50d379a8b6dc9">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define PA_MENU_TO_SEQ   (PAD0)</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>
<a name="l00107"></a>00107 <span class="comment">/*---- REG1 bitmap -------------------------------------------------*/</span>
<a name="l00108"></a><a class="code" href="lrs1821_8h.html#aedcf3e6fff8878e275e03067aa065d61">00108</a> <span class="preprocessor">#define ADLQ         0x2000     // Auto Download flip/flop</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>
<a name="l00110"></a>00110 <span class="comment">/*---- REG3 bitmap -------------------------------------------------*/</span>
<a name="l00111"></a><a class="code" href="lrs1821_8h.html#a744d45913701eafda917e42714e8a1b1">00111</a> <span class="preprocessor">#define DMBD0        0x0001     // DMB Destination Select</span>
<a name="l00112"></a><a class="code" href="lrs1821_8h.html#ae29f2889160314fa3aa256099bf2f540">00112</a> <span class="preprocessor"></span><span class="preprocessor">#define DMBD1        0x0002</span>
<a name="l00113"></a><a class="code" href="lrs1821_8h.html#ac1e83e151d4021cbc8cd89a5c9a77259">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define DMBS0        0x0004     // DMB Source Select</span>
<a name="l00114"></a><a class="code" href="lrs1821_8h.html#a9d67252a7ca26474c46b049c496d6a67">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define DMBS1        0x0008</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span>
<a name="l00116"></a><a class="code" href="lrs1821_8h.html#aa727d55f6c753d398c773674f20acebb">00116</a> <span class="preprocessor">#define DMB_HOST_TO_DMEM    (DMBS1)</span>
<a name="l00117"></a><a class="code" href="lrs1821_8h.html#a16c0b26c70ee8cbe06afab7de30277d5">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define DMB_DMEM_TO_HOST    (DMBD1)</span>
<a name="l00118"></a><a class="code" href="lrs1821_8h.html#ac6a60281ae9f593314cdd3619d3fc785">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define DMB_PED_TO_HOST     (DMBS0 | DMBS1 | DMBD1)</span>
<a name="l00119"></a><a class="code" href="lrs1821_8h.html#acaf0106e4f2e9933a77e7d3677623de0">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define DMB_PED_TO_DMEM     (DMBS0 | DMBS1)</span>
<a name="l00120"></a><a class="code" href="lrs1821_8h.html#aba7a63f43993ca546363ac3622e4d901">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define DMB_HOST_TO_PED     (DMBS1 | DMBD0 | DMBD1)</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span>
<a name="l00122"></a><a class="code" href="lrs1821_8h.html#a72f4142cd431c26794a688a4d725eb21">00122</a> <span class="preprocessor">#define MUXR0        0x0010     // Multiplex REG 4/5</span>
<a name="l00123"></a><a class="code" href="lrs1821_8h.html#a058c03e6a19ac0bf2743c7d42b312974">00123</a> <span class="preprocessor"></span><span class="preprocessor">#define PCMUX16      0x0020     // AUX Connector multiplex</span>
<a name="l00124"></a><a class="code" href="lrs1821_8h.html#add36b5a4939010e4f24a2af3f7a2a8dc">00124</a> <span class="preprocessor"></span><span class="preprocessor">#define PCFLG1       0x0040     // General purpose</span>
<a name="l00125"></a><a class="code" href="lrs1821_8h.html#a95c81d31d8234568c2568be67486f7b2">00125</a> <span class="preprocessor"></span><span class="preprocessor">#define PDMSUB       0x0100     // Subtract Data from Pedestral Memory</span>
<a name="l00126"></a><a class="code" href="lrs1821_8h.html#a99f0da065e1a245381d1990b177219b4">00126</a> <span class="preprocessor"></span><span class="preprocessor">#define PDMSEL       0x0200     // Select Pedestral Memory as DMB Source/Dest.</span>
<a name="l00127"></a><a class="code" href="lrs1821_8h.html#a67386b28246261928d22c9ca8537d322">00127</a> <span class="preprocessor"></span><span class="preprocessor">#define MWENB        0x0400     // Enable Memory Write Strobes from Seq. Pip.</span>
<a name="l00128"></a><a class="code" href="lrs1821_8h.html#a89ec27c63164f95c1039d11776d8080f">00128</a> <span class="preprocessor"></span><span class="preprocessor">#define SUPRNEG      0x0800     // Supress negative Data to zero</span>
<a name="l00129"></a><a class="code" href="lrs1821_8h.html#a53de26c4abd8e3943550628a73bbda89">00129</a> <span class="preprocessor"></span><span class="preprocessor">#define SUPRZERO     0x1000     // Supress Memory Write of zeor Data</span>
<a name="l00130"></a><a class="code" href="lrs1821_8h.html#a4dec4d9b2bace4f5bc6e6337f4086837">00130</a> <span class="preprocessor"></span><span class="preprocessor">#define SIGNED       0x2000     // Signed Pedestral Data</span>
<a name="l00131"></a><a class="code" href="lrs1821_8h.html#ae0b867da2bcc6a8910ba93baec7380ec">00131</a> <span class="preprocessor"></span><span class="preprocessor">#define _RESET       0x8000     // Master Reset Signal</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span>
<a name="l00133"></a>00133 <span class="comment">/*---- REG6 bitmap -------------------------------------------------*/</span>
<a name="l00134"></a><a class="code" href="lrs1821_8h.html#a8fb4ba4ece9ca38ba67d310e0fcc7a3e">00134</a> <span class="preprocessor">#define DMIA_MASK    0x0FFF     // Data Memory Initial Address</span>
<a name="l00135"></a><a class="code" href="lrs1821_8h.html#a0fa912d252bf813a5eea95732a020dd4">00135</a> <span class="preprocessor"></span><span class="preprocessor">#define EAUTO        0x1000     // Enable Auto Incr/Decr</span>
<a name="l00136"></a><a class="code" href="lrs1821_8h.html#a1965eaca47dbf3f87acdafc2208f04eb">00136</a> <span class="preprocessor"></span><span class="preprocessor">#define UP           0x2000     // Incr/Decr mode</span>
<a name="l00137"></a><a class="code" href="lrs1821_8h.html#a6b28a7c84976c51fc0a5c73e60242a8c">00137</a> <span class="preprocessor"></span><span class="preprocessor">#define EGIP5        0x4000     // Auto increment on HOST I/O Reg. 5</span>
<a name="l00138"></a><a class="code" href="lrs1821_8h.html#a53eb9957a5f95f7a6c2fdac40ecf3b0c">00138</a> <span class="preprocessor"></span><span class="preprocessor">#define LINMEM       0x8000     // Data memory addressing mode 0: circ 1:lin</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>
<a name="l00140"></a>00140 <span class="comment">/*---- REG7 bitmap -------------------------------------------------*/</span>
<a name="l00141"></a><a class="code" href="lrs1821_8h.html#a277a950c725b69e43a1dae2993119fd4">00141</a> <span class="preprocessor">#define GO           0x0001     // Sequencer GO command</span>
<a name="l00142"></a><a class="code" href="lrs1821_8h.html#a2fcf83ebb770e365aa0986aab470b8b1">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define PMADZ        0x0002     // Program Memory Address Register Zero</span>
<a name="l00143"></a><a class="code" href="lrs1821_8h.html#ae3d825351f024fd9319791483be6854e">00143</a> <span class="preprocessor"></span><span class="preprocessor">#define PMADL        0x0004     // Program Memory Auto Download Cycle Initiate</span>
<a name="l00144"></a><a class="code" href="lrs1821_8h.html#af37e2681fcfc95658478053dfe6c9361">00144</a> <span class="preprocessor"></span><span class="preprocessor">#define ROWCL        0x0008     // Readout Word Counter Load</span>
<a name="l00145"></a><a class="code" href="lrs1821_8h.html#a06b68cec7c9367c4269770a856035c75">00145</a> <span class="preprocessor"></span><span class="preprocessor">#define DMARL        0x0010     // Data Memory Addresss Register Load</span>
<a name="l00146"></a><a class="code" href="lrs1821_8h.html#afcf146c74395dc1f43887a869b63fb99">00146</a> <span class="preprocessor"></span><span class="preprocessor">#define DMARC        0x0020     // Data Memory Addresss Register Count</span>
<a name="l00147"></a><a class="code" href="lrs1821_8h.html#ac74738009500ea0fa038ad38cfa16218">00147</a> <span class="preprocessor"></span><span class="preprocessor">#define DMWRT        0x0040     // Data Memory Write</span>
<a name="l00148"></a><a class="code" href="lrs1821_8h.html#a60fc75f026014b548c1f60ab66835fba">00148</a> <span class="preprocessor"></span><span class="preprocessor">#define SQWRT        0x0100     // Sequencer Program memory Write</span>
<a name="l00149"></a><a class="code" href="lrs1821_8h.html#a6e2b4ca03889fb9af035ecddc33cb12c">00149</a> <span class="preprocessor"></span><span class="preprocessor">#define PMARC        0x0200     // Program Memory Address Register Clock</span>
<a name="l00150"></a><a class="code" href="lrs1821_8h.html#a7c0f2d0e570c9541f2ffd7ff99a276a5">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define PMWRT        0x0400     // Program Memory Write</span>
<a name="l00151"></a><a class="code" href="lrs1821_8h.html#a01fc51b21072a42fad5960f0d1cce94a">00151</a> <span class="preprocessor"></span><span class="preprocessor">#define ROWCC        0x0800     // Readout Word Counter Clock</span>
<a name="l00152"></a><a class="code" href="lrs1821_8h.html#ae7e9fcd8538a379b617dbdeabb5bd060">00152</a> <span class="preprocessor"></span><span class="preprocessor">#define PDCWRT       0x1000     // Pedestral Data Comparator Register Write</span>
<a name="l00153"></a><a class="code" href="lrs1821_8h.html#a0680fe117bce0e74a19d26836d2b7573">00153</a> <span class="preprocessor"></span><span class="preprocessor">#define PDMADR       0x4000     // Pedestral Data Memory Address Latch</span>
<a name="l00154"></a><a class="code" href="lrs1821_8h.html#a64b87bb91f0ca3f4dc394abef475b6b3">00154</a> <span class="preprocessor"></span><span class="preprocessor">#define PDMWRT       0x8000     // Pedestral Data Memory Write</span>
<a name="l00155"></a>00155 <span class="preprocessor"></span>
<a name="l00156"></a>00156 <span class="comment">// Read masks</span>
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="lrs1821_8h.html#aab4e3545ee12ef7f259a20cc3245126e">00158</a> <span class="preprocessor">#define PWR_1        0x0001     // Sequencer power intact</span>
<a name="l00159"></a><a class="code" href="lrs1821_8h.html#a155947a6d2f6506ea5de2b7024c39c10">00159</a> <span class="preprocessor"></span><span class="preprocessor">#define PWR_2        0x0002     // Host interface power intact</span>
<a name="l00160"></a><a class="code" href="lrs1821_8h.html#a6cfb1e43f17391ef42c3fff02743ae1a">00160</a> <span class="preprocessor"></span><span class="preprocessor">#define RDOC         0x0004     // Sequencer Read Out Complete</span>
<a name="l00161"></a><a class="code" href="lrs1821_8h.html#a2b8d5d063b302fe745826f999c5537a0">00161</a> <span class="preprocessor"></span><span class="preprocessor">#define PDFULL       0x0008     // Sequencer Parameter Data for Host</span>
<a name="l00162"></a><a class="code" href="lrs1821_8h.html#ac13fc8b90f3a852222ce7b1084896a23">00162</a> <span class="preprocessor"></span><span class="preprocessor">#define IWARDY       0x0010     // Sequencer ready for new Initial Word Addr.</span>
<a name="l00163"></a><a class="code" href="lrs1821_8h.html#a3a6d3cd70078e6046471ec528a09cd19">00163</a> <span class="preprocessor"></span><span class="preprocessor">#define ACTIVE       0x0020     // Sequencer active</span>
<a name="l00164"></a><a class="code" href="lrs1821_8h.html#a7b843143e2d43f47899aa85821260132">00164</a> <span class="preprocessor"></span><span class="preprocessor">#define DMEMPTY      0x0040     // Data memory empty status</span>
<a name="l00165"></a><a class="code" href="lrs1821_8h.html#a1e493fc6da49046790c47f09a395cfbb">00165</a> <span class="preprocessor"></span><span class="preprocessor">#define DMFULL       0x0080     // Data memory full / cycled</span>
<a name="l00166"></a><a class="code" href="lrs1821_8h.html#ad842bde0ec01c24fc4ca77559b8a8675">00166</a> <span class="preprocessor"></span><span class="preprocessor">#define PCPWR        0x0100     // Personality Card power status</span>
<a name="l00167"></a><a class="code" href="lrs1821_8h.html#aa6481d2d76178134b5ad6ce4746719fe">00167</a> <span class="preprocessor"></span><span class="preprocessor">#define PCENB        0x0200     // Personality Card memory enabled for output</span>
<a name="l00168"></a><a class="code" href="lrs1821_8h.html#a3f21f903ae59da8a57b32d0333f8ae20">00168</a> <span class="preprocessor"></span><span class="preprocessor">#define PCFULL       0x0400     // Personality Card memory full status</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>
<a name="l00170"></a><a class="code" href="lrs1821_8h.html#a0cb88a4bda990606951d07f5bc8b6411">00170</a> <span class="preprocessor">#define SQATTN2      0x2000     // Set by SEQ</span>
<a name="l00171"></a><a class="code" href="lrs1821_8h.html#aa027a228f3bb47bc2e1996a461013a52">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define SQATTN1      0x4000     // Set by SEQ</span>
<a name="l00172"></a><a class="code" href="lrs1821_8h.html#a37a32e77335007f0ca89fe3ef304f681">00172</a> <span class="preprocessor"></span><span class="preprocessor">#define SEQ_ATTNPEND 0x8000     // Set by SEQ</span>
<a name="l00173"></a>00173 <span class="preprocessor"></span>
<a name="l00174"></a>00174 <span class="comment">/*---- FASTBUS protocol standard routines --------------------------*/</span>
<a name="l00175"></a><a class="code" href="lrs1821_8h.html#a7807682b5be939d671d7f84540bf23c9">00175</a> <span class="preprocessor">#define FPAD         0x08       // geo addr to data space</span>
<a name="l00176"></a><a class="code" href="lrs1821_8h.html#a5250039abc97510cc415943faf7fb822">00176</a> <span class="preprocessor"></span><span class="preprocessor">#define FPAC         0x0C       // geo addr to control space</span>
<a name="l00177"></a><a class="code" href="lrs1821_8h.html#a292b29e6f3dd9341762b940192dccf25">00177</a> <span class="preprocessor"></span><span class="preprocessor">#define FPR          0x10       // read</span>
<a name="l00178"></a><a class="code" href="lrs1821_8h.html#a0cd50e97b993b785658cdd16bd08db62">00178</a> <span class="preprocessor"></span><span class="preprocessor">#define FPRNTA       0x13       // sec addr read</span>
<a name="l00179"></a><a class="code" href="lrs1821_8h.html#a3a2e65520de0be1594505e024fee03b2">00179</a> <span class="preprocessor"></span><span class="preprocessor">#define FPW          0x16       // write</span>
<a name="l00180"></a><a class="code" href="lrs1821_8h.html#aa55913ab1a82eadbf4fd6834c5d48f63">00180</a> <span class="preprocessor"></span><span class="preprocessor">#define FPWNTA       0x19       // sec addr write</span>
<a name="l00181"></a><a class="code" href="lrs1821_8h.html#ab07c9c01c3db989ee597a57894db3b83">00181</a> <span class="preprocessor"></span><span class="preprocessor">#define FPCLBS       0x1C       // clear fastbus</span>
<a name="l00182"></a><a class="code" href="lrs1821_8h.html#a1a2537c74c168e1f222242deafb68e96">00182</a> <span class="preprocessor"></span><span class="preprocessor">#define FPADM        0x1E       // broadcast to DSR space</span>
<a name="l00183"></a><a class="code" href="lrs1821_8h.html#a39bd9570d178a91820687bdaa18aac2f">00183</a> <span class="preprocessor"></span><span class="preprocessor">#define FPACM        0x21       // broadcast to CSR space</span>
<a name="l00184"></a><a class="code" href="lrs1821_8h.html#ac96eb1ed49b83e8306228c310865f03b">00184</a> <span class="preprocessor"></span><span class="preprocessor">#define FPRBUS       0x24       // assert rb line</span>
<a name="l00185"></a><a class="code" href="lrs1821_8h.html#a3215f290f226fcae42f168e0fd0c2b63">00185</a> <span class="preprocessor"></span><span class="preprocessor">#define FPREQ        0x2A       // request bus mastership</span>
<a name="l00186"></a><a class="code" href="lrs1821_8h.html#a37550958ba31256ea4befa75705cc351">00186</a> <span class="preprocessor"></span><span class="preprocessor">#define FPREL        0x2B       // release bus mastership</span>
<a name="l00187"></a><a class="code" href="lrs1821_8h.html#aeab0c979425aba19e3c7e2d98ee54a65">00187</a> <span class="preprocessor"></span><span class="preprocessor">#define FPRBL        0x2E       // block transfer read</span>
<a name="l00188"></a>00188 <span class="preprocessor"></span>
<a name="l00189"></a>00189 <span class="comment">/*---- 1821 special routines ---------------------------------------*/</span>
<a name="l00190"></a><a class="code" href="lrs1821_8h.html#ac616cad35546f26fd0ab46c94b42de94">00190</a> <span class="preprocessor">#define ROM_VER      (0x00*8+7) // ROM version</span>
<a name="l00191"></a><a class="code" href="lrs1821_8h.html#aa9e2ad741ca40284415152ee7df35163">00191</a> <span class="preprocessor"></span><span class="preprocessor">#define ROM_UPD      (0x01*8+7) // ROM update</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>
<a name="l00193"></a><a class="code" href="lrs1821_8h.html#a9c21a7caee326d7803b94ae1952b27ca">00193</a> <span class="preprocessor">#define IDLE         0x00       // idle loop</span>
<a name="l00194"></a><a class="code" href="lrs1821_8h.html#a4c65f8a78e10f5ba65811942a848612b">00194</a> <span class="preprocessor"></span><span class="preprocessor">#define FPAD_T       0x09       // geo addr to data space, slot # in tcnt</span>
<a name="l00195"></a><a class="code" href="lrs1821_8h.html#a6822930b43080ec03f5689d4a26611d2">00195</a> <span class="preprocessor"></span><span class="preprocessor">#define FPAC_T       0x0D       // geo addr to control space, slot # in tcnt</span>
<a name="l00196"></a><a class="code" href="lrs1821_8h.html#afba2845239bf336685339002345ebea0">00196</a> <span class="preprocessor"></span><span class="preprocessor">#define TP_SCAN      0x25       // T-pin scan</span>
<a name="l00197"></a><a class="code" href="lrs1821_8h.html#a398cf3bd2d9389b45c939631556a7101">00197</a> <span class="preprocessor"></span><span class="preprocessor">#define CR_SCAN      0x26       // crate scan</span>
<a name="l00198"></a><a class="code" href="lrs1821_8h.html#a3edd6e33b1fa3ec70bc118f95c974bf6">00198</a> <span class="preprocessor"></span><span class="preprocessor">#define EN_SS        0x27       // enable SS response to host</span>
<a name="l00199"></a><a class="code" href="lrs1821_8h.html#a7c148eddd27971038c8d14562441aa56">00199</a> <span class="preprocessor"></span><span class="preprocessor">#define LD_NREG      0x28       // load nreg from host</span>
<a name="l00200"></a><a class="code" href="lrs1821_8h.html#af3123d10953c2ae79f56d42015236843">00200</a> <span class="preprocessor"></span><span class="preprocessor">#define FBARB        0x29       // set arbitration level</span>
<a name="l00201"></a><a class="code" href="lrs1821_8h.html#a1f3458120de7314ef818739820cf59ee">00201</a> <span class="preprocessor"></span><span class="preprocessor">#define HDRBL        0x2C       // special hardware block transfer</span>
<a name="l00202"></a><a class="code" href="lrs1821_8h.html#aa7875dff3acbef94f04b377e79d6c674">00202</a> <span class="preprocessor"></span><span class="preprocessor">#define LD_LOW       0x30       // load low 16 bits of 32 bit register</span>
<a name="l00203"></a><a class="code" href="lrs1821_8h.html#aa116b6c6b68dfc9c267ad112af82819b">00203</a> <span class="preprocessor"></span><span class="preprocessor">#define LD_HIGH      0x31       // load high 16 bits of 32 bit register</span>
<a name="l00204"></a><a class="code" href="lrs1821_8h.html#afbbe83afc2be73e9a63fd0e152e4fce7">00204</a> <span class="preprocessor"></span><span class="preprocessor">#define IND_TDC      0x32       // individual channel of TDC</span>
<a name="l00205"></a><a class="code" href="lrs1821_8h.html#a1cf784f8a0777310b5ca37ad8a09b8c4">00205</a> <span class="preprocessor"></span><span class="preprocessor">#define TP_TDC       0x33       // T-pin readout of whole segment TDCs</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span>
<a name="l00207"></a>00207 <span class="comment">/*---- diagnostic and test routines --------------------------------*/</span>
<a name="l00208"></a><a class="code" href="lrs1821_8h.html#a119a41059e98ca136e5eab5c1a00359e">00208</a> <span class="preprocessor">#define OUT1UP       0x34       // ECL OUT1 up</span>
<a name="l00209"></a><a class="code" href="lrs1821_8h.html#ae57d397439b008a402d39313ddc559c2">00209</a> <span class="preprocessor"></span><span class="preprocessor">#define OUT1DN       0x35       // ECL OUT1 down</span>
<a name="l00210"></a><a class="code" href="lrs1821_8h.html#a1dc0365590ebfe1bc6739278b884e31c">00210</a> <span class="preprocessor"></span><span class="preprocessor">#define IN1TST       0x36       // Test IN1</span>
<a name="l00211"></a>00211 <span class="preprocessor"></span>
<a name="l00212"></a><a class="code" href="lrs1821_8h.html#a8bfbbf31b7d3c07215440d18a064b7f4">00212</a> <span class="preprocessor">#define USER         0x40       // User downlodable area</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>
<a name="l00214"></a>00214 <span class="comment">/*---- replacements if not running runder MIDAS --------------------*/</span>
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="preprocessor">#ifndef _MIDAS_H_</span>
<a name="l00217"></a>00217 <span class="preprocessor"></span>
<a name="l00218"></a><a class="code" href="lrs1821_8h.html#aa6f8a5999f0a072ce20ab87bae8a9eb5">00218</a> <span class="preprocessor">#define cm_msg(file, routine, msg) printf(&quot;[%s:%s] %s&quot;, file, routine, msg)</span>
<a name="l00219"></a>00219 <span class="preprocessor"></span>
<a name="l00220"></a><a class="code" href="lrs1821_8h.html#ac2d967025ca0f84f611d568f4ede934a">00220</a> <span class="preprocessor">#define MERROR    __FILE__</span>
<a name="l00221"></a><a class="code" href="lrs1821_8h.html#a6e27d8876a43afce3ee4dd16527cbb9e">00221</a> <span class="preprocessor"></span><span class="preprocessor">#define MINFO     __FILE__</span>
<a name="l00222"></a>00222 <span class="preprocessor"></span>
<a name="l00223"></a>00223 <span class="preprocessor">#endif                          </span><span class="comment">/* _MIDAS_H_ */</span>
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="preprocessor">#endif                          </span><span class="comment">/* _LRS1821_H_ */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ:Rootana by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

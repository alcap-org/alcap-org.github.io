<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ:Rootana: midas/drivers/divers/caenv488.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>midas/drivers/divers/caenv488.c</h1><a href="caenv488_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*-----------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment"> *  Copyright (c) 1996      TRIUMF Data Acquistion Group</span>
<a name="l00003"></a>00003 <span class="comment"> *  Please leave this header in any reproduction of that distribution</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  TRIUMF Data Acquisition Group, 4004 Wesbrook Mall, Vancouver, B.C. V6T 2A3</span>
<a name="l00006"></a>00006 <span class="comment"> *  Email: online@triumf.ca           Tel: (604) 222-1047  Fax: (604) 222-1074</span>
<a name="l00007"></a>00007 <span class="comment"> *         amaudruz@triumf.ca</span>
<a name="l00008"></a>00008 <span class="comment"> * -----------------------------------------------------------------------------</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> *  Description : function library for the CAEN V488 *TDC chan.</span>
<a name="l00011"></a>00011 <span class="comment"> *                no interrupt support yet</span>
<a name="l00012"></a>00012 <span class="comment"> *  Requires    :</span>
<a name="l00013"></a>00013 <span class="comment"> *  Author:  Pierre-Andre Amaudruz Data Acquisition Group</span>
<a name="l00014"></a>00014 <span class="comment"> *  Revision History:</span>
<a name="l00015"></a>00015 <span class="comment"> *  Revision 1.0  1998/Jun02 Pierre      Initial revision</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> *---------------------------------------------------------------------------*/</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifdef OS_VXWORKS</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#include &quot;vxWorks.h&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;vme.h&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#endif</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a><a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">00024</a> <span class="preprocessor">#define A24D16_V488  0xf0000000 </span><span class="comment">/* A24D16 access */</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#if defined( _MSC_VER )</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#define INLINE __inline</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#elif defined(__GNUC__)</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define INLINE __inline__</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00031"></a><a class="code" href="caenv488_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define INLINE</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a><a class="code" href="caenv488_8c.html#af3fe37c1cda80aa7202b5a3bb7557dc9">00034</a> <span class="preprocessor">#define EXTERNAL extern</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a>00036 <span class="preprocessor">#ifndef MIDAS_TYPE_DEFINED</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#define MIDAS_TYPE_DEFINED</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00039"></a><a class="code" href="caenv488_8c.html#a2b0e863dadf920709ec53d9088ee7c91">00039</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="unionWORD.html">WORD</a>;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#ifdef __alpha</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>;
<a name="l00043"></a>00043 <span class="preprocessor">#else</span>
<a name="l00044"></a><a class="code" href="caenv488_8c.html#a408a2366473807fbe658ba18e75dea66">00044</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>;
<a name="l00045"></a>00045 <span class="preprocessor">#endif</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#endif                          </span><span class="comment">/* MIDAS_TYPE_DEFINED */</span>
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="caenv488_8c.html#a46e56ba883b438803a6055c2cf851f8c">00049</a> <span class="preprocessor">#define VER_SER     0xFE        </span><span class="comment">/* version _ serial# */</span>
<a name="l00050"></a><a class="code" href="caenv488_8c.html#a14a44d7fc5639695fa4218c175696705">00050</a> <span class="preprocessor">#define MAN_MOD     0xFC        </span><span class="comment">/* manufactor ID _ mode type */</span>
<a name="l00051"></a><a class="code" href="caenv488_8c.html#ac783248011938af38399c669c57b376e">00051</a> <span class="preprocessor">#define FIXED_CODE  0xFA        </span><span class="comment">/* fix code ID */</span>
<a name="l00052"></a><a class="code" href="caenv488_8c.html#a4efe347cfcee9fa01d1cc9f569005b33">00052</a> <span class="preprocessor">#define HF_REG      0x1E        </span><span class="comment">/* Half full reg */</span>
<a name="l00053"></a><a class="code" href="caenv488_8c.html#a7cdd48a4218a992cff0505923edc52fe">00053</a> <span class="preprocessor">#define RESET_REG   0x1C        </span><span class="comment">/* reset reg */</span>
<a name="l00054"></a><a class="code" href="caenv488_8c.html#ad7ea69844056164058bfd7cd4262815c">00054</a> <span class="preprocessor">#define CTL_REG     0x1A        </span><span class="comment">/* control reg */</span>
<a name="l00055"></a><a class="code" href="caenv488_8c.html#ae01b0bd111ec087942e5d18f71ec2df2">00055</a> <span class="preprocessor">#define OUTB_REG    0x18        </span><span class="comment">/* Output buffer reg */</span>
<a name="l00056"></a><a class="code" href="caenv488_8c.html#adb7306032455f84c6a983f94d1bbeb8e">00056</a> <span class="preprocessor">#define FF_REG      0x16        </span><span class="comment">/* Fifo full reg */</span>
<a name="l00057"></a><a class="code" href="caenv488_8c.html#a9ed501ac21e2e9739bf65e32a060502f">00057</a> <span class="preprocessor">#define RR_REG      0x14        </span><span class="comment">/* Range reg */</span>
<a name="l00058"></a><a class="code" href="caenv488_8c.html#a590f0c6040f77c97b980f60f630af1a4">00058</a> <span class="preprocessor">#define THRH_REG    0x12        </span><span class="comment">/* High threshold reg */</span>
<a name="l00059"></a><a class="code" href="caenv488_8c.html#a55c82096fabb24f72eced10d1bb8ae8c">00059</a> <span class="preprocessor">#define THRL_REG    0x10        </span><span class="comment">/* Low threshold reg */</span>
<a name="l00060"></a><a class="code" href="caenv488_8c.html#a6c796ce151a4010b4b72787c3a776c18">00060</a> <span class="preprocessor">#define INT_REG     0x00        </span><span class="comment">/* interrupt reg */</span>
<a name="l00061"></a><a class="code" href="caenv488_8c.html#ad9ce2c9b69bc938449f862a31505281c">00061</a> <span class="preprocessor">#define V488_CSTART 0x8000      </span><span class="comment">/* Common start */</span>
<a name="l00062"></a><a class="code" href="caenv488_8c.html#aa4e46ee907e10d2b864f9f1aa76ea78e">00062</a> <span class="preprocessor">#define V488_IE1    0x1</span>
<a name="l00063"></a><a class="code" href="caenv488_8c.html#a21fc2e1e860a9c508dad273d2ef9b74b">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE2    0x2</span>
<a name="l00064"></a><a class="code" href="caenv488_8c.html#aa61a041c6abad45145c8e184ad4497a8">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE3    0x4</span>
<a name="l00065"></a><a class="code" href="caenv488_8c.html#a86b08eabeb9f6ed3dc0f7c44f13c4782">00065</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE4    0x8</span>
<a name="l00066"></a><a class="code" href="caenv488_8c.html#a94fd1b7ac372a6fd76e8500b6d95464d">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE5    0x10</span>
<a name="l00067"></a><a class="code" href="caenv488_8c.html#a75aecbd8a97a1821662fbeaec2ec44b7">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE6    0x20</span>
<a name="l00068"></a><a class="code" href="caenv488_8c.html#adbb6a41207887967e1a6ee8245daea5f">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE7    0x40</span>
<a name="l00069"></a><a class="code" href="caenv488_8c.html#a6508e3753a5ced599b4454a04933677f">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE8    0x80</span>
<a name="l00070"></a><a class="code" href="caenv488_8c.html#a97b20e911de5d4e686abdd76a34edb36">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE14   0xf</span>
<a name="l00071"></a><a class="code" href="caenv488_8c.html#a003d1225a742fc8e32e77f7b18b6f396">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE58   0xf0</span>
<a name="l00072"></a><a class="code" href="caenv488_8c.html#a3c6a5bf96474df77f0255f3e74d98e20">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define V488_IE18   0xff</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="caenv488_8c.html#a8761a26d1782b8100d6bf353b97785b9">00074</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#a8761a26d1782b8100d6bf353b97785b9">caenv488_HF_set</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <span class="keyword">const</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a4efe347cfcee9fa01d1cc9f569005b33">HF_REG</a>);
<a name="l00079"></a>00079    <span class="keywordflow">if</span> (mode)
<a name="l00080"></a>00080       *spec_adr = 0x1 &lt;&lt; 12;
<a name="l00081"></a>00081    <span class="keywordflow">else</span>
<a name="l00082"></a>00082       *spec_adr = 0x0;
<a name="l00083"></a>00083 }
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="caenv488_8c.html#af8b0bd052af696c7e7e1c1299510e453">00085</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#af8b0bd052af696c7e7e1c1299510e453">caenv488_HF_get</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <a class="code" href="unionWORD.html">WORD</a> * <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a4efe347cfcee9fa01d1cc9f569005b33">HF_REG</a>);
<a name="l00090"></a>00090    *mode = *spec_adr;
<a name="l00091"></a>00091    *mode = (*mode &gt;&gt; 12) &amp; 0x1;
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="caenv488_8c.html#a71aa41f649416c4b2ca3f257e895f188">00094</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#a71aa41f649416c4b2ca3f257e895f188">caenv488_reset</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00095"></a>00095 {
<a name="l00096"></a>00096    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a7cdd48a4218a992cff0505923edc52fe">RESET_REG</a>);
<a name="l00099"></a>00099    *spec_adr = 0x0;
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="caenv488_8c.html#a7860eccbcda331b61ba951d40498f7fb">00102</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#a7860eccbcda331b61ba951d40498f7fb">caenv488_CTL_write</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <span class="keyword">const</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00105"></a>00105    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> ctl;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#ad7ea69844056164058bfd7cd4262815c">CTL_REG</a>);
<a name="l00108"></a>00108    ctl = *spec_adr;
<a name="l00109"></a>00109    ctl |= mode &amp; 0x80ff;
<a name="l00110"></a>00110    *spec_adr = ctl &amp; 0x80ff;
<a name="l00111"></a>00111 }
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="caenv488_8c.html#aa29d91d889ab4b20f2689dd522a76f3c">00113</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#aa29d91d889ab4b20f2689dd522a76f3c">caenv488_CTL_read</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <a class="code" href="unionWORD.html">WORD</a> * <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00114"></a>00114 {
<a name="l00115"></a>00115    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#ad7ea69844056164058bfd7cd4262815c">CTL_REG</a>);
<a name="l00118"></a>00118    *mode = *spec_adr;
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00121"></a><a class="code" href="caenv488_8c.html#acb4508be4cae0ae44f18dcbe46d6b6d9">00121</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#acb4508be4cae0ae44f18dcbe46d6b6d9">caenv488_RR_write</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <span class="keyword">const</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a9ed501ac21e2e9739bf65e32a060502f">RR_REG</a>);
<a name="l00126"></a>00126    *spec_adr = mode &amp; 0x11ff;
<a name="l00127"></a>00127 }
<a name="l00128"></a>00128 
<a name="l00129"></a><a class="code" href="caenv488_8c.html#aee94d932df4b1a3f134b85e4ad527837">00129</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#aee94d932df4b1a3f134b85e4ad527837">caenv488_THRH_write</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <span class="keyword">const</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00130"></a>00130 {
<a name="l00131"></a>00131    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00132"></a>00132 
<a name="l00133"></a>00133    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a590f0c6040f77c97b980f60f630af1a4">THRH_REG</a>);
<a name="l00134"></a>00134    *spec_adr = mode &amp; 0xff;
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="caenv488_8c.html#acf89a9d2309711b9d55da1ba71727520">00137</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#acf89a9d2309711b9d55da1ba71727520">caenv488_THRL_write</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <span class="keyword">const</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00138"></a>00138 {
<a name="l00139"></a>00139    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a55c82096fabb24f72eced10d1bb8ae8c">THRL_REG</a>);
<a name="l00142"></a>00142    *spec_adr = mode &amp; 0xff;
<a name="l00143"></a>00143 }
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="caenv488_8c.html#a2b9236e44ccff987dcfc25eb3ae56c54">00145</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#a2b9236e44ccff987dcfc25eb3ae56c54">caenv488_FF_set</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00146"></a>00146 {
<a name="l00147"></a>00147    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#adb7306032455f84c6a983f94d1bbeb8e">FF_REG</a>);
<a name="l00150"></a>00150    *spec_adr = 0x0;
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="caenv488_8c.html#af7b501411b486dfe5152e267376f213a">00153</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <a class="code" href="caenv488_8c.html#af7b501411b486dfe5152e267376f213a">caenv488_read</a>(<span class="keyword">const</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base, <a class="code" href="unionWORD.html">WORD</a> ** <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a>)
<a name="l00154"></a>00154 {
<a name="l00155"></a>00155    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00156"></a>00156    <span class="keywordtype">int</span> header, mult;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#ae01b0bd111ec087942e5d18f71ec2df2">OUTB_REG</a>);
<a name="l00159"></a>00159    header = *spec_adr;
<a name="l00160"></a>00160    <span class="keywordflow">if</span> (header &amp; 0x8000) {
<a name="l00161"></a>00161       <span class="keywordflow">if</span> ((header &amp; 0xfff) != 1)
<a name="l00162"></a>00162          logMsg(<span class="stringliteral">&quot;Event counter in V488 base:0x%x = %d&quot;</span>, base, (header &amp; 0xfff), 0, 0, 0,
<a name="l00163"></a>00163                 0);
<a name="l00164"></a>00164       <span class="keywordflow">else</span> {
<a name="l00165"></a>00165          mult = (header &gt;&gt; 12) &amp; 0x7;
<a name="l00166"></a>00166          <span class="keywordflow">while</span> (mult &gt; 0) {
<a name="l00167"></a>00167             *((*data)++) = *spec_adr;
<a name="l00168"></a>00168          }
<a name="l00169"></a>00169       }
<a name="l00170"></a>00170    } <span class="keywordflow">else</span>
<a name="l00171"></a>00171       logMsg(<span class="stringliteral">&quot;Event out of sequence in V488 base 0x%x&quot;</span>, base, 0, 0, 0, 0, 0);
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 <span class="comment">/*-Tests---------------------------------------------------------*/</span>
<a name="l00175"></a><a class="code" href="caenv488_8c.html#ace3cbe0bfda2a5c4652f3e581f4c35af">00175</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#ace3cbe0bfda2a5c4652f3e581f4c35af">caenv488</a>(<span class="keywordtype">void</span>)
<a name="l00176"></a>00176 {
<a name="l00177"></a>00177    printf(<span class="stringliteral">&quot;\n CAEN V488 8ch. TDC Tool Box\n&quot;</span>);
<a name="l00178"></a>00178    printf(<span class="stringliteral">&quot;Inline : caenv488_HF_set(DWORD vmeBase);\n&quot;</span>);
<a name="l00179"></a>00179    printf(<span class="stringliteral">&quot;Inline : caenv488_HF_get(DWORD vmeBase, INT * mode);\n&quot;</span>);
<a name="l00180"></a>00180    printf(<span class="stringliteral">&quot;Inline : caenv488_reset(DWORD vmeBase);\n&quot;</span>);
<a name="l00181"></a>00181    printf(<span class="stringliteral">&quot;Inline : caenv488_CTL_write(DWORD vmeBase, WORD mode);\n&quot;</span>);
<a name="l00182"></a>00182    printf(<span class="stringliteral">&quot;Inline : caenv488_CTL_read(DWORD vmeBase, WORD * mode);\n&quot;</span>);
<a name="l00183"></a>00183    printf(<span class="stringliteral">&quot;Inline : caenv488_RR_write(DWORD vmeBase, WORD mode);\n&quot;</span>);
<a name="l00184"></a>00184    printf(<span class="stringliteral">&quot;Inline : caenv488_THRH_write(DWORD vmeBase, WORD value);\n&quot;</span>);
<a name="l00185"></a>00185    printf(<span class="stringliteral">&quot;Inline : caenv488_FF_set(DWORD vmeBase, WORD value);\n&quot;</span>);
<a name="l00186"></a>00186    printf(<span class="stringliteral">&quot;Inline : caenv488_read(DWORD vmeBase, WORD ** data);\n&quot;</span>);
<a name="l00187"></a>00187    printf(<span class="stringliteral">&quot;Test   : caenv488_MIW(DWORDS base)\n&quot;</span>);
<a name="l00188"></a>00188    printf(<span class="stringliteral">&quot;Test   : caenv488_status(DWORD base)\n&quot;</span>);
<a name="l00189"></a>00189    printf(<span class="stringliteral">&quot;Test   : caenv488_cstop_set(DWORDS base)\n&quot;</span>);
<a name="l00190"></a>00190    printf(<span class="stringliteral">&quot;Test   : caenv488_cstart_set(DWORDS base)\n&quot;</span>);
<a name="l00191"></a>00191    printf(<span class="stringliteral">&quot;Test   : caenv488_all_enable(DWORDS base)\n&quot;</span>);
<a name="l00192"></a>00192    printf(<span class="stringliteral">&quot;Test   : caenv488_all_disable(DWORDS base)\n&quot;</span>);
<a name="l00193"></a>00193    printf(<span class="stringliteral">&quot;Test   : caenv488_std_init(DWORDS base)\n&quot;</span>);
<a name="l00194"></a>00194    printf(<span class="stringliteral">&quot;Test   : caenv488_outb_read(DWORDS base)\n&quot;</span>);
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="caenv488_8c.html#accac25eb4dd993df5ecfd596b70788de">00197</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#accac25eb4dd993df5ecfd596b70788de">caenv488_MIW</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00198"></a>00198 {
<a name="l00199"></a>00199    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00200"></a>00200    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a>;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202    <span class="comment">/* module */</span>
<a name="l00203"></a>00203    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a46e56ba883b438803a6055c2cf851f8c">VER_SER</a>);
<a name="l00204"></a>00204    data = *spec_adr;
<a name="l00205"></a>00205    printf(<span class="stringliteral">&quot;Version  : 0x%x - Serial#   : 0x%x\n&quot;</span>, (data &gt;&gt; 12) &amp; 0xf, data &amp; 0xfff);
<a name="l00206"></a>00206    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a14a44d7fc5639695fa4218c175696705">MAN_MOD</a>);
<a name="l00207"></a>00207    data = *spec_adr;
<a name="l00208"></a>00208    printf(<span class="stringliteral">&quot;Manuf.#  : 0x%x - Mod. type#: 0x%x\n&quot;</span>, (data &gt;&gt; 10) &amp; 0x3f, data &amp; 0x3ff);
<a name="l00209"></a>00209    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#ac783248011938af38399c669c57b376e">FIXED_CODE</a>);
<a name="l00210"></a>00210    data = *spec_adr;
<a name="l00211"></a>00211    printf(<span class="stringliteral">&quot;FA code  : 0x%x - F5 code  : 0x%x\n&quot;</span>, (data &gt;&gt; 8) &amp; 0xff, data &amp; 0xff);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213    <span class="comment">/* RR */</span>
<a name="l00214"></a>00214    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a9ed501ac21e2e9739bf65e32a060502f">RR_REG</a>);
<a name="l00215"></a>00215    data = *spec_adr;
<a name="l00216"></a>00216    <span class="keywordflow">if</span> (data &amp; 0x1000)
<a name="l00217"></a>00217       printf(<span class="stringliteral">&quot;Mode FIFO full      - &quot;</span>);
<a name="l00218"></a>00218    <span class="keywordflow">else</span>
<a name="l00219"></a>00219       printf(<span class="stringliteral">&quot;Mode FIFO half full - &quot;</span>);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221    <span class="comment">/* CTL */</span>
<a name="l00222"></a>00222    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#ad7ea69844056164058bfd7cd4262815c">CTL_REG</a>);
<a name="l00223"></a>00223    data = *spec_adr;
<a name="l00224"></a>00224    printf(<span class="stringliteral">&quot;Ch.enable: 0x%x \n&quot;</span>, data &amp; 0xff);
<a name="l00225"></a>00225    <span class="keywordflow">if</span> (data &amp; 0x8000)
<a name="l00226"></a>00226       printf(<span class="stringliteral">&quot;Common Start  - &quot;</span>);
<a name="l00227"></a>00227    <span class="keywordflow">else</span>
<a name="l00228"></a>00228       printf(<span class="stringliteral">&quot;Common Stop   - &quot;</span>);
<a name="l00229"></a>00229 
<a name="l00230"></a>00230    <span class="keywordflow">if</span> (data &amp; 0x4000)
<a name="l00231"></a>00231       printf(<span class="stringliteral">&quot;FIFO empty\n&quot;</span>);
<a name="l00232"></a>00232    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data &amp; 0x2000)
<a name="l00233"></a>00233       printf(<span class="stringliteral">&quot;FIFO Full\n&quot;</span>);
<a name="l00234"></a>00234    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data &amp; 0x1000)
<a name="l00235"></a>00235       printf(<span class="stringliteral">&quot;FIFO half full\n&quot;</span>);
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="caenv488_8c.html#a37779233ebf274228c29ece6bc006ee1">00238</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#a37779233ebf274228c29ece6bc006ee1">caenv488_status</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00239"></a>00239 {
<a name="l00240"></a>00240    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00241"></a>00241    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a>;
<a name="l00242"></a>00242 
<a name="l00243"></a>00243    <span class="comment">/* CTL */</span>
<a name="l00244"></a>00244    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#ad7ea69844056164058bfd7cd4262815c">CTL_REG</a>);
<a name="l00245"></a>00245    data = *spec_adr;
<a name="l00246"></a>00246    printf(<span class="stringliteral">&quot;CTL status: 0x%x - Ch.enable: 0x%x \n&quot;</span>, data, data &amp; 0xff);
<a name="l00247"></a>00247    <span class="keywordflow">if</span> (data &amp; 0x8000)
<a name="l00248"></a>00248       printf(<span class="stringliteral">&quot;Common Start       - &quot;</span>);
<a name="l00249"></a>00249    <span class="keywordflow">else</span>
<a name="l00250"></a>00250       printf(<span class="stringliteral">&quot;Common Stop        - &quot;</span>);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252    <span class="keywordflow">if</span> (!(data &amp; 0x4000))
<a name="l00253"></a>00253       printf(<span class="stringliteral">&quot;FIFO empty\n&quot;</span>);
<a name="l00254"></a>00254    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(data &amp; 0x2000))
<a name="l00255"></a>00255       printf(<span class="stringliteral">&quot;FIFO Full\n&quot;</span>);
<a name="l00256"></a>00256    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(data &amp; 0x1000))
<a name="l00257"></a>00257       printf(<span class="stringliteral">&quot;FIFO half full\n&quot;</span>);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259    <span class="comment">/* RR */</span>
<a name="l00260"></a>00260    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#a9ed501ac21e2e9739bf65e32a060502f">RR_REG</a>);
<a name="l00261"></a>00261    data = *spec_adr;
<a name="l00262"></a>00262    <span class="keywordflow">if</span> (data &amp; 0x1000)
<a name="l00263"></a>00263       printf(<span class="stringliteral">&quot;Mode FIFO full     \n&quot;</span>);
<a name="l00264"></a>00264    <span class="keywordflow">else</span>
<a name="l00265"></a>00265       printf(<span class="stringliteral">&quot;Mode FIFO half full\n&quot;</span>);
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a><a class="code" href="caenv488_8c.html#ad6e6d5a7bc1f508bc445b385807cd237">00268</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#ad6e6d5a7bc1f508bc445b385807cd237">caenv488_cstop_set</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00269"></a>00269 {
<a name="l00270"></a>00270    <a class="code" href="unionWORD.html">WORD</a> ctl;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272    <a class="code" href="caenv488_8c.html#aa29d91d889ab4b20f2689dd522a76f3c">caenv488_CTL_read</a>(base, &amp;ctl);
<a name="l00273"></a>00273    ctl &amp;= 0x70ff;
<a name="l00274"></a>00274    <a class="code" href="caenv488_8c.html#a7860eccbcda331b61ba951d40498f7fb">caenv488_CTL_write</a>(base, ctl);
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a><a class="code" href="caenv488_8c.html#a6901ebecf19eeeb8a2ab9c7b20e93238">00277</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#a6901ebecf19eeeb8a2ab9c7b20e93238">caenv488_cstart_set</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279    <a class="code" href="caenv488_8c.html#a7860eccbcda331b61ba951d40498f7fb">caenv488_CTL_write</a>(base, <a class="code" href="caenv488_8c.html#ad9ce2c9b69bc938449f862a31505281c">V488_CSTART</a>);
<a name="l00280"></a>00280 }
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="caenv488_8c.html#a04c51a3ac6cde7b5fd122bfa3a5a80e9">00282</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#a04c51a3ac6cde7b5fd122bfa3a5a80e9">caenv488_all_enable</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00283"></a>00283 {
<a name="l00284"></a>00284    <a class="code" href="caenv488_8c.html#a7860eccbcda331b61ba951d40498f7fb">caenv488_CTL_write</a>(base, <a class="code" href="caenv488_8c.html#a3c6a5bf96474df77f0255f3e74d98e20">V488_IE18</a>);
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="caenv488_8c.html#ae85ec03f2dea6ae198f1628807843613">00287</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#ae85ec03f2dea6ae198f1628807843613">caenv488_all_disable</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00288"></a>00288 {
<a name="l00289"></a>00289    <a class="code" href="caenv488_8c.html#a7860eccbcda331b61ba951d40498f7fb">caenv488_CTL_write</a>(base, 0x0);
<a name="l00290"></a>00290 }
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="caenv488_8c.html#ad7b385ba026f170752d1507df7bff1e5">00292</a> <a class="code" href="camaclx_8c.html#a2eb6f9e0395b47b8d5e3eeae4fe0c116">INLINE</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#ad7b385ba026f170752d1507df7bff1e5">caenv488_std_init</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00293"></a>00293 {
<a name="l00294"></a>00294    <a class="code" href="caenv488_8c.html#a71aa41f649416c4b2ca3f257e895f188">caenv488_reset</a>(base);
<a name="l00295"></a>00295    <a class="code" href="caenv488_8c.html#aee94d932df4b1a3f134b85e4ad527837">caenv488_THRH_write</a>(base, 0xc7);
<a name="l00296"></a>00296    <a class="code" href="caenv488_8c.html#acf89a9d2309711b9d55da1ba71727520">caenv488_THRL_write</a>(base, 0x00);
<a name="l00297"></a>00297    <a class="code" href="caenv488_8c.html#acb4508be4cae0ae44f18dcbe46d6b6d9">caenv488_RR_write</a>(base, 0xe0);
<a name="l00298"></a>00298    <a class="code" href="caenv488_8c.html#a04c51a3ac6cde7b5fd122bfa3a5a80e9">caenv488_all_enable</a>(base);
<a name="l00299"></a>00299 }
<a name="l00300"></a>00300 
<a name="l00301"></a><a class="code" href="caenv488_8c.html#a2fe67011423914a9875ccf0dc238ee53">00301</a> <span class="keywordtype">void</span> <a class="code" href="caenv488_8c.html#a2fe67011423914a9875ccf0dc238ee53">caenv488_outb_read</a>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> base)
<a name="l00302"></a>00302 {
<a name="l00303"></a>00303    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> *spec_adr;
<a name="l00304"></a>00304    <span class="keyword">volatile</span> <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a>, header = 0;
<a name="l00305"></a>00305 
<a name="l00306"></a>00306    <span class="comment">/* CTL */</span>
<a name="l00307"></a>00307    spec_adr = (<a class="code" href="unionWORD.html">WORD</a> *) (<a class="code" href="caenv488_8c.html#a51ad42161a7b746d75d0643a83c5dfe9">A24D16_V488</a> | base | <a class="code" href="caenv488_8c.html#ae01b0bd111ec087942e5d18f71ec2df2">OUTB_REG</a>);
<a name="l00308"></a>00308    data = *spec_adr;
<a name="l00309"></a>00309    <span class="keywordflow">for</span> (;;) {
<a name="l00310"></a>00310       <span class="keywordflow">if</span> (data &amp; 0x8000) {
<a name="l00311"></a>00311          header = 1;
<a name="l00312"></a>00312          printf(<span class="stringliteral">&quot;OutB header: 0x%x - &quot;</span>, data);
<a name="l00313"></a>00313          printf(<span class="stringliteral">&quot;OutB multi : %d - event# : %d\n&quot;</span>, ((data &gt;&gt; 12) &amp; 0x7) + 1,
<a name="l00314"></a>00314                 data &amp; 0xfff);
<a name="l00315"></a>00315          <span class="keywordflow">if</span> (((data &gt;&gt; 12) &amp; 0x7) == 0)
<a name="l00316"></a>00316             <span class="keywordflow">break</span>;
<a name="l00317"></a>00317       } <span class="keywordflow">else</span> {
<a name="l00318"></a>00318          <span class="keywordflow">if</span> (header) {
<a name="l00319"></a>00319             header = 0;
<a name="l00320"></a>00320             printf(<span class="stringliteral">&quot;OutB data  : 0x%x - &quot;</span>, data);
<a name="l00321"></a>00321             printf(<span class="stringliteral">&quot;OutB chan. : %d - data# : %d\n&quot;</span>, (data &gt;&gt; 12) &amp; 0x7, data &amp; 0xfff);
<a name="l00322"></a>00322             <span class="keywordflow">if</span> (((data &gt;&gt; 12) &amp; 0x7) == 0)
<a name="l00323"></a>00323                <span class="keywordflow">break</span>;
<a name="l00324"></a>00324          } <span class="keywordflow">else</span> {
<a name="l00325"></a>00325             printf(<span class="stringliteral">&quot;OutB data  : 0x%x - No header\n&quot;</span>, data);
<a name="l00326"></a>00326             <span class="keywordflow">break</span>;
<a name="l00327"></a>00327          }
<a name="l00328"></a>00328       }
<a name="l00329"></a>00329    }
<a name="l00330"></a>00330 }
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ:Rootana by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

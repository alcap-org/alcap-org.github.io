<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ:Rootana: midas/examples/epics/tsDefs.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>midas/examples/epics/tsDefs.h</h1><a href="tsDefs_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef INC_tsDefs_h</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define INC_tsDefs_h</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="comment">/*      $Id: tsDefs.h,v 1.1.1.1 2005/06/20 23:37:10 mucap Exp $ </span>
<a name="l00004"></a>00004 <span class="comment"> *      Author: Roger A. Cole</span>
<a name="l00005"></a>00005 <span class="comment"> *      Date:   08-09-90</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> *      Experimental Physics and Industrial Control System (EPICS)</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *      Copyright 1991-92, the Regents of the University of California,</span>
<a name="l00010"></a>00010 <span class="comment"> *      and the University of Chicago Board of Governors.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *      This software was produced under  U.S. Government contracts:</span>
<a name="l00013"></a>00013 <span class="comment"> *      (W-7405-ENG-36) at the Los Alamos National Laboratory,</span>
<a name="l00014"></a>00014 <span class="comment"> *      and (W-31-109-ENG-38) at Argonne National Laboratory.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> *      Initial development by:</span>
<a name="l00017"></a>00017 <span class="comment"> *              The Controls and Automation Group (AT-8)</span>
<a name="l00018"></a>00018 <span class="comment"> *              Ground Test Accelerator</span>
<a name="l00019"></a>00019 <span class="comment"> *              Accelerator Technology Division</span>
<a name="l00020"></a>00020 <span class="comment"> *              Los Alamos National Laboratory</span>
<a name="l00021"></a>00021 <span class="comment"> *</span>
<a name="l00022"></a>00022 <span class="comment"> *      Co-developed with</span>
<a name="l00023"></a>00023 <span class="comment"> *              The Controls and Computing Group</span>
<a name="l00024"></a>00024 <span class="comment"> *              Accelerator Systems Division</span>
<a name="l00025"></a>00025 <span class="comment"> *              Advanced Photon Source</span>
<a name="l00026"></a>00026 <span class="comment"> *              Argonne National Laboratory</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> * Modification Log:</span>
<a name="l00029"></a>00029 <span class="comment"> * -----------------</span>
<a name="l00030"></a>00030 <span class="comment"> *  .01 08-09-90 rac    initial version</span>
<a name="l00031"></a>00031 <span class="comment"> *  .02 06-18-91 rac    installed in SCCS</span>
<a name="l00032"></a>00032 <span class="comment"> *  .03 08-03-92 rac    added tsRound routines</span>
<a name="l00033"></a>00033 <span class="comment"> *  .04 07-02-96 joh    added ANSI prototypes   </span>
<a name="l00034"></a>00034 <span class="comment"> *  .05 02-05-98 mrk    move pvt stuff to source file;</span>
<a name="l00035"></a>00035 <span class="comment"> *                      TsAddDouble just invokes tsAddDouble</span>
<a name="l00036"></a>00036 <span class="comment"> *</span>
<a name="l00037"></a>00037 <span class="comment"> */</span>
<a name="l00038"></a>00038 <span class="comment">/*+/mod***********************************************************************</span>
<a name="l00039"></a>00039 <span class="comment">* TITLE tsDefs.h - time-stamp related definitions</span>
<a name="l00040"></a>00040 <span class="comment">*</span>
<a name="l00041"></a>00041 <span class="comment">* DESCRIPTION</span>
<a name="l00042"></a>00042 <span class="comment">*</span>
<a name="l00043"></a>00043 <span class="comment">* BUGS</span>
<a name="l00044"></a>00044 <span class="comment">* o     only a single, manually configured, conversion between local</span>
<a name="l00045"></a>00045 <span class="comment">*       time and GMT is supported.  Thus, if a new `rule&apos; for daylight</span>
<a name="l00046"></a>00046 <span class="comment">*       savings time were invented, then this code would be `broken&apos;</span>
<a name="l00047"></a>00047 <span class="comment">*       until this file were configured for the new rule.  BUT, then</span>
<a name="l00048"></a>00048 <span class="comment">*       this code is `broken&apos; for the period prior to the new rule&apos;s</span>
<a name="l00049"></a>00049 <span class="comment">*       effect.</span>
<a name="l00050"></a>00050 <span class="comment">* o     only dates following Jan 1, 1990 are handled; stamps on Jan 1,</span>
<a name="l00051"></a>00051 <span class="comment">*       1990 are treated as `dateless&apos; times.</span>
<a name="l00052"></a>00052 <span class="comment">*</span>
<a name="l00053"></a>00053 <span class="comment">*-***************************************************************************/</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00057"></a>00057 <span class="preprocessor">#endif</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="epicsTypes_8h.html">epicsTypes.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="errMdef_8h.html">errMdef.h</a>&quot;</span>            <span class="comment">/* get M_ts for this subsystem&apos;s `number&apos; */</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="shareLib_8h.html">shareLib.h</a>&quot;</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">/*---------------------------------------------------------------------------</span>
<a name="l00064"></a>00064 <span class="comment">-</span>
<a name="l00065"></a>00065 <span class="comment">* TS_STAMP</span>
<a name="l00066"></a>00066 <span class="comment">*</span>
<a name="l00067"></a>00067 <span class="comment">*    This is the form taken by time stamps in GTACS, and is the form used</span>
<a name="l00068"></a>00068 <span class="comment">*    by the various tools used for dealing with time stamps.</span>
<a name="l00069"></a>00069 <span class="comment">*</span>
<a name="l00070"></a>00070 <span class="comment">*    The time stamp represents the number of nanoseconds past 0000 Jan 1, 199</span>
<a name="l00071"></a>00071 <span class="comment">0,</span>
<a name="l00072"></a>00072 <span class="comment">*    GMT (or UTC, if you prefer).</span>
<a name="l00073"></a>00073 <span class="comment">*</span>
<a name="l00074"></a>00074 <span class="comment">*----------------------------------------------------------------------------</span>
<a name="l00075"></a>00075 <span class="comment">*/</span>
<a name="l00076"></a><a class="code" href="structTS__STAMP.html">00076</a>    <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00077"></a><a class="code" href="structTS__STAMP.html#a19befe2a612ad3b9fe4a6fe19e63456f">00077</a>       <a class="code" href="epicsTypes_8h.html#a4e816c9c992ce24d6db18abd59906ff0">epicsUInt32</a> secPastEpoch; <span class="comment">/* seconds since 0000 Jan 1, 1990 */</span>
<a name="l00078"></a><a class="code" href="structTS__STAMP.html#a250ff823ff720f485a4141b8d4ed33c0">00078</a>       <a class="code" href="epicsTypes_8h.html#a4e816c9c992ce24d6db18abd59906ff0">epicsUInt32</a> nsec;         <span class="comment">/* nanoseconds within second */</span>
<a name="l00079"></a>00079    } <a class="code" href="structTS__STAMP.html">TS_STAMP</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00082"></a>00082 <span class="comment">* TS_TEXT_xxx text type codes for converting between text and time stamp</span>
<a name="l00083"></a>00083 <span class="comment">*</span>
<a name="l00084"></a>00084 <span class="comment">*    TS_TEXT_MONDDYYYY  Mon dd, yyyy hh:mm:ss.nano-secs</span>
<a name="l00085"></a>00085 <span class="comment">*    TS_TEXT_MMDDYY     mm/dd/yy hh:mm:ss.nano-secs</span>
<a name="l00086"></a>00086 <span class="comment">*                       123456789012345678901234567890123456789</span>
<a name="l00087"></a>00087 <span class="comment">*                       0        1         2         3</span>
<a name="l00088"></a>00088 <span class="comment">*----------------------------------------------------------------------------*/</span>
<a name="l00089"></a><a class="code" href="tsDefs_8h.html#a7eeda81e75b85b5b67cde98ed46389c7">00089</a>    <span class="keyword">enum</span> <a class="code" href="tsDefs_8h.html#a7eeda81e75b85b5b67cde98ed46389c7">tsTextType</a> {
<a name="l00090"></a><a class="code" href="tsDefs_8h.html#a7eeda81e75b85b5b67cde98ed46389c7ace13401592e5caa239bcc098aaf617d5">00090</a>       <a class="code" href="tsDefs_8h.html#a7eeda81e75b85b5b67cde98ed46389c7ace13401592e5caa239bcc098aaf617d5">TS_TEXT_MONDDYYYY</a>,
<a name="l00091"></a><a class="code" href="tsDefs_8h.html#a7eeda81e75b85b5b67cde98ed46389c7a6be41ae2a84f90e059c9726586abbec7">00091</a>       <a class="code" href="tsDefs_8h.html#a7eeda81e75b85b5b67cde98ed46389c7a6be41ae2a84f90e059c9726586abbec7">TS_TEXT_MMDDYY</a>
<a name="l00092"></a>00092    };
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment">/*/subhead macros-------------------------------------------------------------</span>
<a name="l00095"></a>00095 <span class="comment">*    arithmetic macros</span>
<a name="l00096"></a>00096 <span class="comment">*       care has been taken in writing these macros that the result can</span>
<a name="l00097"></a>00097 <span class="comment">*       be stored back into either operand time stamp.  For example,</span>
<a name="l00098"></a>00098 <span class="comment">*       both of the following (as well as other variations) are legal:</span>
<a name="l00099"></a>00099 <span class="comment">*               TsAddStamps(pS1, pS1, pS2);</span>
<a name="l00100"></a>00100 <span class="comment">*               TsDiffAsStamp(pS2, pS1, pS2);</span>
<a name="l00101"></a>00101 <span class="comment">*----------------------------------------------------------------------------*/</span>
<a name="l00102"></a>00102 <span class="comment">/*TsAddDouble was originally a macro. Now just use tsAddDouble */</span>
<a name="l00103"></a><a class="code" href="tsDefs_8h.html#a11e4832ebb2522c712f5e6c90fe94311">00103</a> <span class="preprocessor">#define TsAddDouble(pSum, pS1, dbl) tsAddDouble(pSum, pS1, dbl)</span>
<a name="l00104"></a><a class="code" href="tsDefs_8h.html#a3124a9c7ac7c02fbadd64fcdd9229cbb">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define TsAddStamps(pSum, pS1, pS2) \</span>
<a name="l00105"></a>00105 <span class="preprocessor">    (void)( \</span>
<a name="l00106"></a>00106 <span class="preprocessor">        ((*pSum).secPastEpoch = (*pS1).secPastEpoch + (*pS2).secPastEpoch) , \</span>
<a name="l00107"></a>00107 <span class="preprocessor">        ( ((*pSum).nsec = (*pS1).nsec + (*pS2).nsec) &gt;= 1000000000 \</span>
<a name="l00108"></a>00108 <span class="preprocessor">            ?((*pSum).secPastEpoch += (*pSum).nsec/1000000000, \</span>
<a name="l00109"></a>00109 <span class="preprocessor">              (*pSum).nsec %= 1000000000) \</span>
<a name="l00110"></a>00110 <span class="preprocessor">            :0)  )</span>
<a name="l00111"></a><a class="code" href="tsDefs_8h.html#a8c8b281f2c88527353d86d9c2c7d19c6">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define TsDiffAsDouble(pDbl, pS1, pS2) \</span>
<a name="l00112"></a>00112 <span class="preprocessor">  (void)( \</span>
<a name="l00113"></a>00113 <span class="preprocessor">    *pDbl = ((double)(*pS1).nsec - (double)(*pS2).nsec)/1000000000., \</span>
<a name="l00114"></a>00114 <span class="preprocessor">    *pDbl += (double)(*pS1).secPastEpoch - (double)(*pS2).secPastEpoch )</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span><span class="comment">/* TsDiffAsStamp() assumes that stamp1 &gt;= stamp2 */</span>
<a name="l00116"></a><a class="code" href="tsDefs_8h.html#a5dc121ba185d9633928bd76c2709c967">00116</a> <span class="preprocessor">#define TsDiffAsStamp(pDiff, pS1, pS2) \</span>
<a name="l00117"></a>00117 <span class="preprocessor">  (void)( \</span>
<a name="l00118"></a>00118 <span class="preprocessor">    (*pDiff).secPastEpoch = (*pS1).secPastEpoch - (*pS2).secPastEpoch , \</span>
<a name="l00119"></a>00119 <span class="preprocessor">    (*pS1).nsec &gt;= (*pS2).nsec \</span>
<a name="l00120"></a>00120 <span class="preprocessor">      ?( (*pDiff).nsec = (*pS1).nsec - (*pS2).nsec ) \</span>
<a name="l00121"></a>00121 <span class="preprocessor">      :( (*pDiff).nsec = ((*pS1).nsec + 1000000000) - (*pS2).nsec, \</span>
<a name="l00122"></a>00122 <span class="preprocessor">         (*pDiff).secPastEpoch -= 1 )  )</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span><span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00124"></a>00124 <span class="comment">*    comparison macros</span>
<a name="l00125"></a>00125 <span class="comment">*----------------------------------------------------------------------------*/</span>
<a name="l00126"></a><a class="code" href="tsDefs_8h.html#ad78a081b572dd0cce9144b65c833e34f">00126</a> <span class="preprocessor">#define TsCmpStampsEQ(pS1, pS2) \</span>
<a name="l00127"></a>00127 <span class="preprocessor">        (((*pS1).secPastEpoch) == ((*pS2).secPastEpoch) &amp;&amp; \</span>
<a name="l00128"></a>00128 <span class="preprocessor">         ((*pS1).nsec) == ((*pS2).nsec))</span>
<a name="l00129"></a><a class="code" href="tsDefs_8h.html#acdefa9674d302a729d5846c65980e20d">00129</a> <span class="preprocessor"></span><span class="preprocessor">#define TsCmpStampsNE(pS1, pS2) \</span>
<a name="l00130"></a>00130 <span class="preprocessor">        (((*pS1).secPastEpoch) != ((*pS2).secPastEpoch) || \</span>
<a name="l00131"></a>00131 <span class="preprocessor">         ((*pS1).nsec) != ((*pS2).nsec))</span>
<a name="l00132"></a><a class="code" href="tsDefs_8h.html#ab0fc01e2faddc38c471c6a51f57ded16">00132</a> <span class="preprocessor"></span><span class="preprocessor">#define TsCmpStampsGT(pS1, pS2) \</span>
<a name="l00133"></a>00133 <span class="preprocessor">        ((((*pS1).secPastEpoch) &gt; ((*pS2).secPastEpoch)) \</span>
<a name="l00134"></a>00134 <span class="preprocessor">            ?1 \</span>
<a name="l00135"></a>00135 <span class="preprocessor">            :((((*pS1).secPastEpoch) == ((*pS2).secPastEpoch)) \</span>
<a name="l00136"></a>00136 <span class="preprocessor">                ?((((*pS1).nsec) &gt; ((*pS2).nsec)) ? 1 : 0) \</span>
<a name="l00137"></a>00137 <span class="preprocessor">                :0  ))</span>
<a name="l00138"></a><a class="code" href="tsDefs_8h.html#a6834d5a2f85d21c97931f5f199c0dcbf">00138</a> <span class="preprocessor"></span><span class="preprocessor">#define TsCmpStampsGE(pS1, pS2) \</span>
<a name="l00139"></a>00139 <span class="preprocessor">        ((((*pS1).secPastEpoch) &gt; ((*pS2).secPastEpoch)) \</span>
<a name="l00140"></a>00140 <span class="preprocessor">            ?1 \</span>
<a name="l00141"></a>00141 <span class="preprocessor">            :((((*pS1).secPastEpoch) == ((*pS2).secPastEpoch)) \</span>
<a name="l00142"></a>00142 <span class="preprocessor">                ?((((*pS1).nsec) &gt;= ((*pS2).nsec)) ? 1 : 0) \</span>
<a name="l00143"></a>00143 <span class="preprocessor">                :0  ))</span>
<a name="l00144"></a><a class="code" href="tsDefs_8h.html#aa3ebc632e6ce6f9c0e3cfff4f4232651">00144</a> <span class="preprocessor"></span><span class="preprocessor">#define TsCmpStampsLT(pS1, pS2) \</span>
<a name="l00145"></a>00145 <span class="preprocessor">        ((((*pS1).secPastEpoch) &lt; ((*pS2).secPastEpoch)) \</span>
<a name="l00146"></a>00146 <span class="preprocessor">            ?1 \</span>
<a name="l00147"></a>00147 <span class="preprocessor">            :((((*pS1).secPastEpoch) == ((*pS2).secPastEpoch)) \</span>
<a name="l00148"></a>00148 <span class="preprocessor">                ?((((*pS1).nsec) &lt; ((*pS2).nsec)) ? 1 : 0) \</span>
<a name="l00149"></a>00149 <span class="preprocessor">                :0  ))</span>
<a name="l00150"></a><a class="code" href="tsDefs_8h.html#a453bef4d0b8e78ee105b96faea18a66d">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define TsCmpStampsLE(pS1, pS2) \</span>
<a name="l00151"></a>00151 <span class="preprocessor">        ((((*pS1).secPastEpoch) &lt; ((*pS2).secPastEpoch)) \</span>
<a name="l00152"></a>00152 <span class="preprocessor">            ?1 \</span>
<a name="l00153"></a>00153 <span class="preprocessor">            :((((*pS1).secPastEpoch) == ((*pS2).secPastEpoch)) \</span>
<a name="l00154"></a>00154 <span class="preprocessor">                ?((((*pS1).nsec) &lt;= ((*pS2).nsec)) ? 1 : 0) \</span>
<a name="l00155"></a>00155 <span class="preprocessor">                :0  ))</span>
<a name="l00156"></a>00156 <span class="preprocessor"></span>
<a name="l00157"></a>00157 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00158"></a>00158 <span class="comment">*    `prototypes&apos;</span>
<a name="l00159"></a>00159 <span class="comment">*----------------------------------------------------------------------------*/</span>
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 <span class="preprocessor">#if defined(__STDC__) || defined(__cplusplus)</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span>
<a name="l00163"></a>00163    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a34eff6bf3048f9d5217d99ce8c48cec1">tsLocalTime</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">void</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a25c1f1a3052d99face5956541543365c">tsAddDouble</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pSum,       <span class="comment">/* O sum time stamp */</span>
<a name="l00166"></a>00166                                                  <a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp,     <span class="comment">/* I addend time stamp */</span>
<a name="l00167"></a>00167                                                  <span class="keywordtype">double</span> dbl     <span class="comment">/* I number of seconds to add */</span>
<a name="l00168"></a>00168        );
<a name="l00169"></a>00169 
<a name="l00170"></a>00170    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">int</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a5fae441b20426a4469940a49f269e164">tsCmpStamps</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp1,     <span class="comment">/* pointer to first stamp */</span>
<a name="l00171"></a>00171                                                 <a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp2      <span class="comment">/* pointer to second stamp */</span>
<a name="l00172"></a>00172        );
<a name="l00173"></a>00173 
<a name="l00174"></a>00174    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#ae801186978cb402e8e01445a0746299f">tsRoundDownLocal</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp,        <span class="comment">/* IO pointer to time stamp buffer */</span>
<a name="l00175"></a>00175                                                       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a>    <span class="comment">/* I rounding interval, in seconds */</span>
<a name="l00176"></a>00176        );
<a name="l00177"></a>00177 
<a name="l00178"></a>00178    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a82b29318d0ac1378a2826a8ba6fe0afb">tsRoundUpLocal</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp,  <span class="comment">/* IO pointer to time stamp buffer */</span>
<a name="l00179"></a>00179                                                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a>      <span class="comment">/* I rounding interval, in seconds */</span>
<a name="l00180"></a>00180        );
<a name="l00181"></a>00181 
<a name="l00182"></a>00182    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">char</span> *<a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a44f0e95973ec7d4d58f4c31b54c30f84">tsStampToText</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp,  <span class="comment">/* I pointer to time stamp */</span>
<a name="l00183"></a>00183                                                     <span class="keyword">enum</span> <a class="code" href="tsDefs_8h.html#a7eeda81e75b85b5b67cde98ed46389c7">tsTextType</a> textType,   <span class="comment">/* I type of conversion desired; one of TS_TEXT_xxx */</span>
<a name="l00184"></a>00184                                                     <span class="keywordtype">char</span> *textBuffer    <span class="comment">/* O buffer to receive text */</span>
<a name="l00185"></a>00185        );
<a name="l00186"></a>00186 
<a name="l00187"></a>00187    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#ad84339f739823793254edc40cf2328e8">tsTextToStamp</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp,   <span class="comment">/* O time stamp corresponding to text */</span>
<a name="l00188"></a>00188                                                    <span class="keywordtype">char</span> **pText <span class="comment">/* IO ptr to ptr to string containing time and date */</span>
<a name="l00189"></a>00189        );
<a name="l00190"></a>00190 
<a name="l00191"></a>00191    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a26112760bb0658763c021b29af8ccda9">tsTimeTextToStamp</a>(<a class="code" href="structTS__STAMP.html">TS_STAMP</a> * pStamp,       <span class="comment">/* O time stamp corresponding to text */</span>
<a name="l00192"></a>00192                                                        <span class="keywordtype">char</span> **pText     <span class="comment">/* IO ptr to ptr to string containing time and date */</span>
<a name="l00193"></a>00193        );
<a name="l00194"></a>00194 
<a name="l00195"></a>00195 <span class="preprocessor">#else                           </span><span class="comment">/* !defined(__STDC__) &amp;&amp; !defined(__cplusplus) */</span>
<a name="l00196"></a>00196 
<a name="l00197"></a>00197    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a34eff6bf3048f9d5217d99ce8c48cec1">tsLocalTime</a>();
<a name="l00198"></a>00198    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">void</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a25c1f1a3052d99face5956541543365c">tsAddDouble</a>();
<a name="l00199"></a>00199    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">int</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a5fae441b20426a4469940a49f269e164">tsCmpStamps</a>();
<a name="l00200"></a>00200    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#ae801186978cb402e8e01445a0746299f">tsRoundDownLocal</a>();
<a name="l00201"></a>00201    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a82b29318d0ac1378a2826a8ba6fe0afb">tsRoundUpLocal</a>();
<a name="l00202"></a>00202    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">char</span> *<a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a44f0e95973ec7d4d58f4c31b54c30f84">tsStampToText</a>();
<a name="l00203"></a>00203    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#ad84339f739823793254edc40cf2328e8">tsTextToStamp</a>();
<a name="l00204"></a>00204    <a class="code" href="shareLib_8h.html#aac8420a65f226101eb29eb2535a0e031">epicsShareFunc</a> <span class="keywordtype">long</span> <a class="code" href="shareLib_8h.html#a45077a8ff4bb4bbbe21b9c337f046e59">epicsShareAPI</a> <a class="code" href="tsDefs_8h.html#a26112760bb0658763c021b29af8ccda9">tsTimeTextToStamp</a>();
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="preprocessor">#endif                          </span><span class="comment">/*defined(__STDC__) || defined(__cplusplus) */</span>
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">/*/subhead status codes-------------------------------------------------------</span>
<a name="l00209"></a>00209 <span class="comment">*               S T A T U S   C O D E S</span>
<a name="l00210"></a>00210 <span class="comment">*</span>
<a name="l00211"></a>00211 <span class="comment">*       </span>
<a name="l00212"></a>00212 <span class="comment">*    Status codes for time stamp routines have the form S_ts_briefMessage  .</span>
<a name="l00213"></a>00213 <span class="comment">*</span>
<a name="l00214"></a>00214 <span class="comment">*    The macro TsStatusToText(stat) can be used to obtain a text string</span>
<a name="l00215"></a>00215 <span class="comment">*    corresponding to a status code.</span>
<a name="l00216"></a>00216 <span class="comment">*</span>
<a name="l00217"></a>00217 <span class="comment">*----------------------------------------------------------------------------*/</span>
<a name="l00218"></a><a class="code" href="tsDefs_8h.html#adf51bc148737b526547d3044cd3b8dde">00218</a> <span class="preprocessor">#define S_ts_OK              0</span>
<a name="l00219"></a><a class="code" href="tsDefs_8h.html#a65c753172f3a2601c1634d961d09b890">00219</a> <span class="preprocessor"></span><span class="preprocessor">#define S_ts_sysTimeError    (M_ts|1| 1&lt;&lt;1)     </span><span class="comment">/* error getting system time */</span>
<a name="l00220"></a><a class="code" href="tsDefs_8h.html#a8893b845347e708743d61d3c93f1ef17">00220</a> <span class="preprocessor">#define S_ts_badTextCode     (M_ts|1| 2&lt;&lt;1)     </span><span class="comment">/* invalid TS_TEXT_xxx code */</span>
<a name="l00221"></a><a class="code" href="tsDefs_8h.html#a5c84b82942ed8f7add6962f06573172e">00221</a> <span class="preprocessor">#define S_ts_inputTextError  (M_ts|1| 3&lt;&lt;1)     </span><span class="comment">/* error in text date or time */</span>
<a name="l00222"></a><a class="code" href="tsDefs_8h.html#a09c724a60e59538fd90db5f37193cdc1">00222</a> <span class="preprocessor">#define S_ts_timeSkippedDST  (M_ts|1| 4&lt;&lt;1)     </span><span class="comment">/* time skipped on switch to DST */</span>
<a name="l00223"></a><a class="code" href="tsDefs_8h.html#a5f102c1621153bb4a6d29993f26c4237">00223</a> <span class="preprocessor">#define S_ts_badRoundInterval (M_ts|1| 5&lt;&lt;1)    </span><span class="comment">/* invalid rounding interval */</span>
<a name="l00224"></a>00224 
<a name="l00225"></a><a class="code" href="tsDefs_8h.html#a5e4e0ba5b1aed3881c9597d99ecbde27">00225</a> <span class="preprocessor">#define TS_S_PAST                6      </span><span class="comment">/* one past last legal code */</span>
<a name="l00226"></a>00226 
<a name="l00227"></a><a class="code" href="tsDefs_8h.html#a49248ce16e4fc8a235c30ca7b81e6504">00227</a> <span class="preprocessor">#define TsStatusToIndex(status) \</span>
<a name="l00228"></a>00228 <span class="preprocessor">        (  ((status&amp;0xffff0000)!=M_ts)  \</span>
<a name="l00229"></a>00229 <span class="preprocessor">                ? TS_S_PAST  \</span>
<a name="l00230"></a>00230 <span class="preprocessor">                : (  (((status&amp;0xffff)&gt;&gt;1)&gt;=TS_S_PAST)  \</span>
<a name="l00231"></a>00231 <span class="preprocessor">                     ? TS_S_PAST  \</span>
<a name="l00232"></a>00232 <span class="preprocessor">                     : ((status&amp;0xffff)&gt;&gt;1)  \</span>
<a name="l00233"></a>00233 <span class="preprocessor">                  )  \</span>
<a name="l00234"></a>00234 <span class="preprocessor">        )</span>
<a name="l00235"></a>00235 <span class="preprocessor"></span>
<a name="l00236"></a><a class="code" href="tsDefs_8h.html#ac1a24acede13811556ba38ac18360cf0">00236</a> <span class="preprocessor">#define TsStatusToText(status) \</span>
<a name="l00237"></a>00237 <span class="preprocessor">        (glTsStatText[TsStatusToIndex(status)])</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>
<a name="l00239"></a><a class="code" href="tsDefs_8h.html#af278dcb8570eb2f31d96abd37e6fa79f">00239</a>    <a class="code" href="shareLib_8h.html#aa9f1f8e6cf54ef406871bb6732e17906">epicsShareExtern</a> <span class="keywordtype">char</span> *<a class="code" href="tsDefs_8h.html#af278dcb8570eb2f31d96abd37e6fa79f">glTsStatText</a>[7];
<a name="l00240"></a>00240 <span class="preprocessor">#ifdef createTSSubrGlobals</span>
<a name="l00241"></a>00241 <span class="preprocessor"></span>   <a class="code" href="shareLib_8h.html#a0ccaed6722b7ca1b0357a5e28029e7bc">epicsShareDef</a> <span class="keywordtype">char</span> *glTsStatText[] = {
<a name="l00242"></a>00242       <span class="comment">/* S_ts_OK                */</span> <span class="stringliteral">&quot;success&quot;</span>,
<a name="l00243"></a>00243       <span class="comment">/* S_ts_sysTimeError      */</span> <span class="stringliteral">&quot;error getting system time&quot;</span>,
<a name="l00244"></a>00244       <span class="comment">/* S_ts_badTextCode       */</span> <span class="stringliteral">&quot;invalid TS_TEXT_xxx code&quot;</span>,
<a name="l00245"></a>00245       <span class="comment">/* S_ts_inputTextError    */</span> <span class="stringliteral">&quot;error in text date or time&quot;</span>,
<a name="l00246"></a>00246       <span class="comment">/* S_ts_timeSkippedDST    */</span> <span class="stringliteral">&quot;time skipped on switch to DST&quot;</span>,
<a name="l00247"></a>00247       <span class="comment">/* S_ts_badRoundInterval  */</span> <span class="stringliteral">&quot;rounding interval is invalid&quot;</span>,
<a name="l00248"></a>00248 
<a name="l00249"></a>00249       <span class="comment">/* TS_S_PAST              */</span> <span class="stringliteral">&quot;illegal TS status code&quot;</span>,
<a name="l00250"></a>00250    };
<a name="l00251"></a>00251 <span class="preprocessor">#endif</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span>
<a name="l00253"></a>00253 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span>}
<a name="l00255"></a>00255 <span class="preprocessor">#endif </span><span class="comment">/*__cplusplus */</span>
<a name="l00256"></a>00256 <span class="preprocessor">#endif                          </span><span class="comment">/*INC_tsDefs_h */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ:Rootana by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

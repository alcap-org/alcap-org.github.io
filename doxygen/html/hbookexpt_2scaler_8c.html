<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ:Rootana: midas/examples/hbookexpt/scaler.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>midas/examples/hbookexpt/scaler.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="midas_8h_source.html">midas.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="miniexp_2experim_8h_source.html">experim.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="hbookexpt_2analyzer_8h_source.html">analyzer.h</a>&quot;</code><br/>

<p><a href="hbookexpt_2scaler_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hbookexpt_2scaler_8c.html#ab6c749a2690a47bc87827e76a5b3bc1f">scaler_accum</a> (<a class="el" href="structEVENT__HEADER.html">EVENT_HEADER</a> *, void *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hbookexpt_2scaler_8c.html#a4f16616b45cc198ac351133d1e8d3fd1">scaler_clear</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mlogger_8c.html#a7515080fe161c8c4d6029c889f02564a">run_number</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hbookexpt_2scaler_8c.html#ab74cee08d1231b7242c1da2409a1aa50">scaler_eor</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mlogger_8c.html#a7515080fe161c8c4d6029c889f02564a">run_number</a>)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structANA__MODULE.html">ANA_MODULE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hbookexpt_2scaler_8c.html#a4c8b24b6a38f43da323289e5241002d6">scaler_accum_module</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hbookexpt_2scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a> [32]</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab6c749a2690a47bc87827e76a5b3bc1f"></a><!-- doxytag: member="scaler.c::scaler_accum" ref="ab6c749a2690a47bc87827e76a5b3bc1f" args="(EVENT_HEADER *, void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> scaler_accum </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEVENT__HEADER.html">EVENT_HEADER</a> *&nbsp;</td>
          <td class="paramname"> <em>pheader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pevent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hbookexpt_2scaler_8c_source.html#l00085">85</a> of file <a class="el" href="hbookexpt_2scaler_8c_source.html">scaler.c</a>.</p>

<p>References <a class="el" href="midas_8c_source.html#l12826">bk_close()</a>, <a class="el" href="midas_8c_source.html#l12705">bk_create()</a>, <a class="el" href="midas_8c_source.html#l12924">bk_locate()</a>, <a class="el" href="mdump_8c_source.html#l00115">i</a>, <a class="el" href="camac_8c_source.html#l00506">n</a>, <a class="el" href="experiment_2scaler_8c_source.html#l00063">scaler</a>, <a class="el" href="bit3__mvme_2mvmestd_8h_source.html#l00045">SUCCESS</a>, and <a class="el" href="midas_8h_source.html#l00744">TID_DOUBLE</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00086"></a>00086 {
<a name="l00087"></a>00087    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="camac_8c.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00088"></a>00088    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *psclr;
<a name="l00089"></a>00089    <span class="keywordtype">double</span> *pacum;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091    <span class="comment">/* look for SCLR bank */</span>
<a name="l00092"></a>00092    n = <a class="code" href="group__msectionh.html#ga191a8ec88c5ff3512bc22d7fa6d1f5dc">bk_locate</a>(pevent, <span class="stringliteral">&quot;SCLR&quot;</span>, &amp;psclr);
<a name="l00093"></a>00093    <span class="keywordflow">if</span> (n == 0)
<a name="l00094"></a>00094       <span class="keywordflow">return</span> 1;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096    <span class="comment">/* create acummulated scaler bank */</span>
<a name="l00097"></a>00097    <a class="code" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create</a>(pevent, <span class="stringliteral">&quot;ACUM&quot;</span>, <a class="code" href="group__mdefineh.html#ga13378fa303cf601b4b491866a6688362">TID_DOUBLE</a>, &amp;pacum);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099    <span class="comment">/* accumulate scalers */</span>
<a name="l00100"></a>00100    <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {
<a name="l00101"></a>00101       <a class="code" href="experiment_2scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a>[i] += psclr[i];
<a name="l00102"></a>00102       pacum[i] = <a class="code" href="experiment_2scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a>[i];
<a name="l00103"></a>00103    }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105    <span class="comment">/* close bank */</span>
<a name="l00106"></a>00106    <a class="code" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close</a>(pevent, pacum + n);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108    <span class="keywordflow">return</span> <a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00109"></a>00109 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f16616b45cc198ac351133d1e8d3fd1"></a><!-- doxytag: member="scaler.c::scaler_clear" ref="a4f16616b45cc198ac351133d1e8d3fd1" args="(INT run_number)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> scaler_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>run_number</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hbookexpt_2scaler_8c_source.html#l00070">70</a> of file <a class="el" href="hbookexpt_2scaler_8c_source.html">scaler.c</a>.</p>

<p>References <a class="el" href="experiment_2scaler_8c_source.html#l00063">scaler</a>, and <a class="el" href="bit3__mvme_2mvmestd_8h_source.html#l00045">SUCCESS</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00071"></a>00071 {
<a name="l00072"></a>00072    memset(<a class="code" href="experiment_2scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="experiment_2scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a>));
<a name="l00073"></a>00073    <span class="keywordflow">return</span> <a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00074"></a>00074 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab74cee08d1231b7242c1da2409a1aa50"></a><!-- doxytag: member="scaler.c::scaler_eor" ref="ab74cee08d1231b7242c1da2409a1aa50" args="(INT run_number)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> scaler_eor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>run_number</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hbookexpt_2scaler_8c_source.html#l00078">78</a> of file <a class="el" href="hbookexpt_2scaler_8c_source.html">scaler.c</a>.</p>

<p>References <a class="el" href="bit3__mvme_2mvmestd_8h_source.html#l00045">SUCCESS</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00079"></a>00079 {
<a name="l00080"></a>00080    <span class="keywordflow">return</span> <a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00081"></a>00081 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab391a322195b8a0de3e2fd9d2950b82d"></a><!-- doxytag: member="scaler.c::scaler" ref="ab391a322195b8a0de3e2fd9d2950b82d" args="[32]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="hbookexpt_2scaler_8c.html#ab391a322195b8a0de3e2fd9d2950b82d">scaler</a>[32]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hbookexpt_2scaler_8c_source.html#l00066">66</a> of file <a class="el" href="hbookexpt_2scaler_8c_source.html">scaler.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4c8b24b6a38f43da323289e5241002d6"></a><!-- doxytag: member="scaler.c::scaler_accum_module" ref="a4c8b24b6a38f43da323289e5241002d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structANA__MODULE.html">ANA_MODULE</a> <a class="el" href="hbookexpt_2scaler_8c.html#a4c8b24b6a38f43da323289e5241002d6">scaler_accum_module</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
   <span class="stringliteral">&quot;Scaler accumulation&quot;</span>,       
   <span class="stringliteral">&quot;Stefan Ritt&quot;</span>,               
   <a class="code" href="experiment_2scaler_8c.html#ab6c749a2690a47bc87827e76a5b3bc1f">scaler_accum</a>,                
   <a class="code" href="experiment_2scaler_8c.html#a4f16616b45cc198ac351133d1e8d3fd1">scaler_clear</a>,                
   <a class="code" href="experiment_2scaler_8c.html#ab74cee08d1231b7242c1da2409a1aa50">scaler_eor</a>,                  
   NULL,                        
   NULL,                        
   NULL,                        
   0,                           
   NULL,                        
}
</pre></div>
<p>Definition at line <a class="el" href="hbookexpt_2scaler_8c_source.html#l00051">51</a> of file <a class="el" href="hbookexpt_2scaler_8c_source.html">scaler.c</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ:Rootana by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

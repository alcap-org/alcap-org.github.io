<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ:Rootana: Midas Bank Functions (bk_xxx)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Midas Bank Functions (bk_xxx)<br/>
<small>
[<a class="el" href="group__midasincludecode.html">The midas.h &amp; midas.c</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gac6fadde40824dbf7bd70abedd29be2bd">bk_init</a> (void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga26f7eb917da58d12a7616ad02aab83da">bk_is32</a> (void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gae7cbf587db63fcdf66dd18b29f08b6d2">bk_init32</a> (void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga8fc93de36e62c4328cb6581be7f42a0f">bk_size</a> (void *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga4bb781187e18834136ed8ac368d53413">bk_create</a> (void *event, const char *name, <a class="el" href="unionWORD.html">WORD</a> <a class="el" href="ybos_8c.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga9f08f19c983d5477f488dca1a9303247">bk_delete</a> (void *event, const char *name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga132dc71c8f74b478cdcc59bc1d9f6a26">bk_close</a> (void *event, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga4d8a0ef23239ae478544fa96a0e98a33">bk_list</a> (void *event, char *bklist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gafe085ddb11bdcff4ca461224254289ef">bk_locate</a> (void *event, const char *name, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga5ecb1d77784b02c3f79684ab816d0ea7">bk_find</a> (<a class="el" href="structBANK__HEADER.html">BANK_HEADER</a> *pbkh, const char *name, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *bklen, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *bktype, void **pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#gab6012589013da85b128d8443501a4a44">bk_iterate</a> (void *event, <a class="el" href="structBANK.html">BANK</a> **pbk, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga9aa2fd6b7a4c378065d052cd43c14146">bk_iterate32</a> (void *event, <a class="el" href="structBANK32.html">BANK32</a> **pbk, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bkfunctionc.html#ga44b7381af9b91fbdf2f6d59f55451ea1">bk_swap</a> (void *event, <a class="el" href="odbhist_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> force)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>dox dox dox </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga132dc71c8f74b478cdcc59bc1d9f6a26"></a><!-- doxytag: member="midas.c::bk_close" ref="ga132dc71c8f74b478cdcc59bc1d9f6a26" args="(void *event, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_close </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Close the Midas bank priviously created by <a class="el" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create()</a>. The data pointer pdata must be obtained by <a class="el" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create()</a> and used as an address to fill a bank. It is incremented with every value written to the bank and finally points to a location just after the last byte of the bank. It is then passed to <a class="el" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close()</a> to finish the bank creation </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of bytes contained in bank </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12826">12826</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00904">ALIGN8</a>, <a class="el" href="midas_8h_source.html#l01422">BANK_FORMAT_32BIT</a>, <a class="el" href="midas_8h_source.html#l01432">BANK::data_size</a>, <a class="el" href="midas_8h_source.html#l01438">BANK32::data_size</a>, <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>, <a class="el" href="midas_8h_source.html#l01430">BANK::name</a>, <a class="el" href="midas_8h_source.html#l01436">BANK32::name</a>, <a class="el" href="midas_8h_source.html#l00748">TID_STRUCT</a>, <a class="el" href="midas_8h_source.html#l01431">BANK::type</a>, and <a class="el" href="midas_8h_source.html#l01437">BANK32::type</a>.</p>

<p>Referenced by <a class="el" href="experiment_2adccalib_8c_source.html#l00139">adc_calib()</a>, <a class="el" href="experiment_2adcsum_8c_source.html#l00126">adc_summing()</a>, <a class="el" href="crate6__CAEN__TDC_2caenV767_8cpp_source.html#l00374">caenV767_read1()</a>, <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="overall_8cpp_source.html#l00046">compress_bank()</a>, <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>, <a class="el" href="mzdump_8c_source.html#l00149">decompress()</a>, <a class="el" href="crate6__CAEN__TDC_2dl40x_8cpp_source.html#l00117">dl40x_read()</a>, <a class="el" href="dt5720__module_8c_source.html#l00271">dt5720_read()</a>, <a class="el" href="overall_8cpp_source.html#l00255">expand_bank()</a>, <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>, <a class="el" href="slowcontrol_2ge__ln2_2frontend_8c_source.html#l00230">ge_ln2_read()</a>, <a class="el" href="crate6__CAEN__TDC_2lrs2249_8cpp_source.html#l00109">lrs2249_read1()</a>, <a class="el" href="MCaenCompProcessRaw_8cpp_source.html#l00211">MCaenCompProcessRaw()</a>, <a class="el" href="new__fadc_8cpp_source.html#l00436">new_fadc_read()</a>, <a class="el" href="deferredfe_8c_source.html#l00365">read_deferred_event()</a>, <a class="el" href="largefe_8c_source.html#l00263">read_large_event()</a>, <a class="el" href="mantrigfe_8c_source.html#l00317">read_mantrig_event()</a>, <a class="el" href="midas_2examples_2experiment_2frontend_8c_source.html#l00407">read_scaler_event()</a>, <a class="el" href="slowcontrol_2separator_2frontend_8c_source.html#l00226">read_separator_event()</a>, <a class="el" href="tinyfe_8c_source.html#l00266">read_tiny_event()</a>, <a class="el" href="midas_2examples_2experiment_2frontend_8c_source.html#l00337">read_trigger_event()</a>, <a class="el" href="crate6__CAEN__TDC_2s500_8cpp_source.html#l00114">s500_read()</a>, <a class="el" href="experiment_2scaler_8c_source.html#l00082">scaler_accum()</a>, <a class="el" href="crate6__CAEN__TDC_2sis3600_8cpp_source.html#l00302">sis3600_read1()</a>, <a class="el" href="MqlArray_8h_source.html#l00136">MqlArray&lt; T &gt;::toBank()</a>, <a class="el" href="v1724__module_8c_source.html#l00663">v1724_read()</a>, <a class="el" href="slowcontrol_2vacuum__sensor_2frontend_8c_source.html#l00295">vacuum_gauge_read()</a>, <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>, and <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12827"></a>12827 {
<a name="l12828"></a>12828    <span class="keywordflow">if</span> (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;flags &amp; <a class="code" href="group__mbank.html#gadc7ea449441f9c3bbe110cf41333bc7b">BANK_FORMAT_32BIT</a>) {
<a name="l12829"></a>12829       <a class="code" href="structBANK32.html">BANK32</a> *pbk32;
<a name="l12830"></a>12830 
<a name="l12831"></a>12831       pbk32 =
<a name="l12832"></a>12832           (<a class="code" href="structBANK32.html">BANK32</a> *) ((<span class="keywordtype">char</span> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1) +
<a name="l12833"></a>12833                       ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a>);
<a name="l12834"></a>12834       pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) (<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>) pdata - (<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>) (pbk32 + 1);
<a name="l12835"></a>12835       <span class="keywordflow">if</span> (pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a> == <a class="code" href="group__mdefineh.html#ga8d82076a05b53876103e1c53d5878b75">TID_STRUCT</a> &amp;&amp; pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a> == 0)
<a name="l12836"></a>12836          printf(<span class="stringliteral">&quot;Warning: bank %c%c%c%c has zero size\n&quot;</span>,
<a name="l12837"></a>12837                 pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>[0], pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>[1], pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>[2], pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>[3]);
<a name="l12838"></a>12838       ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;data_size += <span class="keyword">sizeof</span>(<a class="code" href="structBANK32.html">BANK32</a>) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>);
<a name="l12839"></a>12839       <span class="keywordflow">return</span> pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>;
<a name="l12840"></a>12840    } <span class="keywordflow">else</span> {
<a name="l12841"></a>12841       <a class="code" href="structBANK.html">BANK</a> *pbk;
<a name="l12842"></a>12842 
<a name="l12843"></a>12843       pbk =
<a name="l12844"></a>12844           (<a class="code" href="structBANK.html">BANK</a> *) ((<span class="keywordtype">char</span> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1) +
<a name="l12845"></a>12845                     ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a>);
<a name="l12846"></a>12846       pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a> = (<a class="code" href="unionWORD.html">WORD</a>) (<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>) pdata - (<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>) (pbk + 1);
<a name="l12847"></a>12847       <span class="keywordflow">if</span> (pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a> == <a class="code" href="group__mdefineh.html#ga8d82076a05b53876103e1c53d5878b75">TID_STRUCT</a> &amp;&amp; pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a> == 0)
<a name="l12848"></a>12848          printf(<span class="stringliteral">&quot;Warning: bank %c%c%c%c has zero size\n&quot;</span>,
<a name="l12849"></a>12849                 pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>[0], pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>[1], pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>[2], pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>[3]);
<a name="l12850"></a>12850       ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;data_size += <span class="keyword">sizeof</span>(<a class="code" href="structBANK.html">BANK</a>) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>);
<a name="l12851"></a>12851       <span class="keywordflow">return</span> pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>;
<a name="l12852"></a>12852    }
<a name="l12853"></a>12853 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga4bb781187e18834136ed8ac368d53413"></a><!-- doxytag: member="midas.c::bk_create" ref="ga4bb781187e18834136ed8ac368d53413" args="(void *event, const char *name, WORD type, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bk_create </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionWORD.html">WORD</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a Midas bank. The data pointer pdata must be used as an address to fill a bank. It is incremented with every value written to the bank and finally points to a location just after the last byte of the bank. It is then passed to the function <a class="el" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close()</a> to finish the bank creation. </p>
<div class="fragment"><pre class="fragment"><a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> *pdata;
<a class="code" href="group__msectionh.html#ga6a2d6aced3ec658234d4c6ab0ba043fb">bk_init</a>(pevent);
<a class="code" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create</a>(pevent, <span class="stringliteral">&quot;ADC0&quot;</span>, <a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>, &amp;pdata);
*pdata++ = 123
*pdata++ = 456
<a class="code" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close</a>(pevent, pdata);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the data area </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>of the bank, must be exactly 4 charaters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>type of bank, one of the Midas_Data_Types values defined in <a class="el" href="generate-MODULES_8h.html#a00d5923485ea4382260221681abdb205">midas.h</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to the data area of the newly created bank </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12705">12705</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l01422">BANK_FORMAT_32BIT</a>, <a class="el" href="midas_8h_source.html#l01432">BANK::data_size</a>, <a class="el" href="midas_8h_source.html#l01438">BANK32::data_size</a>, <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>, <a class="el" href="midas_8h_source.html#l01430">BANK::name</a>, <a class="el" href="midas_8h_source.html#l01436">BANK32::name</a>, <a class="el" href="midas_8h_source.html#l01431">BANK::type</a>, and <a class="el" href="midas_8h_source.html#l01437">BANK32::type</a>.</p>

<p>Referenced by <a class="el" href="experiment_2adccalib_8c_source.html#l00139">adc_calib()</a>, <a class="el" href="experiment_2adcsum_8c_source.html#l00126">adc_summing()</a>, <a class="el" href="crate6__CAEN__TDC_2caenV767_8cpp_source.html#l00374">caenV767_read1()</a>, <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="overall_8cpp_source.html#l00046">compress_bank()</a>, <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>, <a class="el" href="mzdump_8c_source.html#l00149">decompress()</a>, <a class="el" href="crate6__CAEN__TDC_2dl40x_8cpp_source.html#l00117">dl40x_read()</a>, <a class="el" href="dt5720__module_8c_source.html#l00271">dt5720_read()</a>, <a class="el" href="overall_8cpp_source.html#l00255">expand_bank()</a>, <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>, <a class="el" href="slowcontrol_2ge__ln2_2frontend_8c_source.html#l00230">ge_ln2_read()</a>, <a class="el" href="crate6__CAEN__TDC_2lrs2249_8cpp_source.html#l00109">lrs2249_read1()</a>, <a class="el" href="MCaenCompProcessRaw_8cpp_source.html#l00211">MCaenCompProcessRaw()</a>, <a class="el" href="new__fadc_8cpp_source.html#l00436">new_fadc_read()</a>, <a class="el" href="deferredfe_8c_source.html#l00365">read_deferred_event()</a>, <a class="el" href="largefe_8c_source.html#l00263">read_large_event()</a>, <a class="el" href="mantrigfe_8c_source.html#l00317">read_mantrig_event()</a>, <a class="el" href="midas_2examples_2experiment_2frontend_8c_source.html#l00407">read_scaler_event()</a>, <a class="el" href="slowcontrol_2separator_2frontend_8c_source.html#l00226">read_separator_event()</a>, <a class="el" href="tinyfe_8c_source.html#l00266">read_tiny_event()</a>, <a class="el" href="midas_2examples_2experiment_2frontend_8c_source.html#l00337">read_trigger_event()</a>, <a class="el" href="crate6__CAEN__TDC_2s500_8cpp_source.html#l00114">s500_read()</a>, <a class="el" href="experiment_2scaler_8c_source.html#l00082">scaler_accum()</a>, <a class="el" href="crate6__CAEN__TDC_2sis3600_8cpp_source.html#l00302">sis3600_read1()</a>, <a class="el" href="MqlArray_8h_source.html#l00136">MqlArray&lt; T &gt;::toBank()</a>, <a class="el" href="v1724__module_8c_source.html#l00663">v1724_read()</a>, <a class="el" href="slowcontrol_2vacuum__sensor_2frontend_8c_source.html#l00295">vacuum_gauge_read()</a>, <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>, and <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12706"></a>12706 {
<a name="l12707"></a>12707    <span class="keywordflow">if</span> (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;flags &amp; <a class="code" href="group__mbank.html#gadc7ea449441f9c3bbe110cf41333bc7b">BANK_FORMAT_32BIT</a>) {
<a name="l12708"></a>12708       <a class="code" href="structBANK32.html">BANK32</a> *pbk32;
<a name="l12709"></a>12709 
<a name="l12710"></a>12710       pbk32 =
<a name="l12711"></a>12711           (<a class="code" href="structBANK32.html">BANK32</a> *) ((<span class="keywordtype">char</span> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1) +
<a name="l12712"></a>12712                       ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a>);
<a name="l12713"></a>12713       strncpy(pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12714"></a>12714       pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a> = type;
<a name="l12715"></a>12715       pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a> = 0;
<a name="l12716"></a>12716       *((<span class="keywordtype">void</span> **) pdata) = pbk32 + 1;
<a name="l12717"></a>12717    } <span class="keywordflow">else</span> {
<a name="l12718"></a>12718       <a class="code" href="structBANK.html">BANK</a> *pbk;
<a name="l12719"></a>12719 
<a name="l12720"></a>12720       pbk =
<a name="l12721"></a>12721           (<a class="code" href="structBANK.html">BANK</a> *) ((<span class="keywordtype">char</span> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1) +
<a name="l12722"></a>12722                     ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a>);
<a name="l12723"></a>12723       strncpy(pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12724"></a>12724       pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a> = type;
<a name="l12725"></a>12725       pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a> = 0;
<a name="l12726"></a>12726       *((<span class="keywordtype">void</span> **) pdata) = pbk + 1;
<a name="l12727"></a>12727    }
<a name="l12728"></a>12728 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9f08f19c983d5477f488dca1a9303247"></a><!-- doxytag: member="midas.c::bk_delete" ref="ga9f08f19c983d5477f488dca1a9303247" args="(void *event, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bk_delete </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox </p>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12736">12736</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00904">ALIGN8</a>, <a class="el" href="midas_8h_source.html#l01422">BANK_FORMAT_32BIT</a>, <a class="el" href="midas_8h_source.html#l00956">CM_SUCCESS</a>, <a class="el" href="midas_8h_source.html#l01432">BANK::data_size</a>, <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>, <a class="el" href="midas_8h_source.html#l01438">BANK32::data_size</a>, <a class="el" href="midas_8h_source.html#l01430">BANK::name</a>, and <a class="el" href="midas_8h_source.html#l01436">BANK32::name</a>.</p>

<p>Referenced by <a class="el" href="mzdump_8c_source.html#l00149">decompress()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12739"></a>12739          : <a class="code" href="group__msectionh.html#gaec25cadfb1611e7420f2b40c709779e5">bk_delete</a>
<a name="l12740"></a>12740 
<a name="l12741"></a>12741   Purpose: Delete a MIDAS <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> inside an <span class="keyword">event</span>
<a name="l12742"></a>12742 
<a name="l12743"></a>12743   Input:
<a name="l12744"></a>12744     <span class="keywordtype">void</span>   *<span class="keyword">event</span>           pointer to the <span class="keyword">event</span>
<a name="l12745"></a>12745     <span class="keywordtype">char</span>   *<a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>            Name of <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> (exactly four letters)
<a name="l12746"></a>12746 
<a name="l12747"></a>12747   Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l12748"></a>12748     <a class="code" href="group__err21.html#ga0180947941230d805f5dbb6f1801c17c">CM_SUCCESS</a>              Bank has been deleted
<a name="l12749"></a>12749     0                       Bank has not been <a class="code" href="patch__mevb_8cpp.html#a408216eef095a35ba3963fc6f4f4d7a8">found</a>
<a name="l12750"></a>12750 
<a name="l12751"></a>12751 \********************************************************************/
<a name="l12752"></a>12752 {
<a name="l12753"></a>12753    <a class="code" href="structBANK.html">BANK</a> *pbk;
<a name="l12754"></a>12754    <a class="code" href="structBANK32.html">BANK32</a> *pbk32;
<a name="l12755"></a>12755    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> dname;
<a name="l12756"></a>12756    <span class="keywordtype">int</span> remaining;
<a name="l12757"></a>12757 
<a name="l12758"></a>12758    <span class="keywordflow">if</span> (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;flags &amp; <a class="code" href="group__mbank.html#gadc7ea449441f9c3bbe110cf41333bc7b">BANK_FORMAT_32BIT</a>) {
<a name="l12759"></a>12759       <span class="comment">/* locate bank */</span>
<a name="l12760"></a>12760       pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1);
<a name="l12761"></a>12761       strncpy((<span class="keywordtype">char</span> *) &amp;dname, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12762"></a>12762       <span class="keywordflow">do</span> {
<a name="l12763"></a>12763          <span class="keywordflow">if</span> (*((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>) == dname) {
<a name="l12764"></a>12764             <span class="comment">/* bank found, delete it */</span>
<a name="l12765"></a>12765             remaining =
<a name="l12766"></a>12766                 (int) ((<span class="keywordtype">char</span> *) <span class="keyword">event</span> + ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;data_size +
<a name="l12767"></a>12767                        <span class="keyword">sizeof</span>(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>)) - (int) ((<span class="keywordtype">char</span> *) (pbk32 + 1) +
<a name="l12768"></a>12768                                                      <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>));
<a name="l12769"></a>12769 
<a name="l12770"></a>12770             <span class="comment">/* reduce total event size */</span>
<a name="l12771"></a>12771             ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;data_size -=
<a name="l12772"></a>12772                 <span class="keyword">sizeof</span>(<a class="code" href="structBANK32.html">BANK32</a>) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>);
<a name="l12773"></a>12773 
<a name="l12774"></a>12774             <span class="comment">/* copy remaining bytes */</span>
<a name="l12775"></a>12775             <span class="keywordflow">if</span> (remaining &gt; 0)
<a name="l12776"></a>12776                memcpy(pbk32, (<span class="keywordtype">char</span> *) (pbk32 + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>), remaining);
<a name="l12777"></a>12777             <span class="keywordflow">return</span> <a class="code" href="group__err21.html#ga0180947941230d805f5dbb6f1801c17c">CM_SUCCESS</a>;
<a name="l12778"></a>12778          }
<a name="l12779"></a>12779 
<a name="l12780"></a>12780          pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) ((<span class="keywordtype">char</span> *) (pbk32 + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>));
<a name="l12781"></a>12781       } <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbk32 - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) event &lt;
<a name="l12782"></a>12782                ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + sizeof(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>));
<a name="l12783"></a>12783    } <a class="code" href="patch__mevb_8cpp.html#a0544c3fe466e421738dae463968b70ba">else</a> {
<a name="l12784"></a>12784       <span class="comment">/* locate bank */</span>
<a name="l12785"></a>12785       pbk = (<a class="code" href="structBANK.html">BANK</a> *) (((BANK_HEADER *) event) + 1);
<a name="l12786"></a>12786       strncpy((<span class="keywordtype">char</span> *) &amp;dname, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12787"></a>12787       <span class="keywordflow">do</span> {
<a name="l12788"></a>12788          <span class="keywordflow">if</span> (*((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>) == dname) {
<a name="l12789"></a>12789             <span class="comment">/* bank found, delete it */</span>
<a name="l12790"></a>12790             remaining =
<a name="l12791"></a>12791                 (int) ((<span class="keywordtype">char</span> *) <span class="keyword">event</span> + ((BANK_HEADER *) event)-&gt;data_size +
<a name="l12792"></a>12792                        <span class="keyword">sizeof</span>(BANK_HEADER)) - (int) ((<span class="keywordtype">char</span> *) (pbk + 1) +
<a name="l12793"></a>12793                                                      <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>));
<a name="l12794"></a>12794 
<a name="l12795"></a>12795             <span class="comment">/* reduce total event size */</span>
<a name="l12796"></a>12796             ((BANK_HEADER *) event)-&gt;data_size -= <span class="keyword">sizeof</span>(<a class="code" href="structBANK.html">BANK</a>) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>);
<a name="l12797"></a>12797 
<a name="l12798"></a>12798             <span class="comment">/* copy remaining bytes */</span>
<a name="l12799"></a>12799             <span class="keywordflow">if</span> (remaining &gt; 0)
<a name="l12800"></a>12800                memcpy(pbk, (<span class="keywordtype">char</span> *) (pbk + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>), remaining);
<a name="l12801"></a>12801             <span class="keywordflow">return</span> <a class="code" href="group__err21.html#ga0180947941230d805f5dbb6f1801c17c">CM_SUCCESS</a>;
<a name="l12802"></a>12802          }
<a name="l12803"></a>12803 
<a name="l12804"></a>12804          pbk = (<a class="code" href="structBANK.html">BANK</a> *) ((<span class="keywordtype">char</span> *) (pbk + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>));
<a name="l12805"></a>12805       } <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbk - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) event &lt;
<a name="l12806"></a>12806                ((BANK_HEADER *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + sizeof(BANK_HEADER));
<a name="l12807"></a>12807    }
<a name="l12808"></a>12808 
<a name="l12809"></a>12809    return 0;
<a name="l12810"></a>12810 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga5ecb1d77784b02c3f79684ab816d0ea7"></a><!-- doxytag: member="midas.c::bk_find" ref="ga5ecb1d77784b02c3f79684ab816d0ea7" args="(BANK_HEADER *pbkh, const char *name, DWORD *bklen, DWORD *bktype, void **pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structBANK__HEADER.html">BANK_HEADER</a> *&nbsp;</td>
          <td class="paramname"> <em>pbkh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>bklen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>bktype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Finds a MIDAS bank of given name inside an event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pbkh</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>bank name to look for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bklen</em>&nbsp;</td><td>number of elemtents in bank </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bktype</em>&nbsp;</td><td>bank type, one of TID_xxx </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to data area of bank, NULL if bank not found </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if bank found, 0 otherwise </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12973">12973</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00904">ALIGN8</a>, <a class="el" href="midas_8c_source.html#l12633">bk_is32()</a>, <a class="el" href="midas_8h_source.html#l01432">BANK::data_size</a>, <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>, <a class="el" href="midas_8h_source.html#l01438">BANK32::data_size</a>, <a class="el" href="midas_8h_source.html#l01430">BANK::name</a>, <a class="el" href="midas_8h_source.html#l01436">BANK32::name</a>, <a class="el" href="midas_8c_source.html#l00749">tid_size</a>, <a class="el" href="midas_8h_source.html#l01431">BANK::type</a>, and <a class="el" href="midas_8h_source.html#l01437">BANK32::type</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12975"></a>12975 {
<a name="l12976"></a>12976    <a class="code" href="structBANK.html">BANK</a> *pbk;
<a name="l12977"></a>12977    <a class="code" href="structBANK32.html">BANK32</a> *pbk32;
<a name="l12978"></a>12978    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> dname;
<a name="l12979"></a>12979 
<a name="l12980"></a>12980    <span class="keywordflow">if</span> (<a class="code" href="group__msectionh.html#ga75339a20fd35a8e8644f4a0fb77e96fe">bk_is32</a>(pbkh)) {
<a name="l12981"></a>12981       pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) (pbkh + 1);
<a name="l12982"></a>12982       strncpy((<span class="keywordtype">char</span> *) &amp;dname, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12983"></a>12983       <span class="keywordflow">do</span> {
<a name="l12984"></a>12984          <span class="keywordflow">if</span> (*((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>) == dname) {
<a name="l12985"></a>12985             *((<span class="keywordtype">void</span> **) pdata) = pbk32 + 1;
<a name="l12986"></a>12986             <span class="keywordflow">if</span> (<a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a> &amp; 0xFF] == 0)
<a name="l12987"></a>12987                *bklen = pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>;
<a name="l12988"></a>12988             <span class="keywordflow">else</span>
<a name="l12989"></a>12989                *bklen = pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a> / <a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a> &amp; 0xFF];
<a name="l12990"></a>12990 
<a name="l12991"></a>12991             *bktype = pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a>;
<a name="l12992"></a>12992             <span class="keywordflow">return</span> 1;
<a name="l12993"></a>12993          }
<a name="l12994"></a>12994          pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) ((<span class="keywordtype">char</span> *) (pbk32 + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>));
<a name="l12995"></a>12995       } <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbk32 - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbkh &lt; pbkh-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + <span class="keyword">sizeof</span>(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>));
<a name="l12996"></a>12996    } <span class="keywordflow">else</span> {
<a name="l12997"></a>12997       pbk = (<a class="code" href="structBANK.html">BANK</a> *) (pbkh + 1);
<a name="l12998"></a>12998       strncpy((<span class="keywordtype">char</span> *) &amp;dname, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12999"></a>12999       <span class="keywordflow">do</span> {
<a name="l13000"></a>13000          <span class="keywordflow">if</span> (*((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>) == dname) {
<a name="l13001"></a>13001             *((<span class="keywordtype">void</span> **) pdata) = pbk + 1;
<a name="l13002"></a>13002             <span class="keywordflow">if</span> (<a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a> &amp; 0xFF] == 0)
<a name="l13003"></a>13003                *bklen = pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>;
<a name="l13004"></a>13004             <span class="keywordflow">else</span>
<a name="l13005"></a>13005                *bklen = pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a> / <a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a> &amp; 0xFF];
<a name="l13006"></a>13006 
<a name="l13007"></a>13007             *bktype = pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a>;
<a name="l13008"></a>13008             <span class="keywordflow">return</span> 1;
<a name="l13009"></a>13009          }
<a name="l13010"></a>13010          pbk = (<a class="code" href="structBANK.html">BANK</a> *) ((<span class="keywordtype">char</span> *) (pbk + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>));
<a name="l13011"></a>13011       } <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbk - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbkh &lt; pbkh-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + <span class="keyword">sizeof</span>(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>));
<a name="l13012"></a>13012    }
<a name="l13013"></a>13013 
<a name="l13014"></a>13014    <span class="comment">/* bank not found */</span>
<a name="l13015"></a>13015    *((<span class="keywordtype">void</span> **) pdata) = NULL;
<a name="l13016"></a>13016    <span class="keywordflow">return</span> 0;
<a name="l13017"></a>13017 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gac6fadde40824dbf7bd70abedd29be2bd"></a><!-- doxytag: member="midas.c::bk_init" ref="gac6fadde40824dbf7bd70abedd29be2bd" args="(void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bk_init </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes an event for Midas banks structure. Before banks can be created in an event, <a class="el" href="group__msectionh.html#ga6a2d6aced3ec658234d4c6ab0ba043fb">bk_init()</a> has to be called first. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the area of event </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12623">12623</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l01421">BANK_FORMAT_VERSION</a>.</p>

<p>Referenced by <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="slowcontrol_2ge__ln2_2frontend_8c_source.html#l00230">ge_ln2_read()</a>, <a class="el" href="deferredfe_8c_source.html#l00365">read_deferred_event()</a>, <a class="el" href="mantrigfe_8c_source.html#l00317">read_mantrig_event()</a>, <a class="el" href="midas_2examples_2experiment_2frontend_8c_source.html#l00407">read_scaler_event()</a>, <a class="el" href="slowcontrol_2separator_2frontend_8c_source.html#l00226">read_separator_event()</a>, <a class="el" href="slowcontrol_2temperature__probe_2frontend_8c_source.html#l00219">read_temperature_probe()</a>, <a class="el" href="tinyfe_8c_source.html#l00266">read_tiny_event()</a>, <a class="el" href="midas_2examples_2experiment_2frontend_8c_source.html#l00337">read_trigger_event()</a>, <a class="el" href="slowcontrol_2vacuum__sensor_2frontend_8c_source.html#l00295">vacuum_gauge_read()</a>, <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>, and <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12624"></a>12624 {
<a name="l12625"></a>12625    ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;data_size = 0;
<a name="l12626"></a>12626    ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;flags = <a class="code" href="group__mbank.html#gaee768d2c28265eb2b34227d7eae57a18">BANK_FORMAT_VERSION</a>;
<a name="l12627"></a>12627 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gae7cbf587db63fcdf66dd18b29f08b6d2"></a><!-- doxytag: member="midas.c::bk_init32" ref="gae7cbf587db63fcdf66dd18b29f08b6d2" args="(void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bk_init32 </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Initializes an event for Midas banks structure for large bank size (&gt; 32KBytes) Before banks can be created in an event, <a class="el" href="group__msectionh.html#ga54b6fd483a10f6b7f134e5203e53a406">bk_init32()</a> has to be called first. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the area of event </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12664">12664</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l01422">BANK_FORMAT_32BIT</a>, and <a class="el" href="midas_8h_source.html#l01421">BANK_FORMAT_VERSION</a>.</p>

<p>Referenced by <a class="el" href="dt5720__module_8c_source.html#l00271">dt5720_read()</a>, <a class="el" href="ebuser_8cpp_source.html#l00259">eb_user()</a>, <a class="el" href="mucap__compress_8cpp_source.html#l00013">main()</a>, <a class="el" href="new__fadc_8cpp_source.html#l00436">new_fadc_read()</a>, <a class="el" href="largefe_8c_source.html#l00263">read_large_event()</a>, <a class="el" href="crate3_2crate_8cpp_source.html#l00593">read_periodic_event()</a>, <a class="el" href="crate3_2crate_8cpp_source.html#l00549">read_trigger_event()</a>, <a class="el" href="crate3_2rpc__slave_8cpp_source.html#l00049">rpc_end_of_cycle()</a>, <a class="el" href="v1724__module_8c_source.html#l00663">v1724_read()</a>, and <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12665"></a>12665 {
<a name="l12666"></a>12666    ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;data_size = 0;
<a name="l12667"></a>12667    ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;flags = <a class="code" href="group__mbank.html#gaee768d2c28265eb2b34227d7eae57a18">BANK_FORMAT_VERSION</a> | <a class="code" href="group__mbank.html#gadc7ea449441f9c3bbe110cf41333bc7b">BANK_FORMAT_32BIT</a>;
<a name="l12668"></a>12668 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga26f7eb917da58d12a7616ad02aab83da"></a><!-- doxytag: member="midas.c::bk_is32" ref="ga26f7eb917da58d12a7616ad02aab83da" args="(void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> bk_is32 </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox </p>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12633">12633</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l01422">BANK_FORMAT_32BIT</a>.</p>

<p>Referenced by <a class="el" href="fal_8c_source.html#l01113">ascii_write()</a>, <a class="el" href="midas_8c_source.html#l12973">bk_find()</a>, <a class="el" href="midas_8c_source.html#l12880">bk_list()</a>, <a class="el" href="midas_8c_source.html#l12924">bk_locate()</a>, <a class="el" href="fal_8c_source.html#l00863">dump_write()</a>, <a class="el" href="crate6__CAEN__TDC_2mfe__mucap_8c_source.html#l00842">update_odb()</a>, <a class="el" href="mana_8cpp_source.html#l02526">write_event_ascii()</a>, <a class="el" href="fal_8c_source.html#l03085">write_event_hbook()</a>, <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>, <a class="el" href="fal_8c_source.html#l02785">write_event_odb()</a>, <a class="el" href="ybos_8c_source.html#l02923">yb_any_bank_display()</a>, and <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12636"></a>12636          : <a class="code" href="group__msectionh.html#ga75339a20fd35a8e8644f4a0fb77e96fe">bk_is32</a>
<a name="l12637"></a>12637 
<a name="l12638"></a>12638   Purpose: Return <span class="keyword">true</span> <span class="keywordflow">if</span> <a class="code" href="MyModule_8cpp.html#aebb1bc7b6b5a2c4ac668ccd06329e1f7">banks</a> inside <span class="keyword">event</span> are 32-bit <a class="code" href="MyModule_8cpp.html#aebb1bc7b6b5a2c4ac668ccd06329e1f7">banks</a>
<a name="l12639"></a>12639 
<a name="l12640"></a>12640   Input:
<a name="l12641"></a>12641     <span class="keywordtype">void</span>   *<span class="keyword">event</span>           pointer to the <span class="keyword">event</span>
<a name="l12642"></a>12642 
<a name="l12643"></a>12643   Output:
<a name="l12644"></a>12644     none
<a name="l12645"></a>12645 
<a name="l12646"></a>12646   Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l12647"></a>12647     none
<a name="l12648"></a>12648 
<a name="l12649"></a>12649 \********************************************************************/
<a name="l12650"></a>12650 {
<a name="l12651"></a>12651    <span class="keywordflow">return</span> ((((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;flags &amp; <a class="code" href="group__mbank.html#gadc7ea449441f9c3bbe110cf41333bc7b">BANK_FORMAT_32BIT</a>) &gt; 0);
<a name="l12652"></a>12652 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab6012589013da85b128d8443501a4a44"></a><!-- doxytag: member="midas.c::bk_iterate" ref="gab6012589013da85b128d8443501a4a44" args="(void *event, BANK **pbk, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_iterate </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structBANK.html">BANK</a> **&nbsp;</td>
          <td class="paramname"> <em>pbk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Iterates through banks inside an event. The function can be used to enumerate all banks of an event. The returned pointer to the bank header has following structure: </p>
<div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span>{
<span class="keywordtype">char</span>   <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>[4];
<a class="code" href="unionWORD.html">WORD</a>   <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>;
<a class="code" href="unionWORD.html">WORD</a>   <a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a>;
} <a class="code" href="structBANK.html">BANK</a>;
</pre></div><p> where type is a TID_xxx value and data_size the size of the bank in bytes. </p>
<div class="fragment"><pre class="fragment"><a class="code" href="structBANK.html">BANK</a> *pbk;
<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>  <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a>;
<span class="keywordtype">void</span> *pdata;
<span class="keywordtype">char</span> <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>[5];
pbk = NULL;
<span class="keywordflow">do</span>
{
 size = <a class="code" href="group__msectionh.html#gab47ee14db38356b8392632ba94b559d8">bk_iterate</a>(event, &amp;pbk, &amp;pdata);
 <span class="keywordflow">if</span> (pbk == NULL)
  <span class="keywordflow">break</span>;
 *((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *)name) = *((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *)(pbk)-&gt;name);
 name[4] = 0;
 printf(<span class="stringliteral">&quot;bank %s found\n&quot;</span>, name);
} <span class="keywordflow">while</span>(<a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>Pointer to data area of event. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pbk</em>&nbsp;</td><td>pointer to the bank header, must be NULL for the first call to this function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>Pointer to the bank header, must be NULL for the first call to this function </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Size of bank in bytes </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13055">13055</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00904">ALIGN8</a>, <a class="el" href="midas_8h_source.html#l01432">BANK::data_size</a>, and <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>.</p>

<p>Referenced by <a class="el" href="fal_8c_source.html#l01113">ascii_write()</a>, <a class="el" href="midas_8c_source.html#l12880">bk_list()</a>, <a class="el" href="fal_8c_source.html#l00863">dump_write()</a>, <a class="el" href="crate6__CAEN__TDC_2mfe__mucap_8c_source.html#l00842">update_odb()</a>, <a class="el" href="mana_8cpp_source.html#l02526">write_event_ascii()</a>, <a class="el" href="fal_8c_source.html#l03085">write_event_hbook()</a>, <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>, <a class="el" href="fal_8c_source.html#l02785">write_event_odb()</a>, and <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l13056"></a>13056 {
<a name="l13057"></a>13057    <span class="keywordflow">if</span> (*pbk == NULL)
<a name="l13058"></a>13058       *pbk = (<a class="code" href="structBANK.html">BANK</a> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1);
<a name="l13059"></a>13059    <span class="keywordflow">else</span>
<a name="l13060"></a>13060       *pbk = (<a class="code" href="structBANK.html">BANK</a> *) ((<span class="keywordtype">char</span> *) (*pbk + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>((*pbk)-&gt;data_size));
<a name="l13061"></a>13061 
<a name="l13062"></a>13062    *((<span class="keywordtype">void</span> **) pdata) = (*pbk) + 1;
<a name="l13063"></a>13063 
<a name="l13064"></a>13064    <span class="keywordflow">if</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) * pbk - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) event &gt;=
<a name="l13065"></a>13065        ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + sizeof(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>)) {
<a name="l13066"></a>13066       *pbk = *((<a class="code" href="structBANK.html">BANK</a> **) pdata) = NULL;
<a name="l13067"></a>13067       <span class="keywordflow">return</span> 0;
<a name="l13068"></a>13068    }
<a name="l13069"></a>13069 
<a name="l13070"></a>13070    <span class="keywordflow">return</span> (*pbk)-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>;
<a name="l13071"></a>13071 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9aa2fd6b7a4c378065d052cd43c14146"></a><!-- doxytag: member="midas.c::bk_iterate32" ref="ga9aa2fd6b7a4c378065d052cd43c14146" args="(void *event, BANK32 **pbk, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_iterate32 </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structBANK32.html">BANK32</a> **&nbsp;</td>
          <td class="paramname"> <em>pbk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox </p>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13078">13078</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00904">ALIGN8</a>, <a class="el" href="midas_8h_source.html#l01438">BANK32::data_size</a>, and <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>.</p>

<p>Referenced by <a class="el" href="fal_8c_source.html#l01113">ascii_write()</a>, <a class="el" href="midas_8c_source.html#l12880">bk_list()</a>, <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>, <a class="el" href="fal_8c_source.html#l00863">dump_write()</a>, <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>, <a class="el" href="crate3_2crate_8cpp_source.html#l00525">print_diag_output()</a>, <a class="el" href="crate6__CAEN__TDC_2mfe__mucap_8c_source.html#l00842">update_odb()</a>, <a class="el" href="mana_8cpp_source.html#l02526">write_event_ascii()</a>, <a class="el" href="fal_8c_source.html#l03085">write_event_hbook()</a>, <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>, <a class="el" href="fal_8c_source.html#l02785">write_event_odb()</a>, and <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l13081"></a>13081          : <a class="code" href="group__msectionh.html#gab47ee14db38356b8392632ba94b559d8">bk_iterate</a>
<a name="l13082"></a>13082 
<a name="l13083"></a>13083   Purpose: Iterate through 32 bit MIDAS <a class="code" href="MyModule_8cpp.html#aebb1bc7b6b5a2c4ac668ccd06329e1f7">banks</a> inside an <span class="keyword">event</span>
<a name="l13084"></a>13084 
<a name="l13085"></a>13085   Input:
<a name="l13086"></a>13086     <span class="keywordtype">void</span>   *<span class="keyword">event</span>           pointer to the <span class="keyword">event</span>
<a name="l13087"></a>13087     <a class="code" href="structBANK.html">BANK</a>   **pbk32          must be NULL <span class="keywordflow">for</span> the first <a class="code" href="examples_2macro_2midas__macro_8h.html#a01f23030e8f35ef3c830e0bbb53e91bc">call</a> to <a class="code" href="group__msectionh.html#gab47ee14db38356b8392632ba94b559d8">bk_iterate</a>
<a name="l13088"></a>13088 
<a name="l13089"></a>13089   Output:
<a name="l13090"></a>13090     <a class="code" href="structBANK.html">BANK</a>   **pbk            pointer to the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> header
<a name="l13091"></a>13091     <span class="keywordtype">void</span>   *pdata           pointer to <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> area of the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a>
<a name="l13092"></a>13092 
<a name="l13093"></a>13093   Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l13094"></a>13094     <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>    <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a> of the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bytes
<a name="l13095"></a>13095 
<a name="l13096"></a>13096 \********************************************************************/
<a name="l13097"></a>13097 {
<a name="l13098"></a>13098    <span class="keywordflow">if</span> (*pbk == NULL)
<a name="l13099"></a>13099       *pbk = (<a class="code" href="structBANK32.html">BANK32</a> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1);
<a name="l13100"></a>13100    <span class="keywordflow">else</span>
<a name="l13101"></a>13101       *pbk = (<a class="code" href="structBANK32.html">BANK32</a> *) ((<span class="keywordtype">char</span> *) (*pbk + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>((*pbk)-&gt;data_size));
<a name="l13102"></a>13102 
<a name="l13103"></a>13103    *((<span class="keywordtype">void</span> **) pdata) = (*pbk) + 1;
<a name="l13104"></a>13104 
<a name="l13105"></a>13105    <span class="keywordflow">if</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) * pbk - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) event &gt;=
<a name="l13106"></a>13106        ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + sizeof(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>)) {
<a name="l13107"></a>13107       *pbk = *((<a class="code" href="structBANK32.html">BANK32</a> **) pdata) = NULL;
<a name="l13108"></a>13108       <span class="keywordflow">return</span> 0;
<a name="l13109"></a>13109    }
<a name="l13110"></a>13110 
<a name="l13111"></a>13111    <span class="keywordflow">return</span> (*pbk)-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>;
<a name="l13112"></a>13112 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga4d8a0ef23239ae478544fa96a0e98a33"></a><!-- doxytag: member="midas.c::bk_list" ref="ga4d8a0ef23239ae478544fa96a0e98a33" args="(void *event, char *bklist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_list </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bklist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Extract the MIDAS bank name listing of an event. The bklist should be dimensioned with STRING_BANKLIST_MAX which corresponds to a max of BANKLIST_MAX banks (<a class="el" href="generate-MODULES_8h.html#a00d5923485ea4382260221681abdb205">midas.h</a>: 32 banks max). </p>
<div class="fragment"><pre class="fragment"><a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="experiment_2adccalib_8c.html#a21e1931a7c367947aeec0daa9548b6e7">adc_calib</a>(<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *pheader, <span class="keywordtype">void</span> *pevent)
{
  <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>    n_adc, nbanks;
  <a class="code" href="unionWORD.html">WORD</a>   *pdata;
  <span class="keywordtype">char</span>   banklist[<a class="code" href="group__midasincludecode.html#gafec0c8869c3f66ea7d186ec4b7682fc0">STRING_BANKLIST_MAX</a>];

  <span class="comment">// Display # of banks and list of banks in the event</span>
  nbanks = <a class="code" href="group__msectionh.html#ga551777dd98f469faa141175340d7a185">bk_list</a>(pevent, banklist);
  printf(<span class="stringliteral">&quot;#banks:%d List:%s\n&quot;</span>, nbanks, banklist);

  <span class="comment">// look for ADC0 bank, return if not present</span>
  n_adc = <a class="code" href="group__msectionh.html#ga191a8ec88c5ff3512bc22d7fa6d1f5dc">bk_locate</a>(pevent, <span class="stringliteral">&quot;ADC0&quot;</span>, &amp;pdata);
  ...
}
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bklist</em>&nbsp;</td><td>returned ASCII string, has to be booked with STRING_BANKLIST_MAX. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of bank found in this event. </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12880">12880</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00688">BANKLIST_MAX</a>, <a class="el" href="midas_8c_source.html#l12633">bk_is32()</a>, <a class="el" href="midas_8c_source.html#l13055">bk_iterate()</a>, <a class="el" href="midas_8c_source.html#l13078">bk_iterate32()</a>, <a class="el" href="lrs1821_8h_source.html#l00218">cm_msg</a>, <a class="el" href="lrs1821_8h_source.html#l00221">MINFO</a>, <a class="el" href="midas_8h_source.html#l01430">BANK::name</a>, <a class="el" href="midas_8h_source.html#l01436">BANK32::name</a>, and <a class="el" href="ybos_8c_source.html#l00373">size</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>, <a class="el" href="mdump_8c_source.html#l00175">replog()</a>, and <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12881"></a>12881 {                               <span class="comment">/* Full event */</span>
<a name="l12882"></a>12882    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> nbk, <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a>;
<a name="l12883"></a>12883    <a class="code" href="structBANK.html">BANK</a> *pmbk = NULL;
<a name="l12884"></a>12884    <a class="code" href="structBANK32.html">BANK32</a> *pmbk32 = NULL;
<a name="l12885"></a>12885    <span class="keywordtype">char</span> *pdata;
<a name="l12886"></a>12886 
<a name="l12887"></a>12887    <span class="comment">/* compose bank list */</span>
<a name="l12888"></a>12888    bklist[0] = 0;
<a name="l12889"></a>12889    nbk = 0;
<a name="l12890"></a>12890    <span class="keywordflow">do</span> {
<a name="l12891"></a>12891       <span class="comment">/* scan all banks for bank name only */</span>
<a name="l12892"></a>12892       <span class="keywordflow">if</span> (<a class="code" href="group__msectionh.html#ga75339a20fd35a8e8644f4a0fb77e96fe">bk_is32</a>(event)) {
<a name="l12893"></a>12893          size = <a class="code" href="group__msectionh.html#ga6ef3064c432f60af815e109bbf6acbd3">bk_iterate32</a>(event, &amp;pmbk32, &amp;pdata);
<a name="l12894"></a>12894          <span class="keywordflow">if</span> (pmbk32 == NULL)
<a name="l12895"></a>12895             <span class="keywordflow">break</span>;
<a name="l12896"></a>12896       } <span class="keywordflow">else</span> {
<a name="l12897"></a>12897          size = <a class="code" href="group__msectionh.html#gab47ee14db38356b8392632ba94b559d8">bk_iterate</a>(event, &amp;pmbk, &amp;pdata);
<a name="l12898"></a>12898          <span class="keywordflow">if</span> (pmbk == NULL)
<a name="l12899"></a>12899             <span class="keywordflow">break</span>;
<a name="l12900"></a>12900       }
<a name="l12901"></a>12901       nbk++;
<a name="l12902"></a>12902 
<a name="l12903"></a>12903       <span class="keywordflow">if</span> (nbk &gt; <a class="code" href="group__midasincludecode.html#gaab64ba61449c513d2c3a2f4884a38d06">BANKLIST_MAX</a>) {
<a name="l12904"></a>12904          <a class="code" href="lrs1821_8h.html#aa6f8a5999f0a072ce20ab87bae8a9eb5">cm_msg</a>(<a class="code" href="lrs1821_8h.html#a6e27d8876a43afce3ee4dd16527cbb9e">MINFO</a>, <span class="stringliteral">&quot;bk_list&quot;</span>, <span class="stringliteral">&quot;over %i banks -&gt; truncated&quot;</span>, <a class="code" href="group__midasincludecode.html#gaab64ba61449c513d2c3a2f4884a38d06">BANKLIST_MAX</a>);
<a name="l12905"></a>12905          <span class="keywordflow">return</span> (nbk - 1);
<a name="l12906"></a>12906       }
<a name="l12907"></a>12907       <span class="keywordflow">if</span> (<a class="code" href="group__msectionh.html#ga75339a20fd35a8e8644f4a0fb77e96fe">bk_is32</a>(event))
<a name="l12908"></a>12908          strncat(bklist, (<span class="keywordtype">char</span> *) pmbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>, 4);
<a name="l12909"></a>12909       <span class="keywordflow">else</span>
<a name="l12910"></a>12910          strncat(bklist, (<span class="keywordtype">char</span> *) pmbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>, 4);
<a name="l12911"></a>12911    }
<a name="l12912"></a>12912    <span class="keywordflow">while</span> (1);
<a name="l12913"></a>12913    <span class="keywordflow">return</span> (nbk);
<a name="l12914"></a>12914 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gafe085ddb11bdcff4ca461224254289ef"></a><!-- doxytag: member="midas.c::bk_locate" ref="gafe085ddb11bdcff4ca461224254289ef" args="(void *event, const char *name, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_locate </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Locates a MIDAS bank of given name inside an event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to current composed event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>bank name to look for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to data area of bank, NULL if bank not found </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of values inside the bank </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12924">12924</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00904">ALIGN8</a>, <a class="el" href="midas_8c_source.html#l12633">bk_is32()</a>, <a class="el" href="midas_8h_source.html#l01432">BANK::data_size</a>, <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>, <a class="el" href="midas_8h_source.html#l01438">BANK32::data_size</a>, <a class="el" href="midas_8h_source.html#l01430">BANK::name</a>, <a class="el" href="midas_8h_source.html#l01436">BANK32::name</a>, <a class="el" href="midas_8c_source.html#l00749">tid_size</a>, <a class="el" href="midas_8h_source.html#l01431">BANK::type</a>, and <a class="el" href="midas_8h_source.html#l01437">BANK32::type</a>.</p>

<p>Referenced by <a class="el" href="experiment_2adccalib_8c_source.html#l00139">adc_calib()</a>, <a class="el" href="experiment_2adcsum_8c_source.html#l00126">adc_summing()</a>, <a class="el" href="miniexp_2analyzer_8c_source.html#l00294">analyze_trigger_event()</a>, <a class="el" href="mzdump_8c_source.html#l00149">decompress()</a>, <a class="el" href="MqlArray_8h_source.html#l00126">MqlArray&lt; T &gt;::fromBank()</a>, <a class="el" href="MCaenCompProcessRaw_8cpp_source.html#l00367">make_caen()</a>, <a class="el" href="MCaenCompProcessRaw_8cpp_source.html#l00612">make_comp()</a>, <a class="el" href="MDQ__FADCBufferOverflow_8cpp_source.html#l00138">MDQ_FADCBufferOverflow()</a>, <a class="el" href="MDQ__FADCPacketLoss_8cpp_source.html#l00138">MDQ_FADCPacketLoss()</a>, <a class="el" href="MDQ__TDCCheck_8cpp_source.html#l00189">MDQ_TDCCheck()</a>, <a class="el" href="MMuPC1AnalysisC_8cpp_source.html#l00092">MMuPC1AnalysisC()</a>, <a class="el" href="MMuSCAnalysisC_8cpp_source.html#l00126">MMuSCAnalysisC()</a>, <a class="el" href="MOctalFADCBufferOverflow_8cpp_source.html#l00100">MOctalFADCBufferOverflow()</a>, <a class="el" href="MOctalFADCPacketLoss_8cpp_source.html#l00111">MOctalFADCPacketLoss()</a>, <a class="el" href="MDT5720ProcessRaw_8cpp_source.html#l00113">module_event_caen()</a>, <a class="el" href="MVacuumHisto_8cpp_source.html#l00075">MVacuumHisto()</a>, <a class="el" href="res__analysis_8cxx_source.html#l00266">process_event()</a>, <a class="el" href="TWFDBankReader_8cpp_source.html#l00045">TWFDBankReader::ProcessEvent()</a>, <a class="el" href="analyzer_2src_2FADC_2TOctalFADCBankReader_8cpp_source.html#l00027">TOctalFADCBankReader::ProcessEvent()</a>, <a class="el" href="experiment_2scaler_8c_source.html#l00082">scaler_accum()</a>, <a class="el" href="ybos_8c_source.html#l03576">yb_file_recompose()</a>, <a class="el" href="ybos_8c_source.html#l03657">yb_ymfile_open()</a>, and <a class="el" href="ybos_8c_source.html#l03756">yb_ymfile_update()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12925"></a>12925 {
<a name="l12926"></a>12926    <a class="code" href="structBANK.html">BANK</a> *pbk;
<a name="l12927"></a>12927    <a class="code" href="structBANK32.html">BANK32</a> *pbk32;
<a name="l12928"></a>12928    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> dname;
<a name="l12929"></a>12929 
<a name="l12930"></a>12930    <span class="keywordflow">if</span> (<a class="code" href="group__msectionh.html#ga75339a20fd35a8e8644f4a0fb77e96fe">bk_is32</a>(event)) {
<a name="l12931"></a>12931       pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) (((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event) + 1);
<a name="l12932"></a>12932       strncpy((<span class="keywordtype">char</span> *) &amp;dname, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12933"></a>12933       <span class="keywordflow">do</span> {
<a name="l12934"></a>12934          <span class="keywordflow">if</span> (*((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk32-&gt;<a class="code" href="structBANK32.html#a048e3afc084c62bffb7af80f110c30c3">name</a>) == dname) {
<a name="l12935"></a>12935             *((<span class="keywordtype">void</span> **) pdata) = pbk32 + 1;
<a name="l12936"></a>12936             <span class="keywordflow">if</span> (<a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a> &amp; 0xFF] == 0)
<a name="l12937"></a>12937                <span class="keywordflow">return</span> pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>;
<a name="l12938"></a>12938             <span class="keywordflow">return</span> pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a> / <a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a> &amp; 0xFF];
<a name="l12939"></a>12939          }
<a name="l12940"></a>12940          pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) ((<span class="keywordtype">char</span> *) (pbk32 + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>));
<a name="l12941"></a>12941       } <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbk32 - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) event &lt;
<a name="l12942"></a>12942                ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + sizeof(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>));
<a name="l12943"></a>12943    } <a class="code" href="patch__mevb_8cpp.html#a0544c3fe466e421738dae463968b70ba">else</a> {
<a name="l12944"></a>12944       pbk = (<a class="code" href="structBANK.html">BANK</a> *) (((BANK_HEADER *) event) + 1);
<a name="l12945"></a>12945       strncpy((<span class="keywordtype">char</span> *) &amp;dname, <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>, 4);
<a name="l12946"></a>12946       <span class="keywordflow">do</span> {
<a name="l12947"></a>12947          <span class="keywordflow">if</span> (*((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk-&gt;<a class="code" href="structBANK.html#a39a277bc7edde0d3e783ef0d93f44c1e">name</a>) == dname) {
<a name="l12948"></a>12948             *((<span class="keywordtype">void</span> **) pdata) = pbk + 1;
<a name="l12949"></a>12949             <span class="keywordflow">if</span> (<a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a> &amp; 0xFF] == 0)
<a name="l12950"></a>12950                <span class="keywordflow">return</span> pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>;
<a name="l12951"></a>12951             <span class="keywordflow">return</span> pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a> / <a class="code" href="group__midasincludecode.html#ga97cc1898bd6240261b5418bcab5a6d35">tid_size</a>[pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a> &amp; 0xFF];
<a name="l12952"></a>12952          }
<a name="l12953"></a>12953          pbk = (<a class="code" href="structBANK.html">BANK</a> *) ((<span class="keywordtype">char</span> *) (pbk + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>));
<a name="l12954"></a>12954       } <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbk - (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) event &lt;
<a name="l12955"></a>12955                ((BANK_HEADER *) event)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + sizeof(BANK_HEADER));
<a name="l12956"></a>12956    }
<a name="l12957"></a>12957 
<a name="l12958"></a>12958    <span class="comment">/* bank not found */</span>
<a name="l12959"></a>12959    *((<span class="keywordtype">void</span> **) pdata) = NULL;
<a name="l12960"></a>12960    return 0;
<a name="l12961"></a>12961 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga8fc93de36e62c4328cb6581be7f42a0f"></a><!-- doxytag: member="midas.c::bk_size" ref="ga8fc93de36e62c4328cb6581be7f42a0f" args="(void *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_size </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the size of an event containing banks. The total size of an event is the value returned by <a class="el" href="group__msectionh.html#ga825db64c9ef9b4656698c890fca37c05">bk_size()</a> plus the size of the event header (sizeof(EVENT_HEADER)). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to the area of event </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of bytes contained in data area of event </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l12678">12678</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>Referenced by <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="mzdump_8c_source.html#l00149">decompress()</a>, <a class="el" href="ebuser_8cpp_source.html#l00259">eb_user()</a>, <a class="el" href="slowcontrol_2ge__ln2_2frontend_8c_source.html#l00230">ge_ln2_read()</a>, <a class="el" href="mucap__compress_8cpp_source.html#l00013">main()</a>, <a class="el" href="fal_8c_source.html#l03459">process_event()</a>, <a class="el" href="deferredfe_8c_source.html#l00365">read_deferred_event()</a>, <a class="el" href="largefe_8c_source.html#l00263">read_large_event()</a>, <a class="el" href="mantrigfe_8c_source.html#l00317">read_mantrig_event()</a>, <a class="el" href="crate3_2crate_8cpp_source.html#l00593">read_periodic_event()</a>, <a class="el" href="midas_2examples_2experiment_2frontend_8c_source.html#l00407">read_scaler_event()</a>, <a class="el" href="slowcontrol_2separator_2frontend_8c_source.html#l00226">read_separator_event()</a>, <a class="el" href="tinyfe_8c_source.html#l00266">read_tiny_event()</a>, <a class="el" href="crate3_2crate_8cpp_source.html#l00549">read_trigger_event()</a>, <a class="el" href="crate3_2rpc__slave_8cpp_source.html#l00049">rpc_end_of_cycle()</a>, <a class="el" href="slowcontrol_2vacuum__sensor_2frontend_8c_source.html#l00295">vacuum_gauge_read()</a>, <a class="el" href="mana_8cpp_source.html#l02743">write_event_midas()</a>, and <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l12679"></a>12679 {
<a name="l12680"></a>12680    <span class="keywordflow">return</span> ((<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event)-&gt;data_size + <span class="keyword">sizeof</span>(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>);
<a name="l12681"></a>12681 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga44b7381af9b91fbdf2f6d59f55451ea1"></a><!-- doxytag: member="midas.c::bk_swap" ref="ga44b7381af9b91fbdf2f6d59f55451ea1" args="(void *event, BOOL force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> bk_swap </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&nbsp;</td>
          <td class="paramname"> <em>force</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Swaps bytes from little endian to big endian or vice versa for a whole event.</p>
<p>An event contains a flag which is set by <a class="el" href="group__msectionh.html#ga6a2d6aced3ec658234d4c6ab0ba043fb">bk_init()</a> to identify the endian format of an event. If force is FALSE, this flag is evaluated and the event is only swapped if it is in the "wrong" format for this system. An event can be swapped to the "wrong" format on purpose for example by a front-end which wants to produce events in a "right" format for a back-end analyzer which has different byte ordering. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>pointer to data area of event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>force</em>&nbsp;</td><td>If TRUE, the event is always swapped, if FALSE, the event is only swapped if it is in the wrong format. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1==event has been swap, 0==event has not been swapped. </dd></dl>

<p>Definition at line <a class="el" href="midas_8c_source.html#l13132">13132</a> of file <a class="el" href="midas_8c_source.html">midas.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00904">ALIGN8</a>, <a class="el" href="midas_8h_source.html#l01422">BANK_FORMAT_32BIT</a>, <a class="el" href="midas_8h_source.html#l00956">CM_SUCCESS</a>, <a class="el" href="midas_8h_source.html#l01432">BANK::data_size</a>, <a class="el" href="midas_8h_source.html#l01438">BANK32::data_size</a>, <a class="el" href="midas_8h_source.html#l01425">BANK_HEADER::data_size</a>, <a class="el" href="msystem_8h_source.html#l00221">DWORD_SWAP</a>, <a class="el" href="midas_8h_source.html#l01426">BANK_HEADER::flags</a>, <a class="el" href="midas_8h_source.html#l00615">PTYPE</a>, <a class="el" href="msystem_8h_source.html#l00231">QWORD_SWAP</a>, <a class="el" href="midas_8h_source.html#l00742">TID_BOOL</a>, <a class="el" href="midas_8h_source.html#l00744">TID_DOUBLE</a>, <a class="el" href="midas_8h_source.html#l00740">TID_DWORD</a>, <a class="el" href="midas_8h_source.html#l00743">TID_FLOAT</a>, <a class="el" href="midas_8h_source.html#l00741">TID_INT</a>, <a class="el" href="midas_8h_source.html#l00739">TID_SHORT</a>, <a class="el" href="midas_8h_source.html#l00738">TID_WORD</a>, <a class="el" href="midas_8h_source.html#l01431">BANK::type</a>, <a class="el" href="midas_8h_source.html#l01437">BANK32::type</a>, <a class="el" href="mana_8cpp_source.html#l00675">type</a>, and <a class="el" href="msystem_8h_source.html#l00214">WORD_SWAP</a>.</p>

<p>Referenced by <a class="el" href="fal_8c_source.html#l01113">ascii_write()</a>, <a class="el" href="fal_8c_source.html#l00863">dump_write()</a>, <a class="el" href="mevb_8cpp_source.html#l00471">eb_mfragment_add()</a>, <a class="el" href="mana_8cpp_source.html#l03596">process_event()</a>, <a class="el" href="overall_8cpp_source.html#l00024">read_midas_event()</a>, <a class="el" href="mevb_8cpp_source.html#l00916">source_scan()</a>, and <a class="el" href="ybos_8c_source.html#l02424">yb_any_event_swap()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l13133"></a>13133 {
<a name="l13134"></a>13134    <a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *pbh;
<a name="l13135"></a>13135    <a class="code" href="structBANK.html">BANK</a> *pbk;
<a name="l13136"></a>13136    <a class="code" href="structBANK32.html">BANK32</a> *pbk32;
<a name="l13137"></a>13137    <span class="keywordtype">void</span> *pdata;
<a name="l13138"></a>13138    <a class="code" href="unionWORD.html">WORD</a> <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>;
<a name="l13139"></a>13139    <a class="code" href="group__midasincludecode.html#ga239c7f0d40651c3e419c5b9651507d14">BOOL</a> b32;
<a name="l13140"></a>13140 
<a name="l13141"></a>13141    pbh = (<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) event;
<a name="l13142"></a>13142 
<a name="l13143"></a>13143    <span class="comment">/* only swap if flags in high 16-bit */</span>
<a name="l13144"></a>13144    <span class="keywordflow">if</span> (pbh-&gt;<a class="code" href="group__midasincludecode.html#ga2e43050c8084b34fa5389bfd6945bb51">flags</a> &lt; 0x10000 &amp;&amp; !force)
<a name="l13145"></a>13145       <span class="keywordflow">return</span> 0;
<a name="l13146"></a>13146 
<a name="l13147"></a>13147    <span class="comment">/* swap bank header */</span>
<a name="l13148"></a>13148    <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(&amp;pbh-&gt;<a class="code" href="structBANK__HEADER.html#a5e55c7a38deab349e4819d3ac2fcd971">data_size</a>);
<a name="l13149"></a>13149    <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(&amp;pbh-&gt;<a class="code" href="group__midasincludecode.html#ga2e43050c8084b34fa5389bfd6945bb51">flags</a>);
<a name="l13150"></a>13150 
<a name="l13151"></a>13151    <span class="comment">/* check for 32bit banks */</span>
<a name="l13152"></a>13152    b32 = ((pbh-&gt;<a class="code" href="group__midasincludecode.html#ga2e43050c8084b34fa5389bfd6945bb51">flags</a> &amp; <a class="code" href="group__mbank.html#gadc7ea449441f9c3bbe110cf41333bc7b">BANK_FORMAT_32BIT</a>) &gt; 0);
<a name="l13153"></a>13153 
<a name="l13154"></a>13154    pbk = (<a class="code" href="structBANK.html">BANK</a> *) (pbh + 1);
<a name="l13155"></a>13155    pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) pbk;
<a name="l13156"></a>13156 
<a name="l13157"></a>13157    <span class="comment">/* scan event */</span>
<a name="l13158"></a>13158    <span class="keywordflow">while</span> ((<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pbk - (<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pbh &lt; (<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>) pbh-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a> + (<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>) sizeof(<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a>)) {
<a name="l13159"></a>13159       <span class="comment">/* swap bank header */</span>
<a name="l13160"></a>13160       <span class="keywordflow">if</span> (b32) {
<a name="l13161"></a>13161          <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(&amp;pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a>);
<a name="l13162"></a>13162          <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(&amp;pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>);
<a name="l13163"></a>13163          pdata = pbk32 + 1;
<a name="l13164"></a>13164          type = (<a class="code" href="unionWORD.html">WORD</a>) pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga24b3068dc97237c8525e2188586a2c1b">type</a>;
<a name="l13165"></a>13165       } <span class="keywordflow">else</span> {
<a name="l13166"></a>13166          <a class="code" href="group__msmacroh.html#ga4670ac841b4b8e3c3141a91a743bc61d">WORD_SWAP</a>(&amp;pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a>);
<a name="l13167"></a>13167          <a class="code" href="group__msmacroh.html#ga4670ac841b4b8e3c3141a91a743bc61d">WORD_SWAP</a>(&amp;pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>);
<a name="l13168"></a>13168          pdata = pbk + 1;
<a name="l13169"></a>13169          type = pbk-&gt;<a class="code" href="group__midasincludecode.html#ga91558478db8ed86d585715b8217ca72f">type</a>;
<a name="l13170"></a>13170       }
<a name="l13171"></a>13171 
<a name="l13172"></a>13172       <span class="comment">/* pbk points to next bank */</span>
<a name="l13173"></a>13173       <span class="keywordflow">if</span> (b32) {
<a name="l13174"></a>13174          pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) ((<span class="keywordtype">char</span> *) (pbk32 + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk32-&gt;<a class="code" href="group__midasincludecode.html#ga211ae680238a01caef15677d73d2ee9f">data_size</a>));
<a name="l13175"></a>13175          pbk = (<a class="code" href="structBANK.html">BANK</a> *) pbk32;
<a name="l13176"></a>13176       } <span class="keywordflow">else</span> {
<a name="l13177"></a>13177          pbk = (<a class="code" href="structBANK.html">BANK</a> *) ((<span class="keywordtype">char</span> *) (pbk + 1) + <a class="code" href="group__mmacroh.html#ga46bf3ace1698ee72389c30bc61d78686">ALIGN8</a>(pbk-&gt;<a class="code" href="group__midasincludecode.html#ga95afeb25db8deb1ea4cffd6ba50a6dcf">data_size</a>));
<a name="l13178"></a>13178          pbk32 = (<a class="code" href="structBANK32.html">BANK32</a> *) pbk;
<a name="l13179"></a>13179       }
<a name="l13180"></a>13180 
<a name="l13181"></a>13181       <span class="keywordflow">switch</span> (type) {
<a name="l13182"></a>13182       <span class="keywordflow">case</span> <a class="code" href="group__mdefineh.html#ga681cbe2c114c62cecccb882544d2debb">TID_WORD</a>:
<a name="l13183"></a>13183       <span class="keywordflow">case</span> <a class="code" href="group__mdefineh.html#ga4281dafac4285eae3e3c9be0a1d93c5a">TID_SHORT</a>:
<a name="l13184"></a>13184          <span class="keywordflow">while</span> ((<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pdata &lt; (<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pbk) {
<a name="l13185"></a>13185             <a class="code" href="group__msmacroh.html#ga4670ac841b4b8e3c3141a91a743bc61d">WORD_SWAP</a>(pdata);
<a name="l13186"></a>13186             pdata = (<span class="keywordtype">void</span> *) (((<a class="code" href="unionWORD.html">WORD</a> *) pdata) + 1);
<a name="l13187"></a>13187          }
<a name="l13188"></a>13188          <span class="keywordflow">break</span>;
<a name="l13189"></a>13189 
<a name="l13190"></a>13190       <span class="keywordflow">case</span> <a class="code" href="group__mdefineh.html#gafed9e8d519719d7347f9fdb3031201d1">TID_DWORD</a>:
<a name="l13191"></a>13191       <span class="keywordflow">case</span> <a class="code" href="group__mdefineh.html#gad950d5fde6dd3ea7eba59fb6760a38cb">TID_INT</a>:
<a name="l13192"></a>13192       <span class="keywordflow">case</span> <a class="code" href="group__mdefineh.html#ga252eb84661dfaa5959b5cb316117d696">TID_BOOL</a>:
<a name="l13193"></a>13193       <span class="keywordflow">case</span> <a class="code" href="group__mdefineh.html#gae932ec1b283f6c4b9c30a6d489beea7f">TID_FLOAT</a>:
<a name="l13194"></a>13194          <span class="keywordflow">while</span> ((<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pdata &lt; (<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pbk) {
<a name="l13195"></a>13195             <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(pdata);
<a name="l13196"></a>13196             pdata = (<span class="keywordtype">void</span> *) (((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pdata) + 1);
<a name="l13197"></a>13197          }
<a name="l13198"></a>13198          <span class="keywordflow">break</span>;
<a name="l13199"></a>13199 
<a name="l13200"></a>13200       <span class="keywordflow">case</span> <a class="code" href="group__mdefineh.html#ga13378fa303cf601b4b491866a6688362">TID_DOUBLE</a>:
<a name="l13201"></a>13201          <span class="keywordflow">while</span> ((<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pdata &lt; (<a class="code" href="group__midasincludecode.html#ga790216a8e71233fed28657b16a052e36">PTYPE</a>) pbk) {
<a name="l13202"></a>13202             <a class="code" href="group__msmacroh.html#ga8c6db33e3f8af89e87556d9f7a9b32a8">QWORD_SWAP</a>(pdata);
<a name="l13203"></a>13203             pdata = (<span class="keywordtype">void</span> *) (((<span class="keywordtype">double</span> *) pdata) + 1);
<a name="l13204"></a>13204          }
<a name="l13205"></a>13205          <span class="keywordflow">break</span>;
<a name="l13206"></a>13206       }
<a name="l13207"></a>13207    }
<a name="l13208"></a>13208 
<a name="l13209"></a>13209    <span class="keywordflow">return</span> <a class="code" href="group__err21.html#ga0180947941230d805f5dbb6f1801c17c">CM_SUCCESS</a>;
<a name="l13210"></a>13210 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ:Rootana by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

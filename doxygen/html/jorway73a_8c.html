<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ:Rootana: midas/drivers/bus/jorway73a.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>midas/drivers/bus/jorway73a.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="midas_8h_source.html">midas.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mcstd_8h_source.html">mcstd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="jorway73a_8h_source.html">jorway73a.h</a>&quot;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &quot;/usr/src/linux/include/scsi/sg.h&quot;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>

<p><a href="jorway73a_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#ad22121e0a09767a5cea4852f31c40106">SJY73A</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a7da18d77ccfa6cc0020cc81e7ed8e8b2">XDEFLG</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#aec7ccf0b9920b7811ff800c050bffb77">NAFCMD</a>(<a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, a, f)&nbsp;&nbsp;&nbsp;( (SJY_CAMAC_EXT((f),(<a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>),(a),1)) )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>&nbsp;&nbsp;&nbsp;sizeof(struct sg_header)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a3d3d953032f41cf9cf6c7ff4e6a61e1b">USER_BUF_SIZE</a>&nbsp;&nbsp;&nbsp;(SG_BIG_BUFF - (SCSI_OFF + 18 + 511))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a46d8c74b5360b1df7727d0ee6de59df2">CMD_SIZE</a>&nbsp;&nbsp;&nbsp;(SCSI_OFF + 18 + USER_BUF_SIZE)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#ae35e57f6c23ab35a0d10e2e31ee6666e">cdchn</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int <a class="el" href="lazylogger_8c.html#a7728c597c88e0bc9b73912265b2f7665">channel</a>, int route)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdinclude.html#ga17a49433504fccff1b8a618aba63ac81">cam8i</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, unsigned char *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga859bdf77e425ce09a21c873a86c8af70">cami</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gad17f339ee8254f1aad6b406e50ebd4a8">cam16i</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga84d45a99ef748664e1eead0a5da4d862">cam24i</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gad21ad710943e2ab5df6f8e609afeebfe">cam8i_q</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, unsigned char *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, int *x, int *q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga2a515796e8020af32ea0e5aad490a170">cam16i_q</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, int *x, int *q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga0f1b4435d6f1fea0e5787a5c2388b41c">cam24i_q</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, int *x, int *q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga2c3c3cdd300fee9d03e3c426dad38e7c">cam16i_r</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gafe207e922a73f0b30e290e830808ec61">cam24i_r</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga4a234b702b8b906b0cca1bcbdb01ca27">cam16i_rq</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga6a2d5a0785b2ccc27fc9e2769f749b10">cam24i_rq</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga2486ffaca1f0a3bef21952140957febe">cam16i_sa</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga77a1df9e51c7cd35efb9575e48fac6b2">cam24i_sa</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gad17ca468489b8b10bb9317a72d139a05">cam16i_sn</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gaeca899e6d3a4fd8992f3556fe0f78038">cam24i_sn</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> **<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gaf4fc105dccac5ca09337af789f554831">cam8o</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, unsigned char <a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga0c0e5e0a19205781825e673e694db77f">camo</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> <a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gadee944c3c864999f507a2df2a50f1f1f">cam16o</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> <a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga9916a212b322def800695ab893b245b3">cam24o</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga971dc315017a5801f0131c4c2d396d28">cam16o_q</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> <a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, int *x, int *q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gaefe50b118a37b83b19a3804a6759d8bd">cam24o_q</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, int *x, int *q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga6a38e31772c0376e9a709cd42d6b94e7">cam8o_r</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="usb_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga775c859ad1eb0a301d8716b369d43400">cam16o_r</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="unionWORD.html">WORD</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gae776beaa8eae13f75edf286ed0a75a88">cam24o_r</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *<a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gabffc7c8094fc71d3e2bcd6be9cd0c9a3">camc_chk</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga3840e8a0619db3b383cc2829b83b8e6a">camc</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gac33eb92d1f484fe1e76fdc001eefe48b">camc_q</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, int *q)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga27478b06e734c38fc4fe80dc09800885">camc_sa</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gac0cc56a7f806a800509f819a91a9e1c6">camc_sn</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, const int a, const int f, const int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga6c97ce64e84d233efe4de457ec495d2f">cam_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga115c540e273dd1e07d72fe82da4ba98d">cam_exit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gaa171934ed8e8ce2af3ec97f4192aa27b">cam_inhibit_set</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gaaf50e8892fd5226754befa7185c9dc3a">cam_inhibit_clear</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga9fb70c7c5fb16d3807373902b137fe3e">cam_crate_clear</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga476ffc902c4674e17aa3b544781023e4">cam_crate_zinit</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga3b676540b901e12fc4fd6a8495d612eb">cam_lam_enable</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#gac24088d63d7b5b460a93eba5fbd32518">cam_lam_disable</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga39be24f9fa9fb8601023665fe896d401">cam_lam_read</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *lam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga1ec1e961fe6664de573a78181b2f111c">cam_lam_clear</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>, const int <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga5d95207e772c732839b0010706c1ecc9">cam_interrupt_enable</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga21c6d5bd474679bf5a810560564c7677">cam_interrupt_disable</a> (const int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INLINE int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mcstdfunctionh.html#ga43ddc19c70912fb0eb4091579849e2ca">cam_init_rpc</a> (char *<a class="el" href="webpaw_8c.html#af30d16605d5c80183cd199983a653081">host_name</a>, char *<a class="el" href="mhttpd_8c.html#a2f66ab590c0bf6aa5385f2c964eef5fe">exp_name</a>, char *fe_name, char *client_name, char *rpc_server)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a9e64e5e231f1948397c994ff2ba9b768">sjy_get_qx</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a3f644b94d637a6cdeb3149a7740f0ce7">handle_scsi_cmd</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, unsigned <a class="el" href="mscbmain_8c.html#a199b43445abff5fb124a5283dd9ab416">cmd_len</a>, unsigned in_size, unsigned char *i_buff, int out_size, unsigned char *o_buff)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#aa606b4f43279fe1deb0f4a7e567c2bf8">sjy_nondata</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int camCmd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a260ae21605888a68ed82db8dd25bcac4">sjy_write</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int camCmd, void *dataBuffer, int xferlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a747d8b2e874a5416bc88493fa21a60cd">sjy_read</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int camCmd, void *dataBuffer, int xferlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a98532319de57f3181b1486ab7a3ccae0">sjy_inquiry</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#abaa46601bf81617267a3bacefb9c9571">sjy_tur</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#ac49188b0e974187159abf586ac202535">sjy_reqSense</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a13053d959bb40e97cfabd4089e70e8ec">sjy_notify_camac_data</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int xferlen, int <a class="el" href="odbhist_8c.html#af78ce6e98cc8c58250be7729a52c5ea4">status</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#af75bfa9a3a209871ec6e27c4916df2d5">sjy_notify_camac_nondata</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int xferlen, int <a class="el" href="odbhist_8c.html#af78ce6e98cc8c58250be7729a52c5ea4">status</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a14be9712cd9a31585f46151e6a2069c5">sjy_getdev</a> (char *<a class="el" href="vmedrv_8c.html#a8910285a0352a5c710e65ec9ecbe32a1">dev</a>, int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#ae47975bb7a79b90263d39eca758397de">readFile</a> (FILE *g_rfp, char *<a class="el" href="mana__orig_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, char charBuff[], int charBuffsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a773592bef536c643b4538c7c1aa3c8d1">ccctype</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int lserial, int lparall)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#abd733caa05d3cc5b9dc090f7993fedca">sjy_inisem</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a2f3b012918d1fa4a5472923f5269b459">sjy_getsem</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a633fe0975b0b2a310e5df3c5609f988e">notify_camac_nondata</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int xferlen, int <a class="el" href="odbhist_8c.html#af78ce6e98cc8c58250be7729a52c5ea4">status</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a752fa0f75faca1883f6c404ed95d0822">notify_camac_data</a> (int <a class="el" href="lrs4032_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, int xferlen, int <a class="el" href="odbhist_8c.html#af78ce6e98cc8c58250be7729a52c5ea4">status</a>)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#ada419ee69c3cc4a4db37acdbf3ef3054">xdummy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a484211e5ca89857f6dc2b6e4bffbd3c6">qdummy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="unionWORD.html">WORD</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#aaf2adeb77e670e8de0dc898d9156cc33">d16dummy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a500340a6cd6375d4cdc049953a2bf68b">d24dummy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#abb2fa0b92fd9278943cf4d22794b7ced">jorway_crate_opened</a> [8] = { 0 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#ade30b3ebd96d09456989cf6da3a92e8f">jorway_crate_LAM</a> [8] = { 0 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> [CMD_SIZE]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="jorway73a_8c.html#a46c254f440287e2529e83c8e49ed37ad">devtble</a> []</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a46d8c74b5360b1df7727d0ee6de59df2"></a><!-- doxytag: member="jorway73a.c::CMD_SIZE" ref="a46d8c74b5360b1df7727d0ee6de59df2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_SIZE&nbsp;&nbsp;&nbsp;(SCSI_OFF + 18 + USER_BUF_SIZE)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00627">627</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00860">sjy_nondata()</a>, <a class="el" href="jorway73a_8c_source.html#l00949">sjy_read()</a>, and <a class="el" href="jorway73a_8c_source.html#l00892">sjy_write()</a>.</p>

</div>
</div>
<a class="anchor" id="aec7ccf0b9920b7811ff800c050bffb77"></a><!-- doxytag: member="jorway73a.c::NAFCMD" ref="aec7ccf0b9920b7811ff800c050bffb77" args="(n, a, f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NAFCMD</td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">f&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;( (SJY_CAMAC_EXT((f),(<a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>),(a),1)) )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00091">91</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00126">cam16i()</a>, <a class="el" href="jorway73a_8c_source.html#l00157">cam16i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00187">cam16i_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00229">cam16i_rq()</a>, <a class="el" href="jorway73a_8c_source.html#l00348">cam16o_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00383">cam16o_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00140">cam24i()</a>, <a class="el" href="jorway73a_8c_source.html#l00174">cam24i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00208">cam24i_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00253">cam24i_rq()</a>, <a class="el" href="jorway73a_8c_source.html#l00364">cam24o_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00404">cam24o_r()</a>, and <a class="el" href="jorway73a_8c_source.html#l00443">camc_q()</a>.</p>

</div>
</div>
<a class="anchor" id="a552de447eaedaa97ddef2175bbe28b04"></a><!-- doxytag: member="jorway73a.c::SCSI_OFF" ref="a552de447eaedaa97ddef2175bbe28b04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCSI_OFF&nbsp;&nbsp;&nbsp;sizeof(struct sg_header)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00625">625</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>, <a class="el" href="jorway73a_8c_source.html#l01001">sjy_inquiry()</a>, <a class="el" href="jorway73a_8c_source.html#l00860">sjy_nondata()</a>, <a class="el" href="jorway73a_8c_source.html#l00949">sjy_read()</a>, <a class="el" href="jorway73a_8c_source.html#l01076">sjy_reqSense()</a>, <a class="el" href="jorway73a_8c_source.html#l01039">sjy_tur()</a>, and <a class="el" href="jorway73a_8c_source.html#l00892">sjy_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ad22121e0a09767a5cea4852f31c40106"></a><!-- doxytag: member="jorway73a.c::SJY73A" ref="ad22121e0a09767a5cea4852f31c40106" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SJY73A</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00063">63</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3d3d953032f41cf9cf6c7ff4e6a61e1b"></a><!-- doxytag: member="jorway73a.c::USER_BUF_SIZE" ref="a3d3d953032f41cf9cf6c7ff4e6a61e1b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USER_BUF_SIZE&nbsp;&nbsp;&nbsp;(SG_BIG_BUFF - (SCSI_OFF + 18 + 511))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00626">626</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7da18d77ccfa6cc0020cc81e7ed8e8b2"></a><!-- doxytag: member="jorway73a.c::XDEFLG" ref="a7da18d77ccfa6cc0020cc81e7ed8e8b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XDEFLG</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00064">64</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a773592bef536c643b4538c7c1aa3c8d1"></a><!-- doxytag: member="jorway73a.c::ccctype" ref="a773592bef536c643b4538c7c1aa3c8d1" args="(int branch, int lserial, int lparall)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ccctype </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lserial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lparall</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01375">1375</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00356">CAM_S_INVLD_BRANCH</a>, <a class="el" href="jorway73a_8h_source.html#l00358">CAM_S_SER_OR_PAR_ONLY</a>, <a class="el" href="jorway73a_8h_source.html#l00341">CAM_S_SUCCESS</a>, <a class="el" href="jorway73a_8h_source.html#l00094">ID</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8h_source.html#l00086">SJY_CONTROLLER::serial</a>, <a class="el" href="jorway73a_8h_source.html#l00211">SJY_BRANCH_MAX</a>, and <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00469">cam_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01376"></a>01376 {
<a name="l01377"></a>01377    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8h.html#a4bfe115debc7f472dd7dfe4ef9679ca0">ID</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>) &lt; 0 || <a class="code" href="jorway73a_8h.html#a4bfe115debc7f472dd7dfe4ef9679ca0">ID</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>) &gt; <a class="code" href="jorway73a_8h.html#a6c693b96884f3b4f857642ceb9b8fcd5">SJY_BRANCH_MAX</a>)
<a name="l01378"></a>01378       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a41b625c282f10f6477f1b363bf0c6965">CAM_S_INVLD_BRANCH</a>);
<a name="l01379"></a>01379    <span class="keywordflow">if</span> (lserial &amp; lparall)
<a name="l01380"></a>01380       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#acbf2db7dc62a6f3178359e739e467821">CAM_S_SER_OR_PAR_ONLY</a>);
<a name="l01381"></a>01381    <span class="keywordflow">if</span> (lserial)
<a name="l01382"></a>01382       <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[<a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)].<a class="code" href="structSJY__CONTROLLER.html#a740859990b816d64b872b646fd09ea7f">serial</a> = 1;
<a name="l01383"></a>01383    <span class="keywordflow">if</span> (lparall)
<a name="l01384"></a>01384       <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[<a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)].<a class="code" href="structSJY__CONTROLLER.html#a740859990b816d64b872b646fd09ea7f">serial</a> = 0;
<a name="l01385"></a>01385    <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a1ac3848cc49cd53d6f10f175d60a388b">CAM_S_SUCCESS</a>);
<a name="l01386"></a>01386 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae35e57f6c23ab35a0d10e2e31ee6666e"></a><!-- doxytag: member="jorway73a.c::cdchn" ref="ae35e57f6c23ab35a0d10e2e31ee6666e" args="(int branch, int channel, int route)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int cdchn </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>route</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01192">1192</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00095">BUS</a>, <a class="el" href="jorway73a_8h_source.html#l00351">CAM_S_DEV_OPEN_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00354">CAM_S_GETSEM_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00356">CAM_S_INVLD_BRANCH</a>, <a class="el" href="jorway73a_8h_source.html#l00355">CAM_S_PUTSEM_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00364">CAM_S_SCSI_CLOSE_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00353">CAM_S_SEM_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00341">CAM_S_SUCCESS</a>, <a class="el" href="vmedrv_8c_source.html#l00245">dev</a>, <a class="el" href="jorway73a_8h_source.html#l00083">SJY_CONTROLLER::fd</a>, <a class="el" href="fal_8c_source.html#l00219">filename</a>, <a class="el" href="jorway73a_8h_source.html#l00094">ID</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8h_source.html#l00085">SJY_CONTROLLER::scsi_bus</a>, <a class="el" href="jorway73a_8h_source.html#l00084">SJY_CONTROLLER::scsi_id</a>, <a class="el" href="jorway73a_8h_source.html#l00086">SJY_CONTROLLER::serial</a>, <a class="el" href="jorway73a_8h_source.html#l00211">SJY_BRANCH_MAX</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, <a class="el" href="jorway73a_8c_source.html#l01280">sjy_getdev()</a>, <a class="el" href="jorway73a_8c_source.html#l01520">sjy_getsem()</a>, <a class="el" href="jorway73a_8c_source.html#l01515">sjy_inisem()</a>, <a class="el" href="jorway73a_8c_source.html#l01525">sjy_putsem()</a>, <a class="el" href="jorway73a_8c_source.html#l01039">sjy_tur()</a>, and <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00491">cam_exit()</a>, and <a class="el" href="jorway73a_8c_source.html#l00469">cam_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01193"></a>01193 {
<a name="l01194"></a>01194    <span class="comment">/* -----------------------------------------------------------------------   */</span>
<a name="l01195"></a>01195    <span class="keywordtype">char</span> <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>[72];
<a name="l01196"></a>01196    <span class="keywordtype">char</span> version[6];
<a name="l01197"></a>01197    <span class="keywordtype">int</span> fd;
<a name="l01198"></a>01198    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l01199"></a>01199    <span class="keyword">struct </span>stat <a class="code" href="new__fadc0_8cpp.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>;
<a name="l01200"></a>01200    <span class="keywordtype">char</span> <a class="code" href="vmedrv_8c.html#a8910285a0352a5c710e65ec9ecbe32a1">dev</a>[32];
<a name="l01201"></a>01201    <span class="keywordtype">int</span> idx = <a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01202"></a>01202 
<a name="l01203"></a>01203 
<a name="l01204"></a>01204    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8h.html#a4bfe115debc7f472dd7dfe4ef9679ca0">ID</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>) &lt; 0 || <a class="code" href="jorway73a_8h.html#a4bfe115debc7f472dd7dfe4ef9679ca0">ID</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>) &gt; <a class="code" href="jorway73a_8h.html#a6c693b96884f3b4f857642ceb9b8fcd5">SJY_BRANCH_MAX</a>)
<a name="l01205"></a>01205       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a41b625c282f10f6477f1b363bf0c6965">CAM_S_INVLD_BRANCH</a>);
<a name="l01206"></a>01206 
<a name="l01207"></a>01207    <span class="comment">/* close the SCSI device file */</span>
<a name="l01208"></a>01208    <span class="keywordflow">if</span> (<a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> == 0) {
<a name="l01209"></a>01209       <span class="keywordflow">if</span> (fstat(<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].fd, &amp;<a class="code" href="new__fadc0_8cpp.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>) != -1) {
<a name="l01210"></a>01210          close(<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].fd);
<a name="l01211"></a>01211          <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a1ac3848cc49cd53d6f10f175d60a388b">CAM_S_SUCCESS</a>);
<a name="l01212"></a>01212       }
<a name="l01213"></a>01213       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a1e1f094d3201da2f95ee1954152285cd">CAM_S_SCSI_CLOSE_FAIL</a>);
<a name="l01214"></a>01214    }
<a name="l01215"></a>01215 
<a name="l01216"></a>01216    <span class="comment">/* find the scsi device name based on our SCSI id and SCSI bus */</span>
<a name="l01217"></a>01217    status = <a class="code" href="jorway73a_8c.html#a14be9712cd9a31585f46151e6a2069c5">sjy_getdev</a>(filename, <a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01218"></a>01218    <span class="keywordflow">if</span> (status != <a class="code" href="jorway73a_8h.html#a1ac3848cc49cd53d6f10f175d60a388b">CAM_S_SUCCESS</a>) {
<a name="l01219"></a>01219       fprintf(stderr, <span class="stringliteral">&quot;CDCHN Error finding generic scsi device\n&quot;</span>);
<a name="l01220"></a>01220       <span class="keywordflow">return</span> (status);
<a name="l01221"></a>01221    }
<a name="l01222"></a>01222 
<a name="l01223"></a>01223    <span class="comment">/* create the semaphore */</span>
<a name="l01224"></a>01224    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#abd733caa05d3cc5b9dc090f7993fedca">sjy_inisem</a>() == -1) {
<a name="l01225"></a>01225       perror(<span class="stringliteral">&quot;cdchn: inisem&quot;</span>);
<a name="l01226"></a>01226       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#ab00027438f0ff85c29802d8113dbd220">CAM_S_SEM_FAIL</a>);
<a name="l01227"></a>01227    }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229    <span class="comment">/* reserve the semaphore */</span>
<a name="l01230"></a>01230    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#a2f3b012918d1fa4a5472923f5269b459">sjy_getsem</a>() != 0) {
<a name="l01231"></a>01231       perror(<span class="stringliteral">&quot;cdchn: getsem&quot;</span>);
<a name="l01232"></a>01232       <a class="code" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a>();
<a name="l01233"></a>01233       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a200b91a73af5bea360d3210c88aeb545">CAM_S_GETSEM_FAIL</a>);
<a name="l01234"></a>01234    }
<a name="l01235"></a>01235 
<a name="l01236"></a>01236    <span class="comment">/* open the scsi device file */</span>
<a name="l01237"></a>01237    <span class="keywordflow">if</span> ((fd = open(filename, O_RDWR)) == -1) {
<a name="l01238"></a>01238       fprintf(stderr, <span class="stringliteral">&quot;CDCHN Error opening %s\n&quot;</span>, filename);
<a name="l01239"></a>01239       perror(<span class="stringliteral">&quot;CDCHN&quot;</span>);
<a name="l01240"></a>01240       <a class="code" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a>();
<a name="l01241"></a>01241       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#aa17d92ecacf9147e61c078f172641f3c">CAM_S_DEV_OPEN_FAIL</a>);
<a name="l01242"></a>01242    }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244    <span class="comment">/* release the semaphore */</span>
<a name="l01245"></a>01245    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a>() != 0) {
<a name="l01246"></a>01246       perror(<span class="stringliteral">&quot;cdchn: putsem&quot;</span>);
<a name="l01247"></a>01247       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#ad5503abe4c6d4a3ccf55b6ff3d5356d8">CAM_S_PUTSEM_FAIL</a>);
<a name="l01248"></a>01248    }
<a name="l01249"></a>01249 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01250"></a>01250 <span class="preprocessor"></span>   fprintf(stderr, <span class="stringliteral">&quot;cdchn: filename = %s  fd = %d\n&quot;</span>, filename, fd);
<a name="l01251"></a>01251 <span class="preprocessor">#endif</span>
<a name="l01252"></a>01252 <span class="preprocessor"></span>
<a name="l01253"></a>01253    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#ab4c172d309a87e863b12e6680096dca6">scsi_id</a> = <a class="code" href="jorway73a_8h.html#a4bfe115debc7f472dd7dfe4ef9679ca0">ID</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01254"></a>01254    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#af40442a6deafc9e8d82226bf899edff9">scsi_bus</a> = <a class="code" href="jorway73a_8h.html#a862084ca8bda595e2744a6d53d02917d">BUS</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01255"></a>01255    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a740859990b816d64b872b646fd09ea7f">serial</a> = 1;      <span class="comment">/* assume serial */</span>
<a name="l01256"></a>01256    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a68e422a3b6036ac67e22f0c4b1d6ec1b">fd</a> = fd;
<a name="l01257"></a>01257 
<a name="l01258"></a>01258    <span class="comment">/* Send two Test Unit Ready Commands to Jorway */</span>
<a name="l01259"></a>01259    status = <a class="code" href="jorway73a_8c.html#abaa46601bf81617267a3bacefb9c9571">sjy_tur</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01260"></a>01260    <span class="keywordflow">if</span> (status) {                <span class="comment">/* 0=success */</span>
<a name="l01261"></a>01261       fprintf(stderr, <span class="stringliteral">&quot;CDCHN Error executing Test Unit Ready\n&quot;</span>);
<a name="l01262"></a>01262       perror(<span class="stringliteral">&quot;cdchn&quot;</span>);
<a name="l01263"></a>01263       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#aa17d92ecacf9147e61c078f172641f3c">CAM_S_DEV_OPEN_FAIL</a>);
<a name="l01264"></a>01264    }
<a name="l01265"></a>01265 
<a name="l01266"></a>01266    <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a1ac3848cc49cd53d6f10f175d60a388b">CAM_S_SUCCESS</a>);
<a name="l01267"></a>01267 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3f644b94d637a6cdeb3149a7740f0ce7"></a><!-- doxytag: member="jorway73a.c::handle_scsi_cmd" ref="a3f644b94d637a6cdeb3149a7740f0ce7" args="(int branch, unsigned cmd_len, unsigned in_size, unsigned char *i_buff, int out_size, unsigned char *o_buff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int handle_scsi_cmd </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>cmd_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>in_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>i_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>out_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>o_buff</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00643">643</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00352">CAM_S_DEV_IO_ERROR</a>, <a class="el" href="jorway73a_8h_source.html#l00354">CAM_S_GETSEM_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00344">CAM_S_INVLD_ARG</a>, <a class="el" href="jorway73a_8h_source.html#l00355">CAM_S_PUTSEM_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00083">SJY_CONTROLLER::fd</a>, <a class="el" href="mdump_8c_source.html#l00115">i</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="examples_2macro_2midas__macro_8h_source.html#l00256">read</a>, <a class="el" href="jorway73a_8h_source.html#l00088">SJY_CONTROLLER::result</a>, <a class="el" href="jorway73a_8c_source.html#l00625">SCSI_OFF</a>, <a class="el" href="jorway73a_8h_source.html#l00089">SJY_CONTROLLER::sense_buffer</a>, <a class="el" href="jorway73a_8h_source.html#l00049">SENSEKEY</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, <a class="el" href="jorway73a_8c_source.html#l01520">sjy_getsem()</a>, <a class="el" href="jorway73a_8c_source.html#l01525">sjy_putsem()</a>, <a class="el" href="jorway73a_8h_source.html#l00063">SJY_SENSE_LENGTH</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, <a class="el" href="jorway73a_8h_source.html#l00090">SJY_CONTROLLER::target_status</a>, and <a class="el" href="examples_2macro_2midas__macro_8h_source.html#l00259">write</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l01001">sjy_inquiry()</a>, <a class="el" href="jorway73a_8c_source.html#l00860">sjy_nondata()</a>, <a class="el" href="jorway73a_8c_source.html#l00949">sjy_read()</a>, <a class="el" href="jorway73a_8c_source.html#l01076">sjy_reqSense()</a>, <a class="el" href="jorway73a_8c_source.html#l01039">sjy_tur()</a>, and <a class="el" href="jorway73a_8c_source.html#l00892">sjy_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00650"></a>00650 {
<a name="l00651"></a>00651    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> = 0;
<a name="l00652"></a>00652    <span class="keyword">struct </span>sg_header *sg_hd;
<a name="l00653"></a>00653    sigset_t newmask, oldmask;
<a name="l00654"></a>00654    <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00655"></a>00655    <span class="keywordtype">int</span> idx = <a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l00656"></a>00656    <span class="keywordtype">int</span> fd = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a68e422a3b6036ac67e22f0c4b1d6ec1b">fd</a>;
<a name="l00657"></a>00657    <span class="keywordtype">int</span> defecit = 0;
<a name="l00658"></a>00658 <span class="preprocessor">#ifdef GDEBUG</span>
<a name="l00659"></a>00659 <span class="preprocessor"></span>   fflush(stderr);
<a name="l00660"></a>00660    fflush(stdin);
<a name="l00661"></a>00661    fprintf(stderr,
<a name="l00662"></a>00662            <span class="stringliteral">&quot;handle_scsi_cmd: branch=%d, idx=%d, fd=%d, cmd_len=%d, in_size=%d, ibuff=0x%x, out_size=%d, o_buff=0x%x\n&quot;</span>,
<a name="l00663"></a>00663            <a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, idx, fd, <a class="code" href="mscbmain_8c.html#a199b43445abff5fb124a5283dd9ab416">cmd_len</a>, in_size, i_buff, out_size, o_buff);
<a name="l00664"></a>00664    fprintf(stderr, <span class="stringliteral">&quot;            cmd: 0x&quot;</span>);
<a name="l00665"></a>00665    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="mscbmain_8c.html#a199b43445abff5fb124a5283dd9ab416">cmd_len</a>; i++) {
<a name="l00666"></a>00666       fprintf(stderr, <span class="stringliteral">&quot; %02x&quot;</span>, i_buff[<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + i]);
<a name="l00667"></a>00667    }
<a name="l00668"></a>00668    fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00669"></a>00669    fflush(stderr);
<a name="l00670"></a>00670    fflush(stdin);
<a name="l00671"></a>00671 <span class="preprocessor">#endif</span>
<a name="l00672"></a>00672 <span class="preprocessor"></span>   <span class="comment">/* safety checks */</span>
<a name="l00673"></a>00673    <span class="keywordflow">if</span> (!cmd_len)
<a name="l00674"></a>00674       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a674e2b9208ac7518c826b10e9cfa90fe">CAM_S_INVLD_ARG</a>); <span class="comment">/* need a cmd_len != 0 */</span>
<a name="l00675"></a>00675    <span class="keywordflow">if</span> (!i_buff)
<a name="l00676"></a>00676       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a674e2b9208ac7518c826b10e9cfa90fe">CAM_S_INVLD_ARG</a>); <span class="comment">/* need an input buffer != NULL */</span>
<a name="l00677"></a>00677 <span class="preprocessor">#ifdef SG_BIG_BUFF</span>
<a name="l00678"></a>00678 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + cmd_len + in_size &gt; SG_BIG_BUFF)
<a name="l00679"></a>00679       <span class="keywordflow">return</span> -1;
<a name="l00680"></a>00680    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + out_size &gt; SG_BIG_BUFF)
<a name="l00681"></a>00681       <span class="keywordflow">return</span> -1;
<a name="l00682"></a>00682 <span class="preprocessor">#else</span>
<a name="l00683"></a>00683 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + cmd_len + in_size &gt; 4096)
<a name="l00684"></a>00684       <span class="keywordflow">return</span> -1;
<a name="l00685"></a>00685    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + out_size &gt; 4096)
<a name="l00686"></a>00686       <span class="keywordflow">return</span> -1;
<a name="l00687"></a>00687 <span class="preprocessor">#endif</span>
<a name="l00688"></a>00688 <span class="preprocessor"></span>
<a name="l00689"></a>00689    <span class="keywordflow">if</span> (!o_buff)
<a name="l00690"></a>00690       out_size = 0;
<a name="l00691"></a>00691 
<a name="l00692"></a>00692    <span class="comment">/* generic scsi device header construction */</span>
<a name="l00693"></a>00693    sg_hd = (<span class="keyword">struct </span>sg_header *) i_buff;
<a name="l00694"></a>00694    sg_hd-&gt;reply_len = <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + out_size;
<a name="l00695"></a>00695    sg_hd-&gt;twelve_byte = cmd_len == 12;
<a name="l00696"></a>00696    sg_hd-&gt;result = 0;
<a name="l00697"></a>00697 <span class="preprocessor">#if     0</span>
<a name="l00698"></a>00698 <span class="preprocessor"></span>   sg_hd-&gt;pack_len = <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + cmd_len + in_size;      <span class="comment">/* not necessary */</span>
<a name="l00699"></a>00699    sg_hd-&gt;pack_id;              <span class="comment">/* not used */</span>
<a name="l00700"></a>00700    sg_hd-&gt;other_flags;          <span class="comment">/* not used */</span>
<a name="l00701"></a>00701 <span class="preprocessor">#endif</span>
<a name="l00702"></a>00702 <span class="preprocessor"></span>
<a name="l00703"></a>00703    <span class="comment">/* protect the write/read from being interrupted by ^C */</span>
<a name="l00704"></a>00704    sigemptyset(&amp;newmask);
<a name="l00705"></a>00705    sigaddset(&amp;newmask, SIGINT);
<a name="l00706"></a>00706    <span class="comment">/*  block SIGINT and save current signal mask */</span>
<a name="l00707"></a>00707    <span class="keywordflow">if</span> (sigprocmask(SIG_BLOCK, &amp;newmask, &amp;oldmask) &lt; 0)
<a name="l00708"></a>00708       fprintf(stderr, <span class="stringliteral">&quot;sjy_interface: SIG_BLOCK error&quot;</span>);
<a name="l00709"></a>00709    <span class="comment">/* protect the write/read section for multi-user */</span>
<a name="l00710"></a>00710    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#a2f3b012918d1fa4a5472923f5269b459">sjy_getsem</a>() != 0) {
<a name="l00711"></a>00711       fprintf(stderr, <span class="stringliteral">&quot;sjy_interface: getsem failed&quot;</span>);
<a name="l00712"></a>00712       <a class="code" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a>();
<a name="l00713"></a>00713       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a200b91a73af5bea360d3210c88aeb545">CAM_S_GETSEM_FAIL</a>);
<a name="l00714"></a>00714    }
<a name="l00715"></a>00715 
<a name="l00716"></a>00716    <span class="comment">/* send command */</span>
<a name="l00717"></a>00717    status = <a class="code" href="examples_2macro_2midas__macro_8h.html#a6fbb683090a733152e51639d58b90cd6">write</a>(fd, i_buff, <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + cmd_len + in_size);
<a name="l00718"></a>00718 <span class="preprocessor">#ifndef DEBUG</span>
<a name="l00719"></a>00719 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (status &lt; 0) {
<a name="l00720"></a>00720       <a class="code" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a>();
<a name="l00721"></a>00721       sigprocmask(SIG_SETMASK, &amp;oldmask, NULL);
<a name="l00722"></a>00722       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a535b85f08efa0cc43a01a0ea11ab5a44">CAM_S_DEV_IO_ERROR</a>);
<a name="l00723"></a>00723    }
<a name="l00724"></a>00724 <span class="preprocessor">#endif</span>
<a name="l00725"></a>00725 <span class="preprocessor"></span>
<a name="l00726"></a>00726 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00727"></a>00727 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (status &lt; 0 || status != SCSI_OFF + cmd_len + in_size || sg_hd-&gt;result) {
<a name="l00728"></a>00728       <span class="comment">/* some error happened */</span>
<a name="l00729"></a>00729       fprintf(stderr, <span class="stringliteral">&quot;write(generic) result = 0x%x cmd = 0x%x\n&quot;</span>,
<a name="l00730"></a>00730               sg_hd-&gt;result, i_buff[<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>]);
<a name="l00731"></a>00731       <span class="keywordflow">if</span> (status &lt; 0)
<a name="l00732"></a>00732          perror(<span class="stringliteral">&quot;sjy_interface&quot;</span>);
<a name="l00733"></a>00733       <a class="code" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a>();
<a name="l00734"></a>00734       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a535b85f08efa0cc43a01a0ea11ab5a44">CAM_S_DEV_IO_ERROR</a>);
<a name="l00735"></a>00735    }
<a name="l00736"></a>00736 <span class="preprocessor">#endif</span>
<a name="l00737"></a>00737 <span class="preprocessor"></span>
<a name="l00738"></a>00738 
<a name="l00739"></a>00739    <span class="comment">/* Since the sg.c driver _read_ always returns the sg_header, we must</span>
<a name="l00740"></a>00740 <span class="comment">    ** provide a buffer +SCSI_OFF in size. Since i_buff was already</span>
<a name="l00741"></a>00741 <span class="comment">    ** allocated as the largest size data buffer we could use (+SCSI_OFF),</span>
<a name="l00742"></a>00742 <span class="comment">    ** we use it. We have to copy the data read back to the user&apos;s </span>
<a name="l00743"></a>00743 <span class="comment">    ** buffer, but this ultimatly saves an extra malloc call.</span>
<a name="l00744"></a>00744 <span class="comment">    */</span>
<a name="l00745"></a>00745 
<a name="l00746"></a>00746    <span class="comment">/* retrieve result */</span>
<a name="l00747"></a>00747    status = <a class="code" href="examples_2macro_2midas__macro_8h.html#a5b55880ce7d302ae13576e90584a63bb">read</a>(fd, i_buff, <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + out_size);
<a name="l00748"></a>00748 
<a name="l00749"></a>00749    <span class="comment">/* return the semaphore */</span>
<a name="l00750"></a>00750    <span class="keywordflow">if</span> (<a class="code" href="jorway73a_8c.html#affa47cfeeb7d4af1452da226e03f4cc8">sjy_putsem</a>() != 0) {
<a name="l00751"></a>00751       fprintf(stderr, <span class="stringliteral">&quot;sjy_interface: getsem failed&quot;</span>);
<a name="l00752"></a>00752       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#ad5503abe4c6d4a3ccf55b6ff3d5356d8">CAM_S_PUTSEM_FAIL</a>);
<a name="l00753"></a>00753    }
<a name="l00754"></a>00754 
<a name="l00755"></a>00755    <span class="comment">/* reset signal mask which unblocks SIGINT */</span>
<a name="l00756"></a>00756    <span class="keywordflow">if</span> (sigprocmask(SIG_SETMASK, &amp;oldmask, NULL) &lt; 0)
<a name="l00757"></a>00757       fprintf(stderr, <span class="stringliteral">&quot;sjy_interface: SIG_SETMASK error&quot;</span>);
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 
<a name="l00760"></a>00760    <span class="comment">/* copy data read back to the user buffer */</span>
<a name="l00761"></a>00761    <span class="comment">/* The generic scsi driver keeps an internal buffer with the</span>
<a name="l00762"></a>00762 <span class="comment">    ** last data read, and does not clear it when a subsequent SCSI</span>
<a name="l00763"></a>00763 <span class="comment">    ** command completes with a non-zero SCSI response. sg_hd-&gt;result</span>
<a name="l00764"></a>00764 <span class="comment">    ** does not contain the SCSI response as observed from a SCSI</span>
<a name="l00765"></a>00765 <span class="comment">    ** analyzer, so it is not used. The only alternative is to test</span>
<a name="l00766"></a>00766 <span class="comment">    ** for a non-zero sense buffer sense key field returned from the</span>
<a name="l00767"></a>00767 <span class="comment">    ** Jorway. If the sense key is non-zero, the user buffer is</span>
<a name="l00768"></a>00768 <span class="comment">    ** zeroed instead of returning stale data from the internal SCSI</span>
<a name="l00769"></a>00769 <span class="comment">    ** buffer.</span>
<a name="l00770"></a>00770 <span class="comment">    */</span>
<a name="l00771"></a>00771 
<a name="l00772"></a>00772    <span class="comment">/* by rex hubbard (jorway): before doing the above, check if the</span>
<a name="l00773"></a>00773 <span class="comment">    ** sensekey is 9, indicating a transfer stopped by q-response. If</span>
<a name="l00774"></a>00774 <span class="comment">    ** so, get the defecit from the sense data and adjust the return</span>
<a name="l00775"></a>00775 <span class="comment">    ** value. The data in the internal buffer is valid, so copy it.</span>
<a name="l00776"></a>00776 <span class="comment">    */</span>
<a name="l00777"></a>00777 
<a name="l00778"></a>00778    <span class="keywordflow">if</span> (!(sg_hd-&gt;sense_buffer[<a class="code" href="jorway73a_8h.html#a124960eca55d1db5f5b3740aaecf20c5">SENSEKEY</a>])) {
<a name="l00779"></a>00779       <span class="keywordflow">if</span> (o_buff) {
<a name="l00780"></a>00780          memcpy(o_buff, i_buff + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>, out_size);
<a name="l00781"></a>00781       }
<a name="l00782"></a>00782    } <span class="keywordflow">else</span> {
<a name="l00783"></a>00783       <span class="keywordflow">if</span> (sg_hd-&gt;sense_buffer[<a class="code" href="jorway73a_8h.html#a124960eca55d1db5f5b3740aaecf20c5">SENSEKEY</a>] == 9) {
<a name="l00784"></a>00784          defecit = sg_hd-&gt;sense_buffer[4] &lt;&lt; 8 | sg_hd-&gt;sense_buffer[5];
<a name="l00785"></a>00785          defecit = defecit &lt;&lt; 8 | sg_hd-&gt;sense_buffer[6];
<a name="l00786"></a>00786          <span class="keywordflow">if</span> (o_buff) {
<a name="l00787"></a>00787             memcpy(o_buff, i_buff + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>, out_size);
<a name="l00788"></a>00788          }
<a name="l00789"></a>00789       } <span class="keywordflow">else</span>
<a name="l00790"></a>00790          bzero(o_buff, out_size);
<a name="l00791"></a>00791    }
<a name="l00792"></a>00792 
<a name="l00793"></a>00793    <span class="comment">/* save scsi status and sense buffer */</span>
<a name="l00794"></a>00794    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a518c03b64309b9d2de5e1ce69a21cfcd">result</a> = sg_hd-&gt;result;
<a name="l00795"></a>00795    memcpy(<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].sense_buffer, sg_hd-&gt;<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>, <a class="code" href="jorway73a_8h.html#ac474b77e8d01885c6424d845d5fc3e49">SJY_SENSE_LENGTH</a>);
<a name="l00796"></a>00796    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#ae28328f55bc09b61571bb1bbe20119d6">target_status</a> = (sg_hd-&gt;target_status) * 2;
<a name="l00797"></a>00797 <span class="preprocessor">#ifdef GDEBUG</span>
<a name="l00798"></a>00798 <span class="preprocessor"></span>   fflush(stderr);
<a name="l00799"></a>00799    fflush(stdin);
<a name="l00800"></a>00800    fprintf(stderr, <span class="stringliteral">&quot;handle_scsi_command:  target_status=0x%x\n&quot;</span>,
<a name="l00801"></a>00801            <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].target_status);
<a name="l00802"></a>00802 <span class="preprocessor">#if 0</span>
<a name="l00803"></a>00803 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].target_status != 0) &amp;&amp;
<a name="l00804"></a>00804        (<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].target_status != 0))
<a name="l00805"></a>00805 <span class="preprocessor">#endif</span>
<a name="l00806"></a>00806 <span class="preprocessor"></span>   {
<a name="l00807"></a>00807       fprintf(stderr, <span class="stringliteral">&quot;read(generic) sense &quot;</span>
<a name="l00808"></a>00808               <span class="stringliteral">&quot;%x %x %x %x %x %x %x %x %x %x %x %x %x %x %x %x\n&quot;</span>,
<a name="l00809"></a>00809               sg_hd-&gt;sense_buffer[0], sg_hd-&gt;sense_buffer[1],
<a name="l00810"></a>00810               sg_hd-&gt;sense_buffer[2], sg_hd-&gt;sense_buffer[3],
<a name="l00811"></a>00811               sg_hd-&gt;sense_buffer[4], sg_hd-&gt;sense_buffer[5],
<a name="l00812"></a>00812               sg_hd-&gt;sense_buffer[6], sg_hd-&gt;sense_buffer[7],
<a name="l00813"></a>00813               sg_hd-&gt;sense_buffer[8], sg_hd-&gt;sense_buffer[9],
<a name="l00814"></a>00814               sg_hd-&gt;sense_buffer[10], sg_hd-&gt;sense_buffer[11],
<a name="l00815"></a>00815               sg_hd-&gt;sense_buffer[12], sg_hd-&gt;sense_buffer[13],
<a name="l00816"></a>00816               sg_hd-&gt;sense_buffer[14], sg_hd-&gt;sense_buffer[15]);
<a name="l00817"></a>00817    }
<a name="l00818"></a>00818    fflush(stderr);
<a name="l00819"></a>00819    fflush(stdin);
<a name="l00820"></a>00820 <span class="preprocessor">#endif</span>
<a name="l00821"></a>00821 <span class="preprocessor"></span>
<a name="l00822"></a>00822 
<a name="l00823"></a>00823 
<a name="l00824"></a>00824    <span class="comment">/* Unlike the Jorway 73A, the 411S returns SCSI status CONDITION_MET</span>
<a name="l00825"></a>00825 <span class="comment">    ** (0x04) for Q=1 on a data transfer. This is converted by the </span>
<a name="l00826"></a>00826 <span class="comment">    ** generic SCSI driver sg.c to EIO (0x05). The CAMAC completion routines</span>
<a name="l00827"></a>00827 <span class="comment">    ** ignore this status, but the following code segment does not.</span>
<a name="l00828"></a>00828 <span class="comment">    */</span>
<a name="l00829"></a>00829 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00830"></a>00830 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (status &lt; 0 || status != SCSI_OFF + out_size || sg_hd-&gt;result) {
<a name="l00831"></a>00831       <span class="comment">/* some error happened */</span>
<a name="l00832"></a>00832       fprintf(stderr, <span class="stringliteral">&quot;read(generic) result = 0x%x cmd = 0x%x\n&quot;</span>,
<a name="l00833"></a>00833               sg_hd-&gt;result, i_buff[<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>]);
<a name="l00834"></a>00834       fprintf(stderr, <span class="stringliteral">&quot;read(generic) sense &quot;</span>
<a name="l00835"></a>00835               <span class="stringliteral">&quot;%x %x %x %x %x %x %x %x %x %x %x %x %x %x %x %x\n&quot;</span>,
<a name="l00836"></a>00836               sg_hd-&gt;sense_buffer[0], sg_hd-&gt;sense_buffer[1],
<a name="l00837"></a>00837               sg_hd-&gt;sense_buffer[2], sg_hd-&gt;sense_buffer[3],
<a name="l00838"></a>00838               sg_hd-&gt;sense_buffer[4], sg_hd-&gt;sense_buffer[5],
<a name="l00839"></a>00839               sg_hd-&gt;sense_buffer[6], sg_hd-&gt;sense_buffer[7],
<a name="l00840"></a>00840               sg_hd-&gt;sense_buffer[8], sg_hd-&gt;sense_buffer[9],
<a name="l00841"></a>00841               sg_hd-&gt;sense_buffer[10], sg_hd-&gt;sense_buffer[11],
<a name="l00842"></a>00842               sg_hd-&gt;sense_buffer[12], sg_hd-&gt;sense_buffer[13],
<a name="l00843"></a>00843               sg_hd-&gt;sense_buffer[14], sg_hd-&gt;sense_buffer[15]);
<a name="l00844"></a>00844       <span class="keywordflow">if</span> (status &lt; 0)
<a name="l00845"></a>00845          perror(<span class="stringliteral">&quot;sjy_interface&quot;</span>);
<a name="l00846"></a>00846       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#a535b85f08efa0cc43a01a0ea11ab5a44">CAM_S_DEV_IO_ERROR</a>);
<a name="l00847"></a>00847    }
<a name="l00848"></a>00848 <span class="preprocessor">#endif</span>
<a name="l00849"></a>00849 <span class="preprocessor"></span>   <span class="keywordflow">return</span> (status - <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> - defecit);
<a name="l00850"></a>00850 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a752fa0f75faca1883f6c404ed95d0822"></a><!-- doxytag: member="jorway73a.c::notify_camac_data" ref="a752fa0f75faca1883f6c404ed95d0822" args="(int branch, int xferlen, int status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int notify_camac_data </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xferlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01574">1574</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00050">ADD_SENSECODE</a>, <a class="el" href="jorway73a_8h_source.html#l00087">SJY_CONTROLLER::errn</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8h_source.html#l00089">SJY_CONTROLLER::sense_buffer</a>, <a class="el" href="jorway73a_8h_source.html#l00049">SENSEKEY</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, <a class="el" href="jorway73a_8h_source.html#l00077">SJY_NO_Q</a>, <a class="el" href="jorway73a_8h_source.html#l00076">SJY_NO_X</a>, and <a class="el" href="jorway73a_8h_source.html#l00090">SJY_CONTROLLER::target_status</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00949">sjy_read()</a>, and <a class="el" href="jorway73a_8c_source.html#l00892">sjy_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01577"></a>01577 {                               <span class="comment">/* actual transfer length */</span>
<a name="l01578"></a>01578    <span class="keywordtype">int</span> idx = <a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01579"></a>01579    <span class="keywordtype">int</span> sense_key = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>[<a class="code" href="jorway73a_8h.html#a124960eca55d1db5f5b3740aaecf20c5">SENSEKEY</a>];
<a name="l01580"></a>01580    <span class="keywordtype">int</span> add_sense = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>[<a class="code" href="jorway73a_8h.html#a23341b08faa22fce2b643daa0747ecd3">ADD_SENSECODE</a>];
<a name="l01581"></a>01581    <span class="keywordtype">int</span> target_status = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#ae28328f55bc09b61571bb1bbe20119d6">target_status</a>;
<a name="l01582"></a>01582    <span class="keywordflow">if</span> (target_status == 0) {    <span class="comment">/* Good status -- no errors */</span>
<a name="l01583"></a>01583 <span class="preprocessor">#if GDEBUG</span>
<a name="l01584"></a>01584 <span class="preprocessor"></span>      fprintf(stderr, <span class="stringliteral">&quot;target_status=0x%02x\n&quot;</span>, target_status);
<a name="l01585"></a>01585 <span class="preprocessor">#endif</span>
<a name="l01586"></a>01586 <span class="preprocessor"></span>      <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = 0;
<a name="l01587"></a>01587       <span class="keywordflow">return</span>;
<a name="l01588"></a>01588    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target_status != 2) {     <span class="comment">/* Improper status */</span>
<a name="l01589"></a>01589       <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EIO;
<a name="l01590"></a>01590       fprintf(stderr, <span class="stringliteral">&quot;Invalid SCSI status byte: 0x%02x\n&quot;</span>, target_status);
<a name="l01591"></a>01591    } <span class="keywordflow">else</span> {                     <span class="comment">/* Status = 2, check condition */</span>
<a name="l01592"></a>01592 <span class="preprocessor">#if GDEBUG</span>
<a name="l01593"></a>01593 <span class="preprocessor"></span>      fprintf(stderr,
<a name="l01594"></a>01594               <span class="stringliteral">&quot;target_status=0x%02x,sense_key=0x%02x,add_sense=0x%02x\n&quot;</span>,
<a name="l01595"></a>01595               target_status, sense_key, add_sense);
<a name="l01596"></a>01596 <span class="preprocessor">#endif</span>
<a name="l01597"></a>01597 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (sense_key == 0) {     <span class="comment">/* Should only have to &quot;check condition&quot; if !=0 */</span>
<a name="l01598"></a>01598       }
<a name="l01599"></a>01599       <span class="keywordflow">if</span> (add_sense == <a class="code" href="jorway73a_8h.html#a5418ec10543df88aa19ad79fe4405fcd">SJY_NO_Q</a>) {      <span class="comment">/* SCSI ok, CAMAC ok, no Q on transfer */</span>
<a name="l01600"></a>01600          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = ENODEV;
<a name="l01601"></a>01601       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (add_sense == <a class="code" href="jorway73a_8h.html#af2c6ac80f5695f8644677557d3021367">SJY_NO_X</a>) {       <span class="comment">/* SCSI ok, no X on transfer */</span>
<a name="l01602"></a>01602          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EFAULT;
<a name="l01603"></a>01603       } <span class="keywordflow">else</span> {                  <span class="comment">/* SCSI problem */</span>
<a name="l01604"></a>01604          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EIO;
<a name="l01605"></a>01605       }
<a name="l01606"></a>01606    }
<a name="l01607"></a>01607 
<a name="l01608"></a>01608 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a633fe0975b0b2a310e5df3c5609f988e"></a><!-- doxytag: member="jorway73a.c::notify_camac_nondata" ref="a633fe0975b0b2a310e5df3c5609f988e" args="(int branch, int xferlen, int status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int notify_camac_nondata </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xferlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01537">1537</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00050">ADD_SENSECODE</a>, <a class="el" href="jorway73a_8h_source.html#l00087">SJY_CONTROLLER::errn</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8h_source.html#l00089">SJY_CONTROLLER::sense_buffer</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, <a class="el" href="jorway73a_8h_source.html#l00077">SJY_NO_Q</a>, <a class="el" href="jorway73a_8h_source.html#l00076">SJY_NO_X</a>, and <a class="el" href="jorway73a_8h_source.html#l00090">SJY_CONTROLLER::target_status</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00860">sjy_nondata()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01540"></a>01540 {
<a name="l01541"></a>01541    <span class="keywordtype">int</span> idx = <a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01542"></a>01542    <span class="keywordtype">int</span> addsense = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>[<a class="code" href="jorway73a_8h.html#a23341b08faa22fce2b643daa0747ecd3">ADD_SENSECODE</a>];
<a name="l01543"></a>01543    <span class="keywordtype">int</span> target_status = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#ae28328f55bc09b61571bb1bbe20119d6">target_status</a>;
<a name="l01544"></a>01544    <span class="keywordflow">switch</span> (<a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>) {
<a name="l01545"></a>01545    <span class="keywordflow">case</span> 0:
<a name="l01546"></a>01546       <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = ENODEV;
<a name="l01547"></a>01547       <span class="keywordflow">break</span>;                    <span class="comment">/* X=1,Q=0; see get_qx */</span>
<a name="l01548"></a>01548    <span class="keywordflow">case</span> 4:
<a name="l01549"></a>01549       <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = 0;
<a name="l01550"></a>01550       <span class="keywordflow">break</span>;                    <span class="comment">/* X=1,Q=1; see get_qx */</span>
<a name="l01551"></a>01551    <span class="keywordflow">case</span> 2:
<a name="l01552"></a>01552       <span class="keywordflow">switch</span> (addsense) {
<a name="l01553"></a>01553       <span class="keywordflow">case</span> <a class="code" href="jorway73a_8h.html#a5418ec10543df88aa19ad79fe4405fcd">SJY_NO_Q</a>:
<a name="l01554"></a>01554          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = ENODEV;
<a name="l01555"></a>01555          <span class="keywordflow">break</span>;                 <span class="comment">/* X=1,Q=0 */</span>
<a name="l01556"></a>01556       <span class="keywordflow">case</span> <a class="code" href="jorway73a_8h.html#af2c6ac80f5695f8644677557d3021367">SJY_NO_X</a>:
<a name="l01557"></a>01557          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EFAULT;
<a name="l01558"></a>01558          <span class="keywordflow">break</span>;                 <span class="comment">/* X=0 but SCSI ok */</span>
<a name="l01559"></a>01559       <span class="keywordflow">default</span>:
<a name="l01560"></a>01560          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EIO;
<a name="l01561"></a>01561          <span class="keywordflow">break</span>;                 <span class="comment">/* SCSI failed, too. */</span>
<a name="l01562"></a>01562       } <span class="comment">/* matches switch addsense */</span> ;
<a name="l01563"></a>01563       <span class="keywordflow">break</span>;                    <span class="comment">/* case 2 */</span>
<a name="l01564"></a>01564    <span class="keywordflow">default</span>:                    <span class="comment">/* Other status means soemthing&apos;s screwed up */</span>
<a name="l01565"></a>01565       fprintf(stderr, <span class="stringliteral">&quot;Invalid SCSI Status byte: 0x%02x\n&quot;</span>, target_status);
<a name="l01566"></a>01566    }
<a name="l01567"></a>01567 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae47975bb7a79b90263d39eca758397de"></a><!-- doxytag: member="jorway73a.c::readFile" ref="ae47975bb7a79b90263d39eca758397de" args="(FILE *g_rfp, char *filename, char charBuff[], int charBuffsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readFile </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>g_rfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>charBuff</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>charBuffsize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01361">1361</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l01280">sjy_getdev()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01362"></a>01362 {
<a name="l01363"></a>01363    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l01364"></a>01364    <span class="keywordflow">if</span> (fgets(charBuff, charBuffsize, g_rfp) != NULL) {
<a name="l01365"></a>01365       strtok(charBuff, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01366"></a>01366       status = 0;
<a name="l01367"></a>01367    } <span class="keywordflow">else</span> {                     <span class="comment">/* error or end of file found and no characters read */</span>
<a name="l01368"></a>01368       status = EOF;
<a name="l01369"></a>01369    }
<a name="l01370"></a>01370 
<a name="l01371"></a>01371    <span class="keywordflow">return</span> (status);
<a name="l01372"></a>01372 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9e64e5e231f1948397c994ff2ba9b768"></a><!-- doxytag: member="jorway73a.c::sjy_get_qx" ref="a9e64e5e231f1948397c994ff2ba9b768" args="(int branch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_get_qx </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00583">583</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="new__fadc0_8cpp_source.html#l00078">buf</a>, <a class="el" href="jorway73a_8h_source.html#l00087">SJY_CONTROLLER::errn</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8c_source.html#l00099">ieee_last_Q</a>, <a class="el" href="jorway73a_8c_source.html#l00100">ieee_last_X</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, and <a class="el" href="jorway73a_8c_source.html#l01076">sjy_reqSense()</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00157">cam16i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00348">cam16o_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00174">cam24i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00364">cam24o_q()</a>, and <a class="el" href="jorway73a_8c_source.html#l00443">camc_q()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00584"></a>00584 {
<a name="l00585"></a>00585    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="new__fadc0_8cpp.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>;
<a name="l00586"></a>00586    <span class="keywordtype">int</span> *perrno = &amp;<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[<a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a>;
<a name="l00587"></a>00587 
<a name="l00588"></a>00588    <span class="keywordflow">if</span> (*perrno == 0) {          <span class="comment">/* all OK */</span>
<a name="l00589"></a>00589       <a class="code" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 1;
<a name="l00590"></a>00590       <a class="code" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 1;
<a name="l00591"></a>00591    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*perrno == ENODEV) {      <span class="comment">/* non data command, no Q */</span>
<a name="l00592"></a>00592       <a class="code" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 0;
<a name="l00593"></a>00593       <a class="code" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 1;
<a name="l00594"></a>00594    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*perrno == EPIPE) {       <span class="comment">/* bad word count transfer on pdt */</span>
<a name="l00595"></a>00595       <a class="code" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 0;
<a name="l00596"></a>00596       <a class="code" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 0;
<a name="l00597"></a>00597    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*perrno == EIO) { <span class="comment">/* SCSI error */</span>
<a name="l00598"></a>00598       <a class="code" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 0;
<a name="l00599"></a>00599       <a class="code" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 0;
<a name="l00600"></a>00600    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*perrno == EFAULT) {      <span class="comment">/* CAMAC error */</span>
<a name="l00601"></a>00601       <a class="code" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 0;
<a name="l00602"></a>00602       <a class="code" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 0;
<a name="l00603"></a>00603    } <span class="keywordflow">else</span> {
<a name="l00604"></a>00604       buf = <a class="code" href="jorway73a_8c.html#ac49188b0e974187159abf586ac202535">sjy_reqSense</a>(<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[<a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)].fd);
<a name="l00605"></a>00605       <a class="code" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 1 - (buf[8] &amp; 128) / 128;
<a name="l00606"></a>00606       <a class="code" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 1 - (buf[8] &amp; 64) / 64;
<a name="l00607"></a>00607    }
<a name="l00608"></a>00608 
<a name="l00609"></a>00609    <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a>);
<a name="l00610"></a>00610 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a14be9712cd9a31585f46151e6a2069c5"></a><!-- doxytag: member="jorway73a.c::sjy_getdev" ref="a14be9712cd9a31585f46151e6a2069c5" args="(char *dev, int branch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_getdev </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01280">1280</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00095">BUS</a>, <a class="el" href="jorway73a_8h_source.html#l00351">CAM_S_DEV_OPEN_FAIL</a>, <a class="el" href="jorway73a_8h_source.html#l00341">CAM_S_SUCCESS</a>, <a class="el" href="jorway73a_8c_source.html#l01269">devtble</a>, <a class="el" href="fal_8c_source.html#l00219">filename</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00075">found</a>, <a class="el" href="mdump_8c_source.html#l00115">i</a>, <a class="el" href="jorway73a_8h_source.html#l00094">ID</a>, <a class="el" href="jorway73a_8c_source.html#l01361">readFile()</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, and <a class="el" href="mana_8cpp_source.html#l00675">type</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00469">cam_init()</a>, and <a class="el" href="jorway73a_8c_source.html#l01192">cdchn()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01281"></a>01281 {
<a name="l01282"></a>01282    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> = 0;
<a name="l01283"></a>01283    <span class="keywordtype">char</span> charBuff[120];          <span class="comment">/* file line buffer */</span>
<a name="l01284"></a>01284 
<a name="l01285"></a>01285    FILE *g_rfp;                 <span class="comment">/* /proc/scsi/scsi file descriptor */</span>
<a name="l01286"></a>01286    <span class="keywordtype">char</span> <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>[32] = { <span class="stringliteral">&quot;/proc/scsi/scsi&quot;</span> };   <span class="comment">/* file describing SCSI devices attached to system */</span>
<a name="l01287"></a>01287    <span class="keywordtype">int</span> bus;                     <span class="comment">/* SCSI bus */</span>
<a name="l01288"></a>01288    <span class="keywordtype">int</span> id;                      <span class="comment">/* SCSI id */</span>
<a name="l01289"></a>01289    <span class="keywordtype">char</span> vendor[10];             <span class="comment">/* SCSI device vendor */</span>
<a name="l01290"></a>01290    <span class="keywordtype">char</span> <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>[10];               <span class="comment">/* SCSI device type */</span>
<a name="l01291"></a>01291    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a408216eef095a35ba3963fc6f4f4d7a8">found</a> = 0;               <span class="comment">/* Jorway found flag */</span>
<a name="l01292"></a>01292    <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0;                   <span class="comment">/* devtble index */</span>
<a name="l01293"></a>01293    <span class="keywordtype">int</span> devtblesz = 9;           <span class="comment">/* size of devtble */</span>
<a name="l01294"></a>01294 
<a name="l01295"></a>01295 
<a name="l01296"></a>01296    <span class="comment">/* open /proc/scsi/scsi */</span>
<a name="l01297"></a>01297    g_rfp = fopen(filename, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l01298"></a>01298    <span class="keywordflow">if</span> (g_rfp == NULL) {
<a name="l01299"></a>01299       fprintf(stderr, <span class="stringliteral">&quot;ScanSCSIDevices:  Cannot open %s&quot;</span>, filename);
<a name="l01300"></a>01300       <span class="keywordflow">return</span> (<a class="code" href="jorway73a_8h.html#aa17d92ecacf9147e61c078f172641f3c">CAM_S_DEV_OPEN_FAIL</a>);
<a name="l01301"></a>01301    }
<a name="l01302"></a>01302 
<a name="l01303"></a>01303    <span class="comment">/* read each line of filename */</span>
<a name="l01304"></a>01304    <span class="keywordflow">while</span> ((status == 0) &amp;&amp; (i &lt; devtblesz)) {
<a name="l01305"></a>01305 
<a name="l01306"></a>01306       status = <a class="code" href="jorway73a_8c.html#ae47975bb7a79b90263d39eca758397de">readFile</a>(g_rfp, filename, charBuff, <span class="keyword">sizeof</span>(charBuff));
<a name="l01307"></a>01307       <span class="keywordflow">if</span> (status == EOF) {      <span class="comment">/* end of file */</span>
<a name="l01308"></a>01308 
<a name="l01309"></a>01309          <span class="keywordflow">if</span> (!found)
<a name="l01310"></a>01310             status = <a class="code" href="jorway73a_8h.html#aa17d92ecacf9147e61c078f172641f3c">CAM_S_DEV_OPEN_FAIL</a>;
<a name="l01311"></a>01311          <span class="keywordflow">break</span>;
<a name="l01312"></a>01312 
<a name="l01313"></a>01313       } <span class="keywordflow">else</span> {                  <span class="comment">/* parse the file line */</span>
<a name="l01314"></a>01314 
<a name="l01315"></a>01315          <span class="comment">/* parse the Host line */</span>
<a name="l01316"></a>01316          <span class="keywordflow">if</span> (strncmp(charBuff, <span class="stringliteral">&quot;Host&quot;</span>, 4) == 0) {
<a name="l01317"></a>01317             sscanf(&amp;charBuff[10], <span class="stringliteral">&quot;%d&quot;</span>, &amp;bus);
<a name="l01318"></a>01318             sscanf(&amp;charBuff[29], <span class="stringliteral">&quot;%d&quot;</span>, &amp;<span class="keywordtype">id</span>);
<a name="l01319"></a>01319          }
<a name="l01320"></a>01320 
<a name="l01321"></a>01321          <span class="comment">/* parse the Vendor line */</span>
<a name="l01322"></a>01322          <span class="keywordflow">if</span> (strncmp(&amp;charBuff[2], <span class="stringliteral">&quot;Vendor&quot;</span>, 6) == 0) {
<a name="l01323"></a>01323             sscanf(&amp;charBuff[10], <span class="stringliteral">&quot;%s&quot;</span>, vendor);
<a name="l01324"></a>01324 
<a name="l01325"></a>01325             <span class="keywordflow">if</span> (strcmp(vendor, <span class="stringliteral">&quot;JORWAY&quot;</span>) == 0) {
<a name="l01326"></a>01326                <span class="keywordflow">if</span> ((<span class="keywordtype">id</span> == <a class="code" href="jorway73a_8h.html#a4bfe115debc7f472dd7dfe4ef9679ca0">ID</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>)) &amp;&amp; (bus == <a class="code" href="jorway73a_8h.html#a862084ca8bda595e2744a6d53d02917d">BUS</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>))) {
<a name="l01327"></a>01327                   <span class="comment">/* found our device by matching scsi id */</span>
<a name="l01328"></a>01328                   strcpy(<a class="code" href="vmedrv_8c.html#a8910285a0352a5c710e65ec9ecbe32a1">dev</a>, <a class="code" href="jorway73a_8c.html#a46c254f440287e2529e83c8e49ed37ad">devtble</a>[i]);
<a name="l01329"></a>01329                   found = 1;
<a name="l01330"></a>01330                   <span class="keywordflow">break</span>;
<a name="l01331"></a>01331                }
<a name="l01332"></a>01332             } <span class="keywordflow">else</span> {            <span class="comment">/* SCSI device found, but not a Jorway */</span>
<a name="l01333"></a>01333                i++;
<a name="l01334"></a>01334             }
<a name="l01335"></a>01335          }
<a name="l01336"></a>01336 
<a name="l01337"></a>01337          <span class="comment">/* parse the Type line */</span>
<a name="l01338"></a>01338          <span class="keywordflow">if</span> (strncmp(&amp;charBuff[2], <span class="stringliteral">&quot;Type&quot;</span>, 4) == 0) {
<a name="l01339"></a>01339             sscanf(&amp;charBuff[10], <span class="stringliteral">&quot;%s&quot;</span>, type);
<a name="l01340"></a>01340 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01341"></a>01341 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;Unknown&quot;</span>) || (strcmp(type, <span class="stringliteral">&quot;Processor&quot;</span>))) {
<a name="l01342"></a>01342                fprintf(stderr, <span class="stringliteral">&quot;Found type %s&quot;</span>, type);
<a name="l01343"></a>01343             }
<a name="l01344"></a>01344 <span class="preprocessor">#endif</span>
<a name="l01345"></a>01345 <span class="preprocessor"></span>         }
<a name="l01346"></a>01346       }                         <span class="comment">/* if status == 0 */</span>
<a name="l01347"></a>01347    }                            <span class="comment">/* while */</span>
<a name="l01348"></a>01348 
<a name="l01349"></a>01349    fclose(g_rfp);
<a name="l01350"></a>01350    <span class="keywordflow">if</span> (found)
<a name="l01351"></a>01351       status = <a class="code" href="jorway73a_8h.html#a1ac3848cc49cd53d6f10f175d60a388b">CAM_S_SUCCESS</a>;
<a name="l01352"></a>01352    <span class="keywordflow">return</span> (status);
<a name="l01353"></a>01353 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2f3b012918d1fa4a5472923f5269b459"></a><!-- doxytag: member="jorway73a.c::sjy_getsem" ref="a2f3b012918d1fa4a5472923f5269b459" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_getsem </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01520">1520</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l01192">cdchn()</a>, and <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01521"></a>01521 {
<a name="l01522"></a>01522    <span class="keywordflow">return</span> (0);
<a name="l01523"></a>01523 }                               <span class="comment">/* get the sjy semaphore */</span>
</pre></div></p>

</div>
</div>
<a class="anchor" id="abd733caa05d3cc5b9dc090f7993fedca"></a><!-- doxytag: member="jorway73a.c::sjy_inisem" ref="abd733caa05d3cc5b9dc090f7993fedca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_inisem </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01515">1515</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l01192">cdchn()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01516"></a>01516 {
<a name="l01517"></a>01517    <span class="keywordflow">return</span> (1);
<a name="l01518"></a>01518 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a98532319de57f3181b1486ab7a3ccae0"></a><!-- doxytag: member="jorway73a.c::sjy_inquiry" ref="a98532319de57f3181b1486ab7a3ccae0" args="(int branch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* sjy_inquiry </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01001">1001</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8c_source.html#l00628">cmd</a>, <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>, <a class="el" href="mdump_8c_source.html#l00115">i</a>, <a class="el" href="jorway73a_8h_source.html#l00041">INQUIRY_CMD</a>, <a class="el" href="jorway73a_8h_source.html#l00042">INQUIRY_CMDLEN</a>, <a class="el" href="jorway73a_8h_source.html#l00043">INQUIRY_REPLY_LEN</a>, and <a class="el" href="jorway73a_8c_source.html#l00625">SCSI_OFF</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01002"></a>01002 {
<a name="l01003"></a>01003    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Inqbuffer[<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + <a class="code" href="jorway73a_8h.html#ae5cff71db43dec42095a92793acef67a">INQUIRY_REPLY_LEN</a>];
<a name="l01004"></a>01004    <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l01005"></a>01005    <span class="keywordtype">char</span> *cptr;
<a name="l01006"></a>01006    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cmdblk[<a class="code" href="jorway73a_8h.html#ad12cdb08a4854304008dd972477503d2">INQUIRY_CMDLEN</a>] = { <a class="code" href="jorway73a_8h.html#a9b43b18ada752599850497e638cfc900">INQUIRY_CMD</a>,        <span class="comment">/* command */</span>
<a name="l01007"></a>01007       0,                        <span class="comment">/* lun/reserved */</span>
<a name="l01008"></a>01008       0,                        <span class="comment">/* page code */</span>
<a name="l01009"></a>01009       0,                        <span class="comment">/* reserved */</span>
<a name="l01010"></a>01010       <a class="code" href="jorway73a_8h.html#ae5cff71db43dec42095a92793acef67a">INQUIRY_REPLY_LEN</a>,        <span class="comment">/* allocation length */</span>
<a name="l01011"></a>01011       0
<a name="l01012"></a>01012    };                           <span class="comment">/* reserved/flag/link */</span>
<a name="l01013"></a>01013 
<a name="l01014"></a>01014    memcpy(<a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>, cmdblk, <span class="keyword">sizeof</span>(cmdblk));
<a name="l01015"></a>01015    <span class="comment">/* clear the Inquiry buffer */</span>
<a name="l01016"></a>01016    <span class="comment">/*memset( Inqbuffer, &apos;\0&apos;, sizeof(Inqbuffer) ); */</span>
<a name="l01017"></a>01017 
<a name="l01018"></a>01018    <a class="code" href="jorway73a_8c.html#a3f644b94d637a6cdeb3149a7740f0ce7">handle_scsi_cmd</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, <span class="keyword">sizeof</span>(cmdblk), 0, <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>,
<a name="l01019"></a>01019                    <span class="keyword">sizeof</span>(Inqbuffer) - <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>, Inqbuffer);
<a name="l01020"></a>01020 
<a name="l01021"></a>01021    <span class="comment">/* handle_scsi_cmd removes sg_header in the copy from i_buff to o_buff,</span>
<a name="l01022"></a>01022 <span class="comment">    ** so don&apos;t add SCSI_OFF offset to Inqbuffer</span>
<a name="l01023"></a>01023 <span class="comment">    */</span>
<a name="l01024"></a>01024    <span class="comment">/*</span>
<a name="l01025"></a>01025 <span class="comment">      fprintf(stderr,&quot;Inquiry buffer\n&quot;);</span>
<a name="l01026"></a>01026 <span class="comment">      fprintf(stderr,&quot;%s\n&quot;,Inqbuffer+INQUIRY_VENDOR);</span>
<a name="l01027"></a>01027 <span class="comment">    */</span>
<a name="l01028"></a>01028    <span class="keywordflow">return</span> (Inqbuffer);
<a name="l01029"></a>01029 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa606b4f43279fe1deb0f4a7e567c2bf8"></a><!-- doxytag: member="jorway73a.c::sjy_nondata" ref="aa606b4f43279fe1deb0f4a7e567c2bf8" args="(int branch, int camCmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_nondata </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>camCmd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00860">860</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8c_source.html#l00628">cmd</a>, <a class="el" href="jorway73a_8c_source.html#l00627">CMD_SIZE</a>, <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>, <a class="el" href="jorway73a_8c_source.html#l01537">notify_camac_nondata()</a>, <a class="el" href="jorway73a_8c_source.html#l00625">SCSI_OFF</a>, <a class="el" href="jorway73a_8h_source.html#l00243">SJY_NONDATA_CMD</a>, and <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00443">camc_q()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00861"></a>00861 {
<a name="l00862"></a>00862    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> scmdblk[6];
<a name="l00863"></a>00863    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> lcmdblk[12];    <span class="comment">/* required for commands 0xc0-0xff */</span>
<a name="l00864"></a>00864    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *cmdblk;
<a name="l00865"></a>00865    <span class="keywordtype">int</span> cmdsize;
<a name="l00866"></a>00866    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l00867"></a>00867    bzero(<a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, <a class="code" href="jorway73a_8c.html#a46d8c74b5360b1df7727d0ee6de59df2">CMD_SIZE</a>);
<a name="l00868"></a>00868    <span class="comment">/* cmdblk = scmdblk; */</span>
<a name="l00869"></a>00869    cmdblk = <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>;
<a name="l00870"></a>00870    cmdsize = 6;
<a name="l00871"></a>00871    cmdblk[0] = <a class="code" href="jorway73a_8h.html#af35abc9ab1dcaf42287a9fdb2299d37d">SJY_NONDATA_CMD</a>; <span class="comment">/* Op code */</span>
<a name="l00872"></a>00872    cmdblk[1] = (camCmd &gt;&gt; 24) &amp; 0x1F;   <span class="comment">/* lun/function code */</span>
<a name="l00873"></a>00873    cmdblk[2] = (camCmd &gt;&gt; 16) &amp; 0xFF;   <span class="comment">/* mode/station */</span>
<a name="l00874"></a>00874    cmdblk[3] = (camCmd &gt;&gt; 8) &amp; 0x0F;    <span class="comment">/* address */</span>
<a name="l00875"></a>00875    cmdblk[4] = 0;               <span class="comment">/* allocation length */</span>
<a name="l00876"></a>00876    cmdblk[5] = 0;               <span class="comment">/* control byte, always 0 */</span>
<a name="l00877"></a>00877    status = <a class="code" href="jorway73a_8c.html#a3f644b94d637a6cdeb3149a7740f0ce7">handle_scsi_cmd</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, cmdsize, 0, <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, 0, NULL);
<a name="l00878"></a>00878    <span class="comment">/*     sjy_notify_camac_nondata(branch, 0, status); */</span>
<a name="l00879"></a>00879    <a class="code" href="jorway73a_8c.html#a633fe0975b0b2a310e5df3c5609f988e">notify_camac_nondata</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, 0, status);
<a name="l00880"></a>00880    <span class="keywordflow">return</span> (status);
<a name="l00881"></a>00881 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a13053d959bb40e97cfabd4089e70e8ec"></a><!-- doxytag: member="jorway73a.c::sjy_notify_camac_data" ref="a13053d959bb40e97cfabd4089e70e8ec" args="(int branch, int xferlen, int status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_notify_camac_data </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xferlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01111">1111</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00050">ADD_SENSECODE</a>, <a class="el" href="jorway73a_8h_source.html#l00087">SJY_CONTROLLER::errn</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8h_source.html#l00088">SJY_CONTROLLER::result</a>, <a class="el" href="jorway73a_8h_source.html#l00089">SJY_CONTROLLER::sense_buffer</a>, <a class="el" href="jorway73a_8h_source.html#l00049">SENSEKEY</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, <a class="el" href="jorway73a_8h_source.html#l00077">SJY_NO_Q</a>, and <a class="el" href="jorway73a_8h_source.html#l00076">SJY_NO_X</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01114"></a>01114 {                               <span class="comment">/* actual transfer length */</span>
<a name="l01115"></a>01115    <span class="keywordtype">int</span> idx = <a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01116"></a>01116    <span class="keywordtype">int</span> sense_key = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>[<a class="code" href="jorway73a_8h.html#a124960eca55d1db5f5b3740aaecf20c5">SENSEKEY</a>];
<a name="l01117"></a>01117    <span class="keywordtype">int</span> add_sense = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>[<a class="code" href="jorway73a_8h.html#a23341b08faa22fce2b643daa0747ecd3">ADD_SENSECODE</a>];
<a name="l01118"></a>01118 
<a name="l01119"></a>01119 
<a name="l01120"></a>01120    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = 0;
<a name="l01121"></a>01121 
<a name="l01122"></a>01122    <span class="keywordflow">if</span> (sense_key) {
<a name="l01123"></a>01123       <span class="keywordflow">if</span> (add_sense == <a class="code" href="jorway73a_8h.html#a5418ec10543df88aa19ad79fe4405fcd">SJY_NO_Q</a>) {
<a name="l01124"></a>01124          <span class="comment">/* SCSI ok, CAMAC ok, no Q on transfer */</span>
<a name="l01125"></a>01125          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = ENODEV;
<a name="l01126"></a>01126       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (add_sense == <a class="code" href="jorway73a_8h.html#af2c6ac80f5695f8644677557d3021367">SJY_NO_X</a>) {
<a name="l01127"></a>01127          <span class="comment">/* SCSI ok, no X on transfer */</span>
<a name="l01128"></a>01128          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EFAULT;
<a name="l01129"></a>01129       } <span class="keywordflow">else</span> {
<a name="l01130"></a>01130          <span class="comment">/* SCSI problem */</span>
<a name="l01131"></a>01131          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EIO;
<a name="l01132"></a>01132       }
<a name="l01133"></a>01133    } <span class="keywordflow">else</span> {
<a name="l01134"></a>01134       <span class="keywordflow">if</span> (<a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> == xferlen) {
<a name="l01135"></a>01135          <span class="comment">/* SCSI ok, CAMAC ok, assuming Q on transfer */</span>
<a name="l01136"></a>01136          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = 0;
<a name="l01137"></a>01137       }
<a name="l01138"></a>01138    }
<a name="l01139"></a>01139 
<a name="l01140"></a>01140    <span class="keywordflow">return</span> <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a518c03b64309b9d2de5e1ce69a21cfcd">result</a>;
<a name="l01141"></a>01141 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af75bfa9a3a209871ec6e27c4916df2d5"></a><!-- doxytag: member="jorway73a.c::sjy_notify_camac_nondata" ref="af75bfa9a3a209871ec6e27c4916df2d5" args="(int branch, int xferlen, int status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_notify_camac_nondata </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xferlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01152">1152</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8h_source.html#l00050">ADD_SENSECODE</a>, <a class="el" href="jorway73a_8h_source.html#l00087">SJY_CONTROLLER::errn</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8h_source.html#l00088">SJY_CONTROLLER::result</a>, <a class="el" href="jorway73a_8h_source.html#l00089">SJY_CONTROLLER::sense_buffer</a>, <a class="el" href="jorway73a_8h_source.html#l00049">SENSEKEY</a>, <a class="el" href="jorway73a_8h_source.html#l00059">SJY_CHECK_CONDITION</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, <a class="el" href="jorway73a_8h_source.html#l00058">SJY_GOOD</a>, <a class="el" href="jorway73a_8h_source.html#l00077">SJY_NO_Q</a>, and <a class="el" href="jorway73a_8h_source.html#l00076">SJY_NO_X</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01155"></a>01155 {                               <span class="comment">/* actual transfer length */</span>
<a name="l01156"></a>01156    <span class="keywordtype">int</span> idx = <a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01157"></a>01157    <span class="keywordtype">int</span> sense_key = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>[<a class="code" href="jorway73a_8h.html#a124960eca55d1db5f5b3740aaecf20c5">SENSEKEY</a>];
<a name="l01158"></a>01158    <span class="keywordtype">int</span> add_sense = <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a710433678e89290ef4a40354f573dd7c">sense_buffer</a>[<a class="code" href="jorway73a_8h.html#a23341b08faa22fce2b643daa0747ecd3">ADD_SENSECODE</a>];
<a name="l01159"></a>01159 
<a name="l01160"></a>01160    <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = 0;
<a name="l01161"></a>01161 
<a name="l01162"></a>01162    <span class="keywordflow">if</span> ((<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].result == <a class="code" href="jorway73a_8h.html#a013491703e205687f3e9205fed9b4334">SJY_GOOD</a>) &amp;&amp; !(sense_key)) {
<a name="l01163"></a>01163       <span class="comment">/* SCSI ok. CAMAC ok, no Q on transfer */</span>
<a name="l01164"></a>01164       <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = ENODEV;
<a name="l01165"></a>01165    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].result == <a class="code" href="jorway73a_8h.html#a52ca2b8dd2a270cb2582da93e4790f6d">SJY_CHECK_CONDITION</a>)
<a name="l01166"></a>01166               || (sense_key)) {
<a name="l01167"></a>01167       <span class="keywordflow">if</span> (add_sense == <a class="code" href="jorway73a_8h.html#a5418ec10543df88aa19ad79fe4405fcd">SJY_NO_Q</a>) {
<a name="l01168"></a>01168          <span class="comment">/* SCSI ok, CAMAC ok, no Q on transfer */</span>
<a name="l01169"></a>01169          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = ENODEV;
<a name="l01170"></a>01170       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (add_sense == <a class="code" href="jorway73a_8h.html#af2c6ac80f5695f8644677557d3021367">SJY_NO_X</a>) {       <span class="comment">/* SCSI ok, no X on transfer */</span>
<a name="l01171"></a>01171          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EFAULT;
<a name="l01172"></a>01172       } <span class="keywordflow">else</span> {                  <span class="comment">/* SCSI problem */</span>
<a name="l01173"></a>01173          <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = EIO;
<a name="l01174"></a>01174       }
<a name="l01175"></a>01175    } <span class="keywordflow">else</span> {                     <span class="comment">/* SCSI ok, CAMAC ok, assuming Q on transfer */</span>
<a name="l01176"></a>01176       <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a8efe5331ab1a93746528887ea361f3bd">errn</a> = 0;
<a name="l01177"></a>01177    }
<a name="l01178"></a>01178    <span class="keywordflow">return</span> <a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].<a class="code" href="structSJY__CONTROLLER.html#a518c03b64309b9d2de5e1ce69a21cfcd">result</a>;
<a name="l01179"></a>01179 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="affa47cfeeb7d4af1452da226e03f4cc8"></a><!-- doxytag: member="jorway73a.c::sjy_putsem" ref="affa47cfeeb7d4af1452da226e03f4cc8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_putsem </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01525">1525</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l01192">cdchn()</a>, and <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01526"></a>01526 {
<a name="l01527"></a>01527    <span class="keywordflow">return</span> (0);
<a name="l01528"></a>01528 }                               <span class="comment">/* release the sjy semaphore */</span>
</pre></div></p>

</div>
</div>
<a class="anchor" id="a747d8b2e874a5416bc88493fa21a60cd"></a><!-- doxytag: member="jorway73a.c::sjy_read" ref="a747d8b2e874a5416bc88493fa21a60cd" args="(int branch, int camCmd, void *dataBuffer, int xferlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_read </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>camCmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>dataBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xferlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00949">949</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8c_source.html#l00628">cmd</a>, <a class="el" href="jorway73a_8c_source.html#l00627">CMD_SIZE</a>, <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>, <a class="el" href="jorway73a_8c_source.html#l01574">notify_camac_data()</a>, <a class="el" href="jorway73a_8c_source.html#l00625">SCSI_OFF</a>, <a class="el" href="jorway73a_8h_source.html#l00245">SJY_LONGXFER_DATA_CMD</a>, <a class="el" href="jorway73a_8h_source.html#l00244">SJY_SHORTXFER_DATA_CMD</a>, and <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00126">cam16i()</a>, <a class="el" href="jorway73a_8c_source.html#l00157">cam16i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00187">cam16i_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00229">cam16i_rq()</a>, <a class="el" href="jorway73a_8c_source.html#l00140">cam24i()</a>, <a class="el" href="jorway73a_8c_source.html#l00174">cam24i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00208">cam24i_r()</a>, and <a class="el" href="jorway73a_8c_source.html#l00253">cam24i_rq()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00950"></a>00950 {
<a name="l00951"></a>00951    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> scmdblk[6];
<a name="l00952"></a>00952    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> lcmdblk[10];
<a name="l00953"></a>00953    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *cmdblk;
<a name="l00954"></a>00954    <span class="keywordtype">int</span> cmdsize;
<a name="l00955"></a>00955    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l00956"></a>00956    bzero(<a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, <a class="code" href="jorway73a_8c.html#a46d8c74b5360b1df7727d0ee6de59df2">CMD_SIZE</a>);        <span class="comment">/* clear cmd for case of short transfers */</span>
<a name="l00957"></a>00957    <span class="keywordflow">if</span> (xferlen &lt; 256) {
<a name="l00958"></a>00958       <span class="comment">/* cmdblk = scmdblk; */</span>
<a name="l00959"></a>00959       cmdblk = <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>;
<a name="l00960"></a>00960       cmdblk[0] = <a class="code" href="jorway73a_8h.html#a3c545a41be73afcaf3a8ccfef9eeaa83">SJY_SHORTXFER_DATA_CMD</a>;       <span class="comment">/* Op code */</span>
<a name="l00961"></a>00961       cmdblk[1] = (camCmd &gt;&gt; 24) &amp; 0x1F;        <span class="comment">/* lun/function code */</span>
<a name="l00962"></a>00962       cmdblk[2] = (camCmd &gt;&gt; 16) &amp; 0xFF;        <span class="comment">/* mode/station */</span>
<a name="l00963"></a>00963       cmdblk[3] = (camCmd &gt;&gt; 8) &amp; 0x0F; <span class="comment">/* address */</span>
<a name="l00964"></a>00964       cmdblk[4] = xferlen;      <span class="comment">/* allocation length */</span>
<a name="l00965"></a>00965       cmdblk[5] = 0;            <span class="comment">/* control byte, always 0 */</span>
<a name="l00966"></a>00966    } <span class="keywordflow">else</span> {
<a name="l00967"></a>00967       <span class="comment">/* cmdblk = lcmdblk; */</span>
<a name="l00968"></a>00968       cmdblk = <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>;
<a name="l00969"></a>00969       cmdblk[0] = <a class="code" href="jorway73a_8h.html#aa87531dd8450cf97b498767f5a1910a5">SJY_LONGXFER_DATA_CMD</a>;        <span class="comment">/* Op code */</span>
<a name="l00970"></a>00970       cmdblk[1] = 0;            <span class="comment">/* lun/reserved */</span>
<a name="l00971"></a>00971       cmdblk[2] = (camCmd &gt;&gt; 24) &amp; 0x1F;        <span class="comment">/* reserved/function code */</span>
<a name="l00972"></a>00972       cmdblk[3] = (camCmd &gt;&gt; 16) &amp; 0xFF;        <span class="comment">/* mode/S/station */</span>
<a name="l00973"></a>00973       cmdblk[4] = (camCmd &gt;&gt; 8) &amp; 0x0F; <span class="comment">/* address */</span>
<a name="l00974"></a>00974       cmdblk[5] = 0;            <span class="comment">/* reserved */</span>
<a name="l00975"></a>00975       cmdblk[6] = (xferlen &gt;&gt; 16) &amp; 0xFF;       <span class="comment">/* transfer length (MSB) */</span>
<a name="l00976"></a>00976       cmdblk[7] = (xferlen &gt;&gt; 8) &amp; 0xFF;
<a name="l00977"></a>00977       cmdblk[8] = xferlen &amp; 0xFF;       <span class="comment">/* transfer length (LSB) */</span>
<a name="l00978"></a>00978       cmdblk[9] = 0;            <span class="comment">/* control byte, always 0 */</span>
<a name="l00979"></a>00979    }
<a name="l00980"></a>00980    <span class="keywordflow">if</span> (cmdblk[0] == <a class="code" href="jorway73a_8h.html#a3c545a41be73afcaf3a8ccfef9eeaa83">SJY_SHORTXFER_DATA_CMD</a>)
<a name="l00981"></a>00981       cmdsize = 6;
<a name="l00982"></a>00982    <span class="keywordflow">else</span>
<a name="l00983"></a>00983       cmdsize = 10;
<a name="l00984"></a>00984    <span class="comment">/* memcpy( cmd + SCSI_OFF, cmdblk, cmdsize ); */</span>
<a name="l00985"></a>00985    status = <a class="code" href="jorway73a_8c.html#a3f644b94d637a6cdeb3149a7740f0ce7">handle_scsi_cmd</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, cmdsize, 0, <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, xferlen, dataBuffer);
<a name="l00986"></a>00986    <a class="code" href="jorway73a_8c.html#a752fa0f75faca1883f6c404ed95d0822">notify_camac_data</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, xferlen, status);
<a name="l00987"></a>00987    <span class="keywordflow">return</span> (status);
<a name="l00988"></a>00988 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac49188b0e974187159abf586ac202535"></a><!-- doxytag: member="jorway73a.c::sjy_reqSense" ref="ac49188b0e974187159abf586ac202535" args="(int branch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* sjy_reqSense </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01076">1076</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8c_source.html#l00628">cmd</a>, <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>, <a class="el" href="jorway73a_8h_source.html#l00096">IDX</a>, <a class="el" href="jorway73a_8c_source.html#l00625">SCSI_OFF</a>, <a class="el" href="jorway73a_8h_source.html#l00052">SENSE_CMD</a>, <a class="el" href="jorway73a_8h_source.html#l00053">SENSE_CMDLEN</a>, <a class="el" href="jorway73a_8h_source.html#l00208">sjy_controller</a>, and <a class="el" href="jorway73a_8h_source.html#l00063">SJY_SENSE_LENGTH</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00583">sjy_get_qx()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01077"></a>01077 {
<a name="l01078"></a>01078    <span class="keywordtype">int</span> idx = <a class="code" href="jorway73a_8h.html#a5ef013284ffb7b7ec3ba7da15b7afe12">IDX</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>);
<a name="l01079"></a>01079    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sensebuffer[<a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + <a class="code" href="jorway73a_8h.html#ac474b77e8d01885c6424d845d5fc3e49">SJY_SENSE_LENGTH</a>];
<a name="l01080"></a>01080 
<a name="l01081"></a>01081    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cmdblk[<a class="code" href="jorway73a_8h.html#a20938c36cf8bdcce71855f0a74344c29">SENSE_CMDLEN</a>] = { <a class="code" href="jorway73a_8h.html#aece055c47e8513782fe09c6f88d52888">SENSE_CMD</a>,    <span class="comment">/* command */</span>
<a name="l01082"></a>01082       0,                        <span class="comment">/* lun/reserved */</span>
<a name="l01083"></a>01083       0,                        <span class="comment">/* reserved */</span>
<a name="l01084"></a>01084       0,                        <span class="comment">/* reserved */</span>
<a name="l01085"></a>01085       <a class="code" href="jorway73a_8h.html#ac474b77e8d01885c6424d845d5fc3e49">SJY_SENSE_LENGTH</a>,         <span class="comment">/* allocation length */</span>
<a name="l01086"></a>01086       0
<a name="l01087"></a>01087    };                           <span class="comment">/* reserved/flag/link */</span>
<a name="l01088"></a>01088 
<a name="l01089"></a>01089    memcpy(<a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>, cmdblk, <span class="keyword">sizeof</span>(cmdblk));
<a name="l01090"></a>01090 
<a name="l01091"></a>01091    memset(sensebuffer, <span class="charliteral">&apos;\0&apos;</span>, <span class="keyword">sizeof</span>(sensebuffer));
<a name="l01092"></a>01092 
<a name="l01093"></a>01093    <a class="code" href="jorway73a_8c.html#a3f644b94d637a6cdeb3149a7740f0ce7">handle_scsi_cmd</a>(<a class="code" href="jorway73a_8h.html#a7865bbd504262133b68ef11f3c862b23">sjy_controller</a>[idx].fd, <span class="keyword">sizeof</span>(cmdblk), 0, <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>,
<a name="l01094"></a>01094                    <span class="keyword">sizeof</span>(sensebuffer) - <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>, sensebuffer);
<a name="l01095"></a>01095 
<a name="l01096"></a>01096    <span class="comment">/* handle_scsi_cmd removes sg_header in the copy from i_buff to o_buff,</span>
<a name="l01097"></a>01097 <span class="comment">    ** so don&apos;t add SCSI_OFF offset to sensebuffer</span>
<a name="l01098"></a>01098 <span class="comment">    */</span>
<a name="l01099"></a>01099    <span class="keywordflow">return</span> (sensebuffer);
<a name="l01100"></a>01100 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abaa46601bf81617267a3bacefb9c9571"></a><!-- doxytag: member="jorway73a.c::sjy_tur" ref="abaa46601bf81617267a3bacefb9c9571" args="(int branch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_tur </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01039">1039</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8c_source.html#l00628">cmd</a>, <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>, <a class="el" href="mdump_8c_source.html#l00115">i</a>, <a class="el" href="jorway73a_8c_source.html#l00625">SCSI_OFF</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, <a class="el" href="jorway73a_8h_source.html#l00046">TESTUNITREADY_CMD</a>, and <a class="el" href="jorway73a_8h_source.html#l00047">TESTUNITREADY_CMDLEN</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00424">camc_chk()</a>, and <a class="el" href="jorway73a_8c_source.html#l01192">cdchn()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01040"></a>01040 {
<a name="l01041"></a>01041    <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l01042"></a>01042    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l01043"></a>01043    <span class="comment">/* request READY status */</span>
<a name="l01044"></a>01044    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cmdblk[<a class="code" href="jorway73a_8h.html#a513670ae627acc78cc128c1236ccf5c0">TESTUNITREADY_CMDLEN</a>] = {
<a name="l01045"></a>01045       <a class="code" href="jorway73a_8h.html#a1f7935b5a2b87b036c8dd4b17b106a69">TESTUNITREADY_CMD</a>,        <span class="comment">/* command */</span>
<a name="l01046"></a>01046       0,                        <span class="comment">/* lun/reserved */</span>
<a name="l01047"></a>01047       0,                        <span class="comment">/* reserved */</span>
<a name="l01048"></a>01048       0,                        <span class="comment">/* reserved */</span>
<a name="l01049"></a>01049       0,                        <span class="comment">/* reserved */</span>
<a name="l01050"></a>01050       0
<a name="l01051"></a>01051    };                           <span class="comment">/* reserved */</span>
<a name="l01052"></a>01052 
<a name="l01053"></a>01053    memcpy(<a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>, cmdblk, <span class="keyword">sizeof</span>(cmdblk));
<a name="l01054"></a>01054    <span class="comment">/* This must be done twice to get good status from power cycled Jorway */</span>
<a name="l01055"></a>01055    <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {
<a name="l01056"></a>01056       status = <a class="code" href="jorway73a_8c.html#a3f644b94d637a6cdeb3149a7740f0ce7">handle_scsi_cmd</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, <span class="keyword">sizeof</span>(cmdblk), 0, <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, 0, NULL);
<a name="l01057"></a>01057    }
<a name="l01058"></a>01058    <span class="keywordflow">if</span> (status)
<a name="l01059"></a>01059       perror(<span class="stringliteral">&quot;sjy_tur&quot;</span>);
<a name="l01060"></a>01060 
<a name="l01061"></a>01061    <span class="keywordflow">return</span> (status);
<a name="l01062"></a>01062 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a260ae21605888a68ed82db8dd25bcac4"></a><!-- doxytag: member="jorway73a.c::sjy_write" ref="a260ae21605888a68ed82db8dd25bcac4" args="(int branch, int camCmd, void *dataBuffer, int xferlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sjy_write </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>camCmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>dataBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xferlen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00892">892</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>References <a class="el" href="jorway73a_8c_source.html#l00628">cmd</a>, <a class="el" href="jorway73a_8c_source.html#l00627">CMD_SIZE</a>, <a class="el" href="jorway73a_8c_source.html#l00643">handle_scsi_cmd()</a>, <a class="el" href="jorway73a_8c_source.html#l01574">notify_camac_data()</a>, <a class="el" href="jorway73a_8c_source.html#l00625">SCSI_OFF</a>, <a class="el" href="jorway73a_8h_source.html#l00245">SJY_LONGXFER_DATA_CMD</a>, <a class="el" href="jorway73a_8h_source.html#l00244">SJY_SHORTXFER_DATA_CMD</a>, and <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00348">cam16o_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00383">cam16o_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00364">cam24o_q()</a>, and <a class="el" href="jorway73a_8c_source.html#l00404">cam24o_r()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00893"></a>00893 {
<a name="l00894"></a>00894    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> scmdblk[6];
<a name="l00895"></a>00895    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> lcmdblk[10];
<a name="l00896"></a>00896    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *cmdblk;
<a name="l00897"></a>00897    <span class="keywordtype">int</span> cmdsize;
<a name="l00898"></a>00898    <span class="keywordtype">int</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l00899"></a>00899 
<a name="l00900"></a>00900    bzero(<a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, <a class="code" href="jorway73a_8c.html#a46d8c74b5360b1df7727d0ee6de59df2">CMD_SIZE</a>);
<a name="l00901"></a>00901    <span class="keywordflow">if</span> (xferlen &lt; 256) {         <span class="comment">/* This is also the nondata command block */</span>
<a name="l00902"></a>00902       <span class="comment">/* cmdblk = scmdblk; */</span>
<a name="l00903"></a>00903       cmdblk = <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>;
<a name="l00904"></a>00904       cmdblk[0] = <a class="code" href="jorway73a_8h.html#a3c545a41be73afcaf3a8ccfef9eeaa83">SJY_SHORTXFER_DATA_CMD</a>;       <span class="comment">/* Op code */</span>
<a name="l00905"></a>00905       cmdblk[1] = (camCmd &gt;&gt; 24) &amp; 0x1F;        <span class="comment">/* lun/function code */</span>
<a name="l00906"></a>00906       cmdblk[2] = (camCmd &gt;&gt; 16) &amp; 0xFF;        <span class="comment">/* mode/station */</span>
<a name="l00907"></a>00907       cmdblk[3] = (camCmd &gt;&gt; 8) &amp; 0x0F; <span class="comment">/* address */</span>
<a name="l00908"></a>00908       cmdblk[4] = xferlen;      <span class="comment">/* allocation length */</span>
<a name="l00909"></a>00909       cmdblk[5] = 0;            <span class="comment">/* control byte, always 0 */</span>
<a name="l00910"></a>00910    } <span class="keywordflow">else</span> {
<a name="l00911"></a>00911       <span class="comment">/* cmdblk = lcmdblk; */</span>
<a name="l00912"></a>00912       cmdblk = <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a>;
<a name="l00913"></a>00913       cmdblk[0] = <a class="code" href="jorway73a_8h.html#aa87531dd8450cf97b498767f5a1910a5">SJY_LONGXFER_DATA_CMD</a>;        <span class="comment">/* Op code */</span>
<a name="l00914"></a>00914       cmdblk[1] = 0;            <span class="comment">/* lun/reserved */</span>
<a name="l00915"></a>00915       cmdblk[2] = (camCmd &gt;&gt; 24) &amp; 0x1F;        <span class="comment">/* reserved/function code */</span>
<a name="l00916"></a>00916       cmdblk[3] = (camCmd &gt;&gt; 16) &amp; 0xFF;        <span class="comment">/* mode/S/station */</span>
<a name="l00917"></a>00917       cmdblk[4] = (camCmd &gt;&gt; 8) &amp; 0x0F; <span class="comment">/* address */</span>
<a name="l00918"></a>00918       cmdblk[5] = 0;            <span class="comment">/* reserved */</span>
<a name="l00919"></a>00919       cmdblk[6] = (xferlen &gt;&gt; 16) &amp; 0xFF;       <span class="comment">/* transfer length (MSB) */</span>
<a name="l00920"></a>00920       cmdblk[7] = (xferlen &gt;&gt; 8) &amp; 0xFF;
<a name="l00921"></a>00921       cmdblk[8] = xferlen &amp; 0xFF;       <span class="comment">/* transfer length (LSB) */</span>
<a name="l00922"></a>00922       cmdblk[9] = 0;            <span class="comment">/* control byte, always 0 */</span>
<a name="l00923"></a>00923    }
<a name="l00924"></a>00924    <span class="keywordflow">if</span> (cmdblk[0] == <a class="code" href="jorway73a_8h.html#a3c545a41be73afcaf3a8ccfef9eeaa83">SJY_SHORTXFER_DATA_CMD</a>)
<a name="l00925"></a>00925       cmdsize = 6;
<a name="l00926"></a>00926    <span class="keywordflow">else</span>
<a name="l00927"></a>00927       cmdsize = 10;
<a name="l00928"></a>00928 
<a name="l00929"></a>00929    <span class="comment">/* memcpy( cmd + SCSI_OFF, cmdblk, cmdsize ); */</span>
<a name="l00930"></a>00930 
<a name="l00931"></a>00931    <span class="comment">/* copy user buffer behind cmdblk */</span>
<a name="l00932"></a>00932    <span class="keywordflow">if</span> (dataBuffer != NULL)
<a name="l00933"></a>00933       memcpy(<a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a> + <a class="code" href="jorway73a_8c.html#a552de447eaedaa97ddef2175bbe28b04">SCSI_OFF</a> + cmdsize, dataBuffer, xferlen);
<a name="l00934"></a>00934 
<a name="l00935"></a>00935    status = <a class="code" href="jorway73a_8c.html#a3f644b94d637a6cdeb3149a7740f0ce7">handle_scsi_cmd</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, cmdsize, xferlen, <a class="code" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, 0, NULL);
<a name="l00936"></a>00936    <span class="comment">/*  sjy_notify_camac_data(branch, xferlen, status); */</span>
<a name="l00937"></a>00937    <a class="code" href="jorway73a_8c.html#a752fa0f75faca1883f6c404ed95d0822">notify_camac_data</a>(<a class="code" href="caen170a_8c.html#a5b23e03d232f1c0e5e35b3700581a9e4">branch</a>, xferlen, status);
<a name="l00938"></a>00938    <span class="keywordflow">return</span> (status);
<a name="l00939"></a>00939 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a11d3b696651733f98e58d14ad8fa7a1d"></a><!-- doxytag: member="jorway73a.c::cmd" ref="a11d3b696651733f98e58d14ad8fa7a1d" args="[CMD_SIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>[CMD_SIZE]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00628">628</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="caen170a_8c_source.html#l00226">caen170a_get()</a>, <a class="el" href="caen170a_8c_source.html#l00144">caen170a_set()</a>, <a class="el" href="jorway73a_8c_source.html#l00126">cam16i()</a>, <a class="el" href="jorway73a_8c_source.html#l00157">cam16i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00187">cam16i_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00229">cam16i_rq()</a>, <a class="el" href="jorway73a_8c_source.html#l00348">cam16o_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00383">cam16o_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00140">cam24i()</a>, <a class="el" href="jorway73a_8c_source.html#l00174">cam24i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00208">cam24i_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00253">cam24i_rq()</a>, <a class="el" href="jorway73a_8c_source.html#l00364">cam24o_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00404">cam24o_r()</a>, <a class="el" href="jorway73a_8c_source.html#l00443">camc_q()</a>, <a class="el" href="crate6__CAEN__TDC_2mfe__mucap_8c_source.html#l01934">cnaf_callback()</a>, <a class="el" href="mcnaf_8c_source.html#l00602">decode_line()</a>, <a class="el" href="ftplib_8c_source.html#l00460">ftp_port()</a>, <a class="el" href="mscbmain_8c_source.html#l00704">interprete()</a>, <a class="el" href="lazylogger_8c_source.html#l01184">lazy_copy()</a>, <a class="el" href="lazylogger_8c_source.html#l00379">lazy_log_update()</a>, <a class="el" href="lazylogger_8c_source.html#l01389">lazy_main()</a>, <a class="el" href="lrs4032_8c_source.html#l00233">lrs4032_get()</a>, <a class="el" href="lrs4032_8c_source.html#l00155">lrs4032_set()</a>, <a class="el" href="msc_8c_source.html#l01246">main()</a>, <a class="el" href="mhttpd_8c_source.html#l05301">show_cnaf_page()</a>, <a class="el" href="mhttpd_8c_source.html#l08158">show_hist_config_page()</a>, <a class="el" href="jorway73a_8c_source.html#l01001">sjy_inquiry()</a>, <a class="el" href="jorway73a_8c_source.html#l00860">sjy_nondata()</a>, <a class="el" href="jorway73a_8c_source.html#l00949">sjy_read()</a>, <a class="el" href="jorway73a_8c_source.html#l01076">sjy_reqSense()</a>, <a class="el" href="jorway73a_8c_source.html#l01039">sjy_tur()</a>, <a class="el" href="jorway73a_8c_source.html#l00892">sjy_write()</a>, <a class="el" href="system_8c_source.html#l01232">ss_shell()</a>, and <a class="el" href="mscbmain_8c_source.html#l01140">upgrade()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf2adeb77e670e8de0dc898d9156cc33"></a><!-- doxytag: member="jorway73a.c::d16dummy" ref="aaf2adeb77e670e8de0dc898d9156cc33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unionWORD.html">WORD</a> <a class="el" href="jorway73a_8c.html#aaf2adeb77e670e8de0dc898d9156cc33">d16dummy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00101">101</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

</div>
</div>
<a class="anchor" id="a500340a6cd6375d4cdc049953a2bf68b"></a><!-- doxytag: member="jorway73a.c::d24dummy" ref="a500340a6cd6375d4cdc049953a2bf68b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="el" href="jorway73a_8c.html#a500340a6cd6375d4cdc049953a2bf68b">d24dummy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00102">102</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

</div>
</div>
<a class="anchor" id="a46c254f440287e2529e83c8e49ed37ad"></a><!-- doxytag: member="jorway73a.c::devtble" ref="a46c254f440287e2529e83c8e49ed37ad" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="jorway73a_8c.html#a46c254f440287e2529e83c8e49ed37ad">devtble</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> { <span class="stringliteral">&quot;/dev/sga&quot;</span>,  
   <span class="stringliteral">&quot;/dev/sgb&quot;</span>,
   <span class="stringliteral">&quot;/dev/sgc&quot;</span>,
   <span class="stringliteral">&quot;/dev/sgd&quot;</span>,
   <span class="stringliteral">&quot;/dev/sge&quot;</span>,
   <span class="stringliteral">&quot;/dev/sgf&quot;</span>,
   <span class="stringliteral">&quot;/dev/sgh&quot;</span>,
   <span class="stringliteral">&quot;/dev/sgg&quot;</span>,
   <span class="stringliteral">&quot;/dev/sgh&quot;</span>
}
</pre></div>
<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l01269">1269</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l01280">sjy_getdev()</a>.</p>

</div>
</div>
<a class="anchor" id="ad410b818c979ab5e33a7a55ebcf44913"></a><!-- doxytag: member="jorway73a.c::ieee_last_Q" ref="ad410b818c979ab5e33a7a55ebcf44913" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="jorway73a_8c.html#ad410b818c979ab5e33a7a55ebcf44913">ieee_last_Q</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00099">99</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00583">sjy_get_qx()</a>.</p>

</div>
</div>
<a class="anchor" id="a13c4ff3d50c50df95e1d8bfa2eaae6a5"></a><!-- doxytag: member="jorway73a.c::ieee_last_X" ref="a13c4ff3d50c50df95e1d8bfa2eaae6a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="jorway73a_8c.html#a13c4ff3d50c50df95e1d8bfa2eaae6a5">ieee_last_X</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00100">100</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00157">cam16i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00348">cam16o_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00174">cam24i_q()</a>, <a class="el" href="jorway73a_8c_source.html#l00364">cam24o_q()</a>, and <a class="el" href="jorway73a_8c_source.html#l00583">sjy_get_qx()</a>.</p>

</div>
</div>
<a class="anchor" id="ade30b3ebd96d09456989cf6da3a92e8f"></a><!-- doxytag: member="jorway73a.c::jorway_crate_LAM" ref="ade30b3ebd96d09456989cf6da3a92e8f" args="[8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="el" href="jorway73a_8c.html#ade30b3ebd96d09456989cf6da3a92e8f">jorway_crate_LAM</a>[8] = { 0 }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00105">105</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00538">cam_lam_disable()</a>, and <a class="el" href="jorway73a_8c_source.html#l00530">cam_lam_enable()</a>.</p>

</div>
</div>
<a class="anchor" id="abb2fa0b92fd9278943cf4d22794b7ced"></a><!-- doxytag: member="jorway73a.c::jorway_crate_opened" ref="abb2fa0b92fd9278943cf4d22794b7ced" args="[8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="jorway73a_8c.html#abb2fa0b92fd9278943cf4d22794b7ced">jorway_crate_opened</a>[8] = { 0 }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00104">104</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00491">cam_exit()</a>, and <a class="el" href="jorway73a_8c_source.html#l00469">cam_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a484211e5ca89857f6dc2b6e4bffbd3c6"></a><!-- doxytag: member="jorway73a.c::qdummy" ref="a484211e5ca89857f6dc2b6e4bffbd3c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="jorway73a_8c.html#a484211e5ca89857f6dc2b6e4bffbd3c6">qdummy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00098">98</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00336">cam16o()</a>, <a class="el" href="jorway73a_8c_source.html#l00342">cam24o()</a>, and <a class="el" href="jorway73a_8c_source.html#l00436">camc()</a>.</p>

</div>
</div>
<a class="anchor" id="ada419ee69c3cc4a4db37acdbf3ef3054"></a><!-- doxytag: member="jorway73a.c::xdummy" ref="ada419ee69c3cc4a4db37acdbf3ef3054" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="jorway73a_8c.html#ada419ee69c3cc4a4db37acdbf3ef3054">xdummy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="jorway73a_8c_source.html#l00098">98</a> of file <a class="el" href="jorway73a_8c_source.html">jorway73a.c</a>.</p>

<p>Referenced by <a class="el" href="jorway73a_8c_source.html#l00336">cam16o()</a>, and <a class="el" href="jorway73a_8c_source.html#l00342">cam24o()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ:Rootana by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

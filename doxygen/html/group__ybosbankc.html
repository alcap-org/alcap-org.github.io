<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ:Rootana: YBOS Bank Functions (ybk_xxx)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>YBOS Bank Functions (ybk_xxx)<br/>
<small>
[<a class="el" href="group__ybosincludecode.html">The ybos.h &amp; ybos.c</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga084bc56c1448f670c68c4cf4656b1174">ybk_init</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga069419b0aa987c64d026bd50c0a6eba7">ybk_create</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, char *bkname, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> bktype, void *pbkdat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gaa6b8e326b2114f5d35d5a205068619f3">ybk_create_chaos</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, char *bkname, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> bktype, void *pbkdat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gace261b66959724acbf36058b488cf07b">ybk_close_chaos</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> bktype, void *pbkdat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gae65a3f5b491525f5490e1686bb7c2fc5">ybk_close</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, void *pbkdat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga6c2e09370aa3000ba12ad9d9d6852eb9">ybk_size</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gaa7203fdbdf74b8b257bc9b83bec81464">ybk_list</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, char *bklist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gafa453696e2d3efeac5f355da314546ef">ybk_find</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, char *bkname, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *bklen, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *bktype, void **pbk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga38926ff582025213cfd6cd24d674c96c">ybk_locate</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, char *bkname, void *pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gad6cf7a30912d4863cd8e9a981bf2a179">ybk_iterate</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *plrl, <a class="el" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> **pybkh, void **pdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga89ddd3ac1fb5f8c46108086d81cac2a7">feodb_file_dump</a> (<a class="el" href="structeqpmnt.html">EQUIPMENT</a> *eqp, char *eqpname, char *pevent, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mlogger_8c.html#a7515080fe161c8c4d6029c889f02564a">run_number</a>, char *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gad7ee163ec65728660ef6138e810cc4cf">ybos_get_tid_size</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga177a8b241935710bd285f775e882cfc5">ybos_log_open</a> (<a class="el" href="structLOG__CHN.html">LOG_CHN</a> *<a class="el" href="mlogger_8c.html#a8ea83d33fedda2dd07beb422f245354b">log_chn</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mlogger_8c.html#a7515080fe161c8c4d6029c889f02564a">run_number</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga637115c193856dcf75ee958e690239e8">ybos_write</a> (<a class="el" href="structLOG__CHN.html">LOG_CHN</a> *<a class="el" href="mlogger_8c.html#a8ea83d33fedda2dd07beb422f245354b">log_chn</a>, <a class="el" href="structEVENT__HEADER.html">EVENT_HEADER</a> *pevent, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> evt_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga85358224cad220bf19c74ef84e9cad5f">ybos_log_close</a> (<a class="el" href="structLOG__CHN.html">LOG_CHN</a> *<a class="el" href="mlogger_8c.html#a8ea83d33fedda2dd07beb422f245354b">log_chn</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mlogger_8c.html#a7515080fe161c8c4d6029c889f02564a">run_number</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gaf5ac80b22f4bfd0324f16f25013081e5">yb_any_file_ropen</a> (char *infile, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga60e713cf0467582fac957968b2d99f89">yb_any_file_rclose</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gabf7128772fc67ef62ecf91c0f07e3333">yb_any_file_wopen</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="ybos_8c.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, char *<a class="el" href="mana__orig_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *<a class="el" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gaa67c0b90ee19bce03793082734b8a1ad">yb_any_file_wclose</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="ybos_8c.html#a7c83c22c8ffdd143cddcda9b23e26c4a">handle</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="ybos_8c.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga1c35c7fd75384b84dd9717f8ce1689a3">yb_any_physrec_get</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, void **precord, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *readn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga6c05b0a8ba19f8d971d054997a6387a5">yb_any_log_write</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="ybos_8c.html#a7c83c22c8ffdd143cddcda9b23e26c4a">handle</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="ybos_8c.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>, void *prec, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> nbytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga84aa61eeb23c3643a91274412fd01c60">yb_any_physrec_skip</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#ab4c4b998fc2c5afaf4532ee4259cbc27">bl</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gab746c2e9fc887c7b59cca9172726006e">yb_any_physrec_display</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga5093c20e778ce63a38bbd404c2766935">yb_any_all_info_display</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> what)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga49fb1bc19c623f8951b2572f3174e81a">yb_any_event_swap</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, void *pevent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga30012f46730b900256df75113b12bcc2">yb_any_event_get</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, void **pevent, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *readn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga86b8a986ab796b9ab5606ea269a5fcd1">ybos_event_get</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> **plrl, <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *readn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gab0098b79a6519cdb9f7d4d21838c5bcd">yb_any_event_display</a> (void *pevent, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#a3e9add192c9aab721281ec8c23583069">dsp_mode</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga42fd83f988ba97e9b4aa9b75ff81d5bb">yb_any_bank_display</a> (void *pmbh, void *pbk, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#a3e9add192c9aab721281ec8c23583069">dsp_mode</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gabe90ffb515297859bd1987310fe86472">yb_file_recompose</a> (void *pevt, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> format, char *<a class="el" href="mzdump_8c.html#ad36ae21d2173614455b425930cb8e66a">svpath</a>, <a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="mzdump_8c.html#a2156dba47a34f36fcfffb248d37cb760">file_mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gaad36b8401b23c0422ba0e82216966950">ybos_event_swap</a> (<a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pevt)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>dox</p>
<p>dox dox </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga89ddd3ac1fb5f8c46108086d81cac2a7"></a><!-- doxytag: member="ybos.c::feodb_file_dump" ref="ga89ddd3ac1fb5f8c46108086d81cac2a7" args="(EQUIPMENT *eqp, char *eqpname, char *pevent, INT run_number, char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> feodb_file_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structeqpmnt.html">EQUIPMENT</a> *&nbsp;</td>
          <td class="paramname"> <em>eqp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>eqpname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>pevent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>run_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox </p>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00796">796</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8c_source.html#l02913">cm_get_experiment_database()</a>, <a class="el" href="lrs1821_8h_source.html#l00218">cm_msg</a>, <a class="el" href="odb_8c_source.html#l03390">db_enum_key()</a>, <a class="el" href="odb_8c_source.html#l02193">db_find_key()</a>, <a class="el" href="odb_8c_source.html#l02907">db_get_path()</a>, <a class="el" href="odb_8c_source.html#l03261">db_get_value()</a>, <a class="el" href="midas_8h_source.html#l01004">DB_INVALID_NAME</a>, <a class="el" href="midas_8h_source.html#l01016">DB_NO_MORE_SUBKEYS</a>, <a class="el" href="midas_8h_source.html#l01001">DB_SUCCESS</a>, <a class="el" href="odb_8c_source.html#l01693">equal_ustring()</a>, <a class="el" href="p30_8h_source.html#l00042">FALSE</a>, <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="mevb_8cpp_source.html#l00100">hKey</a>, <a class="el" href="mana_8cpp_source.html#l00677">index</a>, <a class="el" href="ybos_8h_source.html#l00393">MAX_FILE_PATH</a>, <a class="el" href="lrs1821_8h_source.html#l00221">MINFO</a>, <a class="el" href="midas_8h_source.html#l01390">eqpmnt::name</a>, <a class="el" href="ybos_8c_source.html#l00373">size</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, <a class="el" href="midas_8h_source.html#l00746">TID_STRING</a>, <a class="el" href="p30_8h_source.html#l00043">TRUE</a>, <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>, and <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="ybos__simfe_8c_source.html#l00345">files_dump()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00799"></a>00799        : <a class="code" href="group__ybosincludecode.html#gaabf6604d068a3cf37eb0fd104340099f">feodb_file_dump</a>
<a name="l00800"></a>00800 Purpose: Access ODB <span class="keywordflow">for</span> the /Equipment/&lt;equip_name&gt;/Dump.
<a name="l00801"></a>00801 in order to scan <span class="keywordflow">for</span> file <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a> <a class="code" href="examples_2macro_2midas__macro_8h.html#aa3d7d535cf450b91b9cb6d9cee2edbb9">and</a> dump the files <a class="code" href="melog_8c.html#a3c3ad19e293264185a78fb6032906e8f">content</a> to the
<a name="l00802"></a>00802 Midas <a class="code" href="fal_8c.html#a368f7094dc38acca20612bbb392552f4">buffer</a> <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>.
<a name="l00803"></a>00803 Input:
<a name="l00804"></a>00804 <a class="code" href="structeqpmnt.html">EQUIPMENT</a> * eqp           Current <a class="code" href="examples_2macro_2midas__macro_8h.html#ae8b8f6d8b9bae4600c7eac6eee4e57b4">equipment</a>
<a name="l00805"></a>00805 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>       <a class="code" href="crate6__CAEN__TDC_2mfe__mucap_8c.html#a16695ea2bfd19f294afe066d6007ab36">run_number</a>      current <a class="code" href="crate6__CAEN__TDC_2mfe__mucap_8c.html#a16695ea2bfd19f294afe066d6007ab36">run_number</a>
<a name="l00806"></a>00806 <span class="keywordtype">char</span>      * path          full file <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a> specification
<a name="l00807"></a>00807 Output:
<a name="l00808"></a>00808 none
<a name="l00809"></a>00809 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l00810"></a>00810 0                      Successful completion
<a name="l00811"></a>00811 <a class="code" href="group__err23.html#ga871ab09b39556a4328e80497ed13088b">DB_INVALID_NAME</a>        Equipment doesn<span class="stringliteral">&apos;t match request</span>
<a name="l00812"></a>00812 <span class="stringliteral">\********************************************************************/</span>
<a name="l00813"></a>00813 <span class="stringliteral">{</span>
<a name="l00814"></a>00814 <span class="stringliteral">   EQUIPMENT *peqp;</span>
<a name="l00815"></a>00815 <span class="stringliteral">   INT index, size, status;</span>
<a name="l00816"></a>00816 <span class="stringliteral">   HNDLE hDB, hKey, hKeydump;</span>
<a name="l00817"></a>00817 <span class="stringliteral">   char strpath[MAX_FILE_PATH], Dumpfile[MAX_FILE_PATH];</span>
<a name="l00818"></a>00818 <span class="stringliteral">   char odb_entry[MAX_FILE_PATH];</span>
<a name="l00819"></a>00819 <span class="stringliteral">   BOOL eqpfound = FALSE;</span>
<a name="l00820"></a>00820 <span class="stringliteral"></span>
<a name="l00821"></a>00821 <span class="stringliteral">   cm_get_experiment_database(&amp;hDB, &amp;hKey);</span>
<a name="l00822"></a>00822 <span class="stringliteral">   peqp = eqp;</span>
<a name="l00823"></a>00823 <span class="stringliteral"></span>
<a name="l00824"></a>00824 <span class="stringliteral">   /* find the equipment info for this job */</span>
<a name="l00825"></a>00825 <span class="stringliteral">   while (*(peqp-&gt;name) != 0) {</span>
<a name="l00826"></a>00826 <span class="stringliteral">      if (equal_ustring((peqp-&gt;name), eqpname)) {</span>
<a name="l00827"></a>00827 <span class="stringliteral">         eqpfound = TRUE;</span>
<a name="l00828"></a>00828 <span class="stringliteral">         break;</span>
<a name="l00829"></a>00829 <span class="stringliteral">      }</span>
<a name="l00830"></a>00830 <span class="stringliteral">      peqp++;</span>
<a name="l00831"></a>00831 <span class="stringliteral">   }</span>
<a name="l00832"></a>00832 <span class="stringliteral">   if (!eqpfound)</span>
<a name="l00833"></a>00833 <span class="stringliteral">      return DB_INVALID_NAME;</span>
<a name="l00834"></a>00834 <span class="stringliteral"></span>
<a name="l00835"></a>00835 <span class="stringliteral">   /* loop over all channels */</span>
<a name="l00836"></a>00836 <span class="stringliteral">   sprintf(odb_entry, &quot;/Equipment/%s/Dump&quot;, path);</span>
<a name="l00837"></a>00837 <span class="stringliteral">   status = db_find_key(hDB, 0, odb_entry, &amp;hKey);</span>
<a name="l00838"></a>00838 <span class="stringliteral">   if (status != DB_SUCCESS) {</span>
<a name="l00839"></a>00839 <span class="stringliteral">      cm_msg(MINFO, &quot;ybos_odb_file_dump&quot;, &quot;odb_access_file -I- %s not found&quot;, odb_entry);</span>
<a name="l00840"></a>00840 <span class="stringliteral">      return YB_SUCCESS;</span>
<a name="l00841"></a>00841 <span class="stringliteral">   }</span>
<a name="l00842"></a>00842 <span class="stringliteral">   index = 0;</span>
<a name="l00843"></a>00843 <span class="stringliteral">   while ((status = db_enum_key(hDB, hKey, index, &amp;hKeydump)) != DB_NO_MORE_SUBKEYS) {</span>
<a name="l00844"></a>00844 <span class="stringliteral">      if (status == DB_SUCCESS) {</span>
<a name="l00845"></a>00845 <span class="stringliteral">         size = sizeof(strpath);</span>
<a name="l00846"></a>00846 <span class="stringliteral">         db_get_path(hDB, hKeydump, strpath, size);</span>
<a name="l00847"></a>00847 <span class="stringliteral">         db_get_value(hDB, 0, strpath, Dumpfile, &amp;size, TID_STRING, TRUE);</span>
<a name="l00848"></a>00848 <span class="stringliteral">         yb_file_fragment(peqp, (EVENT_HEADER *) pevent, run_number, Dumpfile);</span>
<a name="l00849"></a>00849 <span class="stringliteral">      }</span>
<a name="l00850"></a>00850 <span class="stringliteral">      index++;</span>
<a name="l00851"></a>00851 <span class="stringliteral">   }</span>
<a name="l00852"></a>00852 <span class="stringliteral">   return (YB_SUCCESS);</span>
<a name="l00853"></a>00853 <span class="stringliteral">}</span>
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga5093c20e778ce63a38bbd404c2766935"></a><!-- doxytag: member="ybos.c::yb_any_all_info_display" ref="ga5093c20e778ce63a38bbd404c2766935" args="(INT what)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_all_info_display </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>what</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02367">2367</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00179">D_EVTLEN</a>, <a class="el" href="ybos_8h_source.html#l00178">D_HEADER</a>, <a class="el" href="ybos_8h_source.html#l00177">D_RECORD</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>, <a class="el" href="mgd_8c_source.html#l01505">offset</a>, <a class="el" href="odbhist_8c_source.html#l00057">run</a>, <a class="el" href="ybos_8h_source.html#l00153">YB_DONE</a>, and <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00175">replog()</a>, and <a class="el" href="ybos_8c_source.html#l02325">yb_any_physrec_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02369"></a>02369        : <a class="code" href="group__ybosincludecode.html#ga13b2faded0a729e55e4fb8ffc7dedfde">yb_any_all_info_display</a>
<a name="l02370"></a>02370 Purpose: <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a> on screen all the info about <span class="stringliteral">&quot;what&quot;</span>.
<a name="l02371"></a>02371 Input:
<a name="l02372"></a>02372 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>     what              <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a> of <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a>.
<a name="l02373"></a>02373 Output:
<a name="l02374"></a>02374 none
<a name="l02375"></a>02375 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02376"></a>02376 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>                 <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>
<a name="l02377"></a>02377 <a class="code" href="group__yboserrorh.html#gab034b5fa004cc65afaed8f070b9ea8b7">YB_DONE</a>
<a name="l02378"></a>02378 \********************************************************************/
<a name="l02379"></a>02379 {
<a name="l02380"></a>02380    <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.fmt == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l02381"></a>02381       <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> bz, hyl, ybn, of;
<a name="l02382"></a>02382 
<a name="l02383"></a>02383       bz = (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;rec_size;
<a name="l02384"></a>02384       hyl = (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;header_length;
<a name="l02385"></a>02385       ybn = (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;rec_num;
<a name="l02386"></a>02386       of = (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l02387"></a>02387       <span class="keywordflow">switch</span> (what) {
<a name="l02388"></a>02388       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga3690d638414357c1bd39dd1bcaff5c38">D_RECORD</a>:
<a name="l02389"></a>02389       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#gafb32f9ec171fac7ce0a9c7b68236e21a">D_HEADER</a>:
<a name="l02390"></a>02390          printf(<span class="stringliteral">&quot;rec#%ld- &quot;</span>, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.recn);
<a name="l02391"></a>02391          printf(<span class="stringliteral">&quot;%5ldbz %5ldhyl %5ldybn %5ldof\n&quot;</span>, bz, hyl, ybn, of);
<a name="l02392"></a>02392          <span class="keywordflow">break</span>;
<a name="l02393"></a>02393       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga3ca85910f39037dcb031571d75d0fedc">D_EVTLEN</a>:
<a name="l02394"></a>02394          printf(<span class="stringliteral">&quot;rec#%ld- &quot;</span>, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.recn);
<a name="l02395"></a>02395          printf(<span class="stringliteral">&quot;%5ldbz %5ldhyl %5ldybn %5ldof &quot;</span>, bz, hyl, ybn, of);
<a name="l02396"></a>02396          printf(<span class="stringliteral">&quot;%5ldel/x%lx %5ldev\n&quot;</span>, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtlen, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtlen, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtn);
<a name="l02397"></a>02397          <span class="keywordflow">break</span>;
<a name="l02398"></a>02398       }
<a name="l02399"></a>02399    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.fmt == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l02400"></a>02400       <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> mbn, <a class="code" href="odbhist_8c.html#a369e3b30815f09142abc86f462a501ff">run</a>, ser;
<a name="l02401"></a>02401       <a class="code" href="unionWORD.html">WORD</a> id, msk;
<a name="l02402"></a>02402       mbn = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtn;
<a name="l02403"></a>02403       run = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.runn;
<a name="l02404"></a>02404       <span class="keywordtype">id</span> = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmh-&gt;event_id;
<a name="l02405"></a>02405       msk = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmh-&gt;trigger_mask;
<a name="l02406"></a>02406       ser = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmh-&gt;serial_number;
<a name="l02407"></a>02407       <span class="keywordflow">switch</span> (what) {
<a name="l02408"></a>02408       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga3690d638414357c1bd39dd1bcaff5c38">D_RECORD</a>:
<a name="l02409"></a>02409       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#gafb32f9ec171fac7ce0a9c7b68236e21a">D_HEADER</a>:
<a name="l02410"></a>02410          printf(<span class="stringliteral">&quot;&gt;&gt;&gt; No physical record structure for Midas format &lt;&lt;&lt;\n&quot;</span>);
<a name="l02411"></a>02411          <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gab034b5fa004cc65afaed8f070b9ea8b7">YB_DONE</a>;
<a name="l02412"></a>02412          <span class="keywordflow">break</span>;
<a name="l02413"></a>02413       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga3ca85910f39037dcb031571d75d0fedc">D_EVTLEN</a>:
<a name="l02414"></a>02414          printf(<span class="stringliteral">&quot;Evt#%ld- &quot;</span>, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtn);
<a name="l02415"></a>02415          printf(<span class="stringliteral">&quot;%lirun 0x%4.4uxid 0x%4.4uxmsk %5ldmevt#&quot;</span>, run, <span class="keywordtype">id</span>, msk, mbn);
<a name="l02416"></a>02416          printf(<span class="stringliteral">&quot;%5ldel/x%lx %5ldserial\n&quot;</span>, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtlen, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtlen, ser);
<a name="l02417"></a>02417          <span class="keywordflow">break</span>;
<a name="l02418"></a>02418       }
<a name="l02419"></a>02419    }
<a name="l02420"></a>02420    <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>;
<a name="l02421"></a>02421 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga42fd83f988ba97e9b4aa9b75ff81d5bb"></a><!-- doxytag: member="ybos.c::yb_any_bank_display" ref="ga42fd83f988ba97e9b4aa9b75ff81d5bb" args="(void *pmbh, void *pbk, INT data_fmt, INT dsp_mode, INT dsp_fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void yb_any_bank_display </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pmbh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pbk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>dsp_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>dsp_fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02923">2923</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8c_source.html#l12633">bk_is32()</a>, <a class="el" href="ybos_8h_source.html#l00191">DSP_RAW</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="ybos_8c_source.html#l03139">midas_bank_display()</a>, <a class="el" href="ybos_8c_source.html#l03355">midas_bank_display32()</a>, <a class="el" href="ybos_8c_source.html#l02953">yb_any_raw_bank_display()</a>, and <a class="el" href="ybos_8c_source.html#l02995">ybos_bank_display()</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02925"></a>02925        : external <a class="code" href="group__ybosincludecode.html#gaa25025f823bbb7e3bcee801bcfbd67af">yb_any_bank_display</a>
<a name="l02926"></a>02926 Purpose: <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a> on screen the given <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a>.
<a name="l02927"></a>02927 Input:
<a name="l02928"></a>02928 <span class="keywordtype">void</span> * pbk          pointer to the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a>
<a name="l02929"></a>02929 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>  <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>       YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS
<a name="l02930"></a>02930 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>  <a class="code" href="mdump_8c.html#a3e9add192c9aab721281ec8c23583069">dsp_mode</a>       <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a> <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a> (RAW/<a class="code" href="structBANK.html">BANK</a>)
<a name="l02931"></a>02931 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>  <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>        <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a> (<a class="code" href="group__ybosdefineh.html#ga5390ad9ba091ef1e98e36b6f090def3b">DSP_DEC</a>/HEX)
<a name="l02932"></a>02932 Output:             
<a name="l02933"></a>02933 none
<a name="l02934"></a>02934 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02935"></a>02935 none
<a name="l02936"></a>02936 \********************************************************************/
<a name="l02937"></a>02937 {
<a name="l02938"></a>02938    <span class="keywordflow">if</span> (<a class="code" href="mdump_8c.html#a3e9add192c9aab721281ec8c23583069">dsp_mode</a> == <a class="code" href="group__ybosdefineh.html#ga91f9ebc9c69f56ea2a32c98fdd3830e4">DSP_RAW</a>)
<a name="l02939"></a>02939       <a class="code" href="group__ybosincludecode.html#ga59a2bdd502d06d79c8a2c4da35548231">yb_any_raw_bank_display</a>(pbk, <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>);
<a name="l02940"></a>02940    <span class="keywordflow">else</span> {
<a name="l02941"></a>02941       <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l02942"></a>02942          <span class="keywordflow">if</span> (<a class="code" href="group__msectionh.html#ga75339a20fd35a8e8644f4a0fb77e96fe">bk_is32</a>(pmbh))
<a name="l02943"></a>02943             <a class="code" href="group__ybosincludecode.html#ga3f8934034005a33d74d4ecd22b5e9866">midas_bank_display32</a>((<a class="code" href="structBANK32.html">BANK32</a> *) pbk, <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>);
<a name="l02944"></a>02944          <span class="keywordflow">else</span>
<a name="l02945"></a>02945             <a class="code" href="group__ybosincludecode.html#gab099124719969f675b094e9f5618129c">midas_bank_display</a>((<a class="code" href="structBANK.html">BANK</a> *) pbk, <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>);
<a name="l02946"></a>02946       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>)
<a name="l02947"></a>02947          <a class="code" href="group__ybosincludecode.html#ga63890ae4409db9067067e870cfc2fc74">ybos_bank_display</a>((<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) pbk, <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>);
<a name="l02948"></a>02948    }
<a name="l02949"></a>02949    <span class="keywordflow">return</span>;
<a name="l02950"></a>02950 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab0098b79a6519cdb9f7d4d21838c5bcd"></a><!-- doxytag: member="ybos.c::yb_any_event_display" ref="gab0098b79a6519cdb9f7d4d21838c5bcd" args="(void *pevent, INT data_fmt, INT dsp_mode, INT dsp_fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void yb_any_event_display </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pevent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>dsp_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>dsp_fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02757">2757</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00192">DSP_BANK</a>, <a class="el" href="ybos_8h_source.html#l00191">DSP_RAW</a>, <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>, and <a class="el" href="ybos_8c_source.html#l02783">yb_any_raw_event_display()</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02759"></a>02759        : external <a class="code" href="group__ybosincludecode.html#ga8f28b360559ae5c641fbe386e245482e">yb_any_event_display</a>
<a name="l02760"></a>02760 Purpose: <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a> on screen the YBOS <span class="keyword">event</span> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> either RAW <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> YBOS <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>
<a name="l02761"></a>02761 <a class="code" href="examples_2macro_2midas__macro_8h.html#aa3d7d535cf450b91b9cb6d9cee2edbb9">and</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> either Decimal <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> Hexadecimal.
<a name="l02762"></a>02762 Input:
<a name="l02763"></a>02763 <span class="keywordtype">void</span> *  pevent     pointer to either plrl <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> pheader.
<a name="l02764"></a>02764 INT     <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>   uses the YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS <span class="keyword">event</span> structure
<a name="l02765"></a>02765 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>     <a class="code" href="mdump_8c.html#a3e9add192c9aab721281ec8c23583069">dsp_mode</a>   <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> RAW <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> Bank <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>
<a name="l02766"></a>02766 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>     <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>    <a class="code" href="examples_2macro_2midas__macro_8h.html#aa088095d2fabc6972c25ad622744cfd1">display</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a> (<a class="code" href="group__ybosdefineh.html#ga5390ad9ba091ef1e98e36b6f090def3b">DSP_DEC</a>/HEX)
<a name="l02767"></a>02767 Output:
<a name="l02768"></a>02768 none
<a name="l02769"></a>02769 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02770"></a>02770 none
<a name="l02771"></a>02771 \********************************************************************/
<a name="l02772"></a>02772 {
<a name="l02773"></a>02773    <span class="keywordflow">if</span> (<a class="code" href="mdump_8c.html#a3e9add192c9aab721281ec8c23583069">dsp_mode</a> == <a class="code" href="group__ybosdefineh.html#ga91f9ebc9c69f56ea2a32c98fdd3830e4">DSP_RAW</a>)
<a name="l02774"></a>02774       <a class="code" href="group__ybosincludecode.html#gad5c7c4140b68e22918025407a360ce65">yb_any_raw_event_display</a>(pevent, <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>);
<a name="l02775"></a>02775    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mdump_8c.html#a3e9add192c9aab721281ec8c23583069">dsp_mode</a> == <a class="code" href="group__ybosdefineh.html#gab226417737baf78d3965f812b2c58b53">DSP_BANK</a>)
<a name="l02776"></a>02776       <a class="code" href="group__ybosincludecode.html#gaf1ceb29cfd996c59f6127b9cab2fa368">yb_any_bank_event_display</a>(pevent, <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>, <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>);
<a name="l02777"></a>02777    <span class="keywordflow">else</span>
<a name="l02778"></a>02778       printf(<span class="stringliteral">&quot;yb_any_event_display- Unknown format:%i\n&quot;</span>, <a class="code" href="mdump_8c.html#a401af084b4151addd44c76c5c02564c9">dsp_fmt</a>);
<a name="l02779"></a>02779    <span class="keywordflow">return</span>;
<a name="l02780"></a>02780 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga30012f46730b900256df75113b12bcc2"></a><!-- doxytag: member="ybos.c::yb_any_event_get" ref="ga30012f46730b900256df75113b12bcc2" args="(INT data_fmt, void **pevent, DWORD *readn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_event_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>pevent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>readn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02544">2544</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="ybos_8c_source.html#l02665">midas_event_get()</a>, and <a class="el" href="ybos_8c_source.html#l02568">ybos_event_get()</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02546"></a>02546        : external <a class="code" href="group__ybosincludecode.html#ga1dd17c62cf3fc3a53542a476904f8675">yb_any_event_get</a>
<a name="l02547"></a>02547 Purpose: Retrieve an <span class="keyword">event</span> from the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>.
<a name="l02548"></a>02548 Input:
<a name="l02549"></a>02549 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l02550"></a>02550 <span class="keywordtype">void</span> ** pevent : either plrl <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> pheader
<a name="l02551"></a>02551 Output:
<a name="l02552"></a>02552 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> * readn : number of bytes <a class="code" href="examples_2macro_2midas__macro_8h.html#a5b55880ce7d302ae13576e90584a63bb">read</a>
<a name="l02553"></a>02553 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02554"></a>02554 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function
<a name="l02555"></a>02555 \********************************************************************/
<a name="l02556"></a>02556 {
<a name="l02557"></a>02557    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> = 0;
<a name="l02558"></a>02558 
<a name="l02559"></a>02559    *pevent = NULL;
<a name="l02560"></a>02560    <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>)
<a name="l02561"></a>02561       status = <a class="code" href="group__ybosincludecode.html#gaff222a0956e4c1bc1901b383674c7b54">midas_event_get</a>(pevent, readn);
<a name="l02562"></a>02562    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>)
<a name="l02563"></a>02563       status = <a class="code" href="group__ybosincludecode.html#ga195a8275899e64304dbbff765293795c">ybos_event_get</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> **) pevent, readn);
<a name="l02564"></a>02564    <span class="keywordflow">return</span> (status);
<a name="l02565"></a>02565 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga49fb1bc19c623f8951b2572f3174e81a"></a><!-- doxytag: member="ybos.c::yb_any_event_swap" ref="ga49fb1bc19c623f8951b2572f3174e81a" args="(INT data_fmt, void *pevent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_event_swap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pevent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02424">2424</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8c_source.html#l13132">bk_swap()</a>, <a class="el" href="midas_8h_source.html#l00956">CM_SUCCESS</a>, <a class="el" href="examples_2macro_2midas__macro_8h_source.html#l00248">event_id</a>, <a class="el" href="midas_8h_source.html#l01229">EVENTID_BOR</a>, <a class="el" href="midas_8h_source.html#l01230">EVENTID_EOR</a>, <a class="el" href="midas_8h_source.html#l01231">EVENTID_MESSAGE</a>, <a class="el" href="p30_8h_source.html#l00042">FALSE</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="midas_8h_source.html#l01033">SS_SUCCESS</a>, <a class="el" href="ybos_8h_source.html#l00152">YB_EVENT_NOT_SWAPPED</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, <a class="el" href="ybos_8h_source.html#l00158">YB_UNKNOWN_FORMAT</a>, and <a class="el" href="ybos_8c_source.html#l02457">ybos_event_swap()</a>.</p>

<p>Referenced by <a class="el" href="mana_8cpp_source.html#l04425">ma_read_event()</a>, <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02426"></a>02426        : external <a class="code" href="group__ybosincludecode.html#ga851698587a1300be6b8f1f1b0e3e03ea">yb_any_event_swap</a>
<a name="l02427"></a>02427 Purpose: Swap an <span class="keyword">event</span> from the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>.
<a name="l02428"></a>02428 Input:
<a name="l02429"></a>02429 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>  : YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l02430"></a>02430 <span class="keywordtype">void</span> * pevent : pointer to either plrl <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> pheader
<a name="l02431"></a>02431 Output:
<a name="l02432"></a>02432 none
<a name="l02433"></a>02433 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02434"></a>02434 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> :  from the lower function
<a name="l02435"></a>02435 \********************************************************************/
<a name="l02436"></a>02436 {
<a name="l02437"></a>02437    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l02438"></a>02438    <a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *pbh;
<a name="l02439"></a>02439 
<a name="l02440"></a>02440    <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l02441"></a>02441       <span class="keywordflow">if</span> ((((<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevent)-&gt;<a class="code" href="examples_2macro_2midas__macro_8h.html#a6bff0a5e8995a80f74212d31f551167a">event_id</a> == <a class="code" href="group__mbufferh.html#gaea58a47233f988dd2f9a0320d99734dc">EVENTID_BOR</a>) ||
<a name="l02442"></a>02442           (((<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevent)-&gt;<a class="code" href="examples_2macro_2midas__macro_8h.html#a6bff0a5e8995a80f74212d31f551167a">event_id</a> == <a class="code" href="group__mbufferh.html#ga8f46d90b4c90a2387685d422625c654f">EVENTID_EOR</a>) ||
<a name="l02443"></a>02443           (((<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevent)-&gt;<a class="code" href="examples_2macro_2midas__macro_8h.html#a6bff0a5e8995a80f74212d31f551167a">event_id</a> == <a class="code" href="group__mbufferh.html#ga7fefe6ad78331e8cfb3d2b31dbfdd2d0">EVENTID_MESSAGE</a>))
<a name="l02444"></a>02444          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l02445"></a>02445       pbh = (<a class="code" href="structBANK__HEADER.html">BANK_HEADER</a> *) (((<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevent) + 1);
<a name="l02446"></a>02446       status = <a class="code" href="group__msectionh.html#gacc5a45e8cd3b781a7622c4e00bdc348a">bk_swap</a>(pbh, <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l02447"></a>02447       <span class="keywordflow">return</span> status == <a class="code" href="group__err21.html#ga0180947941230d805f5dbb6f1801c17c">CM_SUCCESS</a> ? <a class="code" href="group__yboserrorh.html#ga7eb7c12d46e026e3dfa08464e7277f41">YB_EVENT_NOT_SWAPPED</a> : <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>;
<a name="l02448"></a>02448    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l02449"></a>02449       status = <a class="code" href="group__ybosbankc.html#gaad36b8401b23c0422ba0e82216966950">ybos_event_swap</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent);
<a name="l02450"></a>02450       <span class="keywordflow">return</span> status == <a class="code" href="group__yboserrorh.html#ga7eb7c12d46e026e3dfa08464e7277f41">YB_EVENT_NOT_SWAPPED</a> ? <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a> : status;
<a name="l02451"></a>02451    }
<a name="l02452"></a>02452 
<a name="l02453"></a>02453    <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gac388706366612c1ecf9c579d7dfe3b59">YB_UNKNOWN_FORMAT</a>;
<a name="l02454"></a>02454 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga60e713cf0467582fac957968b2d99f89"></a><!-- doxytag: member="ybos.c::yb_any_file_rclose" ref="ga60e713cf0467582fac957968b2d99f89" args="(INT data_fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_file_rclose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01668">1668</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="msystem_8h_source.html#l00633">LOG_TYPE_DISK</a>, <a class="el" href="msystem_8h_source.html#l00634">LOG_TYPE_TAPE</a>, <a class="el" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>, and <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="lazylogger_8c_source.html#l01184">lazy_copy()</a>, <a class="el" href="mana_8cpp_source.html#l04412">ma_close()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01670"></a>01670        : external <a class="code" href="group__ybosincludecode.html#gaad6fca852eb2016b4a4547272512e0ae">yb_any_file_rclose</a>
<a name="l01671"></a>01671 Purpose: Close a <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> file used <span class="keywordflow">for</span> replay <span class="keywordflow">for</span> the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>
<a name="l01672"></a>01672 Input:
<a name="l01673"></a>01673 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l01674"></a>01674 Output:
<a name="l01675"></a>01675 none
<a name="l01676"></a>01676 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l01677"></a>01677 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function
<a name="l01678"></a>01678 *******************************************************************/
<a name="l01679"></a>01679 {
<a name="l01680"></a>01680    <span class="keywordflow">switch</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.type) {
<a name="l01681"></a>01681    <span class="keywordflow">case</span> <a class="code" href="group__msystemincludecode.html#ga3e8788a1f492a4f3ba005184662fe0c7">LOG_TYPE_TAPE</a>:
<a name="l01682"></a>01682    <span class="keywordflow">case</span> <a class="code" href="group__msystemincludecode.html#ga20f4ff7cce85df2eb7ead9718d5961ba">LOG_TYPE_DISK</a>:
<a name="l01683"></a>01683       <span class="comment">/* close file */</span>
<a name="l01684"></a>01684       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.zipfile) {
<a name="l01685"></a>01685 <span class="preprocessor">#ifdef INCLUDE_ZLIB</span>
<a name="l01686"></a>01686 <span class="preprocessor"></span>         gzclose(filegz);
<a name="l01687"></a>01687 <span class="preprocessor">#endif</span>
<a name="l01688"></a>01688 <span class="preprocessor"></span>      } <span class="keywordflow">else</span> {
<a name="l01689"></a>01689          <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.handle != 0)
<a name="l01690"></a>01690             close(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.handle);
<a name="l01691"></a>01691       }
<a name="l01692"></a>01692       <span class="keywordflow">break</span>;
<a name="l01693"></a>01693    }
<a name="l01694"></a>01694    <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmagta != NULL)
<a name="l01695"></a>01695       free(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmagta);
<a name="l01696"></a>01696    <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh != NULL)
<a name="l01697"></a>01697       free(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh);
<a name="l01698"></a>01698    <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl != NULL)
<a name="l01699"></a>01699       free(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl);
<a name="l01700"></a>01700    <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd != NULL)
<a name="l01701"></a>01701       free(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd);
<a name="l01702"></a>01702    <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmp != NULL)
<a name="l01703"></a>01703       free(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmp);
<a name="l01704"></a>01704    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl = NULL;
<a name="l01705"></a>01705    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh = NULL;
<a name="l01706"></a>01706    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmagta = NULL;
<a name="l01707"></a>01707    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmp = NULL;
<a name="l01708"></a>01708    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmh = NULL;
<a name="l01709"></a>01709    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd = NULL;
<a name="l01710"></a>01710    <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>);
<a name="l01711"></a>01711 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaf5ac80b22f4bfd0324f16f25013081e5"></a><!-- doxytag: member="ybos.c::yb_any_file_ropen" ref="gaf5ac80b22f4bfd0324f16f25013081e5" args="(char *infile, INT data_fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_file_ropen </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>infile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01559">1559</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="lrs1821_8h_source.html#l00218">cm_msg</a>, <a class="el" href="p30_8h_source.html#l00042">FALSE</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="generate-MODULES_8h_source.html#l00003">if</a>, <a class="el" href="msystem_8h_source.html#l00633">LOG_TYPE_DISK</a>, <a class="el" href="msystem_8h_source.html#l00634">LOG_TYPE_TAPE</a>, <a class="el" href="midas_8h_source.html#l00677">MAX_EVENT_SIZE</a>, <a class="el" href="lrs1821_8h_source.html#l00220">MERROR</a>, <a class="el" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>, <a class="el" href="msystem_8h_source.html#l00351">O_BINARY</a>, <a class="el" href="midas_8h_source.html#l00654">O_LARGEFILE</a>, <a class="el" href="mgd_8c_source.html#l01505">offset</a>, <a class="el" href="ybos_8c_source.html#l00344">ptopmrd</a>, <a class="el" href="midas_8h_source.html#l01039">SS_FILE_ERROR</a>, <a class="el" href="midas_8h_source.html#l01035">SS_NO_MEMORY</a>, <a class="el" href="system_8c_source.html#l04137">ss_tape_open()</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, <a class="el" href="midas_8h_source.html#l00669">TAPE_BUFFER_SIZE</a>, <a class="el" href="p30_8h_source.html#l00043">TRUE</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, <a class="el" href="ybos_8h_source.html#l00136">YBOS_HEADER_LENGTH</a>, and <a class="el" href="ybos_8h_source.html#l00134">YBOS_PHYREC_SIZE</a>.</p>

<p>Referenced by <a class="el" href="lazylogger_8c_source.html#l01184">lazy_copy()</a>, <a class="el" href="mana_8cpp_source.html#l04340">ma_open()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01561"></a>01561        : external <a class="code" href="group__ybosincludecode.html#gaa4ba04457fe9576c87b2710fea69f770">yb_any_file_ropen</a>
<a name="l01562"></a>01562 Purpose: Open <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> file <span class="keywordflow">for</span> replay <span class="keywordflow">for</span> the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>.
<a name="l01563"></a>01563 It uses the local <span class="stringliteral">&quot;my&quot;</span> structure.
<a name="l01564"></a>01564 Input:
<a name="l01565"></a>01565 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l01566"></a>01566 <span class="keywordtype">char</span> * infile : Data file <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>
<a name="l01567"></a>01567 Output:
<a name="l01568"></a>01568 none
<a name="l01569"></a>01569 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l01570"></a>01570 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function
<a name="l01571"></a>01571 \********************************************************************/
<a name="l01572"></a>01572 {
<a name="l01573"></a>01573    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l01574"></a>01574 
<a name="l01575"></a>01575    <span class="comment">/* fill up record with file name */</span>
<a name="l01576"></a>01576    strcpy(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, infile);
<a name="l01577"></a>01577 
<a name="l01578"></a>01578    <span class="comment">/* find out what dev it is ? : check on /dev */</span>
<a name="l01579"></a>01579    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.zipfile = <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01580"></a>01580    <span class="keywordflow">if</span> ((strncmp(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, <span class="stringliteral">&quot;/dev&quot;</span>, 4) == 0) || (strncmp(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, <span class="stringliteral">&quot;\\\\.\\&quot;</span>, 4) == 0)) {
<a name="l01581"></a>01581       <span class="comment">/* tape device */</span>
<a name="l01582"></a>01582       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.type = <a class="code" href="group__msystemincludecode.html#ga3e8788a1f492a4f3ba005184662fe0c7">LOG_TYPE_TAPE</a>;
<a name="l01583"></a>01583    } <span class="keywordflow">else</span> {
<a name="l01584"></a>01584       <span class="comment">/* disk device */</span>
<a name="l01585"></a>01585       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.type = <a class="code" href="group__msystemincludecode.html#ga20f4ff7cce85df2eb7ead9718d5961ba">LOG_TYPE_DISK</a>;
<a name="l01586"></a>01586       <span class="keywordflow">if</span> (strncmp(infile + strlen(infile) - 3, <span class="stringliteral">&quot;.gz&quot;</span>, 3) == 0)
<a name="l01587"></a>01587          <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.zipfile = <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01588"></a>01588    }
<a name="l01589"></a>01589 
<a name="l01590"></a>01590    <span class="comment">/* open file */</span>
<a name="l01591"></a>01591    <span class="keywordflow">if</span> (!<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.zipfile) {
<a name="l01592"></a>01592       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.type == <a class="code" href="group__msystemincludecode.html#ga3e8788a1f492a4f3ba005184662fe0c7">LOG_TYPE_TAPE</a>) {
<a name="l01593"></a>01593          status = <a class="code" href="group__msectionh.html#gad5ba805f539d5dd8d3248cf52ec6b510">ss_tape_open</a>(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, O_RDONLY | <a class="code" href="group__msystemincludecode.html#ga36fa9b2e726512bc17a7a6d3e39002be">O_BINARY</a>, &amp;<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.handle);
<a name="l01594"></a>01594       }
<a name="l01595"></a>01595       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.handle = open(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, O_RDONLY | <a class="code" href="group__msystemincludecode.html#ga36fa9b2e726512bc17a7a6d3e39002be">O_BINARY</a> | <a class="code" href="group__midasincludecode.html#ga1126309aa58e7c99553c7f6be1bc7348">O_LARGEFILE</a>, 0644)) == -1)
<a name="l01596"></a>01596       {
<a name="l01597"></a>01597          printf(<span class="stringliteral">&quot;dev name :%s Handle:%d \n&quot;</span>, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.handle);
<a name="l01598"></a>01598          <span class="keywordflow">return</span> (<a class="code" href="group__err24.html#ga25ab2ae4b1702824549b8e40a6e86718">SS_FILE_ERROR</a>);
<a name="l01599"></a>01599       }
<a name="l01600"></a>01600    } <span class="keywordflow">else</span> {
<a name="l01601"></a>01601 <span class="preprocessor">#ifdef INCLUDE_ZLIB</span>
<a name="l01602"></a>01602 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.type == <a class="code" href="group__msystemincludecode.html#ga3e8788a1f492a4f3ba005184662fe0c7">LOG_TYPE_TAPE</a>) {
<a name="l01603"></a>01603          printf(<span class="stringliteral">&quot; Zip on tape not yet supported \n&quot;</span>);
<a name="l01604"></a>01604          <span class="keywordflow">return</span> (<a class="code" href="group__err24.html#ga25ab2ae4b1702824549b8e40a6e86718">SS_FILE_ERROR</a>);
<a name="l01605"></a>01605       }
<a name="l01606"></a>01606       filegz = gzopen(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, <span class="stringliteral">&quot;rb&quot;</span>);
<a name="l01607"></a>01607       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.handle = 0;
<a name="l01608"></a>01608       <span class="keywordflow">if</span> (filegz == NULL) {
<a name="l01609"></a>01609          printf(<span class="stringliteral">&quot;dev name :%s gzopen error:%d \n&quot;</span>, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.name, <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.handle);
<a name="l01610"></a>01610          <span class="keywordflow">return</span> (<a class="code" href="group__err24.html#ga25ab2ae4b1702824549b8e40a6e86718">SS_FILE_ERROR</a>);
<a name="l01611"></a>01611       }
<a name="l01612"></a>01612 <span class="preprocessor">#else</span>
<a name="l01613"></a>01613 <span class="preprocessor"></span>      <a class="code" href="lrs1821_8h.html#aa6f8a5999f0a072ce20ab87bae8a9eb5">cm_msg</a>(<a class="code" href="lrs1821_8h.html#ac2d967025ca0f84f611d568f4ede934a">MERROR</a>, <span class="stringliteral">&quot;ybos.c&quot;</span>, <span class="stringliteral">&quot;Zlib not included ... gz file not supported&quot;</span>);
<a name="l01614"></a>01614       <span class="keywordflow">return</span> (<a class="code" href="group__err24.html#ga25ab2ae4b1702824549b8e40a6e86718">SS_FILE_ERROR</a>);
<a name="l01615"></a>01615 <span class="preprocessor">#endif</span>
<a name="l01616"></a>01616 <span class="preprocessor"></span>   }
<a name="l01617"></a>01617 
<a name="l01618"></a>01618    <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l01619"></a>01619       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.fmt = <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>;
<a name="l01620"></a>01620       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.size = <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a>;       <span class="comment">/* in DWORD  */</span>
<a name="l01621"></a>01621       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmagta = (<span class="keywordtype">char</span> *) malloc(32);
<a name="l01622"></a>01622       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmagta == NULL)
<a name="l01623"></a>01623          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01624"></a>01624       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh = (<a class="code" href="structYBOS__PHYSREC__HEADER.html">YBOS_PHYSREC_HEADER</a> *) malloc(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.size * 14);
<a name="l01625"></a>01625       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh == NULL)
<a name="l01626"></a>01626          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01627"></a>01627       (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;rec_size = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.size - 1;
<a name="l01628"></a>01628       (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;header_length = <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>;
<a name="l01629"></a>01629       (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;rec_num = 0;
<a name="l01630"></a>01630       (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = 0;
<a name="l01631"></a>01631       <span class="comment">/* current ptr in the physical record */</span>
<a name="l01632"></a>01632       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>);
<a name="l01633"></a>01633 
<a name="l01634"></a>01634       <span class="comment">/* allocate memory for one full event */</span>
<a name="l01635"></a>01635       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) malloc(<a class="code" href="group__midasincludecode.html#ga05d5acc365e3342523d84bc4540adc09">MAX_EVENT_SIZE</a>);      <span class="comment">/* in bytes */</span>
<a name="l01636"></a>01636       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl == NULL)
<a name="l01637"></a>01637          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01638"></a>01638       memset((<span class="keywordtype">char</span> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl, -1, <a class="code" href="group__midasincludecode.html#ga05d5acc365e3342523d84bc4540adc09">MAX_EVENT_SIZE</a>);
<a name="l01639"></a>01639 
<a name="l01640"></a>01640       <span class="comment">/* reset first path */</span>
<a name="l01641"></a>01641       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.magtafl = <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01642"></a>01642    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l01643"></a>01643       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.fmt = <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>;
<a name="l01644"></a>01644       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.size = <a class="code" href="group__midasincludecode.html#gab17ef1a258d0569666f69f72ccd50253">TAPE_BUFFER_SIZE</a>;
<a name="l01645"></a>01645       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmp = (<span class="keywordtype">char</span> *) malloc(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.size);
<a name="l01646"></a>01646       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmp == NULL)
<a name="l01647"></a>01647          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01648"></a>01648       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pme = (<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmp;
<a name="l01649"></a>01649 
<a name="l01650"></a>01650       <span class="comment">/* allocate memory for one full event */</span>
<a name="l01651"></a>01651       <a class="code" href="generate-MODULES_8h.html#aaac43492f2954cc70dd9a286b2b3ab02">if</a> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd != NULL)
<a name="l01652"></a>01652          free(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd);
<a name="l01653"></a>01653       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd = (<span class="keywordtype">char</span> *) malloc(5 * <a class="code" href="group__midasincludecode.html#ga05d5acc365e3342523d84bc4540adc09">MAX_EVENT_SIZE</a>);    <span class="comment">/* in bytes */</span>
<a name="l01654"></a>01654       <a class="code" href="group__ybosincludecode.html#ga1c58e901709f7f6f4e01d1fb9999b4bc">ptopmrd</a> = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd;
<a name="l01655"></a>01655       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd == NULL)
<a name="l01656"></a>01656          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01657"></a>01657       memset((<span class="keywordtype">char</span> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd, -1, 5 * <a class="code" href="group__midasincludecode.html#ga05d5acc365e3342523d84bc4540adc09">MAX_EVENT_SIZE</a>);
<a name="l01658"></a>01658       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmh = (<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmrd;
<a name="l01659"></a>01659    }
<a name="l01660"></a>01660 
<a name="l01661"></a>01661    <span class="comment">/* initialize pertinent variables */</span>
<a name="l01662"></a>01662    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.recn = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) - 1;       <span class="comment">/* physical record number */</span>
<a name="l01663"></a>01663    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtn = 0;
<a name="l01664"></a>01664    <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>);
<a name="l01665"></a>01665 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa67c0b90ee19bce03793082734b8a1ad"></a><!-- doxytag: member="ybos.c::yb_any_file_wclose" ref="gaa67c0b90ee19bce03793082734b8a1ad" args="(INT handle, INT type, INT data_fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_file_wclose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01847">1847</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ftplib_8c_source.html#l00444">ftp_bye()</a>, <a class="el" href="ftplib_8c_source.html#l00356">ftp_close()</a>, <a class="el" href="msystem_8h_source.html#l00633">LOG_TYPE_DISK</a>, <a class="el" href="msystem_8h_source.html#l00635">LOG_TYPE_FTP</a>, <a class="el" href="msystem_8h_source.html#l00634">LOG_TYPE_TAPE</a>, <a class="el" href="midas_8h_source.html#l01033">SS_SUCCESS</a>, <a class="el" href="system_8c_source.html#l04228">ss_tape_close()</a>, <a class="el" href="system_8c_source.html#l04491">ss_tape_write_eof()</a>, and <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="lazylogger_8c_source.html#l01184">lazy_copy()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01849"></a>01849        : external <a class="code" href="group__ybosincludecode.html#ga74c5b4dfcac48b8d86eb6a2e9f5ed9c3">yb_any_file_wclose</a>
<a name="l01850"></a>01850 Purpose: Close a <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> file used <span class="keywordflow">for</span> replay <span class="keywordflow">for</span> the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>
<a name="l01851"></a>01851 Input:
<a name="l01852"></a>01852 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l01853"></a>01853 Output:
<a name="l01854"></a>01854 none
<a name="l01855"></a>01855 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l01856"></a>01856 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function
<a name="l01857"></a>01857 *******************************************************************/
<a name="l01858"></a>01858 {
<a name="l01859"></a>01859    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l01860"></a>01860    status = <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l01861"></a>01861    <span class="keywordflow">switch</span> (<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>) {
<a name="l01862"></a>01862    <span class="keywordflow">case</span> <a class="code" href="group__msystemincludecode.html#ga3e8788a1f492a4f3ba005184662fe0c7">LOG_TYPE_TAPE</a>:
<a name="l01863"></a>01863       <span class="comment">/* writing EOF mark on tape Fonly */</span>
<a name="l01864"></a>01864       status = <a class="code" href="group__msectionh.html#gabb63b38780721d675d806d6081ad2f89">ss_tape_write_eof</a>(<a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>);
<a name="l01865"></a>01865       <a class="code" href="group__msectionh.html#ga4a9420e0e9ef8bd23b41f7594bad7395">ss_tape_close</a>(<a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>);
<a name="l01866"></a>01866       <span class="keywordflow">break</span>;
<a name="l01867"></a>01867    <span class="keywordflow">case</span> <a class="code" href="group__msystemincludecode.html#ga20f4ff7cce85df2eb7ead9718d5961ba">LOG_TYPE_DISK</a>:
<a name="l01868"></a>01868       <span class="comment">/* close file */</span>
<a name="l01869"></a>01869       <span class="keywordflow">if</span> (<a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a> != 0)
<a name="l01870"></a>01870 <span class="preprocessor">#ifdef OS_WINNT</span>
<a name="l01871"></a>01871 <span class="preprocessor"></span>         CloseHandle((HANDLE) <a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>);
<a name="l01872"></a>01872 <span class="preprocessor">#else</span>
<a name="l01873"></a>01873 <span class="preprocessor"></span>         close(<a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>);
<a name="l01874"></a>01874 <span class="preprocessor">#endif</span>
<a name="l01875"></a>01875 <span class="preprocessor"></span>      <span class="keywordflow">break</span>;
<a name="l01876"></a>01876    <span class="keywordflow">case</span> <a class="code" href="group__msystemincludecode.html#gaa18802ee020f5a7982b073821978e9eb">LOG_TYPE_FTP</a>:
<a name="l01877"></a>01877 <span class="preprocessor">#ifdef INCLUDE_FTPLIB</span>
<a name="l01878"></a>01878 <span class="preprocessor"></span>      <a class="code" href="ftplib_8h.html#aa29061617ea49f3d5d5412e6a6b9ddea">ftp_close</a>(ftp_con);
<a name="l01879"></a>01879       <a class="code" href="ftplib_8h.html#a7b1c89c618ec6cd6363b7b85644efc97">ftp_bye</a>(ftp_con);
<a name="l01880"></a>01880 <span class="preprocessor">#endif</span>
<a name="l01881"></a>01881 <span class="preprocessor"></span>      <span class="keywordflow">break</span>;
<a name="l01882"></a>01882    }
<a name="l01883"></a>01883    <span class="keywordflow">if</span> (status != <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>)
<a name="l01884"></a>01884       <span class="keywordflow">return</span> status;
<a name="l01885"></a>01885    <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>);
<a name="l01886"></a>01886 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gabf7128772fc67ef62ecf91c0f07e3333"></a><!-- doxytag: member="ybos.c::yb_any_file_wopen" ref="gabf7128772fc67ef62ecf91c0f07e3333" args="(INT type, INT data_fmt, char *filename, INT *hDev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_file_wopen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> *&nbsp;</td>
          <td class="paramname"> <em>hDev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01789">1789</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="lrs1821_8h_source.html#l00218">cm_msg</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="msystem_8h_source.html#l00633">LOG_TYPE_DISK</a>, <a class="el" href="msystem_8h_source.html#l00635">LOG_TYPE_FTP</a>, <a class="el" href="msystem_8h_source.html#l00634">LOG_TYPE_TAPE</a>, <a class="el" href="lrs1821_8h_source.html#l00220">MERROR</a>, <a class="el" href="msystem_8h_source.html#l00351">O_BINARY</a>, <a class="el" href="midas_8h_source.html#l00654">O_LARGEFILE</a>, <a class="el" href="midas_8h_source.html#l01039">SS_FILE_ERROR</a>, <a class="el" href="midas_8h_source.html#l01033">SS_SUCCESS</a>, <a class="el" href="system_8c_source.html#l04137">ss_tape_open()</a>, and <a class="el" href="ybos_8c_source.html#l01126">ybos_logfile_open()</a>.</p>

<p>Referenced by <a class="el" href="lazylogger_8c_source.html#l01184">lazy_copy()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01791"></a>01791        : external <a class="code" href="group__ybosincludecode.html#ga4807aee158169da8f746c87ec1175407">yb_any_file_wopen</a>
<a name="l01792"></a>01792 Purpose: Open a <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> file <span class="keywordflow">for</span> the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>
<a name="l01793"></a>01793 Input:
<a name="l01794"></a>01794 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>     :  Tape <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> Disk
<a name="l01795"></a>01795 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS
<a name="l01796"></a>01796 <span class="keywordtype">char</span> * <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a> : file to open
<a name="l01797"></a>01797 Output:
<a name="l01798"></a>01798 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> * <a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a>      : file <a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>
<a name="l01799"></a>01799 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l01800"></a>01800 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function
<a name="l01801"></a>01801 *******************************************************************/
<a name="l01802"></a>01802 {
<a name="l01803"></a>01803    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> = 0;
<a name="l01804"></a>01804 
<a name="l01805"></a>01805    <span class="keywordflow">if</span> (<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a> == <a class="code" href="group__msystemincludecode.html#ga20f4ff7cce85df2eb7ead9718d5961ba">LOG_TYPE_DISK</a>)
<a name="l01806"></a>01806       <span class="comment">/* takes care of TapeLX/NT under ss_tape_open , DiskLX/NT here */</span>
<a name="l01807"></a>01807    {
<a name="l01808"></a>01808       <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l01809"></a>01809          <span class="comment">/* takes care of TapeLX/NT under ss_tape_open , DiskLX/NT there */</span>
<a name="l01810"></a>01810          status = <a class="code" href="group__ybosincludecode.html#ga03ef9499822f8c46fba62da52caca16c">ybos_logfile_open</a>(<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>, <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, <a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a>);
<a name="l01811"></a>01811       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l01812"></a>01812 <span class="preprocessor">#ifdef OS_WINNT</span>
<a name="l01813"></a>01813 <span class="preprocessor"></span>         *<a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a> =
<a name="l01814"></a>01814              (int) CreateFile(<a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, GENERIC_WRITE, FILE_SHARE_READ,
<a name="l01815"></a>01815                               NULL, CREATE_ALWAYS,
<a name="l01816"></a>01816                               FILE_ATTRIBUTE_NORMAL |
<a name="l01817"></a>01817                               FILE_FLAG_WRITE_THROUGH | FILE_FLAG_SEQUENTIAL_SCAN, 0);
<a name="l01818"></a>01818 <span class="preprocessor">#else</span>
<a name="l01819"></a>01819 <span class="preprocessor"></span>         *<a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a> = open(<a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, O_WRONLY | O_CREAT | O_TRUNC | <a class="code" href="group__msystemincludecode.html#ga36fa9b2e726512bc17a7a6d3e39002be">O_BINARY</a> | <a class="code" href="group__midasincludecode.html#ga1126309aa58e7c99553c7f6be1bc7348">O_LARGEFILE</a>, 0644);
<a name="l01820"></a>01820 <span class="preprocessor">#endif</span>
<a name="l01821"></a>01821 <span class="preprocessor"></span>         status = *<a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a> &lt; 0 ? <a class="code" href="group__err24.html#ga25ab2ae4b1702824549b8e40a6e86718">SS_FILE_ERROR</a> : <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l01822"></a>01822       }
<a name="l01823"></a>01823    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a> == <a class="code" href="group__msystemincludecode.html#ga3e8788a1f492a4f3ba005184662fe0c7">LOG_TYPE_TAPE</a>) {
<a name="l01824"></a>01824       <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l01825"></a>01825          <span class="comment">/* takes care of TapeLX/NT under ss_tape_open , DiskLX/NT there */</span>
<a name="l01826"></a>01826          status = <a class="code" href="group__ybosincludecode.html#ga03ef9499822f8c46fba62da52caca16c">ybos_logfile_open</a>(<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>, <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, <a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a>);
<a name="l01827"></a>01827       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>)
<a name="l01828"></a>01828          status = <a class="code" href="group__msectionh.html#gad5ba805f539d5dd8d3248cf52ec6b510">ss_tape_open</a>(<a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, O_WRONLY | O_CREAT | O_TRUNC, <a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a>);
<a name="l01829"></a>01829    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a> == <a class="code" href="group__msystemincludecode.html#gaa18802ee020f5a7982b073821978e9eb">LOG_TYPE_FTP</a>) {
<a name="l01830"></a>01830 <span class="preprocessor">#ifdef INCLUDE_FTPLIB</span>
<a name="l01831"></a>01831 <span class="preprocessor"></span>      status = yb_ftp_open(<a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>, (<a class="code" href="structFTP__CON.html">FTP_CON</a> **) &amp; ftp_con);
<a name="l01832"></a>01832       <span class="keywordflow">if</span> (status != <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>) {
<a name="l01833"></a>01833          *<a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a> = 0;
<a name="l01834"></a>01834          <span class="keywordflow">return</span> status;
<a name="l01835"></a>01835       } <span class="keywordflow">else</span>
<a name="l01836"></a>01836          *<a class="code" href="lazylogger_8c.html#ae76a80a4eaf2de79a5f51b86df5a5857">hDev</a> = 1;
<a name="l01837"></a>01837 <span class="preprocessor">#else</span>
<a name="l01838"></a>01838 <span class="preprocessor"></span>      <a class="code" href="lrs1821_8h.html#aa6f8a5999f0a072ce20ab87bae8a9eb5">cm_msg</a>(<a class="code" href="lrs1821_8h.html#ac2d967025ca0f84f611d568f4ede934a">MERROR</a>, <span class="stringliteral">&quot;yb_any_file_wopen&quot;</span>, <span class="stringliteral">&quot;FTP support not included&quot;</span>);
<a name="l01839"></a>01839       <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga25ab2ae4b1702824549b8e40a6e86718">SS_FILE_ERROR</a>;
<a name="l01840"></a>01840 <span class="preprocessor">#endif</span>
<a name="l01841"></a>01841 <span class="preprocessor"></span>   }
<a name="l01842"></a>01842 
<a name="l01843"></a>01843    <span class="keywordflow">return</span> status;
<a name="l01844"></a>01844 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga6c05b0a8ba19f8d971d054997a6387a5"></a><!-- doxytag: member="ybos.c::yb_any_log_write" ref="ga6c05b0a8ba19f8d971d054997a6387a5" args="(INT handle, INT data_fmt, INT type, void *prec, DWORD nbytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_log_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>prec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>nbytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02191">2191</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="msystem_8h_source.html#l00633">LOG_TYPE_DISK</a>, <a class="el" href="ybos_8c_source.html#l00345">magta</a>, <a class="el" href="midas_8h_source.html#l01033">SS_SUCCESS</a>, and <a class="el" href="ybos_8c_source.html#l01945">yb_any_dev_os_write()</a>.</p>

<p>Referenced by <a class="el" href="lazylogger_8c_source.html#l01184">lazy_copy()</a>, <a class="el" href="ybos_8c_source.html#l01359">ybos_buffer_flush()</a>, and <a class="el" href="ybos_8c_source.html#l01185">ybos_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02193"></a>02193        : external <a class="code" href="group__ybosincludecode.html#gabca198523c3b536693ca97fd2bdfd4ba">yb_any_log_write</a>
<a name="l02194"></a>02194 Purpose: Write a physical record to the <a class="code" href="scs__600_8c.html#a4e01158f01f9ad810066c89cf7267087">out</a> device, takes care of the
<a name="l02195"></a>02195 <a class="code" href="group__ybosincludecode.html#ga20555dd4b936fe2259e7367846e0c1c4">magta</a> under YBOS.
<a name="l02196"></a>02196 
<a name="l02197"></a>02197 Input:
<a name="l02198"></a>02198 <span class="keywordtype">void</span> <a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>   : file <a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>
<a name="l02199"></a>02199 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a>  : YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l02200"></a>02200 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>      : Tape <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> disk 
<a name="l02201"></a>02201 <span class="keywordtype">void</span> *prec    : record pointer
<a name="l02202"></a>02202 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> nbytes  : record <a class="code" href="FDCR_8h.html#a9f59b34b1f25fe00023291b678246bcc">length</a> to be written
<a name="l02203"></a>02203 Output:
<a name="l02204"></a>02204 none
<a name="l02205"></a>02205 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02206"></a>02206 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function  <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>, <a class="code" href="group__err24.html#ga25ab2ae4b1702824549b8e40a6e86718">SS_FILE_ERROR</a>
<a name="l02207"></a>02207 \********************************************************************/
<a name="l02208"></a>02208 {
<a name="l02209"></a>02209    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l02210"></a>02210    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> written;
<a name="l02211"></a>02211 
<a name="l02212"></a>02212 <span class="preprocessor">#ifdef YBOS_VERSION_3_3</span>
<a name="l02213"></a>02213 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a> == <a class="code" href="group__msystemincludecode.html#ga20f4ff7cce85df2eb7ead9718d5961ba">LOG_TYPE_DISK</a>) &amp;&amp; (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>)) {  <span class="comment">/* add the magta record if going to disk */</span>
<a name="l02214"></a>02214       status =
<a name="l02215"></a>02215           <a class="code" href="group__ybosincludecode.html#ga7797956ed873c779a28551ca1be3911f">yb_any_dev_os_write</a>(<a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>, <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>,
<a name="l02216"></a>02216                               (<span class="keywordtype">char</span> *) ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (<a class="code" href="group__ybosincludecode.html#ga20555dd4b936fe2259e7367846e0c1c4">magta</a> + 2)), 4, &amp;written);
<a name="l02217"></a>02217       <span class="keywordflow">if</span> (status != <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>)
<a name="l02218"></a>02218          <span class="keywordflow">return</span> status;
<a name="l02219"></a>02219    }
<a name="l02220"></a>02220 <span class="preprocessor">#endif</span>
<a name="l02221"></a>02221 <span class="preprocessor"></span>   <span class="comment">/* write record */</span>
<a name="l02222"></a>02222    status = <a class="code" href="group__ybosincludecode.html#ga7797956ed873c779a28551ca1be3911f">yb_any_dev_os_write</a>(<a class="code" href="v1724__module_8c.html#a0e640374bff58e788b18fbed8f89fe11">handle</a>, <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>, prec, nbytes, &amp;written);
<a name="l02223"></a>02223    <span class="keywordflow">return</span> status;
<a name="l02224"></a>02224 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gab746c2e9fc887c7b59cca9172726006e"></a><!-- doxytag: member="ybos.c::yb_any_physrec_display" ref="gab746c2e9fc887c7b59cca9172726006e" args="(INT data_fmt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_physrec_display </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02325">2325</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00177">D_RECORD</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="mdump_8c_source.html#l00115">i</a>, <a class="el" href="odbhist_8c_source.html#l00058">j</a>, <a class="el" href="odbhist_8c_source.html#l00058">k</a>, <a class="el" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>, <a class="el" href="ybos_8h_source.html#l00396">NLINE</a>, <a class="el" href="ybos_8c_source.html#l02367">yb_any_all_info_display()</a>, <a class="el" href="ybos_8h_source.html#l00153">YB_DONE</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, and <a class="el" href="ybos_8h_source.html#l00158">YB_UNKNOWN_FORMAT</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02327"></a>02327        : external <a class="code" href="group__ybosincludecode.html#ga4dcd43b57230781606a13e16c4c6bed9">yb_any_physrec_display</a>
<a name="l02328"></a>02328 Purpose: Display the physical record of the current record 
<a name="l02329"></a>02329 <span class="keywordflow">for</span> the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>.
<a name="l02330"></a>02330 Not possible <span class="keywordflow">for</span> MIDAS as no physical record structure
<a name="l02331"></a>02331 Input:
<a name="l02332"></a>02332 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l02333"></a>02333 Output:
<a name="l02334"></a>02334 none
<a name="l02335"></a>02335 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02336"></a>02336 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>          Lower function
<a name="l02337"></a>02337 \********************************************************************/
<a name="l02338"></a>02338 {
<a name="l02339"></a>02339    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> bz, <a class="code" href="odbhist_8c.html#a2df6784bd380a288cf2c3e7e2c43a6b8">j</a>, <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, <a class="code" href="odbhist_8c.html#a43fa990200c3ddd47c35f151bd4d66bf">k</a>;
<a name="l02340"></a>02340    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *prec;
<a name="l02341"></a>02341 
<a name="l02342"></a>02342    <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l02343"></a>02343       printf(<span class="stringliteral">&quot;&gt;&gt;&gt; No physical record structure for Midas format &lt;&lt;&lt;\n&quot;</span>);
<a name="l02344"></a>02344       <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gab034b5fa004cc65afaed8f070b9ea8b7">YB_DONE</a>;
<a name="l02345"></a>02345    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l02346"></a>02346       <a class="code" href="group__ybosincludecode.html#ga13b2faded0a729e55e4fb8ffc7dedfde">yb_any_all_info_display</a>(<a class="code" href="group__ybosdefineh.html#ga3690d638414357c1bd39dd1bcaff5c38">D_RECORD</a>);
<a name="l02347"></a>02347       bz = (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;rec_size + 1;
<a name="l02348"></a>02348       <span class="comment">/* adjust local pointer to top of record to include record header */</span>
<a name="l02349"></a>02349       prec = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh);
<a name="l02350"></a>02350       k = (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh)-&gt;rec_num;
<a name="l02351"></a>02351       <span class="keywordflow">for</span> (i = 0; i &lt; bz; i += <a class="code" href="group__ybosincludecode.html#gad9a8135749728ad6e54977f88361f092">NLINE</a>) {
<a name="l02352"></a>02352          printf(<span class="stringliteral">&quot;R(%d)[%d] = &quot;</span>, k, i);
<a name="l02353"></a>02353          <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="group__ybosincludecode.html#gad9a8135749728ad6e54977f88361f092">NLINE</a>; j++) {
<a name="l02354"></a>02354             <span class="keywordflow">if</span> (i + j &lt; bz) {
<a name="l02355"></a>02355                printf(<span class="stringliteral">&quot;%8.8lx &quot;</span>, *prec);
<a name="l02356"></a>02356                prec++;
<a name="l02357"></a>02357             }
<a name="l02358"></a>02358          }
<a name="l02359"></a>02359          printf(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l02360"></a>02360       }
<a name="l02361"></a>02361       <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>);
<a name="l02362"></a>02362    } <span class="keywordflow">else</span>
<a name="l02363"></a>02363       <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gac388706366612c1ecf9c579d7dfe3b59">YB_UNKNOWN_FORMAT</a>;
<a name="l02364"></a>02364 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga1c35c7fd75384b84dd9717f8ce1689a3"></a><!-- doxytag: member="ybos.c::yb_any_physrec_get" ref="ga1c35c7fd75384b84dd9717f8ce1689a3" args="(INT data_fmt, void **precord, DWORD *readn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_physrec_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>precord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>readn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02023">2023</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="ybos_8c_source.html#l02147">midas_physrec_get()</a>, <a class="el" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>, <a class="el" href="ybos_8h_source.html#l00158">YB_UNKNOWN_FORMAT</a>, and <a class="el" href="ybos_8c_source.html#l02046">ybos_physrec_get()</a>.</p>

<p>Referenced by <a class="el" href="lazylogger_8c_source.html#l01184">lazy_copy()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02025"></a>02025        : external <a class="code" href="group__ybosincludecode.html#ga31f960e7ce2d1a571f8bc48cccb8658f">yb_any_physrec_get</a>
<a name="l02026"></a>02026 Purpose: Retrieve a physical record <span class="keywordflow">for</span> the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>
<a name="l02027"></a>02027 Input:
<a name="l02028"></a>02028 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l02029"></a>02029 Output:
<a name="l02030"></a>02030 <span class="keywordtype">void</span> ** precord     pointer to the record
<a name="l02031"></a>02031 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> * readn       record <a class="code" href="FDCR_8h.html#a9f59b34b1f25fe00023291b678246bcc">length</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bytes
<a name="l02032"></a>02032 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02033"></a>02033 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function
<a name="l02034"></a>02034 \********************************************************************/
<a name="l02035"></a>02035 {
<a name="l02036"></a>02036    *precord = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pmp;
<a name="l02037"></a>02037    <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>)
<a name="l02038"></a>02038       <span class="keywordflow">return</span> <a class="code" href="group__ybosincludecode.html#gaaa3c12fb208bf2a5fe7b2c0331ddbb2f">midas_physrec_get</a>(*precord, readn);
<a name="l02039"></a>02039    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>)
<a name="l02040"></a>02040       <span class="keywordflow">return</span> <a class="code" href="group__ybosincludecode.html#ga9df5910f14c6b81c31bccdf216066bd8">ybos_physrec_get</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> **) precord, readn);
<a name="l02041"></a>02041    <span class="keywordflow">else</span>
<a name="l02042"></a>02042       <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gac388706366612c1ecf9c579d7dfe3b59">YB_UNKNOWN_FORMAT</a>;
<a name="l02043"></a>02043 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga84aa61eeb23c3643a91274412fd01c60"></a><!-- doxytag: member="ybos.c::yb_any_physrec_skip" ref="ga84aa61eeb23c3643a91274412fd01c60" args="(INT data_fmt, INT bl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_any_physrec_skip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>data_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>bl</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02227">2227</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="ybos_8c_source.html#l02290">midas_event_skip()</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, <a class="el" href="ybos_8h_source.html#l00158">YB_UNKNOWN_FORMAT</a>, and <a class="el" href="ybos_8c_source.html#l02255">ybos_physrec_skip()</a>.</p>

<p>Referenced by <a class="el" href="mana_8cpp_source.html#l04340">ma_open()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02229"></a>02229        : external <a class="code" href="group__ybosincludecode.html#ga6a13d257d54a1d5e5c0bf126ae85edc9">yb_any_physrec_skip</a>
<a name="l02230"></a>02230 Purpose: Skip physical record until block = <a class="code" href="mdump_8c.html#ab4c4b998fc2c5afaf4532ee4259cbc27">bl</a> <span class="keywordflow">for</span> the given <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a>
<a name="l02231"></a>02231 <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>, Under midas the skip is an <span class="keyword">event</span> as no physical 
<a name="l02232"></a>02232 record is present under that <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>,
<a name="l02233"></a>02233 Input:
<a name="l02234"></a>02234 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> :  YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> MIDAS 
<a name="l02235"></a>02235 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="mdump_8c.html#ab4c4b998fc2c5afaf4532ee4259cbc27">bl</a>:         block number (-1==all, 0 = first block)
<a name="l02236"></a>02236 <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> <span class="keywordflow">case</span> of MIDAS the <a class="code" href="mdump_8c.html#ab4c4b998fc2c5afaf4532ee4259cbc27">bl</a> represent an <span class="keyword">event</span>
<a name="l02237"></a>02237 Output:
<a name="l02238"></a>02238 none
<a name="l02239"></a>02239 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02240"></a>02240 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a> : from lower function
<a name="l02241"></a>02241 \********************************************************************/
<a name="l02242"></a>02242 {
<a name="l02243"></a>02243    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l02244"></a>02244 
<a name="l02245"></a>02245    <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l02246"></a>02246       status = <a class="code" href="group__ybosincludecode.html#ga6aa73683c9215af058934fcc01717b49">midas_event_skip</a>(<a class="code" href="mdump_8c.html#ab4c4b998fc2c5afaf4532ee4259cbc27">bl</a>);
<a name="l02247"></a>02247       <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>;
<a name="l02248"></a>02248    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="lazylogger_8c.html#aad8ec8a870ba39f5ec40234403f06f77">data_fmt</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>)
<a name="l02249"></a>02249       <span class="keywordflow">return</span> <a class="code" href="group__ybosincludecode.html#ga15eadbab27ec014e46ed1035c799e3a7">ybos_physrec_skip</a>(<a class="code" href="mdump_8c.html#ab4c4b998fc2c5afaf4532ee4259cbc27">bl</a>);
<a name="l02250"></a>02250    <span class="keywordflow">else</span>
<a name="l02251"></a>02251       <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gac388706366612c1ecf9c579d7dfe3b59">YB_UNKNOWN_FORMAT</a>;
<a name="l02252"></a>02252 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gabe90ffb515297859bd1987310fe86472"></a><!-- doxytag: member="ybos.c::yb_file_recompose" ref="gabe90ffb515297859bd1987310fe86472" args="(void *pevt, INT format, char *svpath, INT file_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> yb_file_recompose </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pevt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>svpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>file_mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l03576">3576</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8c_source.html#l12924">bk_locate()</a>, <a class="el" href="ybos_8h_source.html#l00405">YM_CFILE::current_fragment</a>, <a class="el" href="ybos_8h_source.html#l00406">YM_CFILE::current_read_byte</a>, <a class="el" href="examples_2macro_2midas__macro_8h_source.html#l00248">event_id</a>, <a class="el" href="midas_8h_source.html#l01229">EVENTID_BOR</a>, <a class="el" href="midas_8h_source.html#l01230">EVENTID_EOR</a>, <a class="el" href="midas_8h_source.html#l01231">EVENTID_MESSAGE</a>, <a class="el" href="ybos_8h_source.html#l00421">R_YM_FILE::file_ID</a>, <a class="el" href="ybos_8h_source.html#l00401">YM_CFILE::file_ID</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="ybos_8h_source.html#l00403">YM_CFILE::fragment_size</a>, <a class="el" href="ybos_8h_source.html#l00395">MAX_YM_FILE</a>, <a class="el" href="ybos_8h_source.html#l00407">YM_CFILE::run_number</a>, <a class="el" href="ybos_8h_source.html#l00402">YM_CFILE::size</a>, <a class="el" href="ybos_8h_source.html#l00404">YM_CFILE::total_fragment</a>, <a class="el" href="ybos_8h_source.html#l00155">YB_BANK_NOT_FOUND</a>, <a class="el" href="ybos_8h_source.html#l00183">YB_COMPLETE</a>, <a class="el" href="ybos_8h_source.html#l00184">YB_INCOMPLETE</a>, <a class="el" href="ybos_8h_source.html#l00185">YB_NO_RECOVER</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, <a class="el" href="ybos_8c_source.html#l03657">yb_ymfile_open()</a>, <a class="el" href="ybos_8c_source.html#l03756">yb_ymfile_update()</a>, and <a class="el" href="ybos_8c_source.html#l00690">ybk_locate()</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>, and <a class="el" href="mdump_8c_source.html#l00175">replog()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l03578"></a>03578        : external file_recompose
<a name="l03579"></a>03579 Purpose: Receive <span class="keyword">event</span> which are expected to be file oriented with
<a name="l03580"></a>03580 YM_xFILE header.
<a name="l03581"></a>03581 Input:
<a name="l03582"></a>03582 <span class="keywordtype">char</span> * pevt           pointer to a YBOS event (-&gt;LRL).
<a name="l03583"></a>03583 char * <a class="code" href="mdump_8c.html#ad36ae21d2173614455b425930cb8e66a">svpath</a>         path where to save file
<a name="l03584"></a>03584 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>    <a class="code" href="mdump_8c.html#a2156dba47a34f36fcfffb248d37cb760">file_mode</a>      NO_RUN : save file under original <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>
<a name="l03585"></a>03585 ADD_RUN: cat <a class="code" href="odbhist_8c.html#a369e3b30815f09142abc86f462a501ff">run</a> number at <a class="code" href="examples_2macro_2midas__macro_8h.html#a2fb839951208a8400aa14d71d7c6f974">end</a> of file <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a>
<a name="l03586"></a>03586 Output:
<a name="l03587"></a>03587 none
<a name="l03588"></a>03588 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l03589"></a>03589 <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>         OP successfull
<a name="l03590"></a>03590 <a class="code" href="group__ybosdefineh.html#gac566a1ec210ad003eaf7f93f2b2c007b">YB_INCOMPLETE</a>      file compose <a class="code" href="plot__max_8c.html#ad49ec371d0c77a469cc14aa6f44b232e">channels</a> still open
<a name="l03591"></a>03591 <a class="code" href="group__ybosdefineh.html#ga5784cad505cb7ce55360f55224b07b28">YB_COMPLETE</a>        All file compose <a class="code" href="plot__max_8c.html#ad49ec371d0c77a469cc14aa6f44b232e">channels</a> closed <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> complete
<a name="l03592"></a>03592 <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>             -x error of inner <a class="code" href="examples_2macro_2midas__macro_8h.html#a01f23030e8f35ef3c830e0bbb53e91bc">call</a>
<a name="l03593"></a>03593 \********************************************************************/
<a name="l03594"></a>03594 {
<a name="l03595"></a>03595    <a class="code" href="structYM__CFILE.html">YM_CFILE</a> *pmyfch;
<a name="l03596"></a>03596    <span class="keywordtype">int</span> slot, <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l03597"></a>03597 
<a name="l03598"></a>03598    <span class="keywordflow">if</span> (<a class="code" href="mdump_8c.html#a2156dba47a34f36fcfffb248d37cb760">file_mode</a> == <a class="code" href="group__ybosdefineh.html#ga23995b4926bc7ff785abd27caba3317c">YB_NO_RECOVER</a>)
<a name="l03599"></a>03599       <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>;
<a name="l03600"></a>03600 
<a name="l03601"></a>03601    <span class="keywordflow">if</span> (<a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l03602"></a>03602       <span class="keywordflow">if</span> ((status = <a class="code" href="group__ybosincludecode.html#ga89e3a76181ace4afbb8a4c81cc774471">ybk_locate</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevt, <span class="stringliteral">&quot;CFIL&quot;</span>, &amp;pmyfch)) &lt;= 0)
<a name="l03603"></a>03603          <span class="keywordflow">return</span> (status);
<a name="l03604"></a>03604    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l03605"></a>03605       <span class="keywordflow">if</span> ((((<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevt)-&gt;<a class="code" href="examples_2macro_2midas__macro_8h.html#a6bff0a5e8995a80f74212d31f551167a">event_id</a> == <a class="code" href="group__mbufferh.html#gaea58a47233f988dd2f9a0320d99734dc">EVENTID_BOR</a>) ||
<a name="l03606"></a>03606           (((<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevt)-&gt;<a class="code" href="examples_2macro_2midas__macro_8h.html#a6bff0a5e8995a80f74212d31f551167a">event_id</a> == <a class="code" href="group__mbufferh.html#ga8f46d90b4c90a2387685d422625c654f">EVENTID_EOR</a>) ||
<a name="l03607"></a>03607           (((<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevt)-&gt;<a class="code" href="examples_2macro_2midas__macro_8h.html#a6bff0a5e8995a80f74212d31f551167a">event_id</a> == <a class="code" href="group__mbufferh.html#ga7fefe6ad78331e8cfb3d2b31dbfdd2d0">EVENTID_MESSAGE</a>))
<a name="l03608"></a>03608          <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gadd90f38301bbbe59b3110e17541971ac">YB_BANK_NOT_FOUND</a>;
<a name="l03609"></a>03609 
<a name="l03610"></a>03610       pevt = (<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> *) pevt + 1;
<a name="l03611"></a>03611       <span class="keywordflow">if</span> ((status = <a class="code" href="group__msectionh.html#ga191a8ec88c5ff3512bc22d7fa6d1f5dc">bk_locate</a>(pevt, <span class="stringliteral">&quot;CFIL&quot;</span>, &amp;pmyfch)) &lt;= 0)
<a name="l03612"></a>03612          <span class="keywordflow">return</span> (status);
<a name="l03613"></a>03613    }
<a name="l03614"></a>03614 
<a name="l03615"></a>03615    printf(<span class="stringliteral">&quot;%i - %i - %i - %i - %i -%i -%i \n&quot;</span>, pmyfch-&gt;<a class="code" href="structYM__CFILE.html#a04693b28046807ca3148ee00891d1811">file_ID</a>,
<a name="l03616"></a>03616           pmyfch-&gt;<a class="code" href="structYM__CFILE.html#a5e29e918e8396a4295e7e8a0b41312b4">size</a>, pmyfch-&gt;<a class="code" href="structYM__CFILE.html#af6abd6e9afa73682114b8105bc5e450e">fragment_size</a>, pmyfch-&gt;<a class="code" href="structYM__CFILE.html#a4ebcf83a5095069d4f02207dde7c4016">total_fragment</a>,
<a name="l03617"></a>03617           pmyfch-&gt;<a class="code" href="structYM__CFILE.html#a90b39581e91179d393d6f696e253c9d8">current_fragment</a>, pmyfch-&gt;<a class="code" href="structYM__CFILE.html#ac1275e536c29a34c5f9c2225ee4504c7">current_read_byte</a>, pmyfch-&gt;<a class="code" href="structYM__CFILE.html#ae8b9b24e4757ee9325c6027401452b5f">run_number</a>);
<a name="l03618"></a>03618 
<a name="l03619"></a>03619    <span class="comment">/* check if file is in progress */</span>
<a name="l03620"></a>03620    <span class="keywordflow">for</span> (slot = 0; slot &lt; <a class="code" href="group__ybosincludecode.html#ga6baef10e5484714a5055bce66b8237e6">MAX_YM_FILE</a>; slot++) {
<a name="l03621"></a>03621       <span class="keywordflow">if</span> ((<a class="code" href="group__ybosincludecode.html#ga5ddd51ae03d35447066bffb00a0fee59">ymfile</a>[slot].fHandle != 0)
<a name="l03622"></a>03622           &amp;&amp; (pmyfch-&gt;<a class="code" href="structYM__CFILE.html#a04693b28046807ca3148ee00891d1811">file_ID</a> == <a class="code" href="group__ybosincludecode.html#ga5ddd51ae03d35447066bffb00a0fee59">ymfile</a>[slot].<a class="code" href="structR__YM__FILE.html#a5b7675778c43ce002338e1ef34b460d2">file_ID</a>)) {
<a name="l03623"></a>03623          <span class="comment">/* Yep file in progress for that file_ID */</span>
<a name="l03624"></a>03624          <span class="keywordflow">if</span> ((status = <a class="code" href="group__ybosincludecode.html#ga6f962c62b03909eeaff91244b26b9d7a">yb_ymfile_update</a>(slot, <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>, pevt)) != <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>) {
<a name="l03625"></a>03625             printf(<span class="stringliteral">&quot;yb_ymfile_update() failed\n&quot;</span>);
<a name="l03626"></a>03626             <span class="keywordflow">return</span> status;
<a name="l03627"></a>03627          }
<a name="l03628"></a>03628          <span class="keywordflow">goto</span> check;
<a name="l03629"></a>03629       }
<a name="l03630"></a>03630       <span class="comment">/* next slot */</span>
<a name="l03631"></a>03631    }
<a name="l03632"></a>03632    <span class="comment">/* current fragment not registered =&gt; new file */</span>
<a name="l03633"></a>03633    <span class="comment">/* open file, get slot back */</span>
<a name="l03634"></a>03634    <span class="keywordflow">if</span> ((status = <a class="code" href="group__ybosincludecode.html#gaef0c444061f36b5e7d0861ca572c0320">yb_ymfile_open</a>(&amp;slot, <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>, pevt, <a class="code" href="mdump_8c.html#ad36ae21d2173614455b425930cb8e66a">svpath</a>, <a class="code" href="mdump_8c.html#a2156dba47a34f36fcfffb248d37cb760">file_mode</a>)) != <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>) {
<a name="l03635"></a>03635       printf(<span class="stringliteral">&quot;yb_ymfile_open() failed\n&quot;</span>);
<a name="l03636"></a>03636       <span class="keywordflow">return</span> status;
<a name="l03637"></a>03637    }
<a name="l03638"></a>03638    <span class="comment">/* update file */</span>
<a name="l03639"></a>03639    <span class="keywordflow">if</span> ((status = <a class="code" href="group__ybosincludecode.html#ga6f962c62b03909eeaff91244b26b9d7a">yb_ymfile_update</a>(slot, <a class="code" href="webpaw_8c.html#a6113855b8e5965f1e91ee407b4026ab7">format</a>, pevt)) != <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>) {
<a name="l03640"></a>03640       printf(<span class="stringliteral">&quot;yb_ymfile_update() failed\n&quot;</span>);
<a name="l03641"></a>03641       <span class="keywordflow">return</span> status;
<a name="l03642"></a>03642    }
<a name="l03643"></a>03643 
<a name="l03644"></a>03644  check:
<a name="l03645"></a>03645    <span class="comment">/* for completion of recovery on ALL files */</span>
<a name="l03646"></a>03646    <span class="keywordflow">for</span> (slot = 0; slot &lt; MAX_YM_FILE; slot++) {
<a name="l03647"></a>03647       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga5ddd51ae03d35447066bffb00a0fee59">ymfile</a>[slot].fHandle != 0) {
<a name="l03648"></a>03648          <span class="comment">/* Yes still some file composition in progress */</span>
<a name="l03649"></a>03649          <span class="keywordflow">return</span> <a class="code" href="group__ybosdefineh.html#gac566a1ec210ad003eaf7f93f2b2c007b">YB_INCOMPLETE</a>;
<a name="l03650"></a>03650       }
<a name="l03651"></a>03651       <span class="comment">/* next slot */</span>
<a name="l03652"></a>03652    }
<a name="l03653"></a>03653    <span class="keywordflow">return</span> <a class="code" href="group__ybosdefineh.html#ga5784cad505cb7ce55360f55224b07b28">YB_COMPLETE</a>;
<a name="l03654"></a>03654 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gae65a3f5b491525f5490e1686bb7c2fc5"></a><!-- doxytag: member="ybos.c::ybk_close" ref="gae65a3f5b491525f5490e1686bb7c2fc5" args="(DWORD *plrl, void *pbkdat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybk_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pbkdat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Close the YBOS bank previously created by <a class="el" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create()</a>.</p>
<p>The data pointer pdata must be obtained by <a class="el" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create()</a> and used as an address to fill a bank. It is incremented with every value written to the bank and finally points to a location just after the last byte of the bank. It is then passed to <a class="el" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close()</a> to finish the bank creation. YBOS is a 4 bytes bank aligned structure. Padding is performed at the closing of the bank with values of 0x0f or/and 0x0ffb. See YBOS_bank_examples. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to current composed event. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pbkdat</em>&nbsp;</td><td>pointer to the current data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number number of bytes contained in bank. </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00549">549</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00387">YBOS_BANK_HEADER::length</a>.</p>

<p>Referenced by <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00327">read_scaler_event()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00290">read_trigger_event()</a>, <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>, <a class="el" href="ybos_8c_source.html#l00491">ybk_close_chaos()</a>, and <a class="el" href="ybos_8c_source.html#l01185">ybos_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00550"></a>00550 {
<a name="l00551"></a>00551    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> tdlen;
<a name="l00552"></a>00552    <span class="comment">/* align pbkdat to I*4 */</span>
<a name="l00553"></a>00553    <span class="keywordflow">if</span> (((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbkdat &amp; 0x1) != 0) {
<a name="l00554"></a>00554       *((<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pbkdat) = 0x0f;
<a name="l00555"></a>00555       pbkdat = (<span class="keywordtype">void</span> *) (((<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pbkdat) + 1);
<a name="l00556"></a>00556    }
<a name="l00557"></a>00557    <span class="keywordflow">if</span> (((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) pbkdat &amp; 0x2) != 0) {
<a name="l00558"></a>00558       *((<a class="code" href="unionWORD.html">WORD</a> *) pbkdat) = 0x0ffb;
<a name="l00559"></a>00559       pbkdat = (<span class="keywordtype">void</span> *) (((<a class="code" href="unionWORD.html">WORD</a> *) pbkdat) + 1);
<a name="l00560"></a>00560    }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562    <span class="comment">/* length in byte */</span>
<a name="l00563"></a>00563    tdlen = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) ((<span class="keywordtype">char</span> *) pbkdat - (<span class="keywordtype">char</span> *) <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a> - <span class="keyword">sizeof</span>(<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a>));
<a name="l00564"></a>00564 
<a name="l00565"></a>00565    <span class="comment">/* YBOS bank length in I4 */</span>
<a name="l00566"></a>00566    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> = (tdlen + 4) / 4;    <span class="comment">/* (+Bank Type &amp;@#$!) YBOS bank length */</span>
<a name="l00567"></a>00567 
<a name="l00568"></a>00568    <span class="comment">/* adjust Logical Record Length (entry point from the system) */</span>
<a name="l00569"></a>00569    *plrl += <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> + (<span class="keyword">sizeof</span>(<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a>) / 4) - 1;
<a name="l00570"></a>00570    <span class="keywordflow">return</span> <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a>;
<a name="l00571"></a>00571 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gace261b66959724acbf36058b488cf07b"></a><!-- doxytag: member="ybos.c::ybk_close_chaos" ref="gace261b66959724acbf36058b488cf07b" args="(DWORD *plrl, DWORD bktype, void *pbkdat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybk_close_chaos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>bktype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pbkdat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00491">491</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8c_source.html#l00455">__pchaosi4</a>, <a class="el" href="ybos_8h_source.html#l00346">A1_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00349">D8_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00348">F4_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00350">I1_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00345">I2_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00347">I4_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00212">SWAP_D2WORD</a>, and <a class="el" href="ybos_8c_source.html#l00549">ybk_close()</a>.</p>

<p>Referenced by <a class="el" href="ybos__simfe_8c_source.html#l00290">read_trigger_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00493"></a>00493        : <a class="code" href="group__ybosincludecode.html#ga0b6cc5fa1936bdec986ecc2434ce43f5">ybk_close_chaos</a>
<a name="l00494"></a>00494 Purpose: patch the <a class="code" href="examples_2macro_2midas__macro_8h.html#a2fb839951208a8400aa14d71d7c6f974">end</a> of the <span class="keyword">event</span> to the next 4 byte boundary,
<a name="l00495"></a>00495 fills up the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> header,
<a name="l00496"></a>00496 compute the <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bt unit.
<a name="l00497"></a>00497 update the LRL (pevt)
<a name="l00498"></a>00498 Input:
<a name="l00499"></a>00499 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> * pevt          pointer to the top of the YBOS event (LRL).
<a name="l00500"></a>00500 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>   bt            <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>
<a name="l00501"></a>00501 <a class="code" href="group__ybosdefineh.html#ga4b6b5459b4c74b76ee12197538fe6d1d">I2_BKTYPE</a>, <a class="code" href="group__ybosdefineh.html#ga37b2a5de4003dff9ef6837b6f99a0a69">I1_BKTYPE</a>, <a class="code" href="group__ybosdefineh.html#gac78b656213d4a1fb1fd9bf9bd8c46f09">I4_BKTYPE</a>, <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>
<a name="l00502"></a>00502 <span class="keywordtype">void</span>  * pbkdat        pointer to the user area
<a name="l00503"></a>00503 Output:
<a name="l00504"></a>00504 none
<a name="l00505"></a>00505 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>: Number of bytes <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a>.
<a name="l00506"></a>00506 \********************************************************************/
<a name="l00507"></a>00507 {
<a name="l00508"></a>00508    <span class="keywordflow">switch</span> (bktype) {
<a name="l00509"></a>00509    <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#gaba3ee4247e6ef5302ba5a83079a338e0">D8_BKTYPE</a>:
<a name="l00510"></a>00510       *<a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) ((<span class="keywordtype">double</span> *) pbkdat - (<span class="keywordtype">double</span> *) <a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> - 1);
<a name="l00511"></a>00511       <span class="keywordflow">break</span>;
<a name="l00512"></a>00512    <span class="keywordflow">case</span> I4_BKTYPE:
<a name="l00513"></a>00513    <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>:
<a name="l00514"></a>00514       *<a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbkdat - <a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> - 1);
<a name="l00515"></a>00515       <span class="keywordflow">break</span>;
<a name="l00516"></a>00516    <span class="keywordflow">case</span> I2_BKTYPE:
<a name="l00517"></a>00517       *<a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) ((<a class="code" href="unionWORD.html">WORD</a> *) pbkdat - (<a class="code" href="unionWORD.html">WORD</a> *) <a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> - 2);
<a name="l00518"></a>00518       <a class="code" href="group__ybosmacroh.html#gadb9a6eeff544dbade7e5900d629f497a">SWAP_D2WORD</a>(<a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a>);
<a name="l00519"></a>00519       <span class="keywordflow">break</span>;
<a name="l00520"></a>00520    <span class="keywordflow">case</span> I1_BKTYPE:
<a name="l00521"></a>00521    <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga07cd0ef2852310d130deaf0d4ef7bfd4">A1_BKTYPE</a>:
<a name="l00522"></a>00522       *<a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>) ((<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pbkdat - (<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) <a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> - 4);
<a name="l00523"></a>00523       <span class="keywordflow">break</span>;
<a name="l00524"></a>00524    <span class="keywordflow">default</span>:
<a name="l00525"></a>00525       printf(<span class="stringliteral">&quot; unknown YBOS bank type (%ld)\n&quot;</span>, bktype);
<a name="l00526"></a>00526       <span class="keywordflow">break</span>;
<a name="l00527"></a>00527    }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529    <span class="keywordflow">return</span> <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>(plrl, pbkdat);
<a name="l00530"></a>00530 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga069419b0aa987c64d026bd50c0a6eba7"></a><!-- doxytag: member="ybos.c::ybk_create" ref="ga069419b0aa987c64d026bd50c0a6eba7" args="(DWORD *plrl, char *bkname, DWORD bktype, void *pbkdat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ybk_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bkname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>bktype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pbkdat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox Define the following memory area to be a YBOS bank with the given attribute. See YBOS_bank_examples.</p>
<p>Before banks can be created in an event, <a class="el" href="group__ybosincludecode.html#ga6ed49f74e7fd8e2105433bc664891d08">ybk_init()</a>. has to be called first. YBOS does not support mixed bank type. i.e: all the data are expected to be of the same type. YBOS is a 4 bytes bank aligned structure. Padding is performed at the closing of the bank (see ybk_close) with values of 0x0f or/and 0x0ffb. See YBOS_bank_examples. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to the first DWORD of the event area. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bkname</em>&nbsp;</td><td>name to be assigned to the breated bank (max 4 char) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bktype</em>&nbsp;</td><td>YBOS_Bank_Types of the values for the entire created bank. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pbkdat</em>&nbsp;</td><td>return pointer to the first empty data location. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00438">438</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00386">YBOS_BANK_HEADER::index</a>, <a class="el" href="ybos_8h_source.html#l00387">YBOS_BANK_HEADER::length</a>, <a class="el" href="ybos_8h_source.html#l00384">YBOS_BANK_HEADER::name</a>, <a class="el" href="ybos_8h_source.html#l00385">YBOS_BANK_HEADER::number</a>, and <a class="el" href="ybos_8h_source.html#l00388">YBOS_BANK_HEADER::type</a>.</p>

<p>Referenced by <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00327">read_scaler_event()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00290">read_trigger_event()</a>, <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>, and <a class="el" href="ybos_8c_source.html#l01185">ybos_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00439"></a>00439 {
<a name="l00440"></a>00440    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> dname = 0;
<a name="l00441"></a>00441    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a> = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (plrl + 1)) + (*(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) plrl));
<a name="l00442"></a>00442    strncpy((<span class="keywordtype">char</span> *) &amp;dname, bkname, 4);
<a name="l00443"></a>00443    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a48b75f0b13d19047668335154985c01d">name</a> = *((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) bkname);
<a name="l00444"></a>00444    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a5ec4fbe44de10997ef79e0bb1dbed716">number</a> = 1;
<a name="l00445"></a>00445    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#ab965f447705c9d3e8ae637008a5da718">index</a> = 0;
<a name="l00446"></a>00446    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> = 0;
<a name="l00447"></a>00447    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#aeb97f805c9bebaf785de495da6297b64">type</a> = bktype;
<a name="l00448"></a>00448    *((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> **) pbkdat) = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (<a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a> + 1);
<a name="l00449"></a>00449    <span class="keywordflow">return</span>;
<a name="l00450"></a>00450 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa6b8e326b2114f5d35d5a205068619f3"></a><!-- doxytag: member="ybos.c::ybk_create_chaos" ref="gaa6b8e326b2114f5d35d5a205068619f3" args="(DWORD *plrl, char *bkname, DWORD bktype, void *pbkdat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ybk_create_chaos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bkname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>&nbsp;</td>
          <td class="paramname"> <em>bktype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pbkdat</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00458">458</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8c_source.html#l00455">__pchaosi4</a>, <a class="el" href="ybos_8h_source.html#l00386">YBOS_BANK_HEADER::index</a>, <a class="el" href="ybos_8h_source.html#l00387">YBOS_BANK_HEADER::length</a>, <a class="el" href="ybos_8h_source.html#l00384">YBOS_BANK_HEADER::name</a>, <a class="el" href="ybos_8h_source.html#l00385">YBOS_BANK_HEADER::number</a>, and <a class="el" href="ybos_8h_source.html#l00388">YBOS_BANK_HEADER::type</a>.</p>

<p>Referenced by <a class="el" href="ybos__simfe_8c_source.html#l00290">read_trigger_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00460"></a>00460        : <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>
<a name="l00461"></a>00461 Purpose: fills up the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> header,
<a name="l00462"></a>00462 reserve the first 4bytes <span class="keywordflow">for</span> the <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a> of the <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bt unit
<a name="l00463"></a>00463 <a class="code" href="examples_2macro_2midas__macro_8h.html#aa3d7d535cf450b91b9cb6d9cee2edbb9">and</a> <span class="keywordflow">return</span> the pointer to the user space.
<a name="l00464"></a>00464 Input:
<a name="l00465"></a>00465 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> * pevt          pointer to the top of the YBOS event (LRL)
<a name="l00466"></a>00466 char  * bname         Bank <a class="code" href="examples_2macro_2midas__macro_8h.html#ab53d3e6e6144dcb27935cc71c57bc508">name</a> should be <span class="keywordtype">char</span>*4
<a name="l00467"></a>00467 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>   bktype            Bank <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a> can <a class="code" href="patch__mevb_8cpp.html#a944cf20aa75177818af16fe394e984be">by</a> either
<a name="l00468"></a>00468 <a class="code" href="group__ybosdefineh.html#ga4b6b5459b4c74b76ee12197538fe6d1d">I2_BKTYPE</a>, <a class="code" href="group__ybosdefineh.html#ga37b2a5de4003dff9ef6837b6f99a0a69">I1_BKTYPE</a>, <a class="code" href="group__ybosdefineh.html#gac78b656213d4a1fb1fd9bf9bd8c46f09">I4_BKTYPE</a>, <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>
<a name="l00469"></a>00469 Output:
<a name="l00470"></a>00470 <span class="keywordtype">void</span>    *pbkdat       pointer to first valid <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> of the created <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a>
<a name="l00471"></a>00471 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l00472"></a>00472 none
<a name="l00473"></a>00473 \********************************************************************/
<a name="l00474"></a>00474 {
<a name="l00475"></a>00475    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> dname = 0;
<a name="l00476"></a>00476    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a> = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) ((plrl + 1) + (*plrl));
<a name="l00477"></a>00477    strncpy((<span class="keywordtype">char</span> *) &amp;dname, bkname, 4);
<a name="l00478"></a>00478    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a48b75f0b13d19047668335154985c01d">name</a> = *((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) bkname);
<a name="l00479"></a>00479    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a5ec4fbe44de10997ef79e0bb1dbed716">number</a> = 1;
<a name="l00480"></a>00480    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#ab965f447705c9d3e8ae637008a5da718">index</a> = 0;
<a name="l00481"></a>00481    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> = 0;
<a name="l00482"></a>00482    <a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a>-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#aeb97f805c9bebaf785de495da6297b64">type</a> = bktype;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484    *((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> **) pbkdat) = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (<a class="code" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a> + 1);
<a name="l00485"></a>00485    <a class="code" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (*(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbkdat);
<a name="l00486"></a>00486    *((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> **) pbkdat) += 1;
<a name="l00487"></a>00487    <span class="keywordflow">return</span>;
<a name="l00488"></a>00488 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gafa453696e2d3efeac5f355da314546ef"></a><!-- doxytag: member="ybos.c::ybk_find" ref="gafa453696e2d3efeac5f355da314546ef" args="(DWORD *plrl, char *bkname, DWORD *bklen, DWORD *bktype, void **pbk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybk_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bkname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>bklen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>bktype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>pbk</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the requested bank and return the infirmation if the bank as well as the pointer to the top of the data section. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to the area of event. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bkname</em>&nbsp;</td><td>name of the bank to be located. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bklen</em>&nbsp;</td><td>returned length in 4bytes unit of the bank. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bktype</em>&nbsp;</td><td>returned bank type. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pbk</em>&nbsp;</td><td>pointer to the first data of the found bank. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>YB_SUCCESS, YB_BANK_NOT_FOUND, YB_WRONG_BANK_TYPE </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00643">643</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00387">YBOS_BANK_HEADER::length</a>, <a class="el" href="ybos_8h_source.html#l00351">MAX_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00384">YBOS_BANK_HEADER::name</a>, <a class="el" href="ybos_8h_source.html#l00388">YBOS_BANK_HEADER::type</a>, <a class="el" href="ybos_8h_source.html#l00155">YB_BANK_NOT_FOUND</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, and <a class="el" href="ybos_8h_source.html#l00154">YB_WRONG_BANK_TYPE</a>.</p>

<p>Referenced by <a class="el" href="mana_8cpp_source.html#l04206">bevid_2_mheader()</a>, <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>, <a class="el" href="mdump_8c_source.html#l00175">replog()</a>, and <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00644"></a>00644 {
<a name="l00645"></a>00645    <a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *pevt;
<a name="l00646"></a>00646    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pendevt;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648    pevt = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (plrl + 1);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650    <span class="comment">/* end of event pointer skip LRL, point to YBOS_BANK_HEADER */</span>
<a name="l00651"></a>00651    pendevt = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevt + *plrl;
<a name="l00652"></a>00652 
<a name="l00653"></a>00653    <span class="comment">/* check if bank_type in range */</span>
<a name="l00654"></a>00654    <span class="keywordflow">if</span> (pevt-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#aeb97f805c9bebaf785de495da6297b64">type</a> &gt;= <a class="code" href="group__ybosdefineh.html#gac0c471f6b5b30dcb4d014445b9ff4a3d">MAX_BKTYPE</a>)
<a name="l00655"></a>00655       <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaeae09733647aab5d9b8b064915c53d8c">YB_WRONG_BANK_TYPE</a>);
<a name="l00656"></a>00656 
<a name="l00657"></a>00657    <span class="comment">/* init returned variables */</span>
<a name="l00658"></a>00658    *bklen = 0;
<a name="l00659"></a>00659    *bktype = 0;
<a name="l00660"></a>00660 
<a name="l00661"></a>00661    <span class="comment">/* scan event */</span>
<a name="l00662"></a>00662    <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevt &lt; pendevt) {
<a name="l00663"></a>00663       <span class="comment">/* check bank name */</span>
<a name="l00664"></a>00664       <span class="keywordflow">if</span> (strncmp((<span class="keywordtype">char</span> *) &amp;(pevt-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a48b75f0b13d19047668335154985c01d">name</a>), bkname, 4) == 0) {    <span class="comment">/* bank name match */</span>
<a name="l00665"></a>00665          <span class="comment">/* extract bank length */</span>
<a name="l00666"></a>00666          *bklen = pevt-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> - 1;     <span class="comment">/* exclude bank type */</span>
<a name="l00667"></a>00667 
<a name="l00668"></a>00668          <span class="comment">/* extract bank type */</span>
<a name="l00669"></a>00669          *bktype = pevt-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#aeb97f805c9bebaf785de495da6297b64">type</a>;
<a name="l00670"></a>00670 
<a name="l00671"></a>00671          <span class="comment">/* return point to bank name */</span>
<a name="l00672"></a>00672          *pbk = &amp;pevt-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a48b75f0b13d19047668335154985c01d">name</a>;
<a name="l00673"></a>00673          <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>);
<a name="l00674"></a>00674       } <span class="keywordflow">else</span> {
<a name="l00675"></a>00675          <span class="comment">/* skip to next bank */</span>
<a name="l00676"></a>00676          pevt = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevt) + pevt-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> + 4);
<a name="l00677"></a>00677       }
<a name="l00678"></a>00678    }
<a name="l00679"></a>00679    <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gadd90f38301bbbe59b3110e17541971ac">YB_BANK_NOT_FOUND</a>);
<a name="l00680"></a>00680 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga084bc56c1448f670c68c4cf4656b1174"></a><!-- doxytag: member="ybos.c::ybk_init" ref="ga084bc56c1448f670c68c4cf4656b1174" args="(DWORD *plrl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ybk_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes an event for YBOS banks structure.</p>
<p>Before banks can be created in an event, <a class="el" href="group__ybosincludecode.html#ga6ed49f74e7fd8e2105433bc664891d08">ybk_init()</a> has to be called first. See YBOS_bank_examples. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to the first DWORD of the event area of event </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00408">408</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>Referenced by <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00327">read_scaler_event()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00290">read_trigger_event()</a>, <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>, and <a class="el" href="ybos_8c_source.html#l01185">ybos_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00409"></a>00409 {
<a name="l00410"></a>00410    *plrl = 0;
<a name="l00411"></a>00411    <span class="keywordflow">return</span>;
<a name="l00412"></a>00412 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad6cf7a30912d4863cd8e9a981bf2a179"></a><!-- doxytag: member="ybos.c::ybk_iterate" ref="gad6cf7a30912d4863cd8e9a981bf2a179" args="(DWORD *plrl, YBOS_BANK_HEADER **pybkh, void **pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybk_iterate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> **&nbsp;</td>
          <td class="paramname"> <em>pybkh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the bank header pointer and data pointer of the given bank name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to the area of event. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pybkh</em>&nbsp;</td><td>pointer to the YBOS bank header. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to the first data of the current bank. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>data length in 4 bytes unit. return -1 if no more bank found. </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00729">729</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00350">I1_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00387">YBOS_BANK_HEADER::length</a>, and <a class="el" href="ybos_8h_source.html#l00154">YB_WRONG_BANK_TYPE</a>.</p>

<p>Referenced by <a class="el" href="crate6__CAEN__TDC_2mfe__mucap_8c_source.html#l00842">update_odb()</a>, and <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00730"></a>00730 {
<a name="l00731"></a>00731    <span class="keyword">static</span> <span class="keywordtype">int</span> len;
<a name="l00732"></a>00732    <span class="keyword">static</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pendevt;
<a name="l00733"></a>00733    <span class="keyword">static</span> <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pybk;
<a name="l00734"></a>00734    <span class="comment">/*PAA char bname[5]; */</span>
<a name="l00735"></a>00735 
<a name="l00736"></a>00736    <span class="comment">/* the event may have several bank</span>
<a name="l00737"></a>00737 <span class="comment">      check if we have been already in here */</span>
<a name="l00738"></a>00738    <span class="keywordflow">if</span> (*pybkh == NULL) {
<a name="l00739"></a>00739       <span class="comment">/* first time in (skip lrl) */</span>
<a name="l00740"></a>00740       *pybkh = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (plrl + 1);
<a name="l00741"></a>00741 
<a name="l00742"></a>00742       <span class="keywordflow">if</span> ((*pybkh)-&gt;type &gt; <a class="code" href="group__ybosdefineh.html#ga37b2a5de4003dff9ef6837b6f99a0a69">I1_BKTYPE</a>) {
<a name="l00743"></a>00743          *pdata = NULL;
<a name="l00744"></a>00744          *pybkh = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) * pdata;
<a name="l00745"></a>00745          <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaeae09733647aab5d9b8b064915c53d8c">YB_WRONG_BANK_TYPE</a>);
<a name="l00746"></a>00746       }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748       <span class="comment">/* end of event pointer (+ lrl) */</span>
<a name="l00749"></a>00749       pendevt = plrl + *plrl;
<a name="l00750"></a>00750 
<a name="l00751"></a>00751       <span class="comment">/* skip the EVID bank if present */</span>
<a name="l00752"></a>00752     <span class="comment">/*-PAA- keep it in for a little while Dec 17/98</span>
<a name="l00753"></a>00753 <span class="comment">    *((DWORD *)bname) = (*pybkh)-&gt;name;</span>
<a name="l00754"></a>00754 <span class="comment">    if (strncmp (bname,&quot;EVID&quot;,4) == 0)</span>
<a name="l00755"></a>00755 <span class="comment">    {</span>
<a name="l00756"></a>00756 <span class="comment">    len = (*pybkh)-&gt;length;</span>
<a name="l00757"></a>00757 <span class="comment">    (YBOS_BANK_HEADER *)(*pybkh)++;</span>
<a name="l00758"></a>00758 <span class="comment">    pybk = (DWORD *) *pybkh;</span>
<a name="l00759"></a>00759 <span class="comment">    pybk += len - 1;</span>
<a name="l00760"></a>00760 <span class="comment">    *pybkh = (YBOS_BANK_HEADER *) pybk;</span>
<a name="l00761"></a>00761 <span class="comment">    }</span>
<a name="l00762"></a>00762 <span class="comment">    */</span>
<a name="l00763"></a>00763    } <span class="keywordflow">else</span> {
<a name="l00764"></a>00764       <span class="comment">/* already been in iterate */</span>
<a name="l00765"></a>00765       <span class="comment">/* skip current pointed bank ( + bank_length + header) */</span>
<a name="l00766"></a>00766       len = (*pybkh)-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a>;
<a name="l00767"></a>00767       (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (*pybkh)++;
<a name="l00768"></a>00768       pybk = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) * pybkh;
<a name="l00769"></a>00769       pybk += len - 1;
<a name="l00770"></a>00770       *pybkh = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) pybk;
<a name="l00771"></a>00771    }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773    <span class="comment">/* check for end of event */</span>
<a name="l00774"></a>00774    <span class="keywordflow">if</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (*pybkh) &lt; pendevt) {
<a name="l00775"></a>00775       <span class="comment">/* points to the data section */</span>
<a name="l00776"></a>00776       *pdata = (<span class="keywordtype">void</span> *) (*pybkh + 1);
<a name="l00777"></a>00777 
<a name="l00778"></a>00778       <span class="comment">/* length always in I*4 due to YBOS -1 because type included in length !@# */</span>
<a name="l00779"></a>00779       <span class="keywordflow">return</span> ((*pybkh)-&gt;length - 1);
<a name="l00780"></a>00780    } <span class="keywordflow">else</span> {
<a name="l00781"></a>00781       <span class="comment">/* no more bank in this event */</span>
<a name="l00782"></a>00782       *pdata = NULL;
<a name="l00783"></a>00783       *pybkh = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) * pdata;
<a name="l00784"></a>00784       <span class="keywordflow">return</span> (-1);
<a name="l00785"></a>00785    }
<a name="l00786"></a>00786 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaa7203fdbdf74b8b257bc9b83bec81464"></a><!-- doxytag: member="ybos.c::ybk_list" ref="gaa7203fdbdf74b8b257bc9b83bec81464" args="(DWORD *plrl, char *bklist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybk_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bklist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the size in bytes of the event composed of YBOS <a class="el" href="include_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank(s)</a>.</p>
<p>The <a class="el" href="group__msectionh.html#ga551777dd98f469faa141175340d7a185">bk_list()</a> has to be a predefined string of max size of YB_STRING_BANKLIST_MAX. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to the area of event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bklist</em>&nbsp;</td><td>Filled character string of the YBOS bank names found in the event. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of banks found in this event. </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00594">594</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="lrs1821_8h_source.html#l00218">cm_msg</a>, <a class="el" href="ybos_8h_source.html#l00351">MAX_BKTYPE</a>, <a class="el" href="lrs1821_8h_source.html#l00221">MINFO</a>, <a class="el" href="ybos_8h_source.html#l00384">YBOS_BANK_HEADER::name</a>, <a class="el" href="ybos_8h_source.html#l00388">YBOS_BANK_HEADER::type</a>, <a class="el" href="ybos_8h_source.html#l00139">YB_BANKLIST_MAX</a>, and <a class="el" href="ybos_8h_source.html#l00154">YB_WRONG_BANK_TYPE</a>.</p>

<p>Referenced by <a class="el" href="mdump_8c_source.html#l00313">process_event()</a>, <a class="el" href="mdump_8c_source.html#l00175">replog()</a>, and <a class="el" href="ybos_8c_source.html#l02824">yb_any_bank_event_display()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00595"></a>00595 {
<a name="l00596"></a>00596 
<a name="l00597"></a>00597    <a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *pbk;
<a name="l00598"></a>00598    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pendevt, nbk;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600    pbk = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (plrl + 1);
<a name="l00601"></a>00601 
<a name="l00602"></a>00602    <span class="comment">/* end of event pointer skip LRL, point to YBOS_BANK_HEADER */</span>
<a name="l00603"></a>00603    pendevt = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk + *plrl;
<a name="l00604"></a>00604 
<a name="l00605"></a>00605    <span class="comment">/* check if bank_type in range */</span>
<a name="l00606"></a>00606    <span class="keywordflow">if</span> (pbk-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#aeb97f805c9bebaf785de495da6297b64">type</a> &gt;= <a class="code" href="group__ybosdefineh.html#gac0c471f6b5b30dcb4d014445b9ff4a3d">MAX_BKTYPE</a>)
<a name="l00607"></a>00607       <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaeae09733647aab5d9b8b064915c53d8c">YB_WRONG_BANK_TYPE</a>);
<a name="l00608"></a>00608 
<a name="l00609"></a>00609    <span class="comment">/*init bank counter and returned string */</span>
<a name="l00610"></a>00610    nbk = 0;
<a name="l00611"></a>00611    bklist[0] = 0;
<a name="l00612"></a>00612 
<a name="l00613"></a>00613    <span class="comment">/* scan event */</span>
<a name="l00614"></a>00614    <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk &lt; pendevt) {
<a name="l00615"></a>00615       <span class="comment">/* update the number of bank counter */</span>
<a name="l00616"></a>00616       nbk++;
<a name="l00617"></a>00617 
<a name="l00618"></a>00618       <span class="keywordflow">if</span> (nbk &gt; <a class="code" href="group__ybosdefineh.html#gadf153a75b108fe39498ac5d0afceddbe">YB_BANKLIST_MAX</a>) {
<a name="l00619"></a>00619          <a class="code" href="lrs1821_8h.html#aa6f8a5999f0a072ce20ab87bae8a9eb5">cm_msg</a>(<a class="code" href="lrs1821_8h.html#a6e27d8876a43afce3ee4dd16527cbb9e">MINFO</a>, <span class="stringliteral">&quot;ybk_list&quot;</span>, <span class="stringliteral">&quot;over %i banks -&gt; truncated&quot;</span>, <a class="code" href="group__ybosdefineh.html#gadf153a75b108fe39498ac5d0afceddbe">YB_BANKLIST_MAX</a>);
<a name="l00620"></a>00620          <span class="keywordflow">return</span> (nbk);
<a name="l00621"></a>00621       }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623       <span class="comment">/* append ybos bank name to list */</span>
<a name="l00624"></a>00624       strncat(bklist, (<span class="keywordtype">char</span> *) &amp;(pbk-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a48b75f0b13d19047668335154985c01d">name</a>), 4);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626       <span class="comment">/* skip to next bank */</span>
<a name="l00627"></a>00627       pbk = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbk) + pbk-&gt;length + 4);
<a name="l00628"></a>00628    }
<a name="l00629"></a>00629    <span class="keywordflow">return</span> (nbk);
<a name="l00630"></a>00630 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga38926ff582025213cfd6cd24d674c96c"></a><!-- doxytag: member="ybos.c::ybk_locate" ref="ga38926ff582025213cfd6cd24d674c96c" args="(DWORD *plrl, char *bkname, void *pdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybk_locate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bkname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Locate the requested bank and return the pointer to the top of the data section. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to the area of event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bkname</em>&nbsp;</td><td>name of the bank to be located. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pdata</em>&nbsp;</td><td>pointer to the first data of the located bank. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of DWORD in bank or YB_BANK_NOT_FOUND, YB_WRONG_BANK_TYPE (&lt;0) </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00690">690</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00387">YBOS_BANK_HEADER::length</a>, <a class="el" href="ybos_8h_source.html#l00351">MAX_BKTYPE</a>, <a class="el" href="ybos_8h_source.html#l00384">YBOS_BANK_HEADER::name</a>, <a class="el" href="ybos_8h_source.html#l00388">YBOS_BANK_HEADER::type</a>, <a class="el" href="ybos_8h_source.html#l00155">YB_BANK_NOT_FOUND</a>, and <a class="el" href="ybos_8h_source.html#l00154">YB_WRONG_BANK_TYPE</a>.</p>

<p>Referenced by <a class="el" href="ybos_8c_source.html#l03576">yb_file_recompose()</a>, <a class="el" href="ybos_8c_source.html#l03657">yb_ymfile_open()</a>, and <a class="el" href="ybos_8c_source.html#l03756">yb_ymfile_update()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00691"></a>00691 {
<a name="l00692"></a>00692    <a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *pybk;
<a name="l00693"></a>00693    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pendevt;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695    pybk = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (plrl + 1);
<a name="l00696"></a>00696 
<a name="l00697"></a>00697    <span class="comment">/* end of event pointer skip LRL, point to YBOS_BANK_HEADER */</span>
<a name="l00698"></a>00698    pendevt = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pybk + *plrl;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700    <span class="comment">/* check if bank_type in range */</span>
<a name="l00701"></a>00701    <span class="keywordflow">if</span> (pybk-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#aeb97f805c9bebaf785de495da6297b64">type</a> &gt;= <a class="code" href="group__ybosdefineh.html#gac0c471f6b5b30dcb4d014445b9ff4a3d">MAX_BKTYPE</a>)
<a name="l00702"></a>00702       <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaeae09733647aab5d9b8b064915c53d8c">YB_WRONG_BANK_TYPE</a>);
<a name="l00703"></a>00703 
<a name="l00704"></a>00704    <span class="comment">/* scan event */</span>
<a name="l00705"></a>00705    <span class="keywordflow">while</span> ((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pybk &lt; pendevt) {
<a name="l00706"></a>00706       <span class="comment">/* check bank name */</span>
<a name="l00707"></a>00707       <span class="keywordflow">if</span> (strncmp((<span class="keywordtype">char</span> *) &amp;(pybk-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a48b75f0b13d19047668335154985c01d">name</a>), bkname, 4) == 0) {    <span class="comment">/* bank name match */</span>
<a name="l00708"></a>00708          <span class="comment">/* extract bank length */</span>
<a name="l00709"></a>00709 
<a name="l00710"></a>00710          <span class="comment">/* return pointer to data section */</span>
<a name="l00711"></a>00711          *((<span class="keywordtype">void</span> **) pdata) = pybk + 1;
<a name="l00712"></a>00712          <span class="keywordflow">return</span> (pybk-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> - 1);
<a name="l00713"></a>00713       } <span class="keywordflow">else</span> {
<a name="l00714"></a>00714          <span class="comment">/* skip to next bank */</span>
<a name="l00715"></a>00715          pybk = (<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pybk) + pybk-&gt;<a class="code" href="structYBOS__BANK__HEADER.html#a4fe1a807afdb104ba9e7a02654a115a8">length</a> + 4);
<a name="l00716"></a>00716       }
<a name="l00717"></a>00717    }
<a name="l00718"></a>00718    <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gadd90f38301bbbe59b3110e17541971ac">YB_BANK_NOT_FOUND</a>);
<a name="l00719"></a>00719 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga6c2e09370aa3000ba12ad9d9d6852eb9"></a><!-- doxytag: member="ybos.c::ybk_size" ref="ga6c2e09370aa3000ba12ad9d9d6852eb9" args="(DWORD *plrl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybk_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>plrl</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the size in bytes of the event composed of YBOS <a class="el" href="include_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank(s)</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>plrl</em>&nbsp;</td><td>pointer to the area of event </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of bytes contained in data area of the event </dd></dl>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00579">579</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>Referenced by <a class="el" href="generic_8c_source.html#l00438">cd_gen_read()</a>, <a class="el" href="hv_8c_source.html#l00740">cd_hv_read()</a>, <a class="el" href="multi_8c_source.html#l00629">cd_multi_read()</a>, <a class="el" href="fal_8c_source.html#l03459">process_event()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00327">read_scaler_event()</a>, <a class="el" href="ybos__simfe_8c_source.html#l00290">read_trigger_event()</a>, <a class="el" href="ybos_8c_source.html#l00856">yb_file_fragment()</a>, and <a class="el" href="ybos_8c_source.html#l01185">ybos_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00580"></a>00580 {
<a name="l00581"></a>00581    <span class="keywordflow">return</span> (*((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) plrl) * 4 + 4);
<a name="l00582"></a>00582 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga86b8a986ab796b9ab5606ea269a5fcd1"></a><!-- doxytag: member="ybos.c::ybos_event_get" ref="ga86b8a986ab796b9ab5606ea269a5fcd1" args="(DWORD **plrl, DWORD *readn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybos_event_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> **&nbsp;</td>
          <td class="paramname"> <em>plrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>readn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02568">2568</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>, <a class="el" href="ybos_8c_source.html#l00373">size</a>, <a class="el" href="ybos_8h_source.html#l00153">YB_DONE</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, <a class="el" href="ybos_8h_source.html#l00136">YBOS_HEADER_LENGTH</a>, <a class="el" href="ybos_8h_source.html#l00134">YBOS_PHYREC_SIZE</a>, and <a class="el" href="ybos_8c_source.html#l02046">ybos_physrec_get()</a>.</p>

<p>Referenced by <a class="el" href="mana_8cpp_source.html#l04425">ma_read_event()</a>, and <a class="el" href="ybos_8c_source.html#l02544">yb_any_event_get()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02570"></a>02570        : <a class="code" href="group__ybosincludecode.html#ga195a8275899e64304dbbff765293795c">ybos_event_get</a>
<a name="l02571"></a>02571 Purpose: <a class="code" href="examples_2macro_2midas__macro_8h.html#a5b55880ce7d302ae13576e90584a63bb">read</a> one YBOS <span class="keyword">event</span>.
<a name="l02572"></a>02572 detect the <a class="code" href="examples_2macro_2midas__macro_8h.html#a2fb839951208a8400aa14d71d7c6f974">end</a> of <a class="code" href="odbhist_8c.html#a369e3b30815f09142abc86f462a501ff">run</a> <a class="code" href="patch__mevb_8cpp.html#a944cf20aa75177818af16fe394e984be">by</a> checking the *plrl <a class="code" href="melog_8c.html#a3c3ad19e293264185a78fb6032906e8f">content</a> (-1)
<a name="l02573"></a>02573 Input:
<a name="l02574"></a>02574 Output:
<a name="l02575"></a>02575 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> ** plrl      points to LRL valid full YBOS event
<a name="l02576"></a>02576 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> * readn      event <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> Bytes 
<a name="l02577"></a>02577 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02578"></a>02578 <a class="code" href="group__yboserrorh.html#gab034b5fa004cc65afaed8f070b9ea8b7">YB_DONE</a>           No more record to <a class="code" href="examples_2macro_2midas__macro_8h.html#a5b55880ce7d302ae13576e90584a63bb">read</a>
<a name="l02579"></a>02579 <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>        Ok
<a name="l02580"></a>02580 \********************************************************************/
<a name="l02581"></a>02581 {
<a name="l02582"></a>02582    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a>, fpart, lpart, evt_length;
<a name="l02583"></a>02583    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *ptmp, *prec;
<a name="l02584"></a>02584    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l02585"></a>02585 
<a name="l02586"></a>02586    <span class="comment">/* detect end of run (no more events) </span>
<a name="l02587"></a>02587 <span class="comment">      by checking the *pyrd == -1 */</span>
<a name="l02588"></a>02588    <span class="keywordflow">if</span> ((<a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>) (*<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd) == -1)
<a name="l02589"></a>02589       <span class="keywordflow">return</span> <a class="code" href="group__yboserrorh.html#gab034b5fa004cc65afaed8f070b9ea8b7">YB_DONE</a>;
<a name="l02590"></a>02590    <span class="comment">/* extract event to local event area</span>
<a name="l02591"></a>02591 <span class="comment">      event may not be complete if larger then physical record size</span>
<a name="l02592"></a>02592 <span class="comment">      will be taken care below, ADD the lrl  */</span>
<a name="l02593"></a>02593    evt_length = *(<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd) + 1;
<a name="l02594"></a>02594    memcpy((<span class="keywordtype">char</span> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl, (<span class="keywordtype">char</span> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd, evt_length &lt;&lt; 2);
<a name="l02595"></a>02595 
<a name="l02596"></a>02596    <span class="comment">/* extract lrl in I*4 and include itself (lrl) */</span>
<a name="l02597"></a>02597 
<a name="l02598"></a>02598    <span class="comment">/* stop if LRL  = -1 ... I don&apos;t think it is necessary but I leave it in for now</span>
<a name="l02599"></a>02599 <span class="comment">      or forever... */</span>
<a name="l02600"></a>02600    <span class="keywordflow">if</span> (evt_length - 1 == -1)
<a name="l02601"></a>02601       <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gab034b5fa004cc65afaed8f070b9ea8b7">YB_DONE</a>);
<a name="l02602"></a>02602 
<a name="l02603"></a>02603    <span class="comment">/* check if event cross physical record boundary */</span>
<a name="l02604"></a>02604    <span class="keywordflow">if</span> ((<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd + evt_length) &gt;= (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.size) {
<a name="l02605"></a>02605       <span class="comment">/* upcomming event crosses block, then first copy first part of event */</span>
<a name="l02606"></a>02606       <span class="comment">/* compute max copy for first part of event */</span>
<a name="l02607"></a>02607       fpart = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.size - <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd;
<a name="l02608"></a>02608       memcpy((<span class="keywordtype">char</span> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl, (<span class="keywordtype">char</span> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd, fpart &lt;&lt; 2);
<a name="l02609"></a>02609 
<a name="l02610"></a>02610       <span class="comment">/* adjust temporary evt pointer all in I*4 */</span>
<a name="l02611"></a>02611       ptmp = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl + fpart;
<a name="l02612"></a>02612 
<a name="l02613"></a>02613       <span class="keywordflow">if</span> ((evt_length - fpart) == 0) {
<a name="l02614"></a>02614          <span class="comment">/* get next physical record */</span>
<a name="l02615"></a>02615          <span class="keywordflow">if</span> ((status = <a class="code" href="group__ybosincludecode.html#ga9df5910f14c6b81c31bccdf216066bd8">ybos_physrec_get</a>(&amp;prec, &amp;size)) != <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>)
<a name="l02616"></a>02616             <span class="keywordflow">return</span> (status);
<a name="l02617"></a>02617          <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh-&gt;header_length;
<a name="l02618"></a>02618       } <span class="keywordflow">else</span> {
<a name="l02619"></a>02619          <span class="keywordflow">while</span> ((evt_length - fpart) &gt; 0) {
<a name="l02620"></a>02620             lpart = evt_length - fpart;
<a name="l02621"></a>02621             <span class="keywordflow">if</span> (lpart &gt; (<a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> - <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>))
<a name="l02622"></a>02622                lpart = (<a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> - <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>);
<a name="l02623"></a>02623 
<a name="l02624"></a>02624             <span class="comment">/* get next physical record */</span>
<a name="l02625"></a>02625             <span class="keywordflow">if</span> ((status = <a class="code" href="group__ybosincludecode.html#ga9df5910f14c6b81c31bccdf216066bd8">ybos_physrec_get</a>(&amp;prec, &amp;size)) != <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>)
<a name="l02626"></a>02626                <span class="keywordflow">return</span> (status);
<a name="l02627"></a>02627 
<a name="l02628"></a>02628             <span class="comment">/* pyrd is left at the next lrl but here we comming from</span>
<a name="l02629"></a>02629 <span class="comment">               a cross boundary request so read just the pyrd to </span>
<a name="l02630"></a>02630 <span class="comment">               pyh+header_length */</span>
<a name="l02631"></a>02631             <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh-&gt;header_length;
<a name="l02632"></a>02632             <span class="comment">/* now copy remaining from temporary pointer */</span>
<a name="l02633"></a>02633             memcpy((<span class="keywordtype">char</span> *) ptmp, (<span class="keywordtype">char</span> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd, lpart &lt;&lt; 2);
<a name="l02634"></a>02634 
<a name="l02635"></a>02635             <span class="comment">/* adjust pointer to next valid data (LRL) </span>
<a name="l02636"></a>02636 <span class="comment">               should be equivalent to pyh+pyh-&gt;offset */</span>
<a name="l02637"></a>02637             <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd += lpart;
<a name="l02638"></a>02638             fpart += lpart;
<a name="l02639"></a>02639             ptmp += lpart;
<a name="l02640"></a>02640          }
<a name="l02641"></a>02641       }
<a name="l02642"></a>02642       <span class="keywordflow">if</span> (<a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd != (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh-&gt;offset) {
<a name="l02643"></a>02643          printf(<span class="stringliteral">&quot; event misalignment !! %p  %p \n&quot;</span>,
<a name="l02644"></a>02644                 <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd, (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh-&gt;offset);
<a name="l02645"></a>02645          printf(<span class="stringliteral">&quot;Event crossed boundary: length %ld\n&quot;</span>, evt_length);
<a name="l02646"></a>02646          <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh + <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyh-&gt;offset;
<a name="l02647"></a>02647       }
<a name="l02648"></a>02648 
<a name="l02649"></a>02649    } <span class="keywordflow">else</span> {
<a name="l02650"></a>02650       <span class="comment">/* adjust pointer to next valid data (LRL) */</span>
<a name="l02651"></a>02651       <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pyrd += evt_length;
<a name="l02652"></a>02652    }
<a name="l02653"></a>02653    <span class="comment">/* count event */</span>
<a name="l02654"></a>02654    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtn++;
<a name="l02655"></a>02655 
<a name="l02656"></a>02656   <span class="comment">/*-PAA- Dec99 Danny adjust event size in I*4 */</span>
<a name="l02657"></a>02657    <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtlen = evt_length;
<a name="l02658"></a>02658    <span class="comment">/* in bytes for the world */</span>
<a name="l02659"></a>02659    *readn = <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.evtlen &lt;&lt; 2;
<a name="l02660"></a>02660    *plrl = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) <a class="code" href="group__ybosincludecode.html#ga053470f70c3d6a9ca5b0017cbcf94bfa">my</a>.pylrl;
<a name="l02661"></a>02661    return (<a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>);
<a name="l02662"></a>02662 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaad36b8401b23c0422ba0e82216966950"></a><!-- doxytag: member="mevb.cpp::ybos_event_swap" ref="gaad36b8401b23c0422ba0e82216966950" args="(DWORD *pevt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybos_event_swap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a> *&nbsp;</td>
          <td class="paramname"> <em>pevt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l02457">2457</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>Referenced by <a class="el" href="mevb_8cpp_source.html#l00527">eb_yfragment_add()</a>, <a class="el" href="mevb_8cpp_source.html#l00916">source_scan()</a>, <a class="el" href="ybos_8c_source.html#l02424">yb_any_event_swap()</a>, and <a class="el" href="ybos_8c_source.html#l01185">ybos_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02459"></a>02459        : <a class="code" href="group__ybosbankc.html#gaad36b8401b23c0422ba0e82216966950">ybos_event_swap</a>
<a name="l02460"></a>02460 Purpose: byte swap the entire YBOS <span class="keyword">event</span> <span class="keywordflow">if</span> necessary.
<a name="l02461"></a>02461 chekc necessity of swapping <a class="code" href="patch__mevb_8cpp.html#a944cf20aa75177818af16fe394e984be">by</a> looking at the 
<a name="l02462"></a>02462 <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> <a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a> being &lt; <a class="code" href="group__ybosdefineh.html#gac0c471f6b5b30dcb4d014445b9ff4a3d">MAX_BKTYPE</a> 
<a name="l02463"></a>02463 Input:
<a name="l02464"></a>02464 <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> * plrl           pointer to the YBOS <span class="keyword">event</span>
<a name="l02465"></a>02465 Output:
<a name="l02466"></a>02466 none
<a name="l02467"></a>02467 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l02468"></a>02468 <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>             Event has been swapped
<a name="l02469"></a>02469 <a class="code" href="group__yboserrorh.html#ga7eb7c12d46e026e3dfa08464e7277f41">YB_EVENT_NOT_SWAPPED</a>   Event has been not been swapped
<a name="l02470"></a>02470 <a class="code" href="group__yboserrorh.html#ga68c248e6c53a92f6c04a56c7f837b21a">YB_SWAP_ERROR</a>          swapping error
<a name="l02471"></a>02471 \********************************************************************/
<a name="l02472"></a>02472 {
<a name="l02473"></a>02473    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pevt, *pnextb, *pendevt;
<a name="l02474"></a>02474    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> bank_length, bank_type;
<a name="l02475"></a>02475 
<a name="l02476"></a>02476    <span class="comment">/* check if event has to be swapped */</span>
<a name="l02477"></a>02477    <span class="keywordflow">if</span> ((((<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a> *) (plrl + 1))-&gt;<a class="code" href="mana_8cpp.html#a9a59b4d9fa62abe25a78cc38137ffd8e">type</a>) &lt; <a class="code" href="group__ybosdefineh.html#gac0c471f6b5b30dcb4d014445b9ff4a3d">MAX_BKTYPE</a>)
<a name="l02478"></a>02478       <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#ga7eb7c12d46e026e3dfa08464e7277f41">YB_EVENT_NOT_SWAPPED</a>);
<a name="l02479"></a>02479 
<a name="l02480"></a>02480    <span class="comment">/* swap LRL */</span>
<a name="l02481"></a>02481    <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(plrl);
<a name="l02482"></a>02482    pevt = plrl + 1;
<a name="l02483"></a>02483 
<a name="l02484"></a>02484    <span class="comment">/* end of event pointer */</span>
<a name="l02485"></a>02485    pendevt = pevt + *plrl;
<a name="l02486"></a>02486 
<a name="l02487"></a>02487    <span class="comment">/* scan event */</span>
<a name="l02488"></a>02488    <span class="keywordflow">while</span> (pevt &lt; pendevt) {
<a name="l02489"></a>02489       <span class="comment">/* swap YBOS bank header for sure */</span>
<a name="l02490"></a>02490       <span class="comment">/* bank name doesn&apos;t have to be swapped as it&apos;s an ASCII coded */</span>
<a name="l02491"></a>02491       pevt++;                   <span class="comment">/* bank name */</span>
<a name="l02492"></a>02492 
<a name="l02493"></a>02493       <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(pevt);         <span class="comment">/* bank number */</span>
<a name="l02494"></a>02494       pevt++;
<a name="l02495"></a>02495 
<a name="l02496"></a>02496       <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(pevt);         <span class="comment">/* bank index */</span>
<a name="l02497"></a>02497       pevt++;
<a name="l02498"></a>02498 
<a name="l02499"></a>02499       <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(pevt);         <span class="comment">/* bank length */</span>
<a name="l02500"></a>02500       bank_length = *pevt++;
<a name="l02501"></a>02501 
<a name="l02502"></a>02502       <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(pevt);         <span class="comment">/* bank type */</span>
<a name="l02503"></a>02503       bank_type = *pevt++;
<a name="l02504"></a>02504 
<a name="l02505"></a>02505       <span class="comment">/* pevt left pointing at first data in bank */</span>
<a name="l02506"></a>02506 
<a name="l02507"></a>02507       <span class="comment">/* pointer to next bank (-1 due to type inclided in length #$%@ */</span>
<a name="l02508"></a>02508       pnextb = pevt + bank_length - 1;
<a name="l02509"></a>02509 
<a name="l02510"></a>02510       <span class="keywordflow">switch</span> (bank_type) {
<a name="l02511"></a>02511       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#gaba3ee4247e6ef5302ba5a83079a338e0">D8_BKTYPE</a>:
<a name="l02512"></a>02512          <span class="keywordflow">while</span> ((<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pevt &lt; (<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pnextb) {
<a name="l02513"></a>02513             <a class="code" href="group__msmacroh.html#ga8c6db33e3f8af89e87556d9f7a9b32a8">QWORD_SWAP</a>(pevt);
<a name="l02514"></a>02514             pevt = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (((<span class="keywordtype">double</span> *) pevt) + 1);
<a name="l02515"></a>02515          }
<a name="l02516"></a>02516          <span class="keywordflow">break</span>;
<a name="l02517"></a>02517       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#gac78b656213d4a1fb1fd9bf9bd8c46f09">I4_BKTYPE</a>:
<a name="l02518"></a>02518       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>:
<a name="l02519"></a>02519          <span class="keywordflow">while</span> ((<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pevt &lt; (<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pnextb) {
<a name="l02520"></a>02520             <a class="code" href="group__msmacroh.html#gadb40ea04e4e009bbde68c027a8f95039">DWORD_SWAP</a>(pevt);
<a name="l02521"></a>02521             pevt++;
<a name="l02522"></a>02522          }
<a name="l02523"></a>02523          <span class="keywordflow">break</span>;
<a name="l02524"></a>02524       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga4b6b5459b4c74b76ee12197538fe6d1d">I2_BKTYPE</a>:
<a name="l02525"></a>02525          <span class="keywordflow">while</span> ((<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pevt &lt; (<a class="code" href="group__mcstdinclude.html#ga4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *) pnextb) {
<a name="l02526"></a>02526             <a class="code" href="group__msmacroh.html#ga4670ac841b4b8e3c3141a91a743bc61d">WORD_SWAP</a>(pevt);
<a name="l02527"></a>02527             pevt = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (((<a class="code" href="unionWORD.html">WORD</a> *) pevt) + 1);
<a name="l02528"></a>02528          }
<a name="l02529"></a>02529          <span class="keywordflow">break</span>;
<a name="l02530"></a>02530       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga37b2a5de4003dff9ef6837b6f99a0a69">I1_BKTYPE</a>:
<a name="l02531"></a>02531       <span class="keywordflow">case</span> <a class="code" href="group__ybosdefineh.html#ga07cd0ef2852310d130deaf0d4ef7bfd4">A1_BKTYPE</a>:
<a name="l02532"></a>02532          pevt = pnextb;
<a name="l02533"></a>02533          <span class="keywordflow">break</span>;
<a name="l02534"></a>02534       <span class="keywordflow">default</span>:
<a name="l02535"></a>02535          printf(<span class="stringliteral">&quot;ybos_swap_event-E- Unknown bank type %li\n&quot;</span>, bank_type);
<a name="l02536"></a>02536          <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#ga68c248e6c53a92f6c04a56c7f837b21a">YB_SWAP_ERROR</a>);
<a name="l02537"></a>02537          <span class="keywordflow">break</span>;
<a name="l02538"></a>02538       }
<a name="l02539"></a>02539    }
<a name="l02540"></a>02540    <span class="keywordflow">return</span> (<a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>);
<a name="l02541"></a>02541 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad7ee163ec65728660ef6138e810cc4cf"></a><!-- doxytag: member="ybos.c::ybos_get_tid_size" ref="gad7ee163ec65728660ef6138e810cc4cf" args="(INT tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybos_get_tid_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01047">1047</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8c_source.html#l00279">yb_tid_size</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01048"></a>01048 {
<a name="l01049"></a>01049    <span class="keywordflow">if</span> (tid &lt; 8)
<a name="l01050"></a>01050       <span class="keywordflow">return</span> <a class="code" href="group__ybosincludecode.html#gaa0bfcea519dadf8684cd715dfc8dfd44">yb_tid_size</a>[tid];
<a name="l01051"></a>01051    <span class="keywordflow">return</span> 0;
<a name="l01052"></a>01052 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga85358224cad220bf19c74ef84e9cad5f"></a><!-- doxytag: member="ybos.c::ybos_log_close" ref="ga85358224cad220bf19c74ef84e9cad5f" args="(LOG_CHN *log_chn, INT run_number)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybos_log_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structLOG__CHN.html">LOG_CHN</a> *&nbsp;</td>
          <td class="paramname"> <em>log_chn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>run_number</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01471">1471</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="msystem_8h_source.html#l00629">LOG_CHN::format_info</a>, <a class="el" href="msystem_8h_source.html#l00617">LOG_CHN::handle</a>, <a class="el" href="ybos_8h_source.html#l00362">YBOS_INFO::ptop</a>, <a class="el" href="midas_8h_source.html#l01033">SS_SUCCESS</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, <a class="el" href="msystem_8h_source.html#l00619">LOG_CHN::type</a>, <a class="el" href="ybos_8c_source.html#l01359">ybos_buffer_flush()</a>, and <a class="el" href="ybos_8c_source.html#l01418">ybos_logfile_close()</a>.</p>

<p>Referenced by <a class="el" href="fal_8c_source.html#l01396">log_close()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01473"></a>01473        : <a class="code" href="group__ybosbankc.html#ga85358224cad220bf19c74ef84e9cad5f">ybos_log_close</a>
<a name="l01474"></a>01474 Purpose: Close a YBOS logger <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>, Should be used only <a class="code" href="patch__mevb_8cpp.html#a944cf20aa75177818af16fe394e984be">by</a> mlogger.
<a name="l01475"></a>01475 Input:
<a name="l01476"></a>01476 <a class="code" href="structLOG__CHN.html">LOG_CHN</a> * log_chn      Concern log <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>
<a name="l01477"></a>01477 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>   <a class="code" href="crate6__CAEN__TDC_2mfe__mucap_8c.html#a16695ea2bfd19f294afe066d6007ab36">run_number</a>       <a class="code" href="odbhist_8c.html#a369e3b30815f09142abc86f462a501ff">run</a> number
<a name="l01478"></a>01478 Output:
<a name="l01479"></a>01479 none
<a name="l01480"></a>01480 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l01481"></a>01481 error, success
<a name="l01482"></a>01482 \********************************************************************/
<a name="l01483"></a>01483 {
<a name="l01484"></a>01484    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l01485"></a>01485    <a class="code" href="structYBOS__INFO.html">YBOS_INFO</a> *ybos;
<a name="l01486"></a>01486 
<a name="l01487"></a>01487    ybos = (<a class="code" href="structYBOS__INFO.html">YBOS_INFO</a> *) log_chn-&gt;<a class="code" href="structLOG__CHN.html#aabb8de21dd2b166aaf2d7e9446768a4e">format_info</a>;
<a name="l01488"></a>01488 
<a name="l01489"></a>01489    <span class="comment">/* Write EOF mark and close the device */</span>
<a name="l01490"></a>01490    <span class="comment">/* flush buffer before closing */</span>
<a name="l01491"></a>01491    status = <a class="code" href="group__ybosincludecode.html#ga58774d2e93313353dc88a5caf24568fc">ybos_buffer_flush</a>(log_chn, <a class="code" href="crate6__CAEN__TDC_2mfe__mucap_8c.html#a16695ea2bfd19f294afe066d6007ab36">run_number</a>);
<a name="l01492"></a>01492 
<a name="l01493"></a>01493    <span class="keywordflow">if</span> (status != <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>)
<a name="l01494"></a>01494       <span class="keywordflow">return</span> status;
<a name="l01495"></a>01495 
<a name="l01496"></a>01496    status = <a class="code" href="group__ybosincludecode.html#gaf34c295375bf5a6528b0dc05beb62c4a">ybos_logfile_close</a>(log_chn-&gt;<a class="code" href="structLOG__CHN.html#abd99304e1de6ca4edf76ac8a9e4134a9">type</a>, log_chn-&gt;<a class="code" href="structLOG__CHN.html#a26bc5155f900ea807685871cb360202d">handle</a>);
<a name="l01497"></a>01497 
<a name="l01498"></a>01498    free(ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a>);
<a name="l01499"></a>01499    free(ybos);
<a name="l01500"></a>01500 
<a name="l01501"></a>01501    <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l01502"></a>01502 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga177a8b241935710bd285f775e882cfc5"></a><!-- doxytag: member="ybos.c::ybos_log_open" ref="ga177a8b241935710bd285f775e882cfc5" args="(LOG_CHN *log_chn, INT run_number)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybos_log_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structLOG__CHN.html">LOG_CHN</a> *&nbsp;</td>
          <td class="paramname"> <em>log_chn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>run_number</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01066">1066</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="midas_8h_source.html#l01229">EVENTID_BOR</a>, <a class="el" href="msystem_8h_source.html#l00629">LOG_CHN::format_info</a>, <a class="el" href="msystem_8h_source.html#l00617">LOG_CHN::handle</a>, <a class="el" href="msystem_8h_source.html#l00597">CHN_SETTINGS::odb_dump</a>, <a class="el" href="msystem_8h_source.html#l00618">LOG_CHN::path</a>, <a class="el" href="ybos_8h_source.html#l00365">YBOS_INFO::pbot</a>, <a class="el" href="ybos_8h_source.html#l00363">YBOS_INFO::pbuf</a>, <a class="el" href="ybos_8h_source.html#l00366">YBOS_INFO::pend</a>, <a class="el" href="ybos_8h_source.html#l00362">YBOS_INFO::ptop</a>, <a class="el" href="ybos_8h_source.html#l00364">YBOS_INFO::pwrt</a>, <a class="el" href="ybos_8h_source.html#l00368">YBOS_INFO::recn</a>, <a class="el" href="ybos_8h_source.html#l00367">YBOS_INFO::reco</a>, <a class="el" href="msystem_8h_source.html#l00627">LOG_CHN::settings</a>, <a class="el" href="midas_8h_source.html#l01035">SS_NO_MEMORY</a>, <a class="el" href="midas_8h_source.html#l01033">SS_SUCCESS</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, <a class="el" href="msystem_8h_source.html#l00619">LOG_CHN::type</a>, <a class="el" href="ybos_8h_source.html#l00137">YBOS_BUFFER_SIZE</a>, <a class="el" href="ybos_8h_source.html#l00136">YBOS_HEADER_LENGTH</a>, <a class="el" href="ybos_8c_source.html#l01505">ybos_log_dump()</a>, <a class="el" href="ybos_8c_source.html#l01126">ybos_logfile_open()</a>, and <a class="el" href="ybos_8h_source.html#l00134">YBOS_PHYREC_SIZE</a>.</p>

<p>Referenced by <a class="el" href="fal_8c_source.html#l01372">log_open()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01068"></a>01068        : <a class="code" href="group__ybosbankc.html#ga177a8b241935710bd285f775e882cfc5">ybos_log_open</a>, Should be used only <a class="code" href="patch__mevb_8cpp.html#a944cf20aa75177818af16fe394e984be">by</a> mlogger.
<a name="l01069"></a>01069 Purpose: Open a logger <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> YBOS <a class="code" href="ybos_8c.html#a7ab994c987ffba39688c74f10907429c">fmt</a>
<a name="l01070"></a>01070 Input:
<a name="l01071"></a>01071 <a class="code" href="structLOG__CHN.html">LOG_CHN</a> * log_chn      Concern log <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>
<a name="l01072"></a>01072 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>   <a class="code" href="crate6__CAEN__TDC_2mfe__mucap_8c.html#a16695ea2bfd19f294afe066d6007ab36">run_number</a>       <a class="code" href="odbhist_8c.html#a369e3b30815f09142abc86f462a501ff">run</a> number
<a name="l01073"></a>01073 Output:
<a name="l01074"></a>01074 none
<a name="l01075"></a>01075 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l01076"></a>01076 error, success
<a name="l01077"></a>01077 \********************************************************************/
<a name="l01078"></a>01078 {
<a name="l01079"></a>01079    <a class="code" href="structYBOS__INFO.html">YBOS_INFO</a> *ybos;
<a name="l01080"></a>01080    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;
<a name="l01081"></a>01081 
<a name="l01082"></a>01082    <span class="comment">/* allocate YBOS buffer info */</span>
<a name="l01083"></a>01083    log_chn-&gt;<a class="code" href="structLOG__CHN.html#aabb8de21dd2b166aaf2d7e9446768a4e">format_info</a> = (<span class="keywordtype">void</span> **) malloc(<span class="keyword">sizeof</span>(<a class="code" href="structYBOS__INFO.html">YBOS_INFO</a>));
<a name="l01084"></a>01084 
<a name="l01085"></a>01085    ybos = (<a class="code" href="structYBOS__INFO.html">YBOS_INFO</a> *) log_chn-&gt;<a class="code" href="structLOG__CHN.html#aabb8de21dd2b166aaf2d7e9446768a4e">format_info</a>;
<a name="l01086"></a>01086 
<a name="l01087"></a>01087    <span class="comment">/* reset memory */</span>
<a name="l01088"></a>01088    memset(ybos, 0, <span class="keyword">sizeof</span>(<a class="code" href="structYBOS__INFO.html">YBOS_INFO</a>));
<a name="l01089"></a>01089 
<a name="l01090"></a>01090    <span class="keywordflow">if</span> (ybos == NULL) {
<a name="l01091"></a>01091       log_chn-&gt;<a class="code" href="structLOG__CHN.html#a26bc5155f900ea807685871cb360202d">handle</a> = 0;
<a name="l01092"></a>01092       <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01093"></a>01093    }
<a name="l01094"></a>01094 
<a name="l01095"></a>01095    <span class="comment">/* allocate full ring buffer for that channel */</span>
<a name="l01096"></a>01096    <span class="keywordflow">if</span> ((ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) malloc(<a class="code" href="group__ybosdefineh.html#gabe3ee604063d37d43d5262e9053fb1df">YBOS_BUFFER_SIZE</a>)) == NULL) {
<a name="l01097"></a>01097       log_chn-&gt;<a class="code" href="structLOG__CHN.html#a26bc5155f900ea807685871cb360202d">handle</a> = 0;
<a name="l01098"></a>01098       <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01099"></a>01099    }
<a name="l01100"></a>01100 
<a name="l01101"></a>01101    memset((<span class="keywordtype">char</span> *) ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a>, 0, <a class="code" href="group__ybosdefineh.html#gabe3ee604063d37d43d5262e9053fb1df">YBOS_BUFFER_SIZE</a>);
<a name="l01102"></a>01102    <span class="comment">/* Setup YBOS pointers */</span>
<a name="l01103"></a>01103    ybos-&gt;<a class="code" href="structYBOS__INFO.html#af10f654e3b197f267438365643e1918c">reco</a> = <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>;
<a name="l01104"></a>01104    ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a> + <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>;
<a name="l01105"></a>01105    ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a>;
<a name="l01106"></a>01106    ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a> + <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a>;
<a name="l01107"></a>01107    ybos-&gt;<a class="code" href="structYBOS__INFO.html#a4c1d121c9be19f06e5aae7d20a891d6e">pend</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a> + <a class="code" href="group__ybosdefineh.html#gabe3ee604063d37d43d5262e9053fb1df">YBOS_BUFFER_SIZE</a>;
<a name="l01108"></a>01108    ybos-&gt;<a class="code" href="structYBOS__INFO.html#a72dc077290b7deb9807b51682817ec87">recn</a> = 0;
<a name="l01109"></a>01109    <span class="comment">/* open logging device */</span>
<a name="l01110"></a>01110    status = <a class="code" href="group__ybosincludecode.html#ga03ef9499822f8c46fba62da52caca16c">ybos_logfile_open</a>(log_chn-&gt;<a class="code" href="structLOG__CHN.html#abd99304e1de6ca4edf76ac8a9e4134a9">type</a>, log_chn-&gt;<a class="code" href="structLOG__CHN.html#ae426f54fc6146abc9fcd49a9767e9c84">path</a>, &amp;log_chn-&gt;<a class="code" href="structLOG__CHN.html#a26bc5155f900ea807685871cb360202d">handle</a>);
<a name="l01111"></a>01111    <span class="keywordflow">if</span> (status != <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>) {
<a name="l01112"></a>01112       free(ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a>);
<a name="l01113"></a>01113       free(ybos);
<a name="l01114"></a>01114       log_chn-&gt;<a class="code" href="structLOG__CHN.html#a26bc5155f900ea807685871cb360202d">handle</a> = 0;
<a name="l01115"></a>01115       <span class="keywordflow">return</span> status;
<a name="l01116"></a>01116    }
<a name="l01117"></a>01117 
<a name="l01118"></a>01118    <span class="comment">/* write ODB dump */</span>
<a name="l01119"></a>01119    <span class="keywordflow">if</span> (log_chn-&gt;<a class="code" href="structLOG__CHN.html#af8e431056b3e56f6f5ce7bba5c879501">settings</a>.<a class="code" href="structCHN__SETTINGS.html#a1d09a907562f29589880b5382a1c7e7a">odb_dump</a>)
<a name="l01120"></a>01120       <a class="code" href="group__ybosincludecode.html#ga4d698181c1d2d2d1ea217f53c7858ab9">ybos_log_dump</a>(log_chn, <a class="code" href="group__mbufferh.html#gaea58a47233f988dd2f9a0320d99734dc">EVENTID_BOR</a>, <a class="code" href="crate6__CAEN__TDC_2mfe__mucap_8c.html#a16695ea2bfd19f294afe066d6007ab36">run_number</a>);
<a name="l01121"></a>01121 
<a name="l01122"></a>01122    <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l01123"></a>01123 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga637115c193856dcf75ee958e690239e8"></a><!-- doxytag: member="ybos.c::ybos_write" ref="ga637115c193856dcf75ee958e690239e8" args="(LOG_CHN *log_chn, EVENT_HEADER *pevent, INT evt_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> ybos_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structLOG__CHN.html">LOG_CHN</a> *&nbsp;</td>
          <td class="paramname"> <em>log_chn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structEVENT__HEADER.html">EVENT_HEADER</a> *&nbsp;</td>
          <td class="paramname"> <em>pevent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>evt_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ybos_8c_source.html#l01185">1185</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>References <a class="el" href="ybos_8h_source.html#l00346">A1_BKTYPE</a>, <a class="el" href="msystem_8h_source.html#l00611">CHN_STATISTICS::bytes_written</a>, <a class="el" href="msystem_8h_source.html#l00612">CHN_STATISTICS::bytes_written_total</a>, <a class="el" href="lrs1821_8h_source.html#l00218">cm_msg</a>, <a class="el" href="midas_8h_source.html#l01195">EVENT_HEADER::data_size</a>, <a class="el" href="midas_8h_source.html#l01191">EVENT_HEADER::event_id</a>, <a class="el" href="midas_8h_source.html#l01229">EVENTID_BOR</a>, <a class="el" href="midas_8h_source.html#l01231">EVENTID_MESSAGE</a>, <a class="el" href="msystem_8h_source.html#l00610">CHN_STATISTICS::events_written</a>, <a class="el" href="p30_8h_source.html#l00042">FALSE</a>, <a class="el" href="msystem_8h_source.html#l00620">LOG_CHN::format</a>, <a class="el" href="msystem_8h_source.html#l00629">LOG_CHN::format_info</a>, <a class="el" href="msystem_8h_source.html#l00617">LOG_CHN::handle</a>, <a class="el" href="ybos_8h_source.html#l00375">YBOS_PHYSREC_HEADER::header_length</a>, <a class="el" href="generate-MODULES_8h_source.html#l00003">if</a>, <a class="el" href="msystem_8h_source.html#l00598">CHN_SETTINGS::log_messages</a>, <a class="el" href="msystem_8h_source.html#l00634">LOG_TYPE_TAPE</a>, <a class="el" href="midas_8h_source.html#l00677">MAX_EVENT_SIZE</a>, <a class="el" href="lrs1821_8h_source.html#l00220">MERROR</a>, <a class="el" href="lrs1821_8h_source.html#l00221">MINFO</a>, <a class="el" href="midas_8h_source.html#l00927">MT_USER</a>, <a class="el" href="ybos_8h_source.html#l00377">YBOS_PHYSREC_HEADER::offset</a>, <a class="el" href="ybos_8c_source.html#l00343">pbktop</a>, <a class="el" href="ybos_8h_source.html#l00365">YBOS_INFO::pbot</a>, <a class="el" href="ybos_8h_source.html#l00363">YBOS_INFO::pbuf</a>, <a class="el" href="ybos_8h_source.html#l00362">YBOS_INFO::ptop</a>, <a class="el" href="ybos_8h_source.html#l00364">YBOS_INFO::pwrt</a>, <a class="el" href="ybos_8h_source.html#l00376">YBOS_PHYSREC_HEADER::rec_num</a>, <a class="el" href="ybos_8h_source.html#l00374">YBOS_PHYSREC_HEADER::rec_size</a>, <a class="el" href="ybos_8h_source.html#l00368">YBOS_INFO::recn</a>, <a class="el" href="ybos_8h_source.html#l00367">YBOS_INFO::reco</a>, <a class="el" href="msystem_8h_source.html#l00627">LOG_CHN::settings</a>, <a class="el" href="midas_8h_source.html#l01035">SS_NO_MEMORY</a>, <a class="el" href="midas_8h_source.html#l01033">SS_SUCCESS</a>, <a class="el" href="msystem_8h_source.html#l00628">LOG_CHN::statistics</a>, <a class="el" href="patch__mevb_8cpp_source.html#l00079">status</a>, <a class="el" href="midas_8h_source.html#l01192">EVENT_HEADER::trigger_mask</a>, <a class="el" href="p30_8h_source.html#l00043">TRUE</a>, <a class="el" href="msystem_8h_source.html#l00619">LOG_CHN::type</a>, <a class="el" href="ybos_8c_source.html#l02191">yb_any_log_write()</a>, <a class="el" href="ybos_8h_source.html#l00151">YB_SUCCESS</a>, <a class="el" href="ybos_8c_source.html#l00549">ybk_close()</a>, <a class="el" href="ybos_8c_source.html#l00438">ybk_create()</a>, <a class="el" href="ybos_8c_source.html#l00408">ybk_init()</a>, <a class="el" href="ybos_8c_source.html#l00579">ybk_size()</a>, <a class="el" href="ybos_8c_source.html#l02457">ybos_event_swap()</a>, <a class="el" href="ybos_8h_source.html#l00136">YBOS_HEADER_LENGTH</a>, and <a class="el" href="ybos_8h_source.html#l00134">YBOS_PHYREC_SIZE</a>.</p>

<p>Referenced by <a class="el" href="fal_8c_source.html#l01419">log_write()</a>, and <a class="el" href="ybos_8c_source.html#l01505">ybos_log_dump()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01187"></a>01187        : <a class="code" href="group__ybosbankc.html#ga637115c193856dcf75ee958e690239e8">ybos_write</a>
<a name="l01188"></a>01188 Purpose: Write a YBOS <span class="keyword">event</span> to the logger <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>. Should be used only <a class="code" href="patch__mevb_8cpp.html#a944cf20aa75177818af16fe394e984be">by</a> 
<a name="l01189"></a>01189 mlogger.
<a name="l01190"></a>01190 Takes care of the EVENT_BOR <a class="code" href="examples_2macro_2midas__macro_8h.html#aa3d7d535cf450b91b9cb6d9cee2edbb9">and</a> EVENT_MESSAGE which are 
<a name="l01191"></a>01191 shiped as YBOS <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> <a class="code" href="group__ybosdefineh.html#ga07cd0ef2852310d130deaf0d4ef7bfd4">A1_BKTYPE</a> <a class="code" href="examples_2macro_2midas__macro_8h.html#ac484905625152119cf660ff11e288e08">bank</a>. named respectively
<a name="l01192"></a>01192 MODB, MMSG
<a name="l01193"></a>01193 Input:
<a name="l01194"></a>01194 <a class="code" href="structLOG__CHN.html">LOG_CHN</a> *      log_chn      Concern log <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>
<a name="l01195"></a>01195 <a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a> * pevent       <span class="keyword">event</span> pointer to Midas header
<a name="l01196"></a>01196 <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a>            evt_size     <span class="keyword">event</span> <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bytes seen <a class="code" href="patch__mevb_8cpp.html#a944cf20aa75177818af16fe394e984be">by</a> Midas
<a name="l01197"></a>01197 Output:
<a name="l01198"></a>01198 none
<a name="l01199"></a>01199 Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l01200"></a>01200 error, success
<a name="l01201"></a>01201 \********************************************************************/
<a name="l01202"></a>01202 {
<a name="l01203"></a>01203    <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="structpending__event.html">evid</a>, evmsk;
<a name="l01204"></a>01204    <a class="code" href="group__midasincludecode.html#ga239c7f0d40651c3e419c5b9651507d14">BOOL</a> large_evt;
<a name="l01205"></a>01205    <a class="code" href="lrs1190_8c.html#a6877c9d7ac317ac3415ee1a1f92302a0">INT</a> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>, left_over_length, datasize;
<a name="l01206"></a>01206    <a class="code" href="structYBOS__INFO.html">YBOS_INFO</a> *ybos;
<a name="l01207"></a>01207    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pbkdat;
<a name="l01208"></a>01208    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> bfsize;
<a name="l01209"></a>01209    <a class="code" href="structYBOS__PHYSREC__HEADER.html">YBOS_PHYSREC_HEADER</a> *yb_phrh;
<a name="l01210"></a>01210 
<a name="l01211"></a>01211    <span class="comment">/* Check the Event ID for :</span>
<a name="l01212"></a>01212 <span class="comment">      Midas BOR/EOR which include the ODB dump : 0x8000/0x8001</span>
<a name="l01213"></a>01213 <span class="comment">      Msg dump from MUSER flag from odb mainly : 0x8002</span>
<a name="l01214"></a>01214 <span class="comment">    */</span>
<a name="l01215"></a>01215 
<a name="l01216"></a>01216    evid = pevent-&gt;<a class="code" href="structEVENT__HEADER.html#a107bbb0fbe21582dc0f0e78f60b997b3">event_id</a>;
<a name="l01217"></a>01217    evmsk = pevent-&gt;<a class="code" href="group__midasincludecode.html#ga9b4b94f41521f5c188655b7bb0f1ec1b">trigger_mask</a>;
<a name="l01218"></a>01218 
<a name="l01219"></a>01219    <span class="comment">/* shortcut to ybos struct */</span>
<a name="l01220"></a>01220    ybos = (<a class="code" href="structYBOS__INFO.html">YBOS_INFO</a> *) log_chn-&gt;<a class="code" href="structLOG__CHN.html#aabb8de21dd2b166aaf2d7e9446768a4e">format_info</a>;
<a name="l01221"></a>01221 
<a name="l01222"></a>01222    <span class="comment">/* detect if event is message oriented (ASCII) */</span>
<a name="l01223"></a>01223    <a class="code" href="generate-MODULES_8h.html#aaac43492f2954cc70dd9a286b2b3ab02">if</a> ((evid &gt;= <a class="code" href="group__mbufferh.html#gaea58a47233f988dd2f9a0320d99734dc">EVENTID_BOR</a>) &amp;&amp; (evid &lt;= <a class="code" href="group__mbufferh.html#ga7fefe6ad78331e8cfb3d2b31dbfdd2d0">EVENTID_MESSAGE</a>)) {    <span class="comment">/* skip ASCII dump if not MUSER */</span>
<a name="l01224"></a>01224       <span class="keywordflow">if</span> (!(evmsk &amp; <a class="code" href="group__mdefineh.html#ga8e13ab6bdea106f548ecb162bdcd41a9">MT_USER</a>))
<a name="l01225"></a>01225          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227       <span class="comment">/* skip if MUSER  but not Log message enabled */</span>
<a name="l01228"></a>01228       <span class="keywordflow">if</span> (MT_USER &amp;&amp; !log_chn-&gt;<a class="code" href="structLOG__CHN.html#af8e431056b3e56f6f5ce7bba5c879501">settings</a>.<a class="code" href="structCHN__SETTINGS.html#aa8548111d879396c231ed8dea63558ef">log_messages</a>)
<a name="l01229"></a>01229          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l01230"></a>01230 
<a name="l01231"></a>01231       <span class="comment">/* ASCII event has to be recasted YBOS */</span>
<a name="l01232"></a>01232       <span class="comment">/* Inform if event too long (&gt;32Kbytes) */</span>
<a name="l01233"></a>01233       <span class="keywordflow">if</span> (pevent-&gt;<a class="code" href="group__midasincludecode.html#ga194220c29419e01ef4cab6d3dd8daedb">data_size</a> &gt; <a class="code" href="group__midasincludecode.html#ga05d5acc365e3342523d84bc4540adc09">MAX_EVENT_SIZE</a>)
<a name="l01234"></a>01234          <a class="code" href="lrs1821_8h.html#aa6f8a5999f0a072ce20ab87bae8a9eb5">cm_msg</a>(<a class="code" href="lrs1821_8h.html#a6e27d8876a43afce3ee4dd16527cbb9e">MINFO</a>, <span class="stringliteral">&quot;ybos_write&quot;</span>, <span class="stringliteral">&quot;MMSG or MODB event too large&quot;</span>);
<a name="l01235"></a>01235 
<a name="l01236"></a>01236       <span class="comment">/* align to DWORD boundary in bytes */</span>
<a name="l01237"></a>01237       datasize = 4 * (pevent-&gt;<a class="code" href="group__midasincludecode.html#ga194220c29419e01ef4cab6d3dd8daedb">data_size</a> + 3) / 4;
<a name="l01238"></a>01238 
<a name="l01239"></a>01239       <span class="comment">/* overall buffer size in bytes */</span>
<a name="l01240"></a>01240       bfsize = datasize + <span class="keyword">sizeof</span>(<a class="code" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a>) + 4; <span class="comment">/* +LRL */</span>
<a name="l01241"></a>01241 
<a name="l01242"></a>01242       <span class="comment">/* allocate space */</span>
<a name="l01243"></a>01243       <a class="code" href="group__ybosincludecode.html#ga56be0abbe6d804526d7df5a054c89697">pbktop</a> = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) malloc(bfsize);
<a name="l01244"></a>01244       <span class="keywordflow">if</span> (pbktop == NULL) {
<a name="l01245"></a>01245          <a class="code" href="lrs1821_8h.html#aa6f8a5999f0a072ce20ab87bae8a9eb5">cm_msg</a>(<a class="code" href="lrs1821_8h.html#ac2d967025ca0f84f611d568f4ede934a">MERROR</a>, <span class="stringliteral">&quot;ybos_write&quot;</span>, <span class="stringliteral">&quot;malloc error for ASCII dump&quot;</span>);
<a name="l01246"></a>01246          <span class="keywordflow">return</span> <a class="code" href="group__err24.html#ga39da075b89b283b1ba6ee8163cd75e6d">SS_NO_MEMORY</a>;
<a name="l01247"></a>01247       }
<a name="l01248"></a>01248       memset(pbktop, 0, bfsize);
<a name="l01249"></a>01249       <a class="code" href="group__ybosincludecode.html#ga6ed49f74e7fd8e2105433bc664891d08">ybk_init</a>(pbktop);
<a name="l01250"></a>01250 
<a name="l01251"></a>01251       <span class="comment">/* open bank depending on event type */</span>
<a name="l01252"></a>01252       <span class="keywordflow">if</span> (evid == <a class="code" href="group__mbufferh.html#ga7fefe6ad78331e8cfb3d2b31dbfdd2d0">EVENTID_MESSAGE</a>)
<a name="l01253"></a>01253          <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>(pbktop, <span class="stringliteral">&quot;MMSG&quot;</span>, <a class="code" href="group__ybosdefineh.html#ga07cd0ef2852310d130deaf0d4ef7bfd4">A1_BKTYPE</a>, &amp;pbkdat);
<a name="l01254"></a>01254       <span class="keywordflow">else</span>
<a name="l01255"></a>01255          <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>(pbktop, <span class="stringliteral">&quot;MODB&quot;</span>, <a class="code" href="group__ybosdefineh.html#ga07cd0ef2852310d130deaf0d4ef7bfd4">A1_BKTYPE</a>, &amp;pbkdat);
<a name="l01256"></a>01256 
<a name="l01257"></a>01257       memcpy((<span class="keywordtype">char</span> *) pbkdat, (<span class="keywordtype">char</span> *) (pevent + 1), pevent-&gt;<a class="code" href="group__midasincludecode.html#ga194220c29419e01ef4cab6d3dd8daedb">data_size</a>);
<a name="l01258"></a>01258       pbkdat = (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (((<span class="keywordtype">char</span> *) pbkdat) + datasize);
<a name="l01259"></a>01259       <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>(pbktop, pbkdat);
<a name="l01260"></a>01260 
<a name="l01261"></a>01261       <span class="comment">/* event size in bytes for Midas */</span>
<a name="l01262"></a>01262       evt_size = <a class="code" href="group__ybosincludecode.html#gab97b7d0d9ea164c791c36374826d19fe">ybk_size</a>(pbktop);
<a name="l01263"></a>01263 
<a name="l01264"></a>01264       <span class="comment">/* swap bytes if necessary based on the ybos.bank_type */</span>
<a name="l01265"></a>01265       <a class="code" href="group__ybosbankc.html#gaad36b8401b23c0422ba0e82216966950">ybos_event_swap</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pbktop);
<a name="l01266"></a>01266 
<a name="l01267"></a>01267       <span class="comment">/* Event with MIDAS header striped out */</span>
<a name="l01268"></a>01268       memcpy((<span class="keywordtype">char</span> *) ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a>, (<span class="keywordtype">char</span> *) pbktop, evt_size);
<a name="l01269"></a>01269 
<a name="l01270"></a>01270       <span class="keywordflow">if</span> (pbktop != NULL)
<a name="l01271"></a>01271          free(pbktop);
<a name="l01272"></a>01272       pbktop = NULL;
<a name="l01273"></a>01273       status = <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>;
<a name="l01274"></a>01274    } <span class="keywordflow">else</span> {                     <span class="comment">/* normal event */</span>
<a name="l01275"></a>01275       <span class="comment">/* Strip the event from the Midas EVENT_HEADER */</span>
<a name="l01276"></a>01276       <span class="comment">/* event size include the Midas EVENT_HEADER... don&apos;t need for ybos</span>
<a name="l01277"></a>01277 <span class="comment">         I do this in order to keep the log_write from mlogger intact */</span>
<a name="l01278"></a>01278 
<a name="l01279"></a>01279       <span class="comment">/* correct the event length. Now it is a pure YBOS event */</span>
<a name="l01280"></a>01280       pevent++;
<a name="l01281"></a>01281 
<a name="l01282"></a>01282       <span class="comment">/* correct the event length in bytes */</span>
<a name="l01283"></a>01283       evt_size -= <span class="keyword">sizeof</span>(<a class="code" href="structEVENT__HEADER.html">EVENT_HEADER</a>);
<a name="l01284"></a>01284 
<a name="l01285"></a>01285       <span class="comment">/* swap bytes if necessary based on the ybos.bank_type */</span>
<a name="l01286"></a>01286       <a class="code" href="group__ybosbankc.html#gaad36b8401b23c0422ba0e82216966950">ybos_event_swap</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent);
<a name="l01287"></a>01287 
<a name="l01288"></a>01288       <span class="comment">/* I have ALWAYS enough space for the event &lt;MAX_EVENT_SIZE */</span>
<a name="l01289"></a>01289       memcpy((<span class="keywordtype">char</span> *) ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a>, (<span class="keywordtype">char</span> *) pevent, evt_size);
<a name="l01290"></a>01290 
<a name="l01291"></a>01291       status = <a class="code" href="group__yboserrorh.html#gaf3834f9669e9c611d56b2b8b71f29869">YB_SUCCESS</a>;
<a name="l01292"></a>01292    }
<a name="l01293"></a>01293 
<a name="l01294"></a>01294    <span class="comment">/* move write pointer to next free location (DWORD) */</span>
<a name="l01295"></a>01295    ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a> += (4 * (evt_size + 3) / 4) &gt;&gt; 2;
<a name="l01296"></a>01296 
<a name="l01297"></a>01297    <span class="comment">/* default not a large event */</span>
<a name="l01298"></a>01298    large_evt = <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01299"></a>01299 
<a name="l01300"></a>01300    <span class="comment">/* Loop over buffer until this condition </span>
<a name="l01301"></a>01301 <span class="comment">      The event offset in the phys rec is ==0 if event larger than PHYREC_SIZE */</span>
<a name="l01302"></a>01302    <span class="keywordflow">while</span> (ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a> &gt;= ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a>) {
<a name="l01303"></a>01303       ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a> -= <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>;
<a name="l01304"></a>01304       yb_phrh = (<a class="code" href="structYBOS__PHYSREC__HEADER.html">YBOS_PHYSREC_HEADER</a> *) (ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a>);
<a name="l01305"></a>01305       yb_phrh-&gt;<a class="code" href="structYBOS__PHYSREC__HEADER.html#af06407a66793d2ce69241468a94700fa">rec_size</a> = <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> - 1; <span class="comment">/* exclusive */</span>
<a name="l01306"></a>01306       yb_phrh-&gt;<a class="code" href="structYBOS__PHYSREC__HEADER.html#a89cd02d8173f6925216ee4d67d19ec4d">header_length</a> = <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>;
<a name="l01307"></a>01307       yb_phrh-&gt;<a class="code" href="structYBOS__PHYSREC__HEADER.html#a990da2a863ac5e50ef58a5223f2c4eef">rec_num</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a72dc077290b7deb9807b51682817ec87">recn</a>;
<a name="l01308"></a>01308       yb_phrh-&gt;<a class="code" href="structYBOS__PHYSREC__HEADER.html#a82b515b03d738b8022621dea3803c805">offset</a> = large_evt ? 0 : ybos-&gt;<a class="code" href="structYBOS__INFO.html#af10f654e3b197f267438365643e1918c">reco</a>;
<a name="l01309"></a>01309 
<a name="l01310"></a>01310       <span class="comment">/* Write physical record to device */</span>
<a name="l01311"></a>01311       status =
<a name="l01312"></a>01312           <a class="code" href="group__ybosincludecode.html#gabca198523c3b536693ca97fd2bdfd4ba">yb_any_log_write</a>(log_chn-&gt;<a class="code" href="structLOG__CHN.html#a26bc5155f900ea807685871cb360202d">handle</a>, log_chn-&gt;<a class="code" href="structLOG__CHN.html#afc899b8a67c7c46d6e8172741a4824ab">format</a>, log_chn-&gt;<a class="code" href="structLOG__CHN.html#abd99304e1de6ca4edf76ac8a9e4134a9">type</a>,
<a name="l01313"></a>01313                            ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a>, <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> &lt;&lt; 2);
<a name="l01314"></a>01314       <span class="keywordflow">if</span> (status != <a class="code" href="group__err24.html#ga0abac6c68d7a79ce83d1a25b2c800321">SS_SUCCESS</a>)
<a name="l01315"></a>01315          <span class="keywordflow">return</span> status;
<a name="l01316"></a>01316 
<a name="l01317"></a>01317       <span class="comment">/* update statistics */</span>
<a name="l01318"></a>01318 <span class="preprocessor">#ifdef YBOS_VERSION_3_3</span>
<a name="l01319"></a>01319 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (log_chn-&gt;<a class="code" href="structLOG__CHN.html#abd99304e1de6ca4edf76ac8a9e4134a9">type</a> == <a class="code" href="group__msystemincludecode.html#ga3e8788a1f492a4f3ba005184662fe0c7">LOG_TYPE_TAPE</a>) {     <span class="comment">/* statistics in bytes */</span>
<a name="l01320"></a>01320          log_chn-&gt;<a class="code" href="structLOG__CHN.html#a74c443424ba397c8fc17bcd8244bd9e7">statistics</a>.<a class="code" href="structCHN__STATISTICS.html#a7f50d67aca6cc223a2049e75b67e62f0">bytes_written</a> += <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> &lt;&lt; 2;
<a name="l01321"></a>01321          log_chn-&gt;<a class="code" href="structLOG__CHN.html#a74c443424ba397c8fc17bcd8244bd9e7">statistics</a>.<a class="code" href="structCHN__STATISTICS.html#a4781a92eaf28c8718c72f092d2cbfcd1">bytes_written_total</a> += <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> &lt;&lt; 2;
<a name="l01322"></a>01322       } <span class="keywordflow">else</span> {                  <span class="comment">/* statistics in bytes + the extra magta */</span>
<a name="l01323"></a>01323          log_chn-&gt;<a class="code" href="structLOG__CHN.html#a74c443424ba397c8fc17bcd8244bd9e7">statistics</a>.<a class="code" href="structCHN__STATISTICS.html#a7f50d67aca6cc223a2049e75b67e62f0">bytes_written</a> += <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> &lt;&lt; 2 + 4;
<a name="l01324"></a>01324          log_chn-&gt;<a class="code" href="structLOG__CHN.html#a74c443424ba397c8fc17bcd8244bd9e7">statistics</a>.<a class="code" href="structCHN__STATISTICS.html#a4781a92eaf28c8718c72f092d2cbfcd1">bytes_written_total</a> += <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> &lt;&lt; 2 + 4;
<a name="l01325"></a>01325       }
<a name="l01326"></a>01326 <span class="preprocessor">#else</span>
<a name="l01327"></a>01327 <span class="preprocessor"></span>      log_chn-&gt;<a class="code" href="structLOG__CHN.html#a74c443424ba397c8fc17bcd8244bd9e7">statistics</a>.<a class="code" href="structCHN__STATISTICS.html#a7f50d67aca6cc223a2049e75b67e62f0">bytes_written</a> += <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> &lt;&lt; 2;
<a name="l01328"></a>01328       log_chn-&gt;<a class="code" href="structLOG__CHN.html#a74c443424ba397c8fc17bcd8244bd9e7">statistics</a>.<a class="code" href="structCHN__STATISTICS.html#a4781a92eaf28c8718c72f092d2cbfcd1">bytes_written_total</a> += <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> &lt;&lt; 2;
<a name="l01329"></a>01329 <span class="preprocessor">#endif</span>
<a name="l01330"></a>01330 <span class="preprocessor"></span>
<a name="l01331"></a>01331       <span class="comment">/* Update statistics */</span>
<a name="l01332"></a>01332       ybos-&gt;<a class="code" href="structYBOS__INFO.html#a72dc077290b7deb9807b51682817ec87">recn</a>++;
<a name="l01333"></a>01333 
<a name="l01334"></a>01334       <span class="comment">/* check if event is larger than YBOS_PHYREC_SIZE */</span>
<a name="l01335"></a>01335       <span class="keywordflow">if</span> (ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a> &gt;= ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a> + (<a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> - <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>)) {
<a name="l01336"></a>01336          large_evt = <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01337"></a>01337          <span class="comment">/* shift record window by one YBOS_PHYSREC - header */</span>
<a name="l01338"></a>01338          ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a>;
<a name="l01339"></a>01339          ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a> += (<a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a> - <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>);
<a name="l01340"></a>01340       } <span class="keywordflow">else</span> {
<a name="l01341"></a>01341          large_evt = <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01342"></a>01342          <span class="comment">/* adjust pointers */</span>
<a name="l01343"></a>01343          ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a> + <a class="code" href="group__ybosdefineh.html#gaa29790e82068cc80509a5349953a78cb">YBOS_HEADER_LENGTH</a>;
<a name="l01344"></a>01344          left_over_length = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a> - ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a>;
<a name="l01345"></a>01345          memcpy(ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a>, ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a>, left_over_length &lt;&lt; 2); <span class="comment">/* in bytes */</span>
<a name="l01346"></a>01346          ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a> + left_over_length;
<a name="l01347"></a>01347          ybos-&gt;<a class="code" href="structYBOS__INFO.html#a7f910a62149a51d71496d508a84f71b5">pbot</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a993d49857964783ecd50509f1edc28dd">ptop</a> + <a class="code" href="group__ybosdefineh.html#ga61edbbbc0eb8c5ba41f4cfb23daa69a2">YBOS_PHYREC_SIZE</a>;
<a name="l01348"></a>01348          ybos-&gt;<a class="code" href="structYBOS__INFO.html#af10f654e3b197f267438365643e1918c">reco</a> = ybos-&gt;<a class="code" href="structYBOS__INFO.html#a5f70cfe3ca2d29f7eba4acc95e875de3">pbuf</a> - ybos-&gt;<a class="code" href="structYBOS__INFO.html#a288c8e47ba9e61b9aa406bc8a2a441df">pwrt</a> + 4;      <span class="comment">/* YBOS header */</span>
<a name="l01349"></a>01349       }
<a name="l01350"></a>01350    }
<a name="l01351"></a>01351 
<a name="l01352"></a>01352    <span class="comment">/* update statistics */</span>
<a name="l01353"></a>01353    log_chn-&gt;<a class="code" href="structLOG__CHN.html#a74c443424ba397c8fc17bcd8244bd9e7">statistics</a>.<a class="code" href="structCHN__STATISTICS.html#aa314b315e3b535e7442803526c7c515d">events_written</a>++;
<a name="l01354"></a>01354 
<a name="l01355"></a>01355    <span class="keywordflow">return</span> status;
<a name="l01356"></a>01356 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga794c19e4e44adb339eba7f0e2a8ae48f"></a><!-- doxytag: member="ybos.c::__pbkh" ref="ga794c19e4e44adb339eba7f0e2a8ae48f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structYBOS__BANK__HEADER.html">YBOS_BANK_HEADER</a>* <a class="el" href="group__ybosbankc.html#ga794c19e4e44adb339eba7f0e2a8ae48f">__pbkh</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox </p>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00417">417</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaa93d8489827c1ca383389caa8d05fff5"></a><!-- doxytag: member="ybos.c::__pchaosi4" ref="gaa93d8489827c1ca383389caa8d05fff5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a798af1e30bc65f319c1a246cecf59e39">DWORD</a>* <a class="el" href="group__ybosbankc.html#gaa93d8489827c1ca383389caa8d05fff5">__pchaosi4</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dox </p>

<p>Definition at line <a class="el" href="ybos_8c_source.html#l00455">455</a> of file <a class="el" href="ybos_8c_source.html">ybos.c</a>.</p>

<p>Referenced by <a class="el" href="ybos_8c_source.html#l00491">ybk_close_chaos()</a>, and <a class="el" href="ybos_8c_source.html#l00458">ybk_create_chaos()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ:Rootana by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: midas/mscb/embedded/mscbutil.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>midas/mscb/embedded/mscbutil.c File Reference</h1><code>#include &quot;<a class="el" href="mscb_8h_source.html">mscb.h</a>&quot;</code><br/>
<code>#include &lt;intrins.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>

<p><a href="mscbutil_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a92317b8fbef36cb36421636cd1287520">crc8</a> (unsigned char *<a class="el" href="mlogger_8c.html#a368f7094dc38acca20612bbb392552f4">buffer</a>, int len) reentrant</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a06722ba2c1a909418c287f36da918b20">crc8_add</a> (unsigned char crc, unsigned int <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a179877b003d63996470f7b628a57eeac">rs232_output</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#aee20e81ba44db51d21a17d4640f5eae9">uart_init</a> (unsigned char port, unsigned char <a class="el" href="scs__210__tpg262_8c.html#a9bca8730b6d7cf7af1215971054adc00">baud</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#ac3da29ea117a42298b0958a53dd33aab">sysclock_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a2e16d999cb779a17d76f7996edc132a0">led_int</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#ac3728bbd985e83ef7d1b479afe2eaeb3">timer0_int</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#af87085aa8c2a51c2ef253721e4a192ca">led_mode</a> (unsigned char led, unsigned char <a class="el" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>) reentrant</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a431cf0a502f2a232e27f81080a890585">led_blink</a> (unsigned char led, unsigned char <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a>, int <a class="el" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a>) reentrant</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#aaae689725b9077d5e8a019f547e124b5">led_set</a> (unsigned char led, unsigned char <a class="el" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>) reentrant using 2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a6a9297d6553b1d1a19e999be7048ce8f">time</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a4ae5ad65c961268051560516eeff623f">watchdog_refresh</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#af29c4657f62375d42c6ee104b6bf4491">delay_ms</a> (unsigned int ms)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a> (unsigned int us)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a4f506741016eb2f2aa4820d0f1b07f0a">eeprom_read</a> (void *dst, unsigned char len, unsigned short *<a class="el" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#afb0820d8d59068da0634c982eaeb9f8a">eeprom_write</a> (void *src, unsigned char len, unsigned short *<a class="el" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a4958eaf323fa57ef8650477a2571898b">eeprom_erase</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a29eb7958d7590c990a4be07ccb7f9199">eeprom_flash</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a1cde349ab9feb3cfbd44e1555cb2304b">eeprom_retrieve</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a> (unsigned char <a class="el" href="hwtest_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, bit df)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a9468c1be5dc5602e17d2a5dd2a9fed8d">lcd_setup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a35c08b1fa742e650f4873939707b893b">lcd_clear</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#adaf2d117fc7b2fb397acd51a28baba7b">lcd_goto</a> (char x, char y)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a44a1bacb4c1429ca87f81505dea70451">putchar</a> (char <a class="el" href="show__pulses_8cxx.html#a63b96401309cc0c66ce6c88f1783d7c2">c</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a07820d8874b23ab3da0752f15ac626f2">lcd_puts</a> (char *<a class="el" href="scs__310__ql355p_8c.html#a11ea5cf64ae27c357c5bd2f2eaaddf7f">str</a>)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structSYS__INFO.html">SYS_INFO</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#abf06fefcfd184511a38e909e5a4111c0">sys_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMSCB__INFO__VAR.html">MSCB_INFO_VAR</a> code&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char idata&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a7aa4e7d188b6702a7e5e361e85731948">_n_sub_addr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char idata&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a892b7eef2de4caa27c45e96ffa30f4de">_var_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char idata&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#aab1037491179d86a89ac750947c0b1f1">_flkey</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char code&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#abf3e3406ecd519b9c4e49514602ed160">crc8_data</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#adae727c6b6e3f32ab30a4283876934ee">_systime</a></td></tr>
<tr><td class="memItemLeft" >struct {</td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;unsigned char&nbsp;&nbsp;&nbsp;<a class="el" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;unsigned char&nbsp;&nbsp;&nbsp;<a class="el" href="mscbutil_8c.html#a915eedaaa4284d1bac812f5c73940f2c">timer</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;unsigned char&nbsp;&nbsp;&nbsp;<a class="el" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a></td></tr>
<tr><td class="memItemLeft" >&nbsp;&nbsp;&nbsp;unsigned char&nbsp;&nbsp;&nbsp;<a class="el" href="mscbutil_8c.html#aa94ff7ddd304b9beb2f209b6174e180e">n</a></td></tr>
<tr><td class="memItemLeft" valign="top">}&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a> [N_LED]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#ad5b44f63b60e3b566a81dfdc699a4667">lcd_present</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a5799edeaf5ede6c962f8eda9922bfd00">LCD_RS</a> = LCD ^ 3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a9b8230ce63fa3e2ff3ae49fa4cda3315">LCD_R_W</a> = LCD ^ 2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = LCD ^ 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a6f7b8910ae79d80979e7fdc7c3447287">LCD_DB4</a> = LCD ^ 4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a774e99ef68469e849e9059e62309dbeb">LCD_DB5</a> = LCD ^ 5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#aca1000c839f92de6ac3cd5846e1a195c">LCD_DB6</a> = LCD ^ 6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a63d732b925d0134c93fc7e6ac58e9549">LCD_DB7</a> = LCD ^ 7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a4bbf31031a6c2ee149fbd20038d8a542">LCD_CLK</a> = LCD ^ 7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#ac30b2cf84feb88b655161a764b11dab3">LCD_P_W</a> = LCD ^ 6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sbit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mscbutil_8c.html#a7117615912fe1f6414d18e528a4fbb3d">LCD_SD</a> = LCD ^ 0</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a92317b8fbef36cb36421636cd1287520"></a><!-- doxytag: member="mscbutil.c::crc8" ref="a92317b8fbef36cb36421636cd1287520" args="(unsigned char *buffer, int len) reentrant" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char crc8 </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00187">187</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="fal_8c_source.html#l00201">buffer</a>, <a class="el" href="mscbutil_8c_source.html#l00152">crc8_data</a>, <a class="el" href="mdump_8c_source.html#l00115">i</a>, and <a class="el" href="mana_8cpp_source.html#l00677">index</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00190"></a>00190          : <a class="code" href="embedded_2mscb_8h.html#a92317b8fbef36cb36421636cd1287520">crc8</a>
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   Purpose: Calculate 8-bit cyclic redundancy checksum <span class="keywordflow">for</span> a full
<a name="l00193"></a>00193            <a class="code" href="fal_8c.html#a368f7094dc38acca20612bbb392552f4">buffer</a>
<a name="l00194"></a>00194 
<a name="l00195"></a>00195   Input:
<a name="l00196"></a>00196     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a>     <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="fal_8c.html#a368f7094dc38acca20612bbb392552f4">buffer</a>
<a name="l00197"></a>00197     <span class="keywordtype">int</span> len                 <a class="code" href="lrs1821_8c.html#a7c3d85e54927f04c38e110e849168bb9">data</a> <a class="code" href="FDCR_8h.html#a9f59b34b1f25fe00023291b678246bcc">length</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bytes
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l00201"></a>00201     unsighend <span class="keywordtype">char</span>          CRC-8 code
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 \********************************************************************/
<a name="l00204"></a>00204 {
<a name="l00205"></a>00205    <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00206"></a>00206    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> crc8_code, <a class="code" href="mana_8cpp.html#a312c2cad451d6bb0536fb9ec2863be59">index</a>;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208    crc8_code = 0;
<a name="l00209"></a>00209    <span class="keywordflow">for</span> (i = 0; i &lt; len; i++) {
<a name="l00210"></a>00210       index = <a class="code" href="fal_8c.html#a368f7094dc38acca20612bbb392552f4">buffer</a>[i] ^ crc8_code;
<a name="l00211"></a>00211       crc8_code = <a class="code" href="mscbutil_8c.html#abf3e3406ecd519b9c4e49514602ed160">crc8_data</a>[index];
<a name="l00212"></a>00212    }
<a name="l00213"></a>00213 
<a name="l00214"></a>00214    <span class="keywordflow">return</span> crc8_code;
<a name="l00215"></a>00215 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a06722ba2c1a909418c287f36da918b20"></a><!-- doxytag: member="mscbutil.c::crc8_add" ref="a06722ba2c1a909418c287f36da918b20" args="(unsigned char crc, unsigned int c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char crc8_add </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>crc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>c</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00217">217</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l00152">crc8_data</a>, and <a class="el" href="mana_8cpp_source.html#l00677">index</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l00652">send_byte()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00220"></a>00220          : <a class="code" href="embedded_2mscb_8h.html#a06722ba2c1a909418c287f36da918b20">crc8_add</a>
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   Purpose: Single calculation <span class="keywordflow">for</span> 8-bit cyclic redundancy checksum
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   Input:
<a name="l00225"></a>00225     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> crc       <a class="code" href="minife_8c.html#a57ca0dfd97b960c97dbcc3bb44df5fa0">running</a> crc
<a name="l00226"></a>00226     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="patch__mevb_8cpp.html#adce6024c3a1b29c5fcede88815f9b152">c</a>         <span class="keyword">new</span> character
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00229"></a>00229   Function <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>:
<a name="l00230"></a>00230     unsighend <span class="keywordtype">char</span>          CRC-8 code
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 \********************************************************************/
<a name="l00233"></a>00233 {
<a name="l00234"></a>00234    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mana_8cpp.html#a312c2cad451d6bb0536fb9ec2863be59">index</a>;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236    index = <a class="code" href="patch__mevb_8cpp.html#adce6024c3a1b29c5fcede88815f9b152">c</a> ^ crc;
<a name="l00237"></a>00237    <span class="keywordflow">return</span> <a class="code" href="mscbutil_8c.html#abf3e3406ecd519b9c4e49514602ed160">crc8_data</a>[index];
<a name="l00238"></a>00238 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af29c4657f62375d42c6ee104b6bf4491"></a><!-- doxytag: member="mscbutil.c::delay_ms" ref="af29c4657f62375d42c6ee104b6bf4491" args="(unsigned int ms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delay_ms </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>ms</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00902">902</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l00937">delay_us()</a>, and <a class="el" href="mscbmain_8c_source.html#l01361">yield()</a>.</p>

<p>Referenced by <a class="el" href="hvr__200_8c_source.html#l00498">adc_read()</a>, <a class="el" href="lcd__menu_8c_source.html#l00276">lcd_menu()</a>, <a class="el" href="mscbutil_8c_source.html#l01364">lcd_setup()</a>, <a class="el" href="subm__250_8c_source.html#l00246">rs485_receive()</a>, <a class="el" href="scs__210__tc600_8c_source.html#l00101">user_init()</a>, and <a class="el" href="scs__210_8c_source.html#l00191">user_loop()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00903"></a>00903 {
<a name="l00904"></a>00904    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00905"></a>00905 
<a name="l00906"></a>00906    <span class="keywordflow">for</span> (i = 0; i &lt; ms; i++) {
<a name="l00907"></a>00907       <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1000);
<a name="l00908"></a>00908       <a class="code" href="embedded_2mscb_8h.html#a7cb51f5c2b5cad3766f19eb69c92793b">yield</a>();
<a name="l00909"></a>00909    }
<a name="l00910"></a>00910 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a84f652539f41e435c3b08e023d3ba0dd"></a><!-- doxytag: member="mscbutil.c::delay_us" ref="a84f652539f41e435c3b08e023d3ba0dd" args="(unsigned int us)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delay_us </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>us</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00937">937</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l00937">delay_us()</a>, and <a class="el" href="odbhist_8c_source.html#l00058">j</a>.</p>

<p>Referenced by <a class="el" href="scs__800_8c_source.html#l00189">cap_read()</a>, <a class="el" href="mscbutil_8c_source.html#l00902">delay_ms()</a>, <a class="el" href="mscbutil_8c_source.html#l00937">delay_us()</a>, <a class="el" href="mscbutil_8c_source.html#l01319">lcd_out()</a>, <a class="el" href="mscbutil_8c_source.html#l01364">lcd_setup()</a>, <a class="el" href="hvr__200_8c_source.html#l00446">read_adc24()</a>, <a class="el" href="hvr__200_8c_source.html#l00396">read_adc8()</a>, <a class="el" href="subm__250_8c_source.html#l00246">rs485_receive()</a>, <a class="el" href="scs__310_8c_source.html#l00221">send_byte()</a>, <a class="el" href="scs__600_8c_source.html#l00217">ser_clock()</a>, <a class="el" href="subm__250_8c_source.html#l00101">setup()</a>, <a class="el" href="scs__1000_8c_source.html#l00324">sr_read()</a>, <a class="el" href="hvr__200_8c_source.html#l00346">write_adc()</a>, <a class="el" href="hvr__200_8c_source.html#l00289">write_dac()</a>, and <a class="el" href="scs__520_8c_source.html#l00227">write_gain()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00938"></a>00938 {
<a name="l00939"></a>00939 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l00940"></a>00940 <span class="preprocessor"></span>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="odbhist_8c.html#a2df6784bd380a288cf2c3e7e2c43a6b8">j</a>;
<a name="l00941"></a>00941 <span class="preprocessor">#endif</span>
<a name="l00942"></a>00942 <span class="preprocessor"></span>
<a name="l00943"></a>00943    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00944"></a>00944    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> remaining_us;
<a name="l00945"></a>00945 
<a name="l00946"></a>00946    <span class="keywordflow">if</span> (us &lt;= 250) {
<a name="l00947"></a>00947       <span class="keywordflow">for</span> (i = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) us; i &gt; 0; i--) {
<a name="l00948"></a>00948 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l00949"></a>00949 <span class="preprocessor"></span>         <span class="keywordflow">for</span> (j=22 ; j&gt;0 ; j--)
<a name="l00950"></a>00950             _nop_();
<a name="l00951"></a>00951 <span class="preprocessor">#else</span>
<a name="l00952"></a>00952 <span class="preprocessor"></span>         _nop_();
<a name="l00953"></a>00953 <span class="preprocessor">#endif</span>
<a name="l00954"></a>00954 <span class="preprocessor"></span>      }
<a name="l00955"></a>00955    } <span class="keywordflow">else</span> {
<a name="l00956"></a>00956       remaining_us = us;
<a name="l00957"></a>00957       <span class="keywordflow">while</span> (remaining_us &gt; 250) {
<a name="l00958"></a>00958          <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(250);
<a name="l00959"></a>00959          remaining_us -= 250;
<a name="l00960"></a>00960       }
<a name="l00961"></a>00961       <span class="keywordflow">if</span> (us &gt; 0)
<a name="l00962"></a>00962          <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(remaining_us);
<a name="l00963"></a>00963    }
<a name="l00964"></a>00964 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4958eaf323fa57ef8650477a2571898b"></a><!-- doxytag: member="mscbutil.c::eeprom_erase" ref="a4958eaf323fa57ef8650477a2571898b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_erase </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01154">1154</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbmain_8c_source.html#l00231">_flkey</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00474">DISABLE_INTERRUPTS</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00300">EEPROM_OFFSET</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00473">ENABLE_INTERRUPTS</a>, <a class="el" href="c8051F310_8h_source.html#l00068">FLKEY</a>, <a class="el" href="c8051F000_8h_source.html#l00054">FLSCL</a>, <a class="el" href="c8051F120_8h_source.html#l00327">LEGACY_PAGE</a>, <a class="el" href="sis3803_8c_source.html#l00925">p</a>, <a class="el" href="c8051F000_8h_source.html#l00026">PSCTL</a>, and <a class="el" href="c8051F120_8h_source.html#l00019">SFRPAGE</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l01212">eeprom_flash()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01157"></a>01157          : <a class="code" href="mscbutil_8c.html#a4958eaf323fa57ef8650477a2571898b">eeprom_erase</a>
<a name="l01158"></a>01158 
<a name="l01159"></a>01159   Purpose: Erase <a class="code" href="HITS_8h.html#a4f188184523d527be63ee6079f182f17">parameter</a> EEPROM page
<a name="l01160"></a>01160 
<a name="l01161"></a>01161 \********************************************************************/
<a name="l01162"></a>01162 {
<a name="l01163"></a>01163 <span class="preprocessor">#ifdef CPU_ADUC812</span>
<a name="l01164"></a>01164 <span class="preprocessor"></span>   ECON = 0x06;
<a name="l01165"></a>01165 <span class="preprocessor">#endif</span>
<a name="l01166"></a>01166 <span class="preprocessor"></span>
<a name="l01167"></a>01167 <span class="preprocessor">#ifdef CPU_CYGNAL</span>
<a name="l01168"></a>01168 <span class="preprocessor"></span>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> xdata *<a class="code" href="sis3803_8c.html#afcb0609a0beab248bb3994a3368bd9ff">p</a>;
<a name="l01169"></a>01169 
<a name="l01170"></a>01170    <span class="keywordflow">if</span> (<a class="code" href="mscbmain_8c.html#aab1037491179d86a89ac750947c0b1f1">_flkey</a> != 0xF1)
<a name="l01171"></a>01171       <span class="keywordflow">return</span>;
<a name="l01172"></a>01172 
<a name="l01173"></a>01173    <a class="code" href="embedded_2mscb_8h.html#a3b37db44db50722cac572660028ba2b5">DISABLE_INTERRUPTS</a>;
<a name="l01174"></a>01174 
<a name="l01175"></a>01175 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l01176"></a>01176 <span class="preprocessor"></span>   <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a8118771b603f497803d635449ba11021">LEGACY_PAGE</a>;
<a name="l01177"></a>01177 <span class="preprocessor">#endif</span>
<a name="l01178"></a>01178 <span class="preprocessor"></span>
<a name="l01179"></a>01179 <span class="preprocessor">#if defined(CPU_C8051F000)</span>
<a name="l01180"></a>01180 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> = (<a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> &amp; 0xF0) | 0x08;       <span class="comment">// set timer for 11.052 MHz clock</span>
<a name="l01181"></a>01181 <span class="preprocessor">#elif defined(CPU_C8051F020) || defined(CPU_C8051F120)</span>
<a name="l01182"></a>01182 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> = <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> | 1;                   <span class="comment">// enable flash writes</span>
<a name="l01183"></a>01183 <span class="preprocessor">#endif</span>
<a name="l01184"></a>01184 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#ab962028f8eb562297e7b38d7806ba21c">PSCTL</a> = 0x03;                        <span class="comment">// allow write and erase</span>
<a name="l01185"></a>01185 
<a name="l01186"></a>01186 <span class="preprocessor">#if defined(CPU_C8051F310) || defined(CPU_C8051F320)</span>
<a name="l01187"></a>01187 <span class="preprocessor"></span>   p = <a class="code" href="embedded_2mscb_8h.html#afe7387252655a7ee07b26cb83c5ed0be">EEPROM_OFFSET</a>;                   <span class="comment">// erase first page</span>
<a name="l01188"></a>01188    <a class="code" href="c8051F310_8h.html#ae49102c0fd5a01b7edd91e8679a66cf1">FLKEY</a> = 0xA5;                        <span class="comment">// write flash key code</span>
<a name="l01189"></a>01189    <a class="code" href="c8051F310_8h.html#ae49102c0fd5a01b7edd91e8679a66cf1">FLKEY</a> = <a class="code" href="mscbmain_8c.html#aab1037491179d86a89ac750947c0b1f1">_flkey</a>;
<a name="l01190"></a>01190    *p = 0;
<a name="l01191"></a>01191 
<a name="l01192"></a>01192 <span class="comment">// Following code crashed the uC !</span>
<a name="l01193"></a>01193 
<a name="l01194"></a>01194 <span class="comment">//   p = EEPROM_OFFSET+512;               // erase second page</span>
<a name="l01195"></a>01195 <span class="comment">//   FLKEY = 0xA5;                        // write flash key code</span>
<a name="l01196"></a>01196 <span class="comment">//   FLKEY = 0xF1;</span>
<a name="l01197"></a>01197 <span class="comment">//   *p = 0;</span>
<a name="l01198"></a>01198 <span class="preprocessor">#else</span>
<a name="l01199"></a>01199 <span class="preprocessor"></span>   p = <a class="code" href="embedded_2mscb_8h.html#afe7387252655a7ee07b26cb83c5ed0be">EEPROM_OFFSET</a>;                   <span class="comment">// erase page</span>
<a name="l01200"></a>01200    *p = 0;
<a name="l01201"></a>01201 <span class="preprocessor">#endif</span>
<a name="l01202"></a>01202 <span class="preprocessor"></span>
<a name="l01203"></a>01203    <a class="code" href="c8051F000_8h.html#ab962028f8eb562297e7b38d7806ba21c">PSCTL</a> = 0x00;                        <span class="comment">// don&apos;t allow write</span>
<a name="l01204"></a>01204    <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> = <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> &amp; 0xF0;
<a name="l01205"></a>01205 <span class="preprocessor">#endif</span>
<a name="l01206"></a>01206 <span class="preprocessor"></span>
<a name="l01207"></a>01207   <a class="code" href="embedded_2mscb_8h.html#a62b74068f303c78492667e69fe203914">ENABLE_INTERRUPTS</a>;
<a name="l01208"></a>01208 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a29eb7958d7590c990a4be07ccb7f9199"></a><!-- doxytag: member="mscbutil.c::eeprom_flash" ref="a29eb7958d7590c990a4be07ccb7f9199" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_flash </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01212">1212</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbmain_8c_source.html#l00231">_flkey</a>, <a class="el" href="hvr__200_8c_source.html#l00052">_n_sub_addr</a>, <a class="el" href="mscbmain_8c_source.html#l00233">_var_size</a>, <a class="el" href="mscbutil_8c_source.html#l01154">eeprom_erase()</a>, <a class="el" href="mscbutil_8c_source.html#l01048">eeprom_write()</a>, <a class="el" href="mscbutil_8c_source.html#l00788">led_blink()</a>, <a class="el" href="mgd_8c_source.html#l01505">offset</a>, <a class="el" href="hvr__200_8c_source.html#l00149">variables</a>, <a class="el" href="mainWindow_8cpp_source.html#l00032">width</a>, and <a class="el" href="embedded_2mscb_8h_source.html#l00387">MSCB_INFO_VAR::width</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l01361">yield()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01215"></a>01215          : <a class="code" href="embedded_2mscb_8h.html#a29eb7958d7590c990a4be07ccb7f9199">eeprom_flash</a>
<a name="l01216"></a>01216 
<a name="l01217"></a>01217   Purpose: Write system <a class="code" href="examples_2macro_2midas__macro_8h.html#aa3d7d535cf450b91b9cb6d9cee2edbb9">and</a> user parameters to EEPROM
<a name="l01218"></a>01218 
<a name="l01219"></a>01219 \********************************************************************/
<a name="l01220"></a>01220 {
<a name="l01221"></a>01221    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, adr;
<a name="l01222"></a>01222    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> magic, <a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01223"></a>01223 
<a name="l01224"></a>01224    <a class="code" href="embedded_2mscb_8h.html#a431cf0a502f2a232e27f81080a890585">led_blink</a>(3, 3, 50);
<a name="l01225"></a>01225 
<a name="l01226"></a>01226    <a class="code" href="mscbutil_8c.html#a4958eaf323fa57ef8650477a2571898b">eeprom_erase</a>();
<a name="l01227"></a>01227 
<a name="l01228"></a>01228    offset = 0;
<a name="l01229"></a>01229 
<a name="l01230"></a>01230    <span class="comment">// system info (node address etc...)</span>
<a name="l01231"></a>01231    <a class="code" href="mscbutil_8c.html#afb0820d8d59068da0634c982eaeb9f8a">eeprom_write</a>(&amp;<a class="code" href="hvr__200_8c.html#abf06fefcfd184511a38e909e5a4111c0">sys_info</a>, <span class="keyword">sizeof</span>(<a class="code" href="structSYS__INFO.html">SYS_INFO</a>), &amp;offset);
<a name="l01232"></a>01232 
<a name="l01233"></a>01233    <span class="comment">// user channel variables</span>
<a name="l01234"></a>01234    <span class="keywordflow">for</span> (adr = 0 ; adr &lt; <a class="code" href="hvr__200_8c.html#a7aa4e7d188b6702a7e5e361e85731948">_n_sub_addr</a> ; adr++)
<a name="l01235"></a>01235       <span class="keywordflow">for</span> (i = 0; <a class="code" href="hvr__200_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a>[i].<a class="code" href="structMSCB__INFO__VAR.html#ac30ec9a942c12fb886c2bd550d053c28">width</a>; i++)
<a name="l01236"></a>01236          <a class="code" href="mscbutil_8c.html#afb0820d8d59068da0634c982eaeb9f8a">eeprom_write</a>((<span class="keywordtype">char</span> *)<a class="code" href="hvr__200_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a>[i].ud + <a class="code" href="mscbmain_8c.html#a892b7eef2de4caa27c45e96ffa30f4de">_var_size</a>*adr, 
<a name="l01237"></a>01237                       <a class="code" href="hvr__200_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a>[i].<a class="code" href="mainWindow_8cpp.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, &amp;offset);
<a name="l01238"></a>01238 
<a name="l01239"></a>01239    <span class="comment">// magic</span>
<a name="l01240"></a>01240    magic = 0x1234;
<a name="l01241"></a>01241    <a class="code" href="mscbutil_8c.html#afb0820d8d59068da0634c982eaeb9f8a">eeprom_write</a>(&amp;magic, 2, &amp;offset);
<a name="l01242"></a>01242 
<a name="l01243"></a>01243    <a class="code" href="mscbmain_8c.html#aab1037491179d86a89ac750947c0b1f1">_flkey</a> = 0;
<a name="l01244"></a>01244 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f506741016eb2f2aa4820d0f1b07f0a"></a><!-- doxytag: member="mscbutil.c::eeprom_read" ref="a4f506741016eb2f2aa4820d0f1b07f0a" args="(void *dst, unsigned char len, unsigned short *offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_read </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short *&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00972">972</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="system_8c_source.html#l00966">d</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00300">EEPROM_OFFSET</a>, <a class="el" href="scs__400_8c_source.html#l00153">ofs</a>, <a class="el" href="sis3803_8c_source.html#l00925">p</a>, and <a class="el" href="mscbutil_8c_source.html#l00862">watchdog_refresh()</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l01248">eeprom_retrieve()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00975"></a>00975          : <a class="code" href="mscbutil_8c.html#a4f506741016eb2f2aa4820d0f1b07f0a">eeprom_read</a>
<a name="l00976"></a>00976 
<a name="l00977"></a>00977   Purpose: Read from <span class="keyword">internal</span> EEPROM
<a name="l00978"></a>00978 
<a name="l00979"></a>00979   Input:
<a name="l00980"></a>00980     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> idata *dst    Destination <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> IDATA memory
<a name="l00981"></a>00981     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> len           Number of bytes to copy
<a name="l00982"></a>00982     unsigend <span class="keywordtype">char</span> *<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>       Offset <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> EEPROM <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bytes, gets
<a name="l00983"></a>00983                                 adjusted after <a class="code" href="examples_2macro_2midas__macro_8h.html#a5b55880ce7d302ae13576e90584a63bb">read</a>
<a name="l00984"></a>00984 
<a name="l00985"></a>00985 \********************************************************************/
<a name="l00986"></a>00986 {
<a name="l00987"></a>00987 <span class="preprocessor">#ifdef CPU_ADUC812</span>
<a name="l00988"></a>00988 <span class="preprocessor"></span>
<a name="l00989"></a>00989    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, <a class="code" href="scs__400_8c.html#a04fe355a80e85e9f62a55b0a7cec6100">ofs</a>;
<a name="l00990"></a>00990    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="system_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>;
<a name="l00991"></a>00991 
<a name="l00992"></a>00992    <a class="code" href="embedded_2mscb_8h.html#a4ae5ad65c961268051560516eeff623f">watchdog_refresh</a>();
<a name="l00993"></a>00993 
<a name="l00994"></a>00994    d = dst;
<a name="l00995"></a>00995 
<a name="l00996"></a>00996    ofs = *<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00997"></a>00997    EADRL = ofs / 4;
<a name="l00998"></a>00998    ECON = 0x01;                 <span class="comment">// read page</span>
<a name="l00999"></a>00999 
<a name="l01000"></a>01000    <span class="keywordflow">for</span> (i = 0; i &lt; len; i++, d++) {
<a name="l01001"></a>01001       <span class="keywordflow">switch</span> (ofs % 4) {
<a name="l01002"></a>01002       <span class="keywordflow">case</span> 0:
<a name="l01003"></a>01003          *d = EDATA1;
<a name="l01004"></a>01004          <span class="keywordflow">break</span>;
<a name="l01005"></a>01005       <span class="keywordflow">case</span> 1:
<a name="l01006"></a>01006          *d = EDATA2;
<a name="l01007"></a>01007          <span class="keywordflow">break</span>;
<a name="l01008"></a>01008       <span class="keywordflow">case</span> 2:
<a name="l01009"></a>01009          *d = EDATA3;
<a name="l01010"></a>01010          <span class="keywordflow">break</span>;
<a name="l01011"></a>01011       <span class="keywordflow">case</span> 3:
<a name="l01012"></a>01012          *d = EDATA4;
<a name="l01013"></a>01013          <span class="keywordflow">break</span>;
<a name="l01014"></a>01014       }
<a name="l01015"></a>01015 
<a name="l01016"></a>01016       ofs++;
<a name="l01017"></a>01017 
<a name="l01018"></a>01018       <span class="keywordflow">if</span> (ofs % 4 == 0) {
<a name="l01019"></a>01019          EADRL = ofs / 4;
<a name="l01020"></a>01020          ECON = 0x01;           <span class="comment">// read next page</span>
<a name="l01021"></a>01021       }
<a name="l01022"></a>01022    }
<a name="l01023"></a>01023 
<a name="l01024"></a>01024    *<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = ofs;
<a name="l01025"></a>01025 
<a name="l01026"></a>01026 <span class="preprocessor">#endif</span>
<a name="l01027"></a>01027 <span class="preprocessor"></span>
<a name="l01028"></a>01028 <span class="preprocessor">#ifdef CPU_CYGNAL</span>
<a name="l01029"></a>01029 <span class="preprocessor"></span>
<a name="l01030"></a>01030    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i;
<a name="l01031"></a>01031    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> code *<a class="code" href="sis3803_8c.html#afcb0609a0beab248bb3994a3368bd9ff">p</a>;
<a name="l01032"></a>01032    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *d;
<a name="l01033"></a>01033 
<a name="l01034"></a>01034    <a class="code" href="embedded_2mscb_8h.html#a4ae5ad65c961268051560516eeff623f">watchdog_refresh</a>();
<a name="l01035"></a>01035 
<a name="l01036"></a>01036    p = <a class="code" href="embedded_2mscb_8h.html#afe7387252655a7ee07b26cb83c5ed0be">EEPROM_OFFSET</a> + *<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;        <span class="comment">// read from 128-byte EEPROM page</span>
<a name="l01037"></a>01037    d = dst;
<a name="l01038"></a>01038 
<a name="l01039"></a>01039    <span class="keywordflow">for</span> (i = 0; i &lt; len; i++)
<a name="l01040"></a>01040       d[i] = p[i];
<a name="l01041"></a>01041 
<a name="l01042"></a>01042    *offset += len;
<a name="l01043"></a>01043 <span class="preprocessor">#endif</span>
<a name="l01044"></a>01044 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1cde349ab9feb3cfbd44e1555cb2304b"></a><!-- doxytag: member="mscbutil.c::eeprom_retrieve" ref="a1cde349ab9feb3cfbd44e1555cb2304b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char eeprom_retrieve </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01248">1248</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="hvr__200_8c_source.html#l00052">_n_sub_addr</a>, <a class="el" href="mscbmain_8c_source.html#l00233">_var_size</a>, <a class="el" href="mscbutil_8c_source.html#l00972">eeprom_read()</a>, <a class="el" href="mgd_8c_source.html#l01505">offset</a>, <a class="el" href="hvr__200_8c_source.html#l00149">variables</a>, <a class="el" href="mainWindow_8cpp_source.html#l00032">width</a>, and <a class="el" href="embedded_2mscb_8h_source.html#l00387">MSCB_INFO_VAR::width</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01251"></a>01251          : <a class="code" href="embedded_2mscb_8h.html#a1cde349ab9feb3cfbd44e1555cb2304b">eeprom_retrieve</a>
<a name="l01252"></a>01252 
<a name="l01253"></a>01253   Purpose: Retrieve system <a class="code" href="examples_2macro_2midas__macro_8h.html#aa3d7d535cf450b91b9cb6d9cee2edbb9">and</a> user parameters from EEPROM
<a name="l01254"></a>01254 
<a name="l01255"></a>01255 \********************************************************************/
<a name="l01256"></a>01256 {
<a name="l01257"></a>01257    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, adr;
<a name="l01258"></a>01258    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> magic, <a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01259"></a>01259 
<a name="l01260"></a>01260    offset = 0;
<a name="l01261"></a>01261 
<a name="l01262"></a>01262    <span class="comment">// system info (node address etc...)</span>
<a name="l01263"></a>01263    <a class="code" href="mscbutil_8c.html#a4f506741016eb2f2aa4820d0f1b07f0a">eeprom_read</a>(&amp;<a class="code" href="hvr__200_8c.html#abf06fefcfd184511a38e909e5a4111c0">sys_info</a>, <span class="keyword">sizeof</span>(<a class="code" href="structSYS__INFO.html">SYS_INFO</a>), &amp;offset);
<a name="l01264"></a>01264 
<a name="l01265"></a>01265    <span class="comment">// user channel variables</span>
<a name="l01266"></a>01266    <span class="keywordflow">for</span> (adr = 0 ; adr &lt; <a class="code" href="hvr__200_8c.html#a7aa4e7d188b6702a7e5e361e85731948">_n_sub_addr</a> ; adr++)
<a name="l01267"></a>01267       <span class="keywordflow">for</span> (i = 0; <a class="code" href="hvr__200_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a>[i].<a class="code" href="structMSCB__INFO__VAR.html#ac30ec9a942c12fb886c2bd550d053c28">width</a>; i++)
<a name="l01268"></a>01268          <a class="code" href="mscbutil_8c.html#a4f506741016eb2f2aa4820d0f1b07f0a">eeprom_read</a>((<span class="keywordtype">char</span> *)<a class="code" href="hvr__200_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a>[i].ud + <a class="code" href="mscbmain_8c.html#a892b7eef2de4caa27c45e96ffa30f4de">_var_size</a>*adr, 
<a name="l01269"></a>01269                      <a class="code" href="hvr__200_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a>[i].<a class="code" href="mainWindow_8cpp.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, &amp;offset);
<a name="l01270"></a>01270 
<a name="l01271"></a>01271    <span class="comment">// check for magic</span>
<a name="l01272"></a>01272    <a class="code" href="mscbutil_8c.html#a4f506741016eb2f2aa4820d0f1b07f0a">eeprom_read</a>(&amp;magic, 2, &amp;offset);
<a name="l01273"></a>01273 
<a name="l01274"></a>01274    <span class="keywordflow">return</span> (magic == 0x1234);
<a name="l01275"></a>01275 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afb0820d8d59068da0634c982eaeb9f8a"></a><!-- doxytag: member="mscbutil.c::eeprom_write" ref="afb0820d8d59068da0634c982eaeb9f8a" args="(void *src, unsigned char len, unsigned short *offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_write </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short *&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01048">1048</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbmain_8c_source.html#l00231">_flkey</a>, <a class="el" href="system_8c_source.html#l00966">d</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00474">DISABLE_INTERRUPTS</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00300">EEPROM_OFFSET</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00473">ENABLE_INTERRUPTS</a>, <a class="el" href="c8051F310_8h_source.html#l00068">FLKEY</a>, <a class="el" href="c8051F000_8h_source.html#l00054">FLSCL</a>, <a class="el" href="c8051F120_8h_source.html#l00327">LEGACY_PAGE</a>, <a class="el" href="scs__400_8c_source.html#l00153">ofs</a>, <a class="el" href="sis3803_8c_source.html#l00925">p</a>, <a class="el" href="c8051F000_8h_source.html#l00026">PSCTL</a>, <a class="el" href="c8051F120_8h_source.html#l00019">SFRPAGE</a>, and <a class="el" href="mscbutil_8c_source.html#l00862">watchdog_refresh()</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l01212">eeprom_flash()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01051"></a>01051          : <a class="code" href="mscbutil_8c.html#afb0820d8d59068da0634c982eaeb9f8a">eeprom_write</a>
<a name="l01052"></a>01052 
<a name="l01053"></a>01053   Purpose: Read from <span class="keyword">internal</span> EEPROM
<a name="l01054"></a>01054 
<a name="l01055"></a>01055   Input:
<a name="l01056"></a>01056     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> idata *src    Source <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> IDATA memory
<a name="l01057"></a>01057     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> len           Number of bytes to copy
<a name="l01058"></a>01058     unsigend <span class="keywordtype">char</span> <a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>        Offset <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> EEPROM <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> bytes, gets
<a name="l01059"></a>01059                                 adjusted after <a class="code" href="examples_2macro_2midas__macro_8h.html#a6fbb683090a733152e51639d58b90cd6">write</a>
<a name="l01060"></a>01060 
<a name="l01061"></a>01061 \********************************************************************/
<a name="l01062"></a>01062 {
<a name="l01063"></a>01063 <span class="preprocessor">#ifdef CPU_ADUC812</span>
<a name="l01064"></a>01064 <span class="preprocessor"></span>
<a name="l01065"></a>01065    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, <a class="code" href="scs__400_8c.html#a04fe355a80e85e9f62a55b0a7cec6100">ofs</a>;
<a name="l01066"></a>01066    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="system_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>;
<a name="l01067"></a>01067 
<a name="l01068"></a>01068    d = src;
<a name="l01069"></a>01069 
<a name="l01070"></a>01070    ofs = *<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01071"></a>01071    EADRL = ofs / 4;
<a name="l01072"></a>01072    ECON = 0x01;                 <span class="comment">// read page</span>
<a name="l01073"></a>01073 
<a name="l01074"></a>01074    <span class="keywordflow">for</span> (i = 0; i &lt; len; i++, d++) {
<a name="l01075"></a>01075       <span class="keywordflow">switch</span> (ofs % 4) {
<a name="l01076"></a>01076       <span class="keywordflow">case</span> 0:
<a name="l01077"></a>01077          EDATA1 = *d;
<a name="l01078"></a>01078          <span class="keywordflow">break</span>;
<a name="l01079"></a>01079       <span class="keywordflow">case</span> 1:
<a name="l01080"></a>01080          EDATA2 = *d;
<a name="l01081"></a>01081          <span class="keywordflow">break</span>;
<a name="l01082"></a>01082       <span class="keywordflow">case</span> 2:
<a name="l01083"></a>01083          EDATA3 = *d;
<a name="l01084"></a>01084          <span class="keywordflow">break</span>;
<a name="l01085"></a>01085       <span class="keywordflow">case</span> 3:
<a name="l01086"></a>01086          EDATA4 = *d;
<a name="l01087"></a>01087          ECON = 0x02;           <span class="comment">// write page</span>
<a name="l01088"></a>01088          <span class="keywordflow">break</span>;
<a name="l01089"></a>01089       }
<a name="l01090"></a>01090 
<a name="l01091"></a>01091       ofs++;
<a name="l01092"></a>01092 
<a name="l01093"></a>01093       <span class="keywordflow">if</span> (ofs % 4 == 0) {
<a name="l01094"></a>01094          EADRL = ofs / 4;
<a name="l01095"></a>01095          ECON = 0x01;           <span class="comment">// read next page</span>
<a name="l01096"></a>01096       }
<a name="l01097"></a>01097    }
<a name="l01098"></a>01098 
<a name="l01099"></a>01099    <span class="keywordflow">if</span> (ofs % 4 != 0)
<a name="l01100"></a>01100       ECON = 0x02;              <span class="comment">// write last page</span>
<a name="l01101"></a>01101 
<a name="l01102"></a>01102    *<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = ofs;
<a name="l01103"></a>01103 
<a name="l01104"></a>01104 <span class="preprocessor">#endif</span>
<a name="l01105"></a>01105 <span class="preprocessor"></span>
<a name="l01106"></a>01106 <span class="preprocessor">#ifdef CPU_CYGNAL</span>
<a name="l01107"></a>01107 <span class="preprocessor"></span>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> xdata *<a class="code" href="sis3803_8c.html#afcb0609a0beab248bb3994a3368bd9ff">p</a>;      <span class="comment">// xdata pointer causes MOVX command</span>
<a name="l01108"></a>01108    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i, b;
<a name="l01109"></a>01109    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *s;
<a name="l01110"></a>01110 
<a name="l01111"></a>01111    <span class="keywordflow">if</span> (<a class="code" href="mscbmain_8c.html#aab1037491179d86a89ac750947c0b1f1">_flkey</a> != 0xF1)
<a name="l01112"></a>01112       <span class="keywordflow">return</span>;
<a name="l01113"></a>01113 
<a name="l01114"></a>01114    <a class="code" href="embedded_2mscb_8h.html#a3b37db44db50722cac572660028ba2b5">DISABLE_INTERRUPTS</a>;
<a name="l01115"></a>01115 
<a name="l01116"></a>01116 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l01117"></a>01117 <span class="preprocessor"></span>   <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a8118771b603f497803d635449ba11021">LEGACY_PAGE</a>;
<a name="l01118"></a>01118 <span class="preprocessor">#endif</span>
<a name="l01119"></a>01119 <span class="preprocessor"></span>
<a name="l01120"></a>01120 <span class="preprocessor">#if defined(CPU_C8051F000)</span>
<a name="l01121"></a>01121 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> = (<a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> &amp; 0xF0) | 0x08;  <span class="comment">// set timer for 11.052 MHz clock</span>
<a name="l01122"></a>01122 <span class="preprocessor">#elif defined(CPU_C8051F020) || defined(CPU_C8051F120)</span>
<a name="l01123"></a>01123 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> = <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> | 1;           <span class="comment">// enable flash writes</span>
<a name="l01124"></a>01124 <span class="preprocessor">#endif</span>
<a name="l01125"></a>01125 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#ab962028f8eb562297e7b38d7806ba21c">PSCTL</a> = 0x01;                <span class="comment">// allow write</span>
<a name="l01126"></a>01126 
<a name="l01127"></a>01127    p = <a class="code" href="embedded_2mscb_8h.html#afe7387252655a7ee07b26cb83c5ed0be">EEPROM_OFFSET</a> + *<a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01128"></a>01128    s = src;
<a name="l01129"></a>01129 
<a name="l01130"></a>01130    <span class="keywordflow">for</span> (i = 0; i &lt; len; i++) {  <span class="comment">// write data</span>
<a name="l01131"></a>01131       b = *s++;
<a name="l01132"></a>01132 
<a name="l01133"></a>01133 <span class="preprocessor">#if defined(CPU_C8051F310) || defined(CPU_C8051F320)</span>
<a name="l01134"></a>01134 <span class="preprocessor"></span>      <a class="code" href="c8051F310_8h.html#ae49102c0fd5a01b7edd91e8679a66cf1">FLKEY</a> = 0xA5;             <span class="comment">// write flash key code</span>
<a name="l01135"></a>01135       <a class="code" href="c8051F310_8h.html#ae49102c0fd5a01b7edd91e8679a66cf1">FLKEY</a> = <a class="code" href="mscbmain_8c.html#aab1037491179d86a89ac750947c0b1f1">_flkey</a>;
<a name="l01136"></a>01136 <span class="preprocessor">#endif</span>
<a name="l01137"></a>01137 <span class="preprocessor"></span>
<a name="l01138"></a>01138       *p++ = b;
<a name="l01139"></a>01139    }
<a name="l01140"></a>01140 
<a name="l01141"></a>01141    <a class="code" href="c8051F000_8h.html#ab962028f8eb562297e7b38d7806ba21c">PSCTL</a> = 0x00;                <span class="comment">// don&apos;t allow write</span>
<a name="l01142"></a>01142    <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> = <a class="code" href="c8051F000_8h.html#a7a5173a3492e05b54a933fcaec8faaea">FLSCL</a> &amp; 0xF0;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144    *offset += len;
<a name="l01145"></a>01145 
<a name="l01146"></a>01146    <a class="code" href="embedded_2mscb_8h.html#a62b74068f303c78492667e69fe203914">ENABLE_INTERRUPTS</a>;
<a name="l01147"></a>01147 
<a name="l01148"></a>01148    <a class="code" href="embedded_2mscb_8h.html#a4ae5ad65c961268051560516eeff623f">watchdog_refresh</a>();
<a name="l01149"></a>01149 <span class="preprocessor">#endif</span>
<a name="l01150"></a>01150 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a35c08b1fa742e650f4873939707b893b"></a><!-- doxytag: member="mscbutil.c::lcd_clear" ref="a35c08b1fa742e650f4873939707b893b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_clear </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01418">1418</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l01426">lcd_goto()</a>, and <a class="el" href="mscbutil_8c_source.html#l01319">lcd_out()</a>.</p>

<p>Referenced by <a class="el" href="scs__1000_8c_source.html#l00352">application_display()</a>, <a class="el" href="mscbmain_8c_source.html#l00538">debug_output()</a>, <a class="el" href="lcd__menu_8c_source.html#l00276">lcd_menu()</a>, <a class="el" href="scs__500__pt100_8c_source.html#l00212">user_loop()</a>, and <a class="el" href="mscbmain_8c_source.html#l01361">yield()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01419"></a>01419 {
<a name="l01420"></a>01420    <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>(0x01, 0);
<a name="l01421"></a>01421    <a class="code" href="embedded_2mscb_8h.html#adaf2d117fc7b2fb397acd51a28baba7b">lcd_goto</a>(0, 0);
<a name="l01422"></a>01422 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adaf2d117fc7b2fb397acd51a28baba7b"></a><!-- doxytag: member="mscbutil.c::lcd_goto" ref="adaf2d117fc7b2fb397acd51a28baba7b" args="(char x, char y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_goto </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01426">1426</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l01319">lcd_out()</a>.</p>

<p>Referenced by <a class="el" href="scs__1000_8c_source.html#l00352">application_display()</a>, <a class="el" href="mscbmain_8c_source.html#l00538">debug_output()</a>, <a class="el" href="lcd__menu_8c_source.html#l00262">display_name()</a>, <a class="el" href="lcd__menu_8c_source.html#l00114">display_value()</a>, <a class="el" href="mscbutil_8c_source.html#l01418">lcd_clear()</a>, <a class="el" href="lcd__menu_8c_source.html#l00276">lcd_menu()</a>, <a class="el" href="scs__1000_8c_source.html#l00141">user_init()</a>, and <a class="el" href="mscbuser_8c_source.html#l00220">user_loop()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01427"></a>01427 {
<a name="l01428"></a>01428    <span class="comment">/* goto position x(0..19), y(0..1) */</span>
<a name="l01429"></a>01429 
<a name="l01430"></a>01430    <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>((x &amp; 0x0F) | (0x80) | ((y &amp; 0x01) &lt;&lt; 6), 0);
<a name="l01431"></a>01431 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8caf2cbed521975107e5c7aa49a99119"></a><!-- doxytag: member="mscbutil.c::lcd_out" ref="a8caf2cbed521975107e5c7aa49a99119" args="(unsigned char d, bit df)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lcd_out </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bit&nbsp;</td>
          <td class="paramname"> <em>df</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01319">1319</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="c8051F120_8h_source.html#l00326">CONFIG_PAGE</a>, <a class="el" href="mscbutil_8c_source.html#l00937">delay_us()</a>, <a class="el" href="c8051F020_8h_source.html#l00051">P2MDOUT</a>, and <a class="el" href="c8051F120_8h_source.html#l00019">SFRPAGE</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l01418">lcd_clear()</a>, <a class="el" href="mscbutil_8c_source.html#l01426">lcd_goto()</a>, <a class="el" href="mscbutil_8c_source.html#l01444">lcd_puts()</a>, <a class="el" href="mscbutil_8c_source.html#l01364">lcd_setup()</a>, and <a class="el" href="mscbutil_8c_source.html#l01435">putchar()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01320"></a>01320 {
<a name="l01321"></a>01321    <span class="keywordflow">if</span> (!<a class="code" href="mscbmain_8c.html#ad5b44f63b60e3b566a81dfdc699a4667">lcd_present</a>)
<a name="l01322"></a>01322       <span class="keywordflow">return</span>;
<a name="l01323"></a>01323 
<a name="l01324"></a>01324    LCD = LCD | 0xF0;            <span class="comment">// data input</span>
<a name="l01325"></a>01325    <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a14aacb99e01e6ed91f888acd07fcf7a9">CONFIG_PAGE</a>;
<a name="l01326"></a>01326    <a class="code" href="c8051F020_8h.html#a6608f51dd6960523e066aff4616cd407">P2MDOUT</a> = 0x0F;
<a name="l01327"></a>01327    <a class="code" href="mscbutil_8c.html#a5799edeaf5ede6c962f8eda9922bfd00">LCD_RS</a> = 0;                  <span class="comment">// select BF        </span>
<a name="l01328"></a>01328    <a class="code" href="mscbutil_8c.html#a9b8230ce63fa3e2ff3ae49fa4cda3315">LCD_R_W</a> = 1;
<a name="l01329"></a>01329    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01330"></a>01330    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01331"></a>01331 
<a name="l01332"></a>01332    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(10);                <span class="comment">// let signals settle</span>
<a name="l01333"></a>01333    <span class="keywordflow">while</span> (<a class="code" href="mscbutil_8c.html#a63d732b925d0134c93fc7e6ac58e9549">LCD_DB7</a>);             <span class="comment">// loop if busy</span>
<a name="l01334"></a>01334 
<a name="l01335"></a>01335    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 0;
<a name="l01336"></a>01336    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01337"></a>01337    <a class="code" href="mscbutil_8c.html#a9b8230ce63fa3e2ff3ae49fa4cda3315">LCD_R_W</a> = 0;
<a name="l01338"></a>01338    <a class="code" href="c8051F020_8h.html#a6608f51dd6960523e066aff4616cd407">P2MDOUT</a> = 0xFF;              <span class="comment">// data output</span>
<a name="l01339"></a>01339    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01340"></a>01340 
<a name="l01341"></a>01341    <span class="comment">/* high nibble, preserve P0.0 */</span>
<a name="l01342"></a>01342    LCD = (LCD &amp; 0x01) | (<a class="code" href="system_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> &amp; 0xF0);
<a name="l01343"></a>01343    <a class="code" href="mscbutil_8c.html#a5799edeaf5ede6c962f8eda9922bfd00">LCD_RS</a> = df;
<a name="l01344"></a>01344    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01345"></a>01345 
<a name="l01346"></a>01346    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01347"></a>01347    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01348"></a>01348    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 0;
<a name="l01349"></a>01349    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01350"></a>01350 
<a name="l01351"></a>01351    <span class="comment">/* now nibble */</span>
<a name="l01352"></a>01352    LCD = (LCD &amp; 0x01) | ((<a class="code" href="system_8c.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> &lt;&lt; 4) &amp; 0xF0);
<a name="l01353"></a>01353    <a class="code" href="mscbutil_8c.html#a5799edeaf5ede6c962f8eda9922bfd00">LCD_RS</a> = df;
<a name="l01354"></a>01354    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01355"></a>01355 
<a name="l01356"></a>01356    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01357"></a>01357    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01358"></a>01358    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 0;
<a name="l01359"></a>01359    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01360"></a>01360 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a07820d8874b23ab3da0752f15ac626f2"></a><!-- doxytag: member="mscbutil.c::lcd_puts" ref="a07820d8874b23ab3da0752f15ac626f2" args="(char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_puts </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01444">1444</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l01319">lcd_out()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01445"></a>01445 {
<a name="l01446"></a>01446    <span class="keywordflow">while</span> (*<a class="code" href="odbhist_8c.html#a45bb529d5408fcb730eeccb339110d3f">str</a>)
<a name="l01447"></a>01447       <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>(*<a class="code" href="odbhist_8c.html#a45bb529d5408fcb730eeccb339110d3f">str</a>++, 1);
<a name="l01448"></a>01448 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9468c1be5dc5602e17d2a5dd2a9fed8d"></a><!-- doxytag: member="mscbutil.c::lcd_setup" ref="a9468c1be5dc5602e17d2a5dd2a9fed8d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_setup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01364">1364</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="c8051F120_8h_source.html#l00326">CONFIG_PAGE</a>, <a class="el" href="mscbutil_8c_source.html#l00902">delay_ms()</a>, <a class="el" href="mscbutil_8c_source.html#l00937">delay_us()</a>, <a class="el" href="mscbutil_8c_source.html#l01319">lcd_out()</a>, <a class="el" href="c8051F020_8h_source.html#l00051">P2MDOUT</a>, and <a class="el" href="c8051F120_8h_source.html#l00019">SFRPAGE</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01365"></a>01365 {
<a name="l01366"></a>01366    <span class="keywordtype">unsigned</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>=0;
<a name="l01367"></a>01367 
<a name="l01368"></a>01368    <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a14aacb99e01e6ed91f888acd07fcf7a9">CONFIG_PAGE</a>;
<a name="l01369"></a>01369    <a class="code" href="c8051F020_8h.html#a6608f51dd6960523e066aff4616cd407">P2MDOUT</a> = 0xFF;
<a name="l01370"></a>01370 
<a name="l01371"></a>01371    LCD &amp;= ~(0xFE);
<a name="l01372"></a>01372    <a class="code" href="embedded_2mscb_8h.html#af29c4657f62375d42c6ee104b6bf4491">delay_ms</a>(15);
<a name="l01373"></a>01373    LCD |= 0x30;
<a name="l01374"></a>01374 
<a name="l01375"></a>01375    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01376"></a>01376    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01377"></a>01377    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 0;
<a name="l01378"></a>01378    <a class="code" href="embedded_2mscb_8h.html#af29c4657f62375d42c6ee104b6bf4491">delay_ms</a>(5);
<a name="l01379"></a>01379 
<a name="l01380"></a>01380    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01381"></a>01381    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01382"></a>01382    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 0;
<a name="l01383"></a>01383    <a class="code" href="embedded_2mscb_8h.html#af29c4657f62375d42c6ee104b6bf4491">delay_ms</a>(1);
<a name="l01384"></a>01384 
<a name="l01385"></a>01385    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01386"></a>01386    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01387"></a>01387    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 0;
<a name="l01388"></a>01388 
<a name="l01389"></a>01389    LCD = 0x20;                  <span class="comment">// set 4-bit interface</span>
<a name="l01390"></a>01390    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01391"></a>01391    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01392"></a>01392    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 0;
<a name="l01393"></a>01393 
<a name="l01394"></a>01394    <span class="comment">/* test if LCD present */</span>
<a name="l01395"></a>01395 
<a name="l01396"></a>01396    LCD = LCD | 0xF0;            <span class="comment">// data input</span>
<a name="l01397"></a>01397    <a class="code" href="c8051F020_8h.html#a6608f51dd6960523e066aff4616cd407">P2MDOUT</a> = 0x0F;              
<a name="l01398"></a>01398    <a class="code" href="mscbutil_8c.html#a5799edeaf5ede6c962f8eda9922bfd00">LCD_RS</a> = 0;                  <span class="comment">// select BF        </span>
<a name="l01399"></a>01399    <a class="code" href="mscbutil_8c.html#a9b8230ce63fa3e2ff3ae49fa4cda3315">LCD_R_W</a> = 1;
<a name="l01400"></a>01400    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(1);
<a name="l01401"></a>01401    <a class="code" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = 1;
<a name="l01402"></a>01402    <a class="code" href="embedded_2mscb_8h.html#a84f652539f41e435c3b08e023d3ba0dd">delay_us</a>(100);               <span class="comment">// let signal settle</span>
<a name="l01403"></a>01403    <span class="keywordflow">if</span> (<a class="code" href="mscbutil_8c.html#a63d732b925d0134c93fc7e6ac58e9549">LCD_DB7</a>) {
<a name="l01404"></a>01404       <a class="code" href="mscbmain_8c.html#ad5b44f63b60e3b566a81dfdc699a4667">lcd_present</a> = 0;
<a name="l01405"></a>01405       <span class="keywordflow">return</span>;
<a name="l01406"></a>01406    }
<a name="l01407"></a>01407 
<a name="l01408"></a>01408    <a class="code" href="mscbmain_8c.html#ad5b44f63b60e3b566a81dfdc699a4667">lcd_present</a> = 1;
<a name="l01409"></a>01409 
<a name="l01410"></a>01410    <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>(0x2C, 0);            <span class="comment">// select 2 lines, big font</span>
<a name="l01411"></a>01411    <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>(0x0C, 0);            <span class="comment">// display on</span>
<a name="l01412"></a>01412    <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>(0x01, 0);            <span class="comment">// clear display</span>
<a name="l01413"></a>01413    <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>(0x06, 0);            <span class="comment">// entry mode</span>
<a name="l01414"></a>01414 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a431cf0a502f2a232e27f81080a890585"></a><!-- doxytag: member="mscbutil.c::led_blink" ref="a431cf0a502f2a232e27f81080a890585" args="(unsigned char led, unsigned char n, int interval) reentrant" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void led_blink </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>led</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00788">788</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l00654">interval</a>, <a class="el" href="camac_8c_source.html#l00506">n</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00279">N_LED</a>, and <a class="el" href="mscbutil_8c_source.html#l00653">timer</a>.</p>

<p>Referenced by <a class="el" href="scs__900_8c_source.html#l00423">adc_calib()</a>, <a class="el" href="usb_8c_source.html#l01144">BulkOrInterruptIn()</a>, <a class="el" href="hvr__200_8c_source.html#l00608">check_current()</a>, <a class="el" href="subm__300_8c_source.html#l00181">check_lpt()</a>, <a class="el" href="subm__300_8c_source.html#l00224">check_rs485()</a>, <a class="el" href="mscbutil_8c_source.html#l01212">eeprom_flash()</a>, <a class="el" href="scs__310_8c_source.html#l00294">enter()</a>, <a class="el" href="subm__250_8c_source.html#l00193">execute()</a>, <a class="el" href="mscbmain_8c_source.html#l00704">interprete()</a>, <a class="el" href="subm__250_8c_source.html#l00303">main()</a>, <a class="el" href="subm__250_8c_source.html#l00246">rs485_receive()</a>, <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>, <a class="el" href="scs__210_8c_source.html#l00191">user_loop()</a>, and <a class="el" href="mscbmain_8c_source.html#l01361">yield()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00791"></a>00791          : blink led
<a name="l00792"></a>00792 
<a name="l00793"></a>00793   Purpose: Blink primary <a class="code" href="examples_2macro_2midas__macro_8h.html#a339a611d7f9dc3a59c359f0da7beaf3c">or</a> secondary LED <span class="keywordflow">for</span> a couple of times
<a name="l00794"></a>00794 
<a name="l00795"></a>00795   Input:
<a name="l00796"></a>00796     <span class="keywordtype">int</span> led               0 <span class="keywordflow">for</span> primary, 1 <span class="keywordflow">for</span> secondary, ...
<a name="l00797"></a>00797     <span class="keywordtype">int</span> <a class="code" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a>          Blink <a class="code" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> ms
<a name="l00798"></a>00798     <span class="keywordtype">int</span> <a class="code" href="camac_8c.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>                 Number of blinks
<a name="l00799"></a>00799 
<a name="l00800"></a>00800 \********************************************************************/
<a name="l00801"></a>00801 {
<a name="l00802"></a>00802    <span class="keywordflow">if</span> (led &lt; <a class="code" href="embedded_2mscb_8h.html#a09ce9c9f5e59ac595b1e21730a00dcf9">N_LED</a>) {
<a name="l00803"></a>00803       <span class="keywordflow">if</span> (<a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[led].<a class="code" href="camac_8c.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> == 0 &amp;&amp; <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[led].<a class="code" href="mscbutil_8c.html#a915eedaaa4284d1bac812f5c73940f2c">timer</a> == 0) {
<a name="l00804"></a>00804          <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[led].n = <a class="code" href="camac_8c.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>*2+1;
<a name="l00805"></a>00805          <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[led].interval = <a class="code" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a> / 10;
<a name="l00806"></a>00806          <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[led].timer = 0;
<a name="l00807"></a>00807       }
<a name="l00808"></a>00808    }
<a name="l00809"></a>00809 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2e16d999cb779a17d76f7996edc132a0"></a><!-- doxytag: member="mscbutil.c::led_int" ref="a2e16d999cb779a17d76f7996edc132a0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void led_int </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00719">719</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="embedded_2mscb_8h_source.html#l00266">LED_OFF</a>, <a class="el" href="mscbutil_8c_source.html#l00813">led_set()</a>, <a class="el" href="camac_8c_source.html#l00506">n</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00279">N_LED</a>, and <a class="el" href="mscbutil_8c_source.html#l00653">timer</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l00746">timer0_int()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00720"></a>00720 {
<a name="l00721"></a>00721    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00722"></a>00722 
<a name="l00723"></a>00723    <span class="comment">/* manage blinking LEDs */</span>
<a name="l00724"></a>00724    <span class="keywordflow">for</span> (i=0 ; i&lt;<a class="code" href="embedded_2mscb_8h.html#a09ce9c9f5e59ac595b1e21730a00dcf9">N_LED</a> ; i++) {
<a name="l00725"></a>00725       <span class="keywordflow">if</span> (<a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].<a class="code" href="camac_8c.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> &gt; 0 &amp;&amp; <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].<a class="code" href="mscbutil_8c.html#a915eedaaa4284d1bac812f5c73940f2c">timer</a> == 0) {
<a name="l00726"></a>00726          <span class="keywordflow">if</span> ((<a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].<a class="code" href="camac_8c.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> &amp; 1) &amp;&amp; <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].n &gt; 1)
<a name="l00727"></a>00727             <a class="code" href="embedded_2mscb_8h.html#a1a4ec2f42e1277c5273ba002ed50394d">led_set</a>(i, LED_ON);
<a name="l00728"></a>00728          <span class="keywordflow">else</span>
<a name="l00729"></a>00729             <a class="code" href="embedded_2mscb_8h.html#a1a4ec2f42e1277c5273ba002ed50394d">led_set</a>(i, <a class="code" href="embedded_2mscb_8h.html#a80700bb63bd56ebabbb4728aa433fd29">LED_OFF</a>);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731          <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].n--;
<a name="l00732"></a>00732          <span class="keywordflow">if</span> (<a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].n)
<a name="l00733"></a>00733             <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].timer = <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].interval;
<a name="l00734"></a>00734       }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736       <span class="keywordflow">if</span> (<a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].<a class="code" href="mscbutil_8c.html#a915eedaaa4284d1bac812f5c73940f2c">timer</a>)
<a name="l00737"></a>00737          <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].timer--;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739       <span class="keywordflow">if</span> (<a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].n == 0)
<a name="l00740"></a>00740          <a class="code" href="embedded_2mscb_8h.html#a1a4ec2f42e1277c5273ba002ed50394d">led_set</a>(i, <a class="code" href="embedded_2mscb_8h.html#a80700bb63bd56ebabbb4728aa433fd29">LED_OFF</a>);
<a name="l00741"></a>00741    }
<a name="l00742"></a>00742 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af87085aa8c2a51c2ef253721e4a192ca"></a><!-- doxytag: member="mscbutil.c::led_mode" ref="af87085aa8c2a51c2ef253721e4a192ca" args="(unsigned char led, unsigned char flag) reentrant" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void led_mode </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>led</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00769">769</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="scs__310__ql355p_8c_source.html#l00055">flag</a>, and <a class="el" href="embedded_2mscb_8h_source.html#l00279">N_LED</a>.</p>

<p>Referenced by <a class="el" href="hvr__200_8c_source.html#l00542">set_hv()</a>, <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>, <a class="el" href="new__fadc_8cpp_source.html#l00296">setupRegs()</a>, and <a class="el" href="hvr__200_8c_source.html#l00192">user_init()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00772"></a>00772          : <a class="code" href="embedded_2mscb_8h.html#af87085aa8c2a51c2ef253721e4a192ca">led_mode</a>
<a name="l00773"></a>00773 
<a name="l00774"></a>00774   Purpose: Set LED <a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>
<a name="l00775"></a>00775 
<a name="l00776"></a>00776   Input:
<a name="l00777"></a>00777     <span class="keywordtype">int</span> led               0 <span class="keywordflow">for</span> primary, 1 <span class="keywordflow">for</span> secondary
<a name="l00778"></a>00778     <span class="keywordtype">int</span> <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>              Noninverted (0) / Inverted (1)
<a name="l00779"></a>00779 
<a name="l00780"></a>00780 \********************************************************************/
<a name="l00781"></a>00781 {
<a name="l00782"></a>00782    <span class="keywordflow">if</span> (led &lt; <a class="code" href="embedded_2mscb_8h.html#a09ce9c9f5e59ac595b1e21730a00dcf9">N_LED</a>)
<a name="l00783"></a>00783       <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[led].mode = <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>;
<a name="l00784"></a>00784 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaae689725b9077d5e8a019f547e124b5"></a><!-- doxytag: member="mscbutil.c::led_set" ref="aaae689725b9077d5e8a019f547e124b5" args="(unsigned char led, unsigned char flag) reentrant using 2" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void led_set </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>led</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00813">813</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="scs__310__ql355p_8c_source.html#l00055">flag</a>, <a class="el" href="mscbutil_8c_source.html#l00652">mode</a>, and <a class="el" href="embedded_2mscb_8h_source.html#l00279">N_LED</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l00719">led_int()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00814"></a>00814 {
<a name="l00815"></a>00815    <span class="comment">/* invert on/of if mode = 1 */</span>
<a name="l00816"></a>00816    <span class="keywordflow">if</span> (led &lt; <a class="code" href="embedded_2mscb_8h.html#a09ce9c9f5e59ac595b1e21730a00dcf9">N_LED</a> &amp;&amp; <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[led].<a class="code" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a>)
<a name="l00817"></a>00817       <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a> = !<a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>;
<a name="l00818"></a>00818 
<a name="l00819"></a>00819 <span class="preprocessor">#ifdef LED_0</span>
<a name="l00820"></a>00820 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (led == 0)
<a name="l00821"></a>00821       <a class="code" href="subm__250_8c.html#ae06893434b09005871d20c1697bfac29">led_0</a> = <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>;
<a name="l00822"></a>00822 <span class="preprocessor">#endif</span>
<a name="l00823"></a>00823 <span class="preprocessor"></span><span class="preprocessor">#ifdef LED_1</span>
<a name="l00824"></a>00824 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (led == 1)
<a name="l00825"></a>00825       <a class="code" href="subm__250_8c.html#a81f7ebb598ca09b15871759769c669c6">led_1</a> = <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>;
<a name="l00826"></a>00826 <span class="preprocessor">#endif </span>
<a name="l00827"></a>00827 <span class="preprocessor"></span><span class="preprocessor">#ifdef LED_2</span>
<a name="l00828"></a>00828 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (led == 2)
<a name="l00829"></a>00829       led_2 = <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>;
<a name="l00830"></a>00830 <span class="preprocessor">#endif </span>
<a name="l00831"></a>00831 <span class="preprocessor"></span><span class="preprocessor">#ifdef LED_3</span>
<a name="l00832"></a>00832 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (led == 3)
<a name="l00833"></a>00833       led_3 = <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>;
<a name="l00834"></a>00834 <span class="preprocessor">#endif </span>
<a name="l00835"></a>00835 <span class="preprocessor"></span><span class="preprocessor">#ifdef LED_4</span>
<a name="l00836"></a>00836 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (led == 4)
<a name="l00837"></a>00837       led_4 = <a class="code" href="scs__310__ql355p_8c.html#a11764cc96bb263d1f257bcc01205a787">flag</a>;
<a name="l00838"></a>00838 <span class="preprocessor">#endif</span>
<a name="l00839"></a>00839 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a44a1bacb4c1429ca87f81505dea70451"></a><!-- doxytag: member="mscbutil.c::putchar" ref="a44a1bacb4c1429ca87f81505dea70451" args="(char c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char putchar </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>c</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01435">1435</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l01319">lcd_out()</a>.</p>

<p>Referenced by <a class="el" href="msc_8c_source.html#l00462">cmd_loop()</a>, <a class="el" href="bit3__mvme_2bt617_8c_source.html#l00238">showbits()</a>, <a class="el" href="scs__210_8c_source.html#l00191">user_loop()</a>, and <a class="el" href="scs__210_8c_source.html#l00120">user_write()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l01436"></a>01436 {
<a name="l01437"></a>01437    <span class="keywordflow">if</span> (<a class="code" href="patch__mevb_8cpp.html#adce6024c3a1b29c5fcede88815f9b152">c</a> &gt;= <span class="charliteral">&apos; &apos;</span>)
<a name="l01438"></a>01438       <a class="code" href="mscbutil_8c.html#a8caf2cbed521975107e5c7aa49a99119">lcd_out</a>(<a class="code" href="patch__mevb_8cpp.html#adce6024c3a1b29c5fcede88815f9b152">c</a>, 1);
<a name="l01439"></a>01439    <span class="keywordflow">return</span> <a class="code" href="patch__mevb_8cpp.html#adce6024c3a1b29c5fcede88815f9b152">c</a>;
<a name="l01440"></a>01440 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a179877b003d63996470f7b628a57eeac"></a><!-- doxytag: member="mscbutil.c::rs232_output" ref="a179877b003d63996470f7b628a57eeac" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rs232_output </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00509">509</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l01361">yield()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00510"></a>00510 {
<a name="l00511"></a>00511 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3da29ea117a42298b0958a53dd33aab"></a><!-- doxytag: member="mscbutil.c::sysclock_init" ref="ac3da29ea117a42298b0958a53dd33aab" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysclock_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00676">676</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="c8051F000_8h_source.html#l00025">CKCON</a>, <a class="el" href="c8051F000_8h_source.html#l00142">EA</a>, <a class="el" href="c8051F000_8h_source.html#l00147">ET0</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00279">N_LED</a>, <a class="el" href="c8051F000_8h_source.html#l00153">PT1</a>, <a class="el" href="c8051F120_8h_source.html#l00019">SFRPAGE</a>, <a class="el" href="c8051F000_8h_source.html#l00023">TH0</a>, <a class="el" href="c8051F120_8h_source.html#l00328">TIMER01_PAGE</a>, <a class="el" href="c8051F000_8h_source.html#l00021">TL0</a>, <a class="el" href="c8051F000_8h_source.html#l00020">TMOD</a>, and <a class="el" href="c8051F000_8h_source.html#l00125">TR0</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00679"></a>00679          : <a class="code" href="embedded_2mscb_8h.html#ac3da29ea117a42298b0958a53dd33aab">sysclock_init</a>
<a name="l00680"></a>00680 
<a name="l00681"></a>00681   Purpose: Initial sytem clock via <a class="code" href="mscbutil_8c.html#a915eedaaa4284d1bac812f5c73940f2c">timer</a> 0
<a name="l00682"></a>00682 
<a name="l00683"></a>00683 *********************************************************************/
<a name="l00684"></a>00684 {
<a name="l00685"></a>00685    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00686"></a>00686 
<a name="l00687"></a>00687    <a class="code" href="c8051F000_8h.html#ae524fa4918208f2da654a7887bd9a7d0">EA</a> = 1;                      <span class="comment">// general interrupt enable</span>
<a name="l00688"></a>00688    <a class="code" href="c8051F000_8h.html#a749b757b6727c132cf750b0b8a120435">ET0</a> = 1;                     <span class="comment">// Enable Timer 1 interrupt</span>
<a name="l00689"></a>00689    <a class="code" href="c8051F000_8h.html#a2882414c100b171b38f7cda29a76eaae">PT1</a> = 1;                     <span class="comment">// Interrupt priority high</span>
<a name="l00690"></a>00690 
<a name="l00691"></a>00691 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l00692"></a>00692 <span class="preprocessor"></span>   <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a415c58e2ffb94b7d8760bfaea8ffd48a">TIMER01_PAGE</a>;
<a name="l00693"></a>00693 <span class="preprocessor">#endif</span>
<a name="l00694"></a>00694 <span class="preprocessor"></span>
<a name="l00695"></a>00695    <a class="code" href="c8051F000_8h.html#abb8213117f197b1af5887eb0c00bbfac">TMOD</a> = (<a class="code" href="c8051F000_8h.html#abb8213117f197b1af5887eb0c00bbfac">TMOD</a> &amp; 0x0F) | 0x01; <span class="comment">// 16-bit counter</span>
<a name="l00696"></a>00696 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l00697"></a>00697 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#a22ee5a0902bed7b69b5238e2dd188e50">CKCON</a> = 0x02;                <span class="comment">// use SYSCLK/48</span>
<a name="l00698"></a>00698    <a class="code" href="c8051F000_8h.html#ac948201508da14c3dd841a908e4887c3">TH0</a> = 0xAF;                  <span class="comment">// load initial value</span>
<a name="l00699"></a>00699 <span class="preprocessor">#else</span>
<a name="l00700"></a>00700 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#a22ee5a0902bed7b69b5238e2dd188e50">CKCON</a> = 0x00;                <span class="comment">// use SYSCLK/12</span>
<a name="l00701"></a>00701    <a class="code" href="c8051F000_8h.html#ac948201508da14c3dd841a908e4887c3">TH0</a> = 0xDB;                  <span class="comment">// load initial value</span>
<a name="l00702"></a>00702 <span class="preprocessor">#endif</span>
<a name="l00703"></a>00703 <span class="preprocessor"></span>
<a name="l00704"></a>00704    <a class="code" href="c8051F000_8h.html#a4799f8e8c0ba4de147d572a57599dc16">TL0</a> = 0x00;
<a name="l00705"></a>00705    <a class="code" href="c8051F000_8h.html#a19f7cd580ff8d496f442c7ac2bbf89a3">TR0</a> = 1;                     <span class="comment">// start timer 1</span>
<a name="l00706"></a>00706 
<a name="l00707"></a>00707    <a class="code" href="mscbutil_8c.html#adae727c6b6e3f32ab30a4283876934ee">_systime</a> = 0;
<a name="l00708"></a>00708 
<a name="l00709"></a>00709    <span class="keywordflow">for</span> (i=0 ; i&lt;<a class="code" href="embedded_2mscb_8h.html#a09ce9c9f5e59ac595b1e21730a00dcf9">N_LED</a> ; i++) {
<a name="l00710"></a>00710      <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].mode = 0;
<a name="l00711"></a>00711      <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].timer = 0;
<a name="l00712"></a>00712      <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].interval = 0;
<a name="l00713"></a>00713      <a class="code" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[i].n = 0;
<a name="l00714"></a>00714    }
<a name="l00715"></a>00715 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a9297d6553b1d1a19e999be7048ce8f"></a><!-- doxytag: member="mscbutil.c::time" ref="a6a9297d6553b1d1a19e999be7048ce8f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long time </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00843">843</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="embedded_2mscb_8h_source.html#l00474">DISABLE_INTERRUPTS</a>, and <a class="el" href="embedded_2mscb_8h_source.html#l00473">ENABLE_INTERRUPTS</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00846"></a>00846          : <a class="code" href="CAET_8h.html#ab2d5aa7fce1a14d8bddfb2c333ea9679">time</a>
<a name="l00847"></a>00847 
<a name="l00848"></a>00848   Purpose: Return system <a class="code" href="CAET_8h.html#ab2d5aa7fce1a14d8bddfb2c333ea9679">time</a> <a class="code" href="scs__600__p1_8c.html#af8480819a437c1eaeaa5b28b890613fa">in</a> units of 10ms 
<a name="l00849"></a>00849 
<a name="l00850"></a>00850 \********************************************************************/
<a name="l00851"></a>00851 {
<a name="l00852"></a>00852    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> t;
<a name="l00853"></a>00853 
<a name="l00854"></a>00854    <a class="code" href="embedded_2mscb_8h.html#a3b37db44db50722cac572660028ba2b5">DISABLE_INTERRUPTS</a>;
<a name="l00855"></a>00855    t = <a class="code" href="mscbutil_8c.html#adae727c6b6e3f32ab30a4283876934ee">_systime</a>;
<a name="l00856"></a>00856    <a class="code" href="embedded_2mscb_8h.html#a62b74068f303c78492667e69fe203914">ENABLE_INTERRUPTS</a>;
<a name="l00857"></a>00857    <span class="keywordflow">return</span> t;
<a name="l00858"></a>00858 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3728bbd985e83ef7d1b479afe2eaeb3"></a><!-- doxytag: member="mscbutil.c::timer0_int" ref="ac3728bbd985e83ef7d1b479afe2eaeb3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer0_int </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00746">746</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="mscbutil_8c_source.html#l00719">led_int()</a>, and <a class="el" href="c8051F000_8h_source.html#l00023">TH0</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00749"></a>00749          : <a class="code" href="mscbutil_8c.html#ac3728bbd985e83ef7d1b479afe2eaeb3">timer0_int</a>
<a name="l00750"></a>00750 
<a name="l00751"></a>00751   Purpose: Timer 0 interrupt routine <span class="keywordflow">for</span> 100Hz system clock
<a name="l00752"></a>00752 
<a name="l00753"></a>00753            Reload <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = 0x10000 - 0.01 / (11059200/12)
<a name="l00754"></a>00754 
<a name="l00755"></a>00755 \********************************************************************/
<a name="l00756"></a>00756 {
<a name="l00757"></a>00757 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l00758"></a>00758 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#ac948201508da14c3dd841a908e4887c3">TH0</a> = 0xAF;                  <span class="comment">// for 98 MHz clock</span>
<a name="l00759"></a>00759 <span class="preprocessor">#else</span>
<a name="l00760"></a>00760 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#ac948201508da14c3dd841a908e4887c3">TH0</a> = 0xDC;                  <span class="comment">// reload timer values, let LSB freely run</span>
<a name="l00761"></a>00761 <span class="preprocessor">#endif</span>
<a name="l00762"></a>00762 <span class="preprocessor"></span>   <a class="code" href="mscbutil_8c.html#adae727c6b6e3f32ab30a4283876934ee">_systime</a>++;                  <span class="comment">// increment system time</span>
<a name="l00763"></a>00763 
<a name="l00764"></a>00764    <a class="code" href="mscbutil_8c.html#a2e16d999cb779a17d76f7996edc132a0">led_int</a>();
<a name="l00765"></a>00765 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aee20e81ba44db51d21a17d4640f5eae9"></a><!-- doxytag: member="mscbutil.c::uart_init" ref="aee20e81ba44db51d21a17d4640f5eae9" args="(unsigned char port, unsigned char baud)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_init </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>baud</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00517">517</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="c8051F000_8h_source.html#l00025">CKCON</a>, <a class="el" href="c8051F000_8h_source.html#l00142">EA</a>, <a class="el" href="c8051F000_8h_source.html#l00097">EIE2</a>, <a class="el" href="c8051F000_8h_source.html#l00108">EIP2</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00289">ES0</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00290">PS0</a>, <a class="el" href="c8051F000_8h_source.html#l00072">RCAP2H</a>, <a class="el" href="c8051F000_8h_source.html#l00071">RCAP2L</a>, <a class="el" href="c8051F020_8h_source.html#l00110">RCAP4H</a>, <a class="el" href="c8051F020_8h_source.html#l00109">RCAP4L</a>, <a class="el" href="embedded_2mscb_8h_source.html#l00284">SCON0</a>, <a class="el" href="c8051F020_8h_source.html#l00122">SCON1</a>, <a class="el" href="c8051F120_8h_source.html#l00019">SFRPAGE</a>, <a class="el" href="c8051F120_8h_source.html#l00044">SSTA0</a>, <a class="el" href="c8051F000_8h_source.html#l00070">T2CON</a>, <a class="el" href="c8051F020_8h_source.html#l00084">T4CON</a>, <a class="el" href="c8051F000_8h_source.html#l00024">TH1</a>, <a class="el" href="c8051F120_8h_source.html#l00328">TIMER01_PAGE</a>, <a class="el" href="c8051F000_8h_source.html#l00020">TMOD</a>, <a class="el" href="c8051F120_8h_source.html#l00338">TMR2_PAGE</a>, <a class="el" href="c8051F120_8h_source.html#l00102">TMR2CF</a>, <a class="el" href="c8051F120_8h_source.html#l00098">TMR2CN</a>, <a class="el" href="c8051F000_8h_source.html#l00123">TR1</a>, <a class="el" href="c8051F120_8h_source.html#l00331">UART0_PAGE</a>, and <a class="el" href="c8051F120_8h_source.html#l00332">UART1_PAGE</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>, <a class="el" href="scs__210_8c_source.html#l00102">user_init()</a>, <a class="el" href="scs__210_8c_source.html#l00120">user_write()</a>, and <a class="el" href="scs__210_8c_source.html#l00163">user_write_conf()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00520"></a>00520          : <a class="code" href="embedded_2mscb_8h.html#aee20e81ba44db51d21a17d4640f5eae9">uart_init</a>
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   Purpose: Initialize <a class="code" href="minife_8c.html#a9c566f7d2ca91bd19145b0568c0c66aa">serial</a> <a class="code" href="structusb__scs__250.html#a7472b0244028376c00020e118f2c4c03">interface</a>, user Timer 1 <span class="keywordflow">for</span> UART0 <a class="code" href="examples_2macro_2midas__macro_8h.html#aa3d7d535cf450b91b9cb6d9cee2edbb9">and</a>
<a name="l00523"></a>00523            (optionally) Timer 2 (4 <a class="code" href="patch__mevb_8cpp.html#acf1ade676fe2e98c5ee44131e9f23abb">for</a> F020) <a class="code" href="patch__mevb_8cpp.html#acf1ade676fe2e98c5ee44131e9f23abb">for</a> UART1
<a name="l00524"></a>00524 
<a name="l00525"></a>00525   Input:
<a name="l00526"></a>00526     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="scs__210_8c.html#a9bca8730b6d7cf7af1215971054adc00">baud</a>      1:9600,2:19200,3:28800,4:57600,
<a name="l00527"></a>00527                             5:115200,6:172800,7:345600 Baud
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 \********************************************************************/
<a name="l00530"></a>00530 {
<a name="l00531"></a>00531 <span class="preprocessor">#if defined (CPU_C8051F310)</span>
<a name="l00532"></a>00532 <span class="preprocessor"></span>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> code baud_table[] =
<a name="l00533"></a>00533      {0x100 - 0,    <span class="comment">//  N/A</span>
<a name="l00534"></a>00534       0x100 - 0,    <span class="comment">//  N/A</span>
<a name="l00535"></a>00535       0x100 - 192,  <span class="comment">//  28800</span>
<a name="l00536"></a>00536       0x100 - 96,   <span class="comment">//  57600</span>
<a name="l00537"></a>00537       0x100 - 48,   <span class="comment">// 115200</span>
<a name="l00538"></a>00538       0x100 - 32,   <span class="comment">// 172800</span>
<a name="l00539"></a>00539       0x100 - 16 }; <span class="comment">// 345600</span>
<a name="l00540"></a>00540 <span class="preprocessor">#elif defined(CPU_C8051F320)       // 12 MHz</span>
<a name="l00541"></a>00541 <span class="preprocessor"></span>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> code baud_table[] =
<a name="l00542"></a>00542      {0x100 - 0,    <span class="comment">//  N/A</span>
<a name="l00543"></a>00543       0x100 - 0,    <span class="comment">//  N/A</span>
<a name="l00544"></a>00544       0x100 - 208,  <span class="comment">//  28800</span>
<a name="l00545"></a>00545       0x100 - 104,  <span class="comment">//  57600</span>
<a name="l00546"></a>00546       0x100 - 52,   <span class="comment">// 115200</span>
<a name="l00547"></a>00547       0x100 - 35,   <span class="comment">// 172800  2% error</span>
<a name="l00548"></a>00548       0x100 - 17 }; <span class="comment">// 345600  2% error</span>
<a name="l00549"></a>00549 <span class="preprocessor">#elif defined(CPU_C8051F120)       // 98 MHz</span>
<a name="l00550"></a>00550 <span class="preprocessor"></span>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> code baud_table[] =  <span class="comment">// UART0 via timer 2</span>
<a name="l00551"></a>00551      {0x100 - 0,    <span class="comment">//  N/A</span>
<a name="l00552"></a>00552       0x100 - 0,    <span class="comment">//  N/A</span>
<a name="l00553"></a>00553       0x100 - 208,  <span class="comment">//  28800  2% error</span>
<a name="l00554"></a>00554       0x100 - 104,  <span class="comment">//  57600  2% error</span>
<a name="l00555"></a>00555       0x100 - 53,   <span class="comment">// 115200  2% error</span>
<a name="l00556"></a>00556       0x100 - 35,   <span class="comment">// 172800  2% error</span>
<a name="l00557"></a>00557       0x100 - 18 }; <span class="comment">// 345600  2% error</span>
<a name="l00558"></a>00558 <span class="preprocessor">#else                              // 11.0592 MHz</span>
<a name="l00559"></a>00559 <span class="preprocessor"></span>   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> code baud_table[] =
<a name="l00560"></a>00560      {0x100 - 36,   <span class="comment">//   9600  </span>
<a name="l00561"></a>00561       0x100 - 18,   <span class="comment">//  14400 </span>
<a name="l00562"></a>00562       0x100 - 12,   <span class="comment">//  28800</span>
<a name="l00563"></a>00563       0x100 - 6,    <span class="comment">//  57600</span>
<a name="l00564"></a>00564       0x100 - 3,    <span class="comment">// 115200</span>
<a name="l00565"></a>00565       0x100 - 2,    <span class="comment">// 172800</span>
<a name="l00566"></a>00566       0x100 - 1 };  <span class="comment">// 345600</span>
<a name="l00567"></a>00567 <span class="preprocessor">#endif</span>
<a name="l00568"></a>00568 <span class="preprocessor"></span>
<a name="l00569"></a>00569    <span class="keywordflow">if</span> (port == 0) { <span class="comment">/*---- UART0 ----*/</span>
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l00572"></a>00572 <span class="preprocessor"></span>      <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a68f53cbb5336685c7582b242042e77b9">UART0_PAGE</a>;
<a name="l00573"></a>00573 <span class="preprocessor">#endif</span>
<a name="l00574"></a>00574 <span class="preprocessor"></span>
<a name="l00575"></a>00575       <a class="code" href="embedded_2mscb_8h.html#aca350bf3b88ddd617fc96ed299745b87">SCON0</a> = 0xD0;                <span class="comment">// Mode 3, 9 bit, receive enable</span>
<a name="l00576"></a>00576 
<a name="l00577"></a>00577 <span class="preprocessor">#ifdef CPU_C8051F120</span>
<a name="l00578"></a>00578 <span class="preprocessor"></span>
<a name="l00579"></a>00579       <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a68f53cbb5336685c7582b242042e77b9">UART0_PAGE</a>;
<a name="l00580"></a>00580       <a class="code" href="c8051F120_8h.html#a03cf82602153c648d521c526fe5436d8">SSTA0</a> = 0x15;                <span class="comment">// User Timer 2 for baud rate, div2 disabled</span>
<a name="l00581"></a>00581       
<a name="l00582"></a>00582       <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a7ca20b4db1ca1788c942cf8ebc506001">TMR2_PAGE</a>;
<a name="l00583"></a>00583       <a class="code" href="c8051F120_8h.html#a6ab321bda3afd00552117140dfa077a1">TMR2CF</a> = 0x08;               <span class="comment">// use system clock for timer 2</span>
<a name="l00584"></a>00584       <a class="code" href="c8051F000_8h.html#ade73ab58f3965f6e113f05634b6db308">RCAP2H</a> = 0xFF;
<a name="l00585"></a>00585       <a class="code" href="c8051F000_8h.html#a87ed4fdfe7e7c0e994f0128eee8564e0">RCAP2L</a> = baud_table[baud - 1];  <span class="comment">// load initial values</span>
<a name="l00586"></a>00586       <a class="code" href="c8051F120_8h.html#a11eff251b123ea9a318a5944faef9870">TMR2CN</a> = 0x04;               <span class="comment">// start timer 2</span>
<a name="l00587"></a>00587       <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a68f53cbb5336685c7582b242042e77b9">UART0_PAGE</a>;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589 <span class="preprocessor">#else // CPU_C8051F120</span>
<a name="l00590"></a>00590 <span class="preprocessor"></span>
<a name="l00591"></a>00591       <a class="code" href="c8051F000_8h.html#abb8213117f197b1af5887eb0c00bbfac">TMOD</a>  = (<a class="code" href="c8051F000_8h.html#abb8213117f197b1af5887eb0c00bbfac">TMOD</a> &amp; 0x0F)| 0x20; <span class="comment">// Timer 1 8-bit counter with auto reload</span>
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 <span class="preprocessor">#if defined(CPU_C8051F310) || defined(CPU_C8051F320)</span>
<a name="l00594"></a>00594 <span class="preprocessor"></span>      <a class="code" href="c8051F000_8h.html#a22ee5a0902bed7b69b5238e2dd188e50">CKCON</a> |= 0x08;               <span class="comment">// use system clock</span>
<a name="l00595"></a>00595 <span class="preprocessor">#else</span>
<a name="l00596"></a>00596 <span class="preprocessor"></span>      <a class="code" href="c8051F000_8h.html#a48e78519142627f2302db3f59441070e">T2CON</a> &amp;= ~30;                <span class="comment">// User Timer 1 for baud rate</span>
<a name="l00597"></a>00597       <a class="code" href="c8051F000_8h.html#a22ee5a0902bed7b69b5238e2dd188e50">CKCON</a> |= 0x10;               <span class="comment">// use system clock</span>
<a name="l00598"></a>00598 <span class="preprocessor">#endif</span>
<a name="l00599"></a>00599 <span class="preprocessor"></span>
<a name="l00600"></a>00600       <a class="code" href="c8051F000_8h.html#a4ae730549ffdf484b18e051fcddbe8ff">TH1</a> = baud_table[baud - 1];  <span class="comment">// load initial values</span>
<a name="l00601"></a>00601       <a class="code" href="c8051F000_8h.html#a409af03b4cf307d532aa009188eeeece">TR1</a> = 1;                     <span class="comment">// start timer 1</span>
<a name="l00602"></a>00602 
<a name="l00603"></a>00603 <span class="preprocessor">#endif // CPU_C8051F120</span>
<a name="l00604"></a>00604 <span class="preprocessor"></span>
<a name="l00605"></a>00605       <a class="code" href="embedded_2mscb_8h.html#ad147e55136df8cab74bfb301feaa82ad">ES0</a> = 1;                     <span class="comment">// enable serial interrupt</span>
<a name="l00606"></a>00606       <a class="code" href="embedded_2mscb_8h.html#adeef02e4ad30db3c40ab259e6084317c">PS0</a> = 0;                     <span class="comment">// serial interrupt low priority</span>
<a name="l00607"></a>00607    
<a name="l00608"></a>00608 
<a name="l00609"></a>00609    } <span class="keywordflow">else</span> { <span class="comment">/*---- UART1 ----*/</span>
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 <span class="preprocessor">#if defined(CPU_C8051F020)</span>
<a name="l00612"></a>00612 <span class="preprocessor"></span>      <a class="code" href="c8051F020_8h.html#a423bb65316001a377c38201366cff911">SCON1</a> = 0x50;                <span class="comment">// Mode 1, 8 bit, receive enable</span>
<a name="l00613"></a>00613 
<a name="l00614"></a>00614       <a class="code" href="c8051F020_8h.html#a309e03e7273466467388454231e8d6cf">T4CON</a> = 0x34;                <span class="comment">// timer 4 RX+TX mode</span>
<a name="l00615"></a>00615       <a class="code" href="c8051F020_8h.html#a5dc39f09755db2ee0bdce36d8d661184">RCAP4H</a> = 0xFF;
<a name="l00616"></a>00616       <a class="code" href="c8051F020_8h.html#aa91af59fde6f359c473f39ff8a14f164">RCAP4L</a> = baud_table[baud - 1];
<a name="l00617"></a>00617 
<a name="l00618"></a>00618       <a class="code" href="c8051F000_8h.html#a8fdc45702764ff95656d93523e16edbf">EIE2</a> |= 0x40;                <span class="comment">// enable serial interrupt</span>
<a name="l00619"></a>00619       <a class="code" href="c8051F000_8h.html#a3211e6a9c9555571d1bb384d3758506d">EIP2</a> &amp;= ~0x40;               <span class="comment">// serial interrupt low priority      </span>
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 <span class="preprocessor">#ifdef SCS_210</span>
<a name="l00622"></a>00622 <span class="preprocessor"></span>      uart1_init_buffer();
<a name="l00623"></a>00623 <span class="preprocessor">#endif</span>
<a name="l00624"></a>00624 <span class="preprocessor"></span>
<a name="l00625"></a>00625 <span class="preprocessor">#elif defined(CPU_C8051F120)       // 98 MHz</span>
<a name="l00626"></a>00626 <span class="preprocessor"></span>      <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a060ad197c4fa8f45488806c35ba3bc3b">UART1_PAGE</a>;
<a name="l00627"></a>00627       <a class="code" href="c8051F020_8h.html#a423bb65316001a377c38201366cff911">SCON1</a> = 0xD0;                <span class="comment">// Mode 3, 9 bit, receive enable</span>
<a name="l00628"></a>00628 
<a name="l00629"></a>00629       <a class="code" href="c8051F120_8h.html#adf48f71a31bb3012446e2fed7219a3d4">SFRPAGE</a> = <a class="code" href="c8051F120_8h.html#a415c58e2ffb94b7d8760bfaea8ffd48a">TIMER01_PAGE</a>;
<a name="l00630"></a>00630       <a class="code" href="c8051F000_8h.html#abb8213117f197b1af5887eb0c00bbfac">TMOD</a>  = (<a class="code" href="c8051F000_8h.html#abb8213117f197b1af5887eb0c00bbfac">TMOD</a> &amp; 0x0F)| 0x20; <span class="comment">// Timer 1 8-bit counter with auto reload</span>
<a name="l00631"></a>00631       <a class="code" href="c8051F000_8h.html#a22ee5a0902bed7b69b5238e2dd188e50">CKCON</a> = 0x02;                <span class="comment">// use SYSCLK/48 (needed by timer 0)</span>
<a name="l00632"></a>00632 
<a name="l00633"></a>00633       <a class="code" href="c8051F000_8h.html#a4ae730549ffdf484b18e051fcddbe8ff">TH1</a> = 0xF7;                  <span class="comment">// gives 113452 baud, neglegt &quot;baud&quot; parameter</span>
<a name="l00634"></a>00634       <a class="code" href="c8051F000_8h.html#a409af03b4cf307d532aa009188eeeece">TR1</a> = 1;                     <span class="comment">// start timer 1</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636       <a class="code" href="c8051F000_8h.html#a8fdc45702764ff95656d93523e16edbf">EIE2</a> |= 0x40;                <span class="comment">// enable serial interrupt</span>
<a name="l00637"></a>00637       <a class="code" href="c8051F000_8h.html#a3211e6a9c9555571d1bb384d3758506d">EIP2</a> &amp;= ~0x40;               <span class="comment">// serial interrupt low priority      </span>
<a name="l00638"></a>00638       uart1_init_buffer();
<a name="l00639"></a>00639 <span class="preprocessor">#endif</span>
<a name="l00640"></a>00640 <span class="preprocessor"></span>   }
<a name="l00641"></a>00641 
<a name="l00642"></a>00642    <a class="code" href="c8051F000_8h.html#ae524fa4918208f2da654a7887bd9a7d0">EA</a> = 1;                         <span class="comment">// general interrupt enable</span>
<a name="l00643"></a>00643 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4ae5ad65c961268051560516eeff623f"></a><!-- doxytag: member="mscbutil.c::watchdog_refresh" ref="a4ae5ad65c961268051560516eeff623f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_refresh </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00862">862</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>References <a class="el" href="c8051F000_8h_source.html#l00115">PCA0CPH4</a>, and <a class="el" href="c8051F000_8h_source.html#l00116">WDTCN</a>.</p>

<p>Referenced by <a class="el" href="mscbuser_8c_source.html#l00189">adc_read()</a>, <a class="el" href="subm__300_8c_source.html#l00181">check_lpt()</a>, <a class="el" href="subm__300_8c_source.html#l00224">check_rs485()</a>, <a class="el" href="mscbutil_8c_source.html#l00972">eeprom_read()</a>, <a class="el" href="mscbutil_8c_source.html#l01048">eeprom_write()</a>, <a class="el" href="subm__300_8c_source.html#l00313">main()</a>, <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>, and <a class="el" href="mscbmain_8c_source.html#l01361">yield()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00865"></a>00865          : <a class="code" href="embedded_2mscb_8h.html#a4ae5ad65c961268051560516eeff623f">watchdog_refresh</a>
<a name="l00866"></a>00866 
<a name="l00867"></a>00867   Purpose: Refresh watchdog, has to be called regularly, otherwise
<a name="l00868"></a>00868            the watchdog issues a reset
<a name="l00869"></a>00869 
<a name="l00870"></a>00870 \********************************************************************/
<a name="l00871"></a>00871 {
<a name="l00872"></a>00872 <span class="preprocessor">#ifdef USE_WATCHDOG</span>
<a name="l00873"></a>00873 <span class="preprocessor"></span>
<a name="l00874"></a>00874 <span class="preprocessor">#ifdef CPU_ADUC812</span>
<a name="l00875"></a>00875 <span class="preprocessor"></span>   WDR1 = 1;
<a name="l00876"></a>00876    WDR2 = 1;
<a name="l00877"></a>00877 <span class="preprocessor">#endif</span>
<a name="l00878"></a>00878 <span class="preprocessor"></span>
<a name="l00879"></a>00879 <span class="preprocessor">#ifdef CPU_CYGNAL</span>
<a name="l00880"></a>00880 <span class="preprocessor"></span>
<a name="l00881"></a>00881 <span class="preprocessor">#if defined(CPU_C8051F310) || defined(CPU_C8051F320)</span>
<a name="l00882"></a>00882 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#af7a9d79f2b6afa076f984a1f0b2b93b9">PCA0CPH4</a> = 0x00;
<a name="l00883"></a>00883 <span class="preprocessor">#else</span>
<a name="l00884"></a>00884 <span class="preprocessor"></span>   <a class="code" href="c8051F000_8h.html#a2eb7f8e96149deeec0f227384694807b">WDTCN</a> = 0xA5;
<a name="l00885"></a>00885 <span class="preprocessor">#endif</span>
<a name="l00886"></a>00886 <span class="preprocessor"></span>
<a name="l00887"></a>00887 <span class="preprocessor">#endif</span>
<a name="l00888"></a>00888 <span class="preprocessor"></span>
<a name="l00889"></a>00889 <span class="preprocessor">#endif</span>
<a name="l00890"></a>00890 <span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aab1037491179d86a89ac750947c0b1f1"></a><!-- doxytag: member="mscbutil.c::_flkey" ref="aab1037491179d86a89ac750947c0b1f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char idata <a class="el" href="mscbutil_8c.html#aab1037491179d86a89ac750947c0b1f1">_flkey</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbmain_8c_source.html#l00231">231</a> of file <a class="el" href="mscbmain_8c_source.html">mscbmain.c</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l01154">eeprom_erase()</a>, <a class="el" href="mscbutil_8c_source.html#l01212">eeprom_flash()</a>, <a class="el" href="mscbutil_8c_source.html#l01048">eeprom_write()</a>, <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>, and <a class="el" href="mscbmain_8c_source.html#l01361">yield()</a>.</p>

</div>
</div>
<a class="anchor" id="a7aa4e7d188b6702a7e5e361e85731948"></a><!-- doxytag: member="mscbutil.c::_n_sub_addr" ref="a7aa4e7d188b6702a7e5e361e85731948" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char idata <a class="el" href="scs__910_8c.html#a7aa4e7d188b6702a7e5e361e85731948">_n_sub_addr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hvr__200_8c_source.html#l00052">52</a> of file <a class="el" href="hvr__200_8c_source.html">hvr_200.c</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l00679">addr_node16()</a>, <a class="el" href="mscbmain_8c_source.html#l00665">addr_node8()</a>, <a class="el" href="mscbutil_8c_source.html#l01212">eeprom_flash()</a>, <a class="el" href="mscbutil_8c_source.html#l01248">eeprom_retrieve()</a>, and <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>.</p>

</div>
</div>
<a class="anchor" id="adae727c6b6e3f32ab30a4283876934ee"></a><!-- doxytag: member="mscbutil.c::_systime" ref="adae727c6b6e3f32ab30a4283876934ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="mscbutil_8c.html#adae727c6b6e3f32ab30a4283876934ee">_systime</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00647">647</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="a892b7eef2de4caa27c45e96ffa30f4de"></a><!-- doxytag: member="mscbutil.c::_var_size" ref="a892b7eef2de4caa27c45e96ffa30f4de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char idata <a class="el" href="mscbutil_8c.html#a892b7eef2de4caa27c45e96ffa30f4de">_var_size</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbmain_8c_source.html#l00233">233</a> of file <a class="el" href="mscbmain_8c_source.html">mscbmain.c</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l01212">eeprom_flash()</a>, <a class="el" href="mscbutil_8c_source.html#l01248">eeprom_retrieve()</a>, <a class="el" href="mscbmain_8c_source.html#l00704">interprete()</a>, and <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>.</p>

</div>
</div>
<a class="anchor" id="abf3e3406ecd519b9c4e49514602ed160"></a><!-- doxytag: member="mscbutil.c::crc8_data" ref="abf3e3406ecd519b9c4e49514602ed160" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char code <a class="el" href="mscb_8c.html#a29a5bc733da811e1a7a9002c882a5b35">crc8_data</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00152">152</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l00187">crc8()</a>, and <a class="el" href="mscbutil_8c_source.html#l00217">crc8_add()</a>.</p>

</div>
</div>
<a class="anchor" id="ad856acfe9ce335571b00a73df5e23e6b"></a><!-- doxytag: member="mscbutil.c::interval" ref="ad856acfe9ce335571b00a73df5e23e6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="mscbutil_8c.html#ad856acfe9ce335571b00a73df5e23e6b">interval</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00654">654</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>Referenced by <a class="el" href="midas_8c_source.html#l05147">cm_cleanup()</a>, <a class="el" href="midas_8c_source.html#l04756">cm_watchdog()</a>, <a class="el" href="mscbutil_8c_source.html#l00788">led_blink()</a>, <a class="el" href="mhist_8c_source.html#l00455">main()</a>, and <a class="el" href="mhttpd_8c_source.html#l06375">show_alarm_page()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bbf31031a6c2ee149fbd20038d8a542"></a><!-- doxytag: member="mscbutil.c::LCD_CLK" ref="a4bbf31031a6c2ee149fbd20038d8a542" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#a4bbf31031a6c2ee149fbd20038d8a542">LCD_CLK</a> = LCD ^ 7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01313">1313</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6f7b8910ae79d80979e7fdc7c3447287"></a><!-- doxytag: member="mscbutil.c::LCD_DB4" ref="a6f7b8910ae79d80979e7fdc7c3447287" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#a6f7b8910ae79d80979e7fdc7c3447287">LCD_DB4</a> = LCD ^ 4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01308">1308</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="a774e99ef68469e849e9059e62309dbeb"></a><!-- doxytag: member="mscbutil.c::LCD_DB5" ref="a774e99ef68469e849e9059e62309dbeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#a774e99ef68469e849e9059e62309dbeb">LCD_DB5</a> = LCD ^ 5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01309">1309</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="aca1000c839f92de6ac3cd5846e1a195c"></a><!-- doxytag: member="mscbutil.c::LCD_DB6" ref="aca1000c839f92de6ac3cd5846e1a195c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#aca1000c839f92de6ac3cd5846e1a195c">LCD_DB6</a> = LCD ^ 6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01310">1310</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="a63d732b925d0134c93fc7e6ac58e9549"></a><!-- doxytag: member="mscbutil.c::LCD_DB7" ref="a63d732b925d0134c93fc7e6ac58e9549" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#a63d732b925d0134c93fc7e6ac58e9549">LCD_DB7</a> = LCD ^ 7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01311">1311</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="abb53da0da8a6db186d596b1516a04914"></a><!-- doxytag: member="mscbutil.c::LCD_E" ref="abb53da0da8a6db186d596b1516a04914" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#abb53da0da8a6db186d596b1516a04914">LCD_E</a> = LCD ^ 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01301">1301</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac30b2cf84feb88b655161a764b11dab3"></a><!-- doxytag: member="mscbutil.c::LCD_P_W" ref="ac30b2cf84feb88b655161a764b11dab3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#ac30b2cf84feb88b655161a764b11dab3">LCD_P_W</a> = LCD ^ 6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01314">1314</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad5b44f63b60e3b566a81dfdc699a4667"></a><!-- doxytag: member="mscbutil.c::lcd_present" ref="ad5b44f63b60e3b566a81dfdc699a4667" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit <a class="el" href="mscbutil_8c.html#ad5b44f63b60e3b566a81dfdc699a4667">lcd_present</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01283">1283</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>Referenced by <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b8230ce63fa3e2ff3ae49fa4cda3315"></a><!-- doxytag: member="mscbutil.c::LCD_R_W" ref="a9b8230ce63fa3e2ff3ae49fa4cda3315" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#a9b8230ce63fa3e2ff3ae49fa4cda3315">LCD_R_W</a> = LCD ^ 2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01300">1300</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5799edeaf5ede6c962f8eda9922bfd00"></a><!-- doxytag: member="mscbutil.c::LCD_RS" ref="a5799edeaf5ede6c962f8eda9922bfd00" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#a5799edeaf5ede6c962f8eda9922bfd00">LCD_RS</a> = LCD ^ 3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01299">1299</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7117615912fe1f6414d18e528a4fbb3d"></a><!-- doxytag: member="mscbutil.c::LCD_SD" ref="a7117615912fe1f6414d18e528a4fbb3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sbit <a class="el" href="mscbutil_8c.html#a7117615912fe1f6414d18e528a4fbb3d">LCD_SD</a> = LCD ^ 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l01315">1315</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="a90c2645ea4040716a54e39a01a51c183"></a><!-- doxytag: member="mscbutil.c::leds" ref="a90c2645ea4040716a54e39a01a51c183" args="[N_LED]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }  <a class="el" href="mscbutil_8c.html#a90c2645ea4040716a54e39a01a51c183">leds</a>[N_LED]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a74b654271a172a244c844fb86277cd8a"></a><!-- doxytag: member="mscbutil.c::mode" ref="a74b654271a172a244c844fb86277cd8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="mscbutil_8c.html#a74b654271a172a244c844fb86277cd8a">mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00652">652</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>Referenced by <a class="el" href="odbedit_8c_source.html#l01415">command_loop()</a>, <a class="el" href="crate6__CAEN__TDC_2dl40x_8cpp_source.html#l00292">dl401_finished()</a>, <a class="el" href="crate6__CAEN__TDC_2dl40x_8cpp_source.html#l00472">dl403_runBit()</a>, <a class="el" href="crate6__CAEN__TDC_2dl40x_8cpp_source.html#l00479">dl403_running()</a>, <a class="el" href="mscbutil_8c_source.html#l00813">led_set()</a>, <a class="el" href="lrs2373_8c_source.html#l00038">lrs2373_set()</a>, and <a class="el" href="vmedrv_8c_source.html#l00351">vmedrv_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aa94ff7ddd304b9beb2f209b6174e180e"></a><!-- doxytag: member="mscbutil.c::n" ref="aa94ff7ddd304b9beb2f209b6174e180e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="mana__orig_8c.html#a228a29e4d9ddfb6bc4994455a321bdc4">n</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00655">655</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

</div>
</div>
<a class="anchor" id="abf06fefcfd184511a38e909e5a4111c0"></a><!-- doxytag: member="mscbutil.c::sys_info" ref="abf06fefcfd184511a38e909e5a4111c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structSYS__INFO.html">SYS_INFO</a> <a class="el" href="subm__300_8c.html#abf06fefcfd184511a38e909e5a4111c0">sys_info</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbmain_8c_source.html#l00239">239</a> of file <a class="el" href="mscbmain_8c_source.html">mscbmain.c</a>.</p>

</div>
</div>
<a class="anchor" id="a915eedaaa4284d1bac812f5c73940f2c"></a><!-- doxytag: member="mscbutil.c::timer" ref="a915eedaaa4284d1bac812f5c73940f2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="mscbutil_8c.html#a915eedaaa4284d1bac812f5c73940f2c">timer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mscbutil_8c_source.html#l00653">653</a> of file <a class="el" href="mscbutil_8c_source.html">mscbutil.c</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l00788">led_blink()</a>, and <a class="el" href="mscbutil_8c_source.html#l00719">led_int()</a>.</p>

</div>
</div>
<a class="anchor" id="a900ff3a8ccab65692c28b012e3824819"></a><!-- doxytag: member="mscbutil.c::variables" ref="a900ff3a8ccab65692c28b012e3824819" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMSCB__INFO__VAR.html">MSCB_INFO_VAR</a> code <a class="el" href="subm__300_8c.html#a900ff3a8ccab65692c28b012e3824819">variables</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hvr__200_8c_source.html#l00149">149</a> of file <a class="el" href="hvr__200_8c_source.html">hvr_200.c</a>.</p>

<p>Referenced by <a class="el" href="mscbutil_8c_source.html#l01212">eeprom_flash()</a>, <a class="el" href="mscbutil_8c_source.html#l01248">eeprom_retrieve()</a>, <a class="el" href="mscbmain_8c_source.html#l00704">interprete()</a>, <a class="el" href="lcd__menu_8c_source.html#l00276">lcd_menu()</a>, and <a class="el" href="mscbmain_8c_source.html#l00263">setup()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

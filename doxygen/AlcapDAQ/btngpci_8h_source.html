<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: midas/drivers/bus/bt617/btngpci.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>midas/drivers/bus/bt617/btngpci.h</h1><a href="btngpci_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">**</span>
<a name="l00003"></a>00003 <span class="comment">**      Filename:   btngpci.h</span>
<a name="l00004"></a>00004 <span class="comment">**</span>
<a name="l00005"></a>00005 <span class="comment">**      Purpose:    Bit 3 Next Generation (Data Blizzard) Adaptor include </span>
<a name="l00006"></a>00006 <span class="comment">**                  file used only by Data Blizzard Device Drivers.</span>
<a name="l00007"></a>00007 <span class="comment">**</span>
<a name="l00008"></a>00008 <span class="comment">**      $Revision: 1.1.1.1 $</span>
<a name="l00009"></a>00009 <span class="comment">**</span>
<a name="l00010"></a>00010 <span class="comment">******************************************************************************/</span>
<a name="l00011"></a>00011 <span class="comment">/*****************************************************************************</span>
<a name="l00012"></a>00012 <span class="comment">**</span>
<a name="l00013"></a>00013 <span class="comment">**        Copyright (c) 2000-02 by SBS Technologies, Inc.</span>
<a name="l00014"></a>00014 <span class="comment">**                     All Rights Reserved.</span>
<a name="l00015"></a>00015 <span class="comment">**              License governs use and distribution.</span>
<a name="l00016"></a>00016 <span class="comment">**</span>
<a name="l00017"></a>00017 <span class="comment">*****************************************************************************/</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef _BTNGPCI_H</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define _BTNGPCI_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#if defined(__vxworks)</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#endif </span><span class="comment">/* defined(__vxworks) */</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="comment">/*****************************************************************************</span>
<a name="l00027"></a>00027 <span class="comment">**</span>
<a name="l00028"></a>00028 <span class="comment">**  Macro indicating that this product is from the NanoBus family</span>
<a name="l00029"></a>00029 <span class="comment">**</span>
<a name="l00030"></a>00030 <span class="comment">*****************************************************************************/</span>
<a name="l00031"></a><a class="code" href="btngpci_8h.html#ab75cae0f524a687e30eb79841fdc919c">00031</a> <span class="preprocessor">#define BT_NBUS_FAMILY</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 <span class="comment">/* </span>
<a name="l00034"></a>00034 <span class="comment">** Interrupt queue for storing a list of interrupts that have occured</span>
<a name="l00035"></a>00035 <span class="comment">*/</span>
<a name="l00036"></a><a class="code" href="structbt__irq__q__t.html">00036</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00037"></a><a class="code" href="structbt__irq__q__t.html#a7768625d0f691f3e8a2614cc0cc607b5">00037</a>     <span class="keyword">volatile</span> <a class="code" href="structbt__data64__t.html">bt_data64_t</a>    head;       <span class="comment">/* queue index at which to add next message */</span>
<a name="l00038"></a><a class="code" href="structbt__irq__q__t.html#aba232737e3de6ce84bc8245bfb801495">00038</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>             <a class="code" href="FDCR_8h.html#a9f59b34b1f25fe00023291b678246bcc">length</a>;     <span class="comment">/* number of elements in queue buffer array */</span>
<a name="l00039"></a><a class="code" href="structbt__irq__q__t.html#a2093e2122b3970c8e92645db40329951">00039</a>     <span class="keyword">volatile</span> <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>    queue[1];   <span class="comment">/* queue buffer, is array of vectors */</span>
<a name="l00040"></a>00040 } <a class="code" href="structbt__irq__q__t.html">bt_irq_q_t</a>;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="comment">/*****************************************************************************</span>
<a name="l00043"></a>00043 <span class="comment">**</span>
<a name="l00044"></a>00044 <span class="comment">**  Logical Devices available. </span>
<a name="l00045"></a>00045 <span class="comment">**</span>
<a name="l00046"></a>00046 <span class="comment">**  Not all avalible on all adapters.</span>
<a name="l00047"></a>00047 <span class="comment">**</span>
<a name="l00048"></a>00048 <span class="comment">*****************************************************************************/</span>
<a name="l00049"></a><a class="code" href="btngpci_8h.html#a1ff3745f1dfa0df3e0327f85ae56d552">00049</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="btngpci_8h.html#a1ff3745f1dfa0df3e0327f85ae56d552">BT_AXSTYPS</a> {
<a name="l00050"></a>00050     <span class="comment">/*</span>
<a name="l00051"></a>00051 <span class="comment">    ** Original Unix definitions</span>
<a name="l00052"></a>00052 <span class="comment">    */</span>
<a name="l00053"></a><a class="code" href="btngpci_8h.html#a1ff3745f1dfa0df3e0327f85ae56d552ac1cb29e3f152e35b93a4e607412e8fd2">00053</a>     <a class="code" href="btngpci_8h.html#a1ff3745f1dfa0df3e0327f85ae56d552ac1cb29e3f152e35b93a4e607412e8fd2">BT_AXSIO</a>,                   <span class="comment">/* Access I/O registers */</span>
<a name="l00054"></a><a class="code" href="btngpci_8h.html#af34fc5038487b32df057a8a722c90be9">00054</a> <span class="preprocessor">#define BT_MIN_DEV BT_AXSIO     </span><span class="comment">/* Used for parameter checking */</span>
<a name="l00055"></a>00055     BT_AXSRDP,                  <span class="comment">/* Access Remote Dual Port RAM */</span>
<a name="l00056"></a><a class="code" href="btngpci_8h.html#aa167b491ae1b914b545901b8298cbf33">00056</a> <span class="preprocessor">#define BT_AXSDP BT_AXSRDP      </span><span class="comment">/* Old DP name references remote DP */</span>
<a name="l00057"></a>00057     BT_AXSRI,                   <span class="comment">/* Access Remote IO */</span>
<a name="l00058"></a>00058     BT_AXSRR,                   <span class="comment">/* Access Remote RAM */</span>
<a name="l00059"></a>00059     BT_AXSRE,                   <span class="comment">/* Access Remote RAM Extended */</span>
<a name="l00060"></a>00060     BT_AXS24,                   <span class="comment">/* Access Remote RAM 24-bit space */</span>
<a name="l00061"></a>00061     BT_AXSLM,                   <span class="comment">/* Access Local Memory (remote window) */</span>
<a name="l00062"></a>00062     BT_AXSLDP,                  <span class="comment">/* Access Local Dual Port RAM */</span>
<a name="l00063"></a>00063     BT_MAX_AXSTYPS,             <span class="comment">/* Maximum number of defined access types */</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <span class="comment">/* </span>
<a name="l00066"></a>00066 <span class="comment">    ** The following definition is used internally by some drivers </span>
<a name="l00067"></a>00067 <span class="comment">    */</span>
<a name="l00068"></a>00068     BT_DEV_RE = BT_AXSRE,       <span class="comment">/* Not to be used by application programs! */</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="comment">/*</span>
<a name="l00071"></a>00071 <span class="comment">    ** Mirror API definitions</span>
<a name="l00072"></a>00072 <span class="comment">    */</span>
<a name="l00073"></a>00073     BT_DEV_DP = BT_AXSRDP,      <span class="comment">/* Dual Port RAM */</span>
<a name="l00074"></a>00074     BT_DEV_LDP = BT_AXSLDP,     <span class="comment">/* Local Dual Port RAM */</span>
<a name="l00075"></a>00075     BT_DEV_RDP = BT_AXSRDP,     <span class="comment">/* Remote Dual Port RAM */</span>
<a name="l00076"></a>00076     BT_DEV_IO = BT_AXSRI,       <span class="comment">/* Remote bus A16 (I/O) space */</span>
<a name="l00077"></a>00077     BT_DEV_A24 = BT_AXS24,      <span class="comment">/* Remote bus A24 (short) space */</span>
<a name="l00078"></a>00078     BT_DEV_RR = BT_AXSRR,       <span class="comment">/* Remote bus A32 (standard) space */</span>
<a name="l00079"></a>00079     BT_DEV_LM = BT_AXSLM,       <span class="comment">/* Local Memory device */</span>
<a name="l00080"></a>00080     BT_DEV_NIO = <a class="code" href="btngpci_8h.html#a1ff3745f1dfa0df3e0327f85ae56d552ac1cb29e3f152e35b93a4e607412e8fd2">BT_AXSIO</a>,      <span class="comment">/* Adapter Node I/O registers */</span>
<a name="l00081"></a>00081     BT_DEV_DIAG = <a class="code" href="btngpci_8h.html#a1ff3745f1dfa0df3e0327f85ae56d552ac1cb29e3f152e35b93a4e607412e8fd2">BT_AXSIO</a>,     <span class="comment">/* For Internal Use Only! */</span>
<a name="l00082"></a>00082     
<a name="l00083"></a>00083     <span class="comment">/*</span>
<a name="l00084"></a>00084 <span class="comment">    ** Mirror API aliases</span>
<a name="l00085"></a>00085 <span class="comment">    */</span>
<a name="l00086"></a>00086     BT_DEV_A16 = BT_DEV_IO,
<a name="l00087"></a>00087     BT_DEV_A32 = BT_DEV_RR,
<a name="l00088"></a>00088     BT_DEV_MEM = BT_DEV_RR,
<a name="l00089"></a>00089     BT_DEV_DEFAULT = BT_DEV_DP,
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     BT_MAX_DEV = BT_MAX_AXSTYPS
<a name="l00092"></a>00092     
<a name="l00093"></a>00093 } <a class="code" href="btngpci_8h.html#a9f644f5689b8d88a0c013f044a01c0ad">bt_dev_t</a>;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="comment">/*****************************************************************************</span>
<a name="l00096"></a>00096 <span class="comment">**</span>
<a name="l00097"></a>00097 <span class="comment">**  Structure for parameter set or acquire </span>
<a name="l00098"></a>00098 <span class="comment">**</span>
<a name="l00099"></a>00099 <span class="comment">**  BIOC_PARAM &amp; BIOC_DEV_ATTRIB</span>
<a name="l00100"></a>00100 <span class="comment">**</span>
<a name="l00101"></a>00101 <span class="comment">*****************************************************************************/</span>
<a name="l00102"></a><a class="code" href="structbt__send__vector__t.html">00102</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00103"></a><a class="code" href="structbt__send__vector__t.html#a27f1d30af5b5aa4a0e446f6858cdca66">00103</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>    error;               <span class="comment">/* Error code */</span>
<a name="l00104"></a><a class="code" href="structbt__send__vector__t.html#ab251e9abdafc8265f93d21ac4e78ceb4">00104</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>    vector;              <span class="comment">/* Vector to send with irq */</span>
<a name="l00105"></a>00105                                         <span class="comment">/* Must be below BT_DRV_VECTOR_BASE */</span>
<a name="l00106"></a>00106 } <a class="code" href="structbt__send__vector__t.html">bt_send_vector_t</a>;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="comment">/*****************************************************************************</span>
<a name="l00109"></a>00109 <span class="comment">**</span>
<a name="l00110"></a>00110 <span class="comment">**  Structure for parameter set or acquire </span>
<a name="l00111"></a>00111 <span class="comment">**</span>
<a name="l00112"></a>00112 <span class="comment">**  BIOC_PARAM &amp; BIOC_DEV_ATTRIB</span>
<a name="l00113"></a>00113 <span class="comment">**</span>
<a name="l00114"></a>00114 <span class="comment">*****************************************************************************/</span>
<a name="l00115"></a><a class="code" href="structbt__param__t.html">00115</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00116"></a><a class="code" href="structbt__param__t.html#a80155cfc43c79ded57cc9b79c3e9ed73">00116</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>    error;               <span class="comment">/* Error code */</span>
<a name="l00117"></a><a class="code" href="structbt__param__t.html#a39f2eeff9c5bd0dd2675515249eb9034">00117</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>    <a class="code" href="mana_8cpp.html#a6dadda9a6f1103026d1d128fe203aa9a">param</a>;               <span class="comment">/* Parameter read or write - bt_info_t */</span>
<a name="l00118"></a><a class="code" href="structbt__param__t.html#a6b4e2f1f03aa85c88e6d52bfa3d08330">00118</a>     <a class="code" href="btwdef_8h.html#a1b6968d26166be9c869d4563a9f90eba">bt_devdata_t</a>   <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;               <span class="comment">/* Value to write or value read */</span>
<a name="l00119"></a>00119 } <a class="code" href="structbt__param__t.html">bt_param_t</a>;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">/*****************************************************************************</span>
<a name="l00122"></a>00122 <span class="comment">**</span>
<a name="l00123"></a>00123 <span class="comment">**  Test and Set IOCTL structure </span>
<a name="l00124"></a>00124 <span class="comment">**</span>
<a name="l00125"></a>00125 <span class="comment">**  BIOC_TAS</span>
<a name="l00126"></a>00126 <span class="comment">**</span>
<a name="l00127"></a>00127 <span class="comment">*****************************************************************************/</span>
<a name="l00128"></a><a class="code" href="structbt__tas__t.html">00128</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00129"></a><a class="code" href="structbt__tas__t.html#a4569e9f4b06179f4d4a033009b283e75">00129</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;              <span class="comment">/* Error code */</span>
<a name="l00130"></a><a class="code" href="structbt__tas__t.html#a2b4a33005aac10a6a7b36b91357c5342">00130</a>     <a class="code" href="btwdef_8h.html#a8535b215eb58636dc9ff48a6de424f04">bt_devaddr_t</a> <a class="code" href="lrs1821_8c.html#a83a7514b5202f841d4b7a22b2eaece9c">addr</a>;               <span class="comment">/* Address of byte to access */</span>
<a name="l00131"></a><a class="code" href="structbt__tas__t.html#a06a5fe574573553cf33295ed176482d1">00131</a>     <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>   result;             <span class="comment">/* Result:     0 = bit was clear */</span>
<a name="l00132"></a>00132 } <a class="code" href="structbt__tas__t.html">bt_tas_t</a>;                          <span class="comment">/*             1 = bit was set */</span>
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="btngpci_8h.html#a9ce5f1e5ddf4dedad6622388d942d439">00134</a> <span class="preprocessor">#define  BT_TAS_MSBIT 0x80</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a>00136 <span class="comment">/*****************************************************************************</span>
<a name="l00137"></a>00137 <span class="comment">**</span>
<a name="l00138"></a>00138 <span class="comment">**  Compare and swap IOCTL structure </span>
<a name="l00139"></a>00139 <span class="comment">**</span>
<a name="l00140"></a>00140 <span class="comment">**  BIOC_CAS</span>
<a name="l00141"></a>00141 <span class="comment">**</span>
<a name="l00142"></a>00142 <span class="comment">*****************************************************************************/</span>
<a name="l00143"></a><a class="code" href="structbt__cas__t.html">00143</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00144"></a><a class="code" href="structbt__cas__t.html#a15570b8700675024449492b031912c91">00144</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;          <span class="comment">/* Error code */</span>
<a name="l00145"></a><a class="code" href="structbt__cas__t.html#a0eb5f48eadd91177300e4244f119099d">00145</a>     <a class="code" href="btwdef_8h.html#a8535b215eb58636dc9ff48a6de424f04">bt_devaddr_t</a> <a class="code" href="lrs1821_8c.html#a83a7514b5202f841d4b7a22b2eaece9c">addr</a>;           <span class="comment">/* Address to check */</span>
<a name="l00146"></a><a class="code" href="structbt__cas__t.html#a41109520aff5d8e5c1f64a98b55b0f67">00146</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  cmp;            <span class="comment">/* Compare value */</span>
<a name="l00147"></a><a class="code" href="structbt__cas__t.html#a2850abc6803b8268a69b1376da611d1d">00147</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  swap;           <span class="comment">/* Swap value */</span>
<a name="l00148"></a><a class="code" href="structbt__cas__t.html#ad2cd63940126fef3bbcf853ca76acbb9">00148</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  len;            <span class="comment">/* Length of access (sizeof) parameter */</span>
<a name="l00149"></a>00149                                  <span class="comment">/* Valid values are BT_WIDTH_D?, not 64 */</span>
<a name="l00150"></a><a class="code" href="structbt__cas__t.html#af0754d27a44fa70e6a12b19f22f28a78">00150</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  result;         <span class="comment">/* Result of operation */</span>
<a name="l00151"></a>00151 } <a class="code" href="structbt__cas__t.html">bt_cas_t</a>;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="comment">/*****************************************************************************</span>
<a name="l00154"></a>00154 <span class="comment">**</span>
<a name="l00155"></a>00155 <span class="comment">**  ICBR thread register/unregister structure </span>
<a name="l00156"></a>00156 <span class="comment">**</span>
<a name="l00157"></a>00157 <span class="comment">**  BIOC_THREAD_REG &amp; BIOC_THREAD_UNREG</span>
<a name="l00158"></a>00158 <span class="comment">**</span>
<a name="l00159"></a>00159 <span class="comment">*****************************************************************************/</span>
<a name="l00160"></a><a class="code" href="structbt__thread__reg__t.html">00160</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00161"></a><a class="code" href="structbt__thread__reg__t.html#ab00a6f5b1c85da04953e918e40c358b6">00161</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;             <span class="comment">/* Error code */</span>
<a name="l00162"></a>00162     
<a name="l00163"></a>00163     <span class="comment">/* Returned from driver */</span>
<a name="l00164"></a><a class="code" href="structbt__thread__reg__t.html#ac0e12a1e1db10fc486ef60b2b6757fed">00164</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  unit;              <span class="comment">/* Unit number, library requires this */</span>
<a name="l00165"></a>00165                                     <span class="comment">/*   to do mmap of diag device */</span>
<a name="l00166"></a><a class="code" href="structbt__thread__reg__t.html#a45118c9fb0ddefd2f2562d943b02978b">00166</a>     <a class="code" href="structbt__data64__t.html">bt_data64_t</a>  thread_id;         <span class="comment">/* Driver level thread id */</span>
<a name="l00167"></a>00167     
<a name="l00168"></a>00168 } <a class="code" href="structbt__thread__reg__t.html">bt_thread_reg_t</a>;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="comment">/*****************************************************************************</span>
<a name="l00171"></a>00171 <span class="comment">**</span>
<a name="l00172"></a>00172 <span class="comment">**  ICBR thread add/delete structure </span>
<a name="l00173"></a>00173 <span class="comment">**</span>
<a name="l00174"></a>00174 <span class="comment">**  BIOC_THREAD_ADD &amp; BIOC_THREAD_DELETE</span>
<a name="l00175"></a>00175 <span class="comment">**</span>
<a name="l00176"></a>00176 <span class="comment">*****************************************************************************/</span>
<a name="l00177"></a><a class="code" href="structbt__thread__add__t.html">00177</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00178"></a><a class="code" href="structbt__thread__add__t.html#a91af9606e03ca855f3f09e24621f0140">00178</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;             <span class="comment">/* Error code */</span>
<a name="l00179"></a><a class="code" href="structbt__thread__add__t.html#af6863884029769d5c00f9bbf9d152c38">00179</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  irq_type;          <span class="comment">/* Irq type interrested in - bt_irq_t */</span>
<a name="l00180"></a><a class="code" href="structbt__thread__add__t.html#a126162963e05c59c9958a46b00d54907">00180</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  vector;            <span class="comment">/* Vector - not currently used by driver */</span>
<a name="l00181"></a><a class="code" href="structbt__thread__add__t.html#a55b9858ff29555802f83d853f71457da">00181</a>     <a class="code" href="structbt__data64__t.html">bt_data64_t</a>  thread_id;         <span class="comment">/* Driver level thread id */</span>
<a name="l00182"></a>00182     
<a name="l00183"></a>00183 } <a class="code" href="structbt__thread__add__t.html">bt_thread_add_t</a>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 <span class="comment">/*****************************************************************************</span>
<a name="l00186"></a>00186 <span class="comment">**</span>
<a name="l00187"></a>00187 <span class="comment">**  ICBR thread wait structure </span>
<a name="l00188"></a>00188 <span class="comment">**</span>
<a name="l00189"></a>00189 <span class="comment">**  BIOC_THREAD_WAIT</span>
<a name="l00190"></a>00190 <span class="comment">**</span>
<a name="l00191"></a>00191 <span class="comment">*****************************************************************************/</span>
<a name="l00192"></a><a class="code" href="structbt__thread__wait__t.html">00192</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00193"></a><a class="code" href="structbt__thread__wait__t.html#adde8f88474eddf6a77ff19d5db37b74e">00193</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;             <span class="comment">/* Error code */</span>
<a name="l00194"></a><a class="code" href="structbt__thread__wait__t.html#a37382adae5ad62f2f6e3ac90f8ef4789">00194</a>     <a class="code" href="structbt__data64__t.html">bt_data64_t</a>  thread_id;         <span class="comment">/* Driver level thread id */</span>
<a name="l00195"></a><a class="code" href="structbt__thread__wait__t.html#a56058b2c174e0edc703a751982ca2197">00195</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  wait_msec;         <span class="comment">/* Number of mSec to wait for irq */</span>
<a name="l00196"></a>00196                                     <span class="comment">/* First release only supports BT_NO_WAIT */</span>
<a name="l00197"></a>00197     
<a name="l00198"></a>00198 } <a class="code" href="structbt__thread__wait__t.html">bt_thread_wait_t</a>;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">/*****************************************************************************</span>
<a name="l00201"></a>00201 <span class="comment">**</span>
<a name="l00202"></a>00202 <span class="comment">**  HW Address Transfer </span>
<a name="l00203"></a>00203 <span class="comment">**</span>
<a name="l00204"></a>00204 <span class="comment">**  BIOC_HW_READ &amp; BIOC_HW_WRITE</span>
<a name="l00205"></a>00205 <span class="comment">**</span>
<a name="l00206"></a>00206 <span class="comment">*****************************************************************************/</span>
<a name="l00207"></a><a class="code" href="structbt__hw__xfer__t.html">00207</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00208"></a><a class="code" href="structbt__hw__xfer__t.html#adaea6cb8f2d7b8272050cfeef222b318">00208</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;             <span class="comment">/* Error code */</span>
<a name="l00209"></a><a class="code" href="structbt__hw__xfer__t.html#a59a257ac26c1885f193d673a0546b9a3">00209</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  local_hw_addr;     <span class="comment">/* Local bus address to xfer to/from */</span>
<a name="l00210"></a><a class="code" href="structbt__hw__xfer__t.html#a6c82d30673e707c8189686b59655be4f">00210</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  ldev_addr;         <span class="comment">/* Logical device address to xfer to/from */</span>
<a name="l00211"></a><a class="code" href="structbt__hw__xfer__t.html#a0f115715c69a2bf93455f758306258ea">00211</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  xfer_len;          <span class="comment">/* Number of bytes to transfer */</span>
<a name="l00212"></a>00212                                     <span class="comment">/* On return, number of bytes transferred */</span>
<a name="l00213"></a>00213     
<a name="l00214"></a>00214 } <a class="code" href="structbt__hw__xfer__t.html">bt_hw_xfer_t</a>;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="comment">/*****************************************************************************</span>
<a name="l00217"></a>00217 <span class="comment">**</span>
<a name="l00218"></a>00218 <span class="comment">**  Semaphore Take/Give </span>
<a name="l00219"></a>00219 <span class="comment">**</span>
<a name="l00220"></a>00220 <span class="comment">**  BIOC_SEMA_TAKE/BIOC_SEMA_GIVE</span>
<a name="l00221"></a>00221 <span class="comment">**</span>
<a name="l00222"></a>00222 <span class="comment">*****************************************************************************/</span>
<a name="l00223"></a><a class="code" href="structbt__sema__access__t.html">00223</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00224"></a><a class="code" href="structbt__sema__access__t.html#a649956785f5c6886cf4893d22f5c1cf7">00224</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;             <span class="comment">/* Error code */</span>
<a name="l00225"></a><a class="code" href="structbt__sema__access__t.html#af1bec5a18078c1265da833ea8781e0c3">00225</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  sema_reg;          <span class="comment">/* Which semaphore to take/give - bt_reg_t */</span>
<a name="l00226"></a><a class="code" href="structbt__sema__access__t.html#a8d47b8b5cb5b0a6690a8dc25b2167fab">00226</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  wait_msec;         <span class="comment">/* Number of mSec to wait for semaphore */</span>
<a name="l00227"></a>00227                                     <span class="comment">/* First release only supports BT_NO_WAIT */</span>
<a name="l00228"></a>00228     
<a name="l00229"></a>00229 } <a class="code" href="structbt__sema__access__t.html">bt_sema_access_t</a>;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="comment">/*****************************************************************************</span>
<a name="l00232"></a>00232 <span class="comment">**</span>
<a name="l00233"></a>00233 <span class="comment">**  Hardware Diagnostics </span>
<a name="l00234"></a>00234 <span class="comment">**</span>
<a name="l00235"></a>00235 <span class="comment">**  BIOC_LCARD_DIAG/BIOC_CABLE_DIAG/BIOC_RCARD_DIAG/BIOC_PAIR_DIAG</span>
<a name="l00236"></a>00236 <span class="comment">**</span>
<a name="l00237"></a>00237 <span class="comment">*****************************************************************************/</span>
<a name="l00238"></a><a class="code" href="btngpci_8h.html#a14e1e49c6641007a2f5db4da0459e5eb">00238</a> <span class="preprocessor">#define BT_DIAG_MAX_REV_INFO    30</span>
<a name="l00239"></a><a class="code" href="structbt__hw__diag__t.html">00239</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00240"></a><a class="code" href="structbt__hw__diag__t.html#aa667af9e31f2947ad61b216ce917af50">00240</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;             <span class="comment">/* Error code */</span>
<a name="l00241"></a><a class="code" href="structbt__hw__diag__t.html#abb74b3e3a68838eff254d1fdc77d6add">00241</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  line_number;      <span class="comment">/* Line number failure was discovered on */</span>
<a name="l00242"></a><a class="code" href="structbt__hw__diag__t.html#a8e5304d37748bee3cb393874651f371b">00242</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  r_ldev;            <span class="comment">/* Remote logical device to use during testing */</span>
<a name="l00243"></a><a class="code" href="structbt__hw__diag__t.html#ab67d26eff869129f1237e65f0dc73823">00243</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  r_addr;            <span class="comment">/* Remote address to use during testing */</span>
<a name="l00244"></a><a class="code" href="structbt__hw__diag__t.html#a7b3708ba78d41b82709a3b7336b2d565">00244</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  r_len;             <span class="comment">/* Size in bytes of remote resource to test */</span>
<a name="l00245"></a><a class="code" href="structbt__hw__diag__t.html#aedf6a9727a312e982a24e62c3edc186d">00245</a>     <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>   rev_info[<a class="code" href="btngpci_8h.html#a14e1e49c6641007a2f5db4da0459e5eb">BT_DIAG_MAX_REV_INFO</a>];      <span class="comment">/* Text string with file and revision number */</span>
<a name="l00246"></a>00246     
<a name="l00247"></a>00247 } <a class="code" href="structbt__hw__diag__t.html">bt_hw_diag_t</a>;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">/*****************************************************************************</span>
<a name="l00251"></a>00251 <span class="comment">**</span>
<a name="l00252"></a>00252 <span class="comment">**  Status structure </span>
<a name="l00253"></a>00253 <span class="comment">**</span>
<a name="l00254"></a>00254 <span class="comment">**  BIOC_RESET, BIOC_STATUS, BIOC_CLR_STATUS, BIOC_SETUP</span>
<a name="l00255"></a>00255 <span class="comment">**</span>
<a name="l00256"></a>00256 <span class="comment">*****************************************************************************/</span>
<a name="l00257"></a><a class="code" href="btngpci_8h.html#a1269de36f3661d25140c73d039e12ef9">00257</a> <span class="keyword">typedef</span> <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> <a class="code" href="btngpci_8h.html#a1269de36f3661d25140c73d039e12ef9">bt_status_t</a>;
<a name="l00258"></a><a class="code" href="btngpci_8h.html#ae4e3e1f7a96ca620987425d019e0d0f0">00258</a> <span class="preprocessor">#define BT_STATUS_ERR_SHFT    (24)</span>
<a name="l00259"></a>00259 <span class="preprocessor"></span>
<a name="l00260"></a>00260     <span class="comment">/* interface parity error */</span>
<a name="l00261"></a><a class="code" href="btngpci_8h.html#a97614f42af5b752fef3371e6b64f63d5">00261</a> <span class="preprocessor">#define BT_STATUS_PARITY      (LSR_PARITY_ERR&lt;&lt;BT_STATUS_ERR_SHFT)   </span>
<a name="l00262"></a>00262 <span class="preprocessor"></span>
<a name="l00263"></a>00263     <span class="comment">/* remote bus error */</span>
<a name="l00264"></a><a class="code" href="btngpci_8h.html#a6ea4f6c3c05edf3a0ab1ec8766fbcada">00264</a> <span class="preprocessor">#define BT_STATUS_REMBUS      (LSR_REMBUS_ERR&lt;&lt;BT_STATUS_ERR_SHFT)   </span>
<a name="l00265"></a>00265 <span class="preprocessor"></span>
<a name="l00266"></a>00266     <span class="comment">/* interface timeout */</span>
<a name="l00267"></a><a class="code" href="btngpci_8h.html#a66ec71ee8fd57783ebf9c0636772532c">00267</a> <span class="preprocessor">#define BT_STATUS_TIMEOUT     (LSR_TIMEOUT_ERR&lt;&lt;BT_STATUS_ERR_SHFT)</span>
<a name="l00268"></a>00268 <span class="preprocessor"></span>
<a name="l00269"></a>00269     <span class="comment">/* remote bus power or cable missing */</span>
<a name="l00270"></a><a class="code" href="btngpci_8h.html#a5522ab870cbbbca848fe02dd33e87faa">00270</a> <span class="preprocessor">#define BT_STATUS_POWER       (LSR_NO_CONNECT&lt;&lt;BT_STATUS_ERR_SHFT)</span>
<a name="l00271"></a>00271 <span class="preprocessor"></span>
<a name="l00272"></a><a class="code" href="btngpci_8h.html#a3e88deab695f960fc786a09442dd8d3c">00272</a> <span class="preprocessor">#define BT_STATUS_RRESET      (1&lt;&lt;19)   </span><span class="comment">/* remote bus was reset */</span>
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="btngpci_8h.html#af6fd50259f13cb4ded6fb7eedc1e076c">00274</a> <span class="preprocessor">#define BT_STATUS_MASK        (BT_STATUS_TIMEOUT|BT_STATUS_POWER|BT_STATUS_PARITY|BT_STATUS_REMBUS)</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span>
<a name="l00276"></a>00276 <span class="comment">/* Old names to be obsoleted, use above names for new development */</span>
<a name="l00277"></a><a class="code" href="btngpci_8h.html#ad19e5038741738242a92b692e8b82d9f">00277</a> <span class="preprocessor">#define BT_INTR_XMITR      (1&lt;&lt;17)      </span><span class="comment">/* Not used anymore */</span>
<a name="l00278"></a><a class="code" href="btngpci_8h.html#a3b70caa35d6490e8e1b0daf3783717d8">00278</a> <span class="preprocessor">#define BT_INTR_OVRRUN     (1&lt;&lt;16)      </span><span class="comment">/* Not used anymore */</span>
<a name="l00279"></a><a class="code" href="btngpci_8h.html#ae23e27d010fd788ac33847015a0b22fe">00279</a> <span class="preprocessor">#define BT_INTR_RRESET     BT_STATUS_RRESET  </span>
<a name="l00280"></a><a class="code" href="btngpci_8h.html#a54ee7d3e9732a48783bac37b4d6a1e4e">00280</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_INTR_POWER      BT_STATUS_POWER   </span>
<a name="l00281"></a><a class="code" href="btngpci_8h.html#aabcb9f1613ad015c1087eb2b7d0b0e56">00281</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_INTR_TIMEOUT    BT_STATUS_TIMEOUT </span>
<a name="l00282"></a><a class="code" href="btngpci_8h.html#a993b19a3d4325569673b757c8efddab0">00282</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_INTR_REMBUS     BT_STATUS_REMBUS  </span>
<a name="l00283"></a><a class="code" href="btngpci_8h.html#a40bb5e9faa7b9c690cf7923e1e241f97">00283</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_INTR_PARITY     BT_STATUS_PARITY  </span>
<a name="l00284"></a><a class="code" href="btngpci_8h.html#a915c3c7865343cf7f58fbe6a91108c02">00284</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_INTR_ERR_SHFT   BT_STATUS_ERR_SHFT</span>
<a name="l00285"></a>00285 <span class="preprocessor"></span>
<a name="l00286"></a>00286 <span class="comment">/*****************************************************************************</span>
<a name="l00287"></a>00287 <span class="comment">**</span>
<a name="l00288"></a>00288 <span class="comment">**  Bind structure </span>
<a name="l00289"></a>00289 <span class="comment">**</span>
<a name="l00290"></a>00290 <span class="comment">**  BIOC_BIND, BIOC_UNBIND</span>
<a name="l00291"></a>00291 <span class="comment">**  BIOC_HW_BIND, BIOC_HW_UNBIND</span>
<a name="l00292"></a>00292 <span class="comment">**</span>
<a name="l00293"></a>00293 <span class="comment">*****************************************************************************/</span>
<a name="l00294"></a><a class="code" href="structbt__bind__d.html">00294</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbt__bind__d.html">bt_bind_d</a> {
<a name="l00295"></a><a class="code" href="structbt__bind__d.html#a08381efa6d59624198aefb5b2690f3fe">00295</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>   <a class="code" href="structbt__bind__d.html#a08381efa6d59624198aefb5b2690f3fe">error</a>;        <span class="comment">/* Error code  */</span>
<a name="l00296"></a><a class="code" href="structbt__bind__d.html#ad3bfa6de3ba0046f121b8ecf85fc1eaf">00296</a>     <a class="code" href="btwdef_8h.html#a8535b215eb58636dc9ff48a6de424f04">bt_devaddr_t</a>  <a class="code" href="structbt__bind__d.html#ad3bfa6de3ba0046f121b8ecf85fc1eaf">host_addr</a>;    <span class="comment">/* Virtual address of user buffer to bind */</span>
<a name="l00297"></a>00297                                 <span class="comment">/*    or physical bus address for HW_BIND */</span>
<a name="l00298"></a><a class="code" href="structbt__bind__d.html#aa1e9f33522f6a8dc9b55cf1565530bc3">00298</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>   <a class="code" href="structbt__bind__d.html#aa1e9f33522f6a8dc9b55cf1565530bc3">length</a>;       <span class="comment">/* Length of buffer to bind in bytes */</span>
<a name="l00299"></a><a class="code" href="structbt__bind__d.html#a48d40bf30d50e5ebfa72960c22973172">00299</a>     <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>    <a class="code" href="structbt__bind__d.html#a48d40bf30d50e5ebfa72960c22973172">nowait</a>;       <span class="comment">/* FALSE: wait if resources unavailable */</span>
<a name="l00300"></a>00300                                 <span class="comment">/* TRUE: return errno = EBUSY, don&apos;t wait */</span>
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     <span class="comment">/* </span>
<a name="l00303"></a>00303 <span class="comment">    **  Fields below are written by the driver if binding succeeds.</span>
<a name="l00304"></a>00304 <span class="comment">    */</span> 
<a name="l00305"></a><a class="code" href="structbt__bind__d.html#a85683bf3d2ac80798760c4a4a68361ee">00305</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  <a class="code" href="structbt__bind__d.html#a85683bf3d2ac80798760c4a4a68361ee">phys_addr</a>;     <span class="comment">/* 16 Mbyte offset in VMEbus remote RAM */</span>
<a name="l00306"></a>00306                                 <span class="comment">/*   window to access to reach buffer */</span>
<a name="l00307"></a>00307                                 <span class="comment">/*   Should be BT_BIND_NO_CARE if specific */</span>
<a name="l00308"></a>00308                                 <span class="comment">/*   alignment is not required */</span>
<a name="l00309"></a><a class="code" href="btngpci_8h.html#abdb266106c1b3a9865a93affe9f410be">00309</a> <span class="preprocessor">#define BT_BIND_NO_CARE         (0xffffffff)</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span>
<a name="l00311"></a>00311     <span class="comment">/* </span>
<a name="l00312"></a>00312 <span class="comment">    ** Following information is for internal device driver use only!</span>
<a name="l00313"></a>00313 <span class="comment">    */</span> 
<a name="l00314"></a><a class="code" href="structbt__bind__d.html#a6da1c35a1578355aeb21ccb18b4fb763">00314</a>     <a class="code" href="btwdef_8h.html#a8535b215eb58636dc9ff48a6de424f04">bt_devaddr_t</a> <a class="code" href="structbt__bind__d.html#a6da1c35a1578355aeb21ccb18b4fb763">sysinfo_p</a>;      <span class="comment">/* Pointer to internal system information */</span>
<a name="l00315"></a>00315      
<a name="l00316"></a>00316 } <a class="code" href="structbt__bind__d.html">bt_bind_t</a>;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="comment">/*****************************************************************************</span>
<a name="l00319"></a>00319 <span class="comment">**</span>
<a name="l00320"></a>00320 <span class="comment">**  Adaptor register access stucture </span>
<a name="l00321"></a>00321 <span class="comment">**</span>
<a name="l00322"></a>00322 <span class="comment">**  BIOC_IOREG</span>
<a name="l00323"></a>00323 <span class="comment">**</span>
<a name="l00324"></a>00324 <span class="comment">*****************************************************************************/</span>
<a name="l00325"></a><a class="code" href="structbt__ioaccess__t.html">00325</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00326"></a><a class="code" href="structbt__ioaccess__t.html#a350d2d4ade26b2105e418e90c4fe3677">00326</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>        error;                <span class="comment">/* Error code */</span>
<a name="l00327"></a><a class="code" href="structbt__ioaccess__t.html#a6c52f3fa073a042d7ec4e823ad3551ff">00327</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>        operation;            <span class="comment">/* one of enum BT_ACCESS */</span> 
<a name="l00328"></a>00328                                              <span class="comment">/* use enum BT_ACCESS values */</span>
<a name="l00329"></a><a class="code" href="structbt__ioaccess__t.html#ad4fd35c532a7c9d96e6bf665b808e327">00329</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>        <a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;               <span class="comment">/* Appropriate register offset */</span>
<a name="l00330"></a>00330                                              <span class="comment">/* use enum BT_REGISTERS values*/</span>
<a name="l00331"></a><a class="code" href="structbt__ioaccess__t.html#acf5eee22846014d0415896fd8a553f80">00331</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>        <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;                <span class="comment">/* Value to write or one-shot */</span>
<a name="l00332"></a>00332 } <a class="code" href="structbt__ioaccess__t.html">bt_ioaccess_t</a>;
<a name="l00333"></a>00333 
<a name="l00334"></a>00334 <span class="comment">/*****************************************************************************</span>
<a name="l00335"></a>00335 <span class="comment">**</span>
<a name="l00336"></a>00336 <span class="comment">**  PCI configuration register access stucture </span>
<a name="l00337"></a>00337 <span class="comment">**</span>
<a name="l00338"></a>00338 <span class="comment">**  BIOC_PCFG</span>
<a name="l00339"></a>00339 <span class="comment">**</span>
<a name="l00340"></a>00340 <span class="comment">*****************************************************************************/</span>
<a name="l00341"></a><a class="code" href="structbt__pcfg__access__t.html">00341</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00342"></a><a class="code" href="structbt__pcfg__access__t.html#af899c222d1b4e47a21f6fa9df2959f3b">00342</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         error;      <span class="comment">/* Error code */</span>
<a name="l00343"></a><a class="code" href="structbt__pcfg__access__t.html#ae51e7e0ca6e02a9c425b8b77b58cced3">00343</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         operation;  <span class="comment">/* one of enum BT_ACCESS */</span> 
<a name="l00344"></a>00344                                     <span class="comment">/* use enum BT_ACCESS values */</span>
<a name="l00345"></a><a class="code" href="structbt__pcfg__access__t.html#a5f85a708483b41d421e79bf202804297">00345</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         bus;        <span class="comment">/* Bus number (0 - 255) NOT supported yet */</span>
<a name="l00346"></a><a class="code" href="structbt__pcfg__access__t.html#a872cb979403b772b59826bdca22b85ee">00346</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         device;     <span class="comment">/* Device number (0 - 15) */</span>
<a name="l00347"></a><a class="code" href="structbt__pcfg__access__t.html#abf62c9c9d59bfc021d3244f7ac1c4665">00347</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         function;   <span class="comment">/* Function number (0 - 7) */</span>
<a name="l00348"></a><a class="code" href="structbt__pcfg__access__t.html#ad0441833c511ff43dc30776dd1eb580b">00348</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         <a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a>;       <span class="comment">/* Access width (1, 2 or 4) */</span>
<a name="l00349"></a><a class="code" href="structbt__pcfg__access__t.html#aa9142245d2291d872be06ddd07ad47d6">00349</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         <a class="code" href="mgd_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;     <span class="comment">/* Configuration register offset */</span>
<a name="l00350"></a><a class="code" href="structbt__pcfg__access__t.html#ac52e83d1e7bbf9625422f4be7e4aa2e1">00350</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;      <span class="comment">/* Value to write or value read */</span>
<a name="l00351"></a><a class="code" href="structbt__pcfg__access__t.html#a1a7e1baa40c1ebd2bb52fc89f812c2c7">00351</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         type0;      <span class="comment">/* TRUE or FALSE, NOT supported yet */</span>
<a name="l00352"></a>00352 } <a class="code" href="structbt__pcfg__access__t.html">bt_pcfg_access_t</a>;
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 <span class="comment">/*****************************************************************************</span>
<a name="l00355"></a>00355 <span class="comment">**</span>
<a name="l00356"></a>00356 <span class="comment">**  Adjustable driver parameters.  </span>
<a name="l00357"></a>00357 <span class="comment">**</span>
<a name="l00358"></a>00358 <span class="comment">**  Not all are supported on each platform.</span>
<a name="l00359"></a>00359 <span class="comment">**</span>
<a name="l00360"></a>00360 <span class="comment">**  Use with bt_param_t structure (BIOC_PARAM &amp; BIOC_DEV_ATTRIB)</span>
<a name="l00361"></a>00361 <span class="comment">**</span>
<a name="l00362"></a>00362 <span class="comment">**  #defined names are obsolete and should not be used.  They are for</span>
<a name="l00363"></a>00363 <span class="comment">**  compatability only.  Use BT_INFO_ names for new development.</span>
<a name="l00364"></a>00364 <span class="comment">**</span>
<a name="l00365"></a>00365 <span class="comment">*****************************************************************************/</span>
<a name="l00366"></a><a class="code" href="btngpci_8h.html#af0c335135065f834d9e8d865b81715ca">00366</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="btngpci_8h.html#af0c335135065f834d9e8d865b81715ca">param_valus</a> {
<a name="l00367"></a>00367     <span class="comment">/*</span>
<a name="l00368"></a>00368 <span class="comment">    ** Mirror API info parameters </span>
<a name="l00369"></a>00369 <span class="comment">    */</span>
<a name="l00370"></a><a class="code" href="btngpci_8h.html#af0c335135065f834d9e8d865b81715caa231929bd109e19b158e71c866435c37b">00370</a>     <a class="code" href="btngpci_8h.html#af0c335135065f834d9e8d865b81715caa231929bd109e19b158e71c866435c37b">BT_MIN_INFO</a>,                <span class="comment">/* Range checking only */</span>
<a name="l00371"></a><a class="code" href="btngpci_8h.html#adf770fe2eec438e3758ffe905dbae208">00371</a> <span class="preprocessor">#define INVALID                 BT_MIN_INFO</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span>
<a name="l00373"></a>00373     BT_INFO_BLOCK,              <span class="comment">/* Can use BLT mode: TRUE/FALSE */</span>
<a name="l00374"></a><a class="code" href="btngpci_8h.html#a703c404f42ed9d748e11f85e5fe90990">00374</a> <span class="preprocessor">#define DMA_BLOCK               BT_INFO_BLOCK</span>
<a name="l00375"></a>00375 <span class="preprocessor"></span>
<a name="l00376"></a>00376     BT_INFO_PAUSE,              <span class="comment">/* Set pause mode for DMA: TRUE/FALSE */</span>
<a name="l00377"></a><a class="code" href="btngpci_8h.html#ab40a430c18e16ac291ab67caf4fa5ed9">00377</a> <span class="preprocessor">#define DMA_PAUSE               BT_INFO_PAUSE</span>
<a name="l00378"></a>00378 <span class="preprocessor"></span>
<a name="l00379"></a>00379     BT_INFO_DATAWIDTH,          <span class="comment">/* Maximum access width allowed on a transfer */</span>
<a name="l00380"></a><a class="code" href="btngpci_8h.html#af55149bc1f05cf18af067a302e31e3f9">00380</a> <span class="preprocessor">#define DATA_SIZE               BT_INFO_DATAWIDTH</span>
<a name="l00381"></a>00381 <span class="preprocessor"></span>
<a name="l00382"></a>00382     BT_INFO_DMA_AMOD,           <span class="comment">/* Address Modifier to use for DMA */</span>
<a name="l00383"></a><a class="code" href="btngpci_8h.html#a37c7c7f74c317ff9669d1c7e19d46212">00383</a> <span class="preprocessor">#define DMA_ADDR_MOD            BT_INFO_DMA_AMOD</span>
<a name="l00384"></a>00384 <span class="preprocessor"></span>
<a name="l00385"></a>00385     BT_INFO_PIO_AMOD,           <span class="comment">/* Address Modifier to use for PIO */</span>
<a name="l00386"></a><a class="code" href="btngpci_8h.html#af582a6ac303c4905f06c6f8950a9bda3">00386</a> <span class="preprocessor">#define PIO_ADDR_MOD            BT_INFO_PIO_AMOD</span>
<a name="l00387"></a>00387 <span class="preprocessor"></span>
<a name="l00388"></a>00388     BT_INFO_MMAP_AMOD,          <span class="comment">/* Address Modifier to use for MMAP */</span>
<a name="l00389"></a><a class="code" href="btngpci_8h.html#a2bd490936661a9b502d8a9d075d012c6">00389</a> <span class="preprocessor">#define MMAP_ADDR_MOD           BT_INFO_MMAP_AMOD</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>
<a name="l00391"></a>00391     BT_INFO_SWAP,               <span class="comment">/* Swapping value to use for logical dev */</span>
<a name="l00392"></a><a class="code" href="btngpci_8h.html#a5e0bf55711d2a77c596409ee9cae58a9">00392</a> <span class="preprocessor">#define SWAP_BITS               BT_INFO_SWAP</span>
<a name="l00393"></a>00393 <span class="preprocessor"></span>
<a name="l00394"></a>00394     BT_INFO_DMA_THRESHOLD,      <span class="comment">/* Minimum length before we attempt DMA */</span>
<a name="l00395"></a><a class="code" href="btngpci_8h.html#a4679d8ea8690999a6c6c7c0cb245c879">00395</a> <span class="preprocessor">#define THRESHOLD               BT_INFO_DMA_THRESHOLD</span>
<a name="l00396"></a>00396 <span class="preprocessor"></span>
<a name="l00397"></a>00397     BT_INFO_DMA_POLL_CEILING,   <span class="comment">/* Maximum length for polled mode DMA. */</span>
<a name="l00398"></a><a class="code" href="btngpci_8h.html#acf04d4d90f65a82baa0dc49997632654">00398</a> <span class="preprocessor">#define DMA_POLL_SIZE           BT_INFO_DMA_POLL_CEILING</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span>
<a name="l00400"></a>00400     BT_INFO_DMA_WATCHDOG,          <span class="comment">/* Watchdog timer for DMA, default 5 seconds */</span>
<a name="l00401"></a><a class="code" href="btngpci_8h.html#a61f5c5c660ae205189f34e6f9b2e9cd1">00401</a> <span class="preprocessor">#define DMA_TIMEOUT             BT_INFO_DMA_WATCHDOG</span>
<a name="l00402"></a>00402 <span class="preprocessor"></span>
<a name="l00403"></a>00403     BT_INFO_TRACE,                  <span class="comment">/* Software tracing level */</span>
<a name="l00404"></a><a class="code" href="btngpci_8h.html#ac48f056a20ddc9ddc08b6f43d082cbe4">00404</a> <span class="preprocessor">#define TRACE_LVL               BT_INFO_TRACE</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span>
<a name="l00406"></a>00406     BT_INFO_RESET_DELAY,    <span class="comment">/* Wait time for remote reset to complete */</span>
<a name="l00407"></a><a class="code" href="btngpci_8h.html#ab70edc5bbf92cb21680f3d6b11275d68">00407</a> <span class="preprocessor">#define RESET_TIMER         BT_INFO_RESET_DELAY</span>
<a name="l00408"></a>00408 <span class="preprocessor"></span>
<a name="l00409"></a>00409     BT_INFO_USE_PT,         <span class="comment">/* Send PT programmed irqs instead of PR */</span>
<a name="l00410"></a>00410 
<a name="l00411"></a>00411     BT_INFO_INC_INHIB,      <span class="comment">/* Set increment inhibit for DMA: TRUE/FALSE */</span>
<a name="l00412"></a><a class="code" href="btngpci_8h.html#a397a54272526882a326279107c5891c6">00412</a> <span class="preprocessor">#define DMA_INC_INHIB       BT_INFO_INC_INHIB</span>
<a name="l00413"></a>00413 <span class="preprocessor"></span>
<a name="l00414"></a>00414     BT_INFO_ICBR_PRIO,     <span class="comment">/* Task priority of interrupt dispatch, vxWorks only */</span>
<a name="l00415"></a>00415     
<a name="l00416"></a>00416     BT_INFO_ICBR_STACK,     <span class="comment">/* Task stack size for interrupt dispatch, vxWorks only */</span>
<a name="l00417"></a>00417 
<a name="l00418"></a>00418     BT_INFO_GEMS_SWAP,          <span class="comment">/* Enable GEMS swapping, GEMS Only */</span>
<a name="l00419"></a>00419     
<a name="l00420"></a>00420     BT_INFO_LOC_PN,         <span class="comment">/* Part number of local card */</span>
<a name="l00421"></a><a class="code" href="btngpci_8h.html#a100ed059e9b439642951d77fe587517a">00421</a> <span class="preprocessor">#define BT_INFO_GET_BASE    BT_INFO_LOC_PN</span>
<a name="l00422"></a><a class="code" href="btngpci_8h.html#aedba08e2c81493995d1a90b4eb597ef1">00422</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_LDEV_TYPE       BT_INFO_LOC_PN</span>
<a name="l00423"></a>00423 <span class="preprocessor"></span>
<a name="l00424"></a>00424     BT_INFO_REM_PN,         <span class="comment">/* Part number of remote card */</span>
<a name="l00425"></a><a class="code" href="btngpci_8h.html#a2e4624dfb3745360dc1978902c9272da">00425</a> <span class="preprocessor">#define INF_RDEV_TYPE       BT_INFO_REM_PN</span>
<a name="l00426"></a>00426 <span class="preprocessor"></span>
<a name="l00427"></a>00427     BT_INFO_LM_SIZE,        <span class="comment">/* Size of local memory device */</span>
<a name="l00428"></a><a class="code" href="btngpci_8h.html#afcfb6a5dd9a26a5df6cc2779eeafe0b1">00428</a> <span class="preprocessor">#define INF_LM_SIZE         BT_INFO_LM_SIZE</span>
<a name="l00429"></a>00429 <span class="preprocessor"></span>
<a name="l00430"></a>00430     BT_INFO_ICBR_Q_SIZE,    <span class="comment">/* Size of the interrupt dispatch queue */</span>
<a name="l00431"></a><a class="code" href="btngpci_8h.html#ad424566d23c7625432d38a53c0e9e46d">00431</a> <span class="preprocessor">#define INF_ICBR_Q_SIZE     BT_INFO_ICBR_Q_SIZE</span>
<a name="l00432"></a>00432 <span class="preprocessor"></span>
<a name="l00433"></a>00433     BT_INFO_BIND_ALIGN,     <span class="comment">/* Alignment required for bt_bind() buffers */</span>
<a name="l00434"></a><a class="code" href="btngpci_8h.html#a6f8627ced43a597271436b0355b5df6a">00434</a> <span class="preprocessor">#define INF_BIND_ALIGN      BT_INFO_BIND_ALIGN</span>
<a name="l00435"></a>00435 <span class="preprocessor"></span>
<a name="l00436"></a>00436     BT_INFO_BIND_SIZE,      <span class="comment">/* Maximum size of a single bound buffer */</span>
<a name="l00437"></a><a class="code" href="btngpci_8h.html#ab96247d4211fb73d1f9373f1ea3ef4da">00437</a> <span class="preprocessor">#define INF_BIND_SIZE       BT_INFO_BIND_SIZE</span>
<a name="l00438"></a>00438 <span class="preprocessor"></span>
<a name="l00439"></a>00439     BT_INFO_BIND_COUNT,     <span class="comment">/* Number of concurrent bind requests allowed */</span>
<a name="l00440"></a><a class="code" href="btngpci_8h.html#a21142356ef0e3d87fe9ff230a8ccfc90">00440</a> <span class="preprocessor">#define INF_BIND_COUNT      BT_INFO_BIND_COUNT</span>
<a name="l00441"></a>00441 <span class="preprocessor"></span>
<a name="l00442"></a>00442     BT_INFO_TRANSMITTER,    <span class="comment">/* TRUE = transmitter mode; FALSE = receiver mode */</span>
<a name="l00443"></a><a class="code" href="btngpci_8h.html#aa3f37e2bd93bb80765887f084060a48b">00443</a> <span class="preprocessor">#define INF_TRANSMITTER     BT_INFO_TRANSMITTER</span>
<a name="l00444"></a>00444 <span class="preprocessor"></span>
<a name="l00445"></a>00445     BT_INFO_UNIT_NUM,       <span class="comment">/* Unit number (0..15) */</span>
<a name="l00446"></a><a class="code" href="btngpci_8h.html#a3e03890186578953a920b415ecb50a24">00446</a> <span class="preprocessor">#define INF_UNIT            BT_INFO_UNIT_NUM</span>
<a name="l00447"></a>00447 <span class="preprocessor"></span>
<a name="l00448"></a>00448     BT_INFO_KMEM_SIZE,      <span class="comment">/* Total kernel memory used in bytes */</span>
<a name="l00449"></a><a class="code" href="btngpci_8h.html#a0cc8c70671767e38df314937e8f99ca8">00449</a> <span class="preprocessor">#define INF_TOTAL_KMEM      BT_INFO_KMEM_SIZE</span>
<a name="l00450"></a>00450 <span class="preprocessor"></span>
<a name="l00451"></a>00451     BT_INFO_ERROR_COUNT,    <span class="comment">/* Number of error interrupts received */</span>
<a name="l00452"></a><a class="code" href="btngpci_8h.html#a9fa6692d77f527a87af27cac9388aa81">00452</a> <span class="preprocessor">#define BT_INFO_SIG_ERR     BT_INFO_ERROR_COUNT</span>
<a name="l00453"></a><a class="code" href="btngpci_8h.html#aa2da679635099ab13c54062bb9d417b3">00453</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_SIG_ERR         BT_INFO_ERROR_COUNT</span>
<a name="l00454"></a>00454 <span class="preprocessor"></span>
<a name="l00455"></a>00455     BT_INFO_EVENT_COUNT,    <span class="comment">/* Number of events (prog irqs) received */</span>
<a name="l00456"></a><a class="code" href="btngpci_8h.html#a12698168851e2fa91354e75bff767273">00456</a> <span class="preprocessor">#define BT_INFO_SIG_PRG     BT_INFO_EVENT_COUNT</span>
<a name="l00457"></a><a class="code" href="btngpci_8h.html#a1723d1f620d7730c383800743bd3d89e">00457</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_SIG_PRG         BT_INFO_EVENT_COUNT</span>
<a name="l00458"></a>00458 <span class="preprocessor"></span>
<a name="l00459"></a>00459     BT_INFO_TOTAL_COUNT,    <span class="comment">/* Total number of intterunts */</span>
<a name="l00460"></a><a class="code" href="btngpci_8h.html#a638e18adfe894106131549ae24f65d8f">00460</a> <span class="preprocessor">#define BT_INFO_SIG_TOT     BT_INFO_TOTAL_COUNT</span>
<a name="l00461"></a><a class="code" href="btngpci_8h.html#ad8666e538a08591e64e3838b0f272526">00461</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_SIG_TOT         BT_INFO_TOTAL_COUNT</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span>
<a name="l00463"></a>00463     BT_INFO_IACK_COUNT,     <span class="comment">/* Total number of IACK intterunts */</span>
<a name="l00464"></a><a class="code" href="btngpci_8h.html#a0af5a7a4641cebaebb5fcbbf267c08c9">00464</a> <span class="preprocessor">#define BT_INFO_SIG_IACK    BT_INFO_IACK_COUNT</span>
<a name="l00465"></a><a class="code" href="btngpci_8h.html#aae4b3d0a42badf60404fd630981f5807">00465</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_SIG_IACK        BT_INFO_IACK_COUNT</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>
<a name="l00467"></a>00467     BT_INFO_ICBR_Q_START,   <span class="comment">/* starting memory address of icbr_q, vxWorks only */</span>
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     INF_LOG_STAT,
<a name="l00470"></a><a class="code" href="btngpci_8h.html#afedf19fad778da2ac61c27c58c7d01e8">00470</a> <span class="preprocessor">#define BT_INFO_LOG_STAT    INF_LOG_STAT</span>
<a name="l00471"></a>00471 <span class="preprocessor"></span>
<a name="l00472"></a>00472     BT_INFO_BOARD_REV,      <span class="comment">/* PCI Rev ID of board, firmware revision */</span>
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="preprocessor">#if defined (BT1003)</span>
<a name="l00475"></a>00475 <span class="preprocessor"></span><span class="comment">/* EAS A64 */</span>
<a name="l00476"></a>00476     BT_INFO_A64_OFFSET,    <span class="comment">/* A64 mode bits A32-A63 and mode flag MSB */</span>
<a name="l00477"></a>00477 <span class="comment">/* EAS TMP CODE */</span>
<a name="l00478"></a>00478     BT_INFO_KMALLOC_BUF,    <span class="comment">/* return kmalloc buffer from driver */</span> 
<a name="l00479"></a>00479     BT_INFO_KFREE_BUF,      <span class="comment">/* free kmalloc buffer allocated by driver */</span>
<a name="l00480"></a>00480     BT_INFO_KMALLOC_SIZ,    <span class="comment">/* size of buffer to kmalloc from driver */</span>
<a name="l00481"></a>00481 <span class="preprocessor">#endif</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span>
<a name="l00483"></a>00483     BT_MAX_INFO             <span class="comment">/* Last valid BT_INFO_ value, internal use only */</span>
<a name="l00484"></a>00484 } <a class="code" href="btngpci_8h.html#a4f271075b743f2b971619a22c09c1387">bt_info_t</a>;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 <span class="comment">/* </span>
<a name="l00487"></a>00487 <span class="comment">** Obsolte parameter values -- to be removed! </span>
<a name="l00488"></a>00488 <span class="comment">*/</span>
<a name="l00489"></a>00489 
<a name="l00490"></a><a class="code" href="btngpci_8h.html#aa3acb6f63320fe4ffa5247982238b08b">00490</a> <span class="preprocessor">#define INTR_FREEQ_COUNT    BT_MAX_INFO</span>
<a name="l00491"></a><a class="code" href="btngpci_8h.html#a8d59df1764265a9ecdffa26ddd22484f">00491</a> <span class="preprocessor"></span><span class="preprocessor">#define REM_ADDR            BT_MAX_INFO</span>
<a name="l00492"></a><a class="code" href="btngpci_8h.html#a33be1634b402f1509dfcf0d6f369591f">00492</a> <span class="preprocessor"></span><span class="preprocessor">#define ADDR_MOD            BT_MAX_INFO</span>
<a name="l00493"></a><a class="code" href="btngpci_8h.html#aafdcaa07239493dd8b02eb94501a5b74">00493</a> <span class="preprocessor"></span><span class="preprocessor">#define HNDSHK_DR_COUNT     BT_MAX_INFO</span>
<a name="l00494"></a><a class="code" href="btngpci_8h.html#aeea797bbe143dc4decd1b21e6b120095">00494</a> <span class="preprocessor"></span><span class="preprocessor">#define HNDSHK_USEC_TIME    BT_MAX_INFO</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span>
<a name="l00496"></a><a class="code" href="btngpci_8h.html#a302741e4997963afd08f99424dcb278a">00496</a> <span class="preprocessor">#define INF_SLOT            BT_MAX_INFO</span>
<a name="l00497"></a><a class="code" href="btngpci_8h.html#a68553a0d8bbd0f725609cc6c4bbe9d55">00497</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_INTR_LVL        BT_MAX_INFO</span>
<a name="l00498"></a><a class="code" href="btngpci_8h.html#ab33cced8334ecf05faff525a210dd8f9">00498</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_INTR_PRIO       BT_MAX_INFO</span>
<a name="l00499"></a><a class="code" href="btngpci_8h.html#a279bdce7f984cd1f0fa72759cf4fc13d">00499</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_PT_INTR_LVL     BT_MAX_INFO</span>
<a name="l00500"></a><a class="code" href="btngpci_8h.html#a59056e84e347ca98f4d3e5fa42117cc5">00500</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_REMLOC          BT_MAX_INFO</span>
<a name="l00501"></a><a class="code" href="btngpci_8h.html#ac1b4a426fe8214d0b73b4cda2b59ef08">00501</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_REMLEN          BT_MAX_INFO</span>
<a name="l00502"></a><a class="code" href="btngpci_8h.html#a4cad340f430c19d1405824958013c814">00502</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_INTR_REGS       BT_MAX_INFO</span>
<a name="l00503"></a><a class="code" href="btngpci_8h.html#a1fbc8a72185cac4bc0adacc5555c3726">00503</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_INTR_PICS       BT_MAX_INFO</span>
<a name="l00504"></a><a class="code" href="btngpci_8h.html#ae4f3be023595df4ef0f02501e1d069b5">00504</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_PIO_ERROR       BT_MAX_INFO</span>
<a name="l00505"></a><a class="code" href="btngpci_8h.html#a393ea7957054776752d2e2f1071a388c">00505</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_MEM_PTR         BT_MAX_INFO</span>
<a name="l00506"></a><a class="code" href="btngpci_8h.html#aeea7cfd3ee2100d1604ae9f0dd169fc2">00506</a> <span class="preprocessor"></span><span class="preprocessor">#define INF_INTR_QCNT       BT_MAX_INFO</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span>
<a name="l00508"></a>00508 <span class="comment">/******************************************************************************</span>
<a name="l00509"></a>00509 <span class="comment">**</span>
<a name="l00510"></a>00510 <span class="comment">**  Trace values.</span>
<a name="l00511"></a>00511 <span class="comment">**</span>
<a name="l00512"></a>00512 <span class="comment">**  Use with TRACE_LVL parameter (BIOC_PARAM &amp; BIOC_DEV_ATTRIB)</span>
<a name="l00513"></a>00513 <span class="comment">**</span>
<a name="l00514"></a>00514 <span class="comment">**  For simple informational tracing use one of the first 4 levels defined</span>
<a name="l00515"></a>00515 <span class="comment">**  below.</span>
<a name="l00516"></a>00516 <span class="comment">**</span>
<a name="l00517"></a>00517 <span class="comment">**  For detailed tracing the trace control value is made up of oring the </span>
<a name="l00518"></a>00518 <span class="comment">**  various bits together to enable the trace macros that are of interest </span>
<a name="l00519"></a>00519 <span class="comment">**  to you.  This type of tracing destroys performance and should only be</span>
<a name="l00520"></a>00520 <span class="comment">**  used by SBS Technical Support.</span>
<a name="l00521"></a>00521 <span class="comment">**</span>
<a name="l00522"></a>00522 <span class="comment">******************************************************************************/</span>
<a name="l00523"></a>00523 <span class="comment">/* </span>
<a name="l00524"></a>00524 <span class="comment">**  Trace flags controlling error output </span>
<a name="l00525"></a>00525 <span class="comment">*/</span>
<a name="l00526"></a><a class="code" href="btngpci_8h.html#a417d2ef3fb3ec3ddba8bdbc16a7bb614">00526</a> <span class="preprocessor">#define BT_TRC_NONE     0       </span><span class="comment">/* no tracing is enabled whatsoever */</span>
<a name="l00527"></a><a class="code" href="btngpci_8h.html#ae47b8bcab1a149096b2cb1684ab1d302">00527</a> <span class="preprocessor">#define BT_TRC_ERROR    (1&lt;&lt; 0) </span><span class="comment">/* Fatal system errors, shouldn&apos;t happen */</span>
<a name="l00528"></a><a class="code" href="btngpci_8h.html#a1fb67105eb4dd059dd6b865fe413ef1a">00528</a> <span class="preprocessor">#define BT_TRC_WARN     (1&lt;&lt; 1) </span><span class="comment">/* driver errors that may happen due to  */</span>
<a name="l00529"></a>00529                                 <span class="comment">/* external conditions */</span>
<a name="l00530"></a><a class="code" href="btngpci_8h.html#aa9d339ec378155fc4c0dd2eccc6f4abb">00530</a> <span class="preprocessor">#define BT_TRC_INFO     (1&lt;&lt; 2) </span><span class="comment">/* messages for errors returned to the user */</span>
<a name="l00531"></a>00531 
<a name="l00532"></a>00532 <span class="comment">/* </span>
<a name="l00533"></a>00533 <span class="comment">**  Trace flags controlling which major components to trace</span>
<a name="l00534"></a>00534 <span class="comment">*/</span>
<a name="l00535"></a><a class="code" href="btngpci_8h.html#ac5b685698682cde1ee9ddb0f180e71ea">00535</a> <span class="preprocessor">#define BT_TRC_CFG      (1&lt;&lt; 4) </span><span class="comment">/* driver configuration and initialization */</span>
<a name="l00536"></a><a class="code" href="btngpci_8h.html#a2e710cbc21750312ec7bd6ffdfef2883">00536</a> <span class="preprocessor">#define BT_TRC_RD_WR    (1&lt;&lt; 5) </span><span class="comment">/* generic read/write (outside of DMA &amp; PIO) */</span>
<a name="l00537"></a><a class="code" href="btngpci_8h.html#a9d4ca0cfe5f5de80952c7ba827c5b0c0">00537</a> <span class="preprocessor">#define BT_TRC_MMAP     (1&lt;&lt; 6) </span><span class="comment">/* memory mapping and related code */</span>
<a name="l00538"></a><a class="code" href="btngpci_8h.html#a67a3e26d616aea7f0341a706aeb60e1d">00538</a> <span class="preprocessor">#define BT_TRC_BIND     (1&lt;&lt; 7) </span><span class="comment">/* bt_bind() and related code */</span>
<a name="l00539"></a>00539 
<a name="l00540"></a><a class="code" href="btngpci_8h.html#ad4c7ae4aa27c08ff2835d2cbdc9271ee">00540</a> <span class="preprocessor">#define BT_TRC_CTRL     (1&lt;&lt; 8) </span><span class="comment">/* All ioctl() functions */</span>
<a name="l00541"></a><a class="code" href="btngpci_8h.html#a294b641cbd0db46d0ab02c6d4ca686a2">00541</a> <span class="preprocessor">#define BT_TRC_OPEN     (1&lt;&lt; 9) </span><span class="comment">/* Driver open and close */</span>
<a name="l00542"></a>00542 
<a name="l00543"></a><a class="code" href="btngpci_8h.html#ad5dee6827d00308b467f415ed8b10745">00543</a> <span class="preprocessor">#define BT_TRC_ISR      (1&lt;&lt;12) </span><span class="comment">/* Interrupt Service Routine */</span>
<a name="l00544"></a><a class="code" href="btngpci_8h.html#a64267a65c57896233d7170cd7b9bed68">00544</a> <span class="preprocessor">#define BT_TRC_IRQ_DISP (1&lt;&lt;13) </span><span class="comment">/* Interrupt Request Processing/Dispatch */</span>
<a name="l00545"></a><a class="code" href="btngpci_8h.html#abbc7b77eff2231b6637d1a501514abe9">00545</a> <span class="preprocessor">#define BT_TRC_ICBR     (1&lt;&lt;14) </span><span class="comment">/* user ICBR and the vector returned by */</span>
<a name="l00546"></a>00546                                 <span class="comment">/* applicable kernel interrupt handlers */</span>
<a name="l00547"></a><a class="code" href="btngpci_8h.html#a23230f360ac0826c1ebedce2f23769a1">00547</a> <span class="preprocessor">#define BT_TRC_ISR_ERR  (1&lt;&lt;15) </span><span class="comment">/* ISR errors only */</span>
<a name="l00548"></a>00548 
<a name="l00549"></a>00549 
<a name="l00550"></a>00550 <span class="comment">/* </span>
<a name="l00551"></a>00551 <span class="comment">**  Trace flags controlling which subsubsystems in the driver </span>
<a name="l00552"></a>00552 <span class="comment">*/</span>
<a name="l00553"></a><a class="code" href="btngpci_8h.html#a3a6d5cd735b5ea362c3faef2201cb17a">00553</a> <span class="preprocessor">#define BT_TRC_DMA      (1&lt;&lt;16) </span><span class="comment">/* DMA, each transfer */</span>
<a name="l00554"></a><a class="code" href="btngpci_8h.html#a76c407566710db444c26ddea058f7532">00554</a> <span class="preprocessor">#define BT_TRC_PIO      (1&lt;&lt;17) </span><span class="comment">/* PIO, each transfer */</span>
<a name="l00555"></a><a class="code" href="btngpci_8h.html#ac05ca0cdd0c9a32274cc6914bed2263a">00555</a> <span class="preprocessor">#define BT_TRC_FUNC     (1&lt;&lt;18) </span><span class="comment">/* function entry and exit */</span>
<a name="l00556"></a><a class="code" href="btngpci_8h.html#a353247984588c2071d4243802ac2227f">00556</a> <span class="preprocessor">#define BT_TRC_ALLOC    (1&lt;&lt;19) </span><span class="comment">/* Allocation/release of resources */</span>
<a name="l00557"></a>00557 
<a name="l00558"></a><a class="code" href="btngpci_8h.html#a91d819a12b3872e730e29f22adb4754d">00558</a> <span class="preprocessor">#define BT_TRC_LOCK     (1&lt;&lt;20) </span><span class="comment">/* all locks (user &amp; driver internal) */</span>
<a name="l00559"></a><a class="code" href="btngpci_8h.html#a410f78953638e753f0522ad13b03d516">00559</a> <span class="preprocessor">#define BT_TRC_MAPREG   (1&lt;&lt;21) </span><span class="comment">/* details of each map register load */</span>
<a name="l00560"></a><a class="code" href="btngpci_8h.html#ad075101dc37c18db9ee3c5fbf3b306bd">00560</a> <span class="preprocessor">#define BT_TRC_RAWIO    (1&lt;&lt;22) </span><span class="comment">/* Raw I/O register access */</span>
<a name="l00561"></a><a class="code" href="btngpci_8h.html#a1436e97af76133f90572216f19bd6348">00561</a> <span class="preprocessor">#define BT_TRC_KLIB     (1&lt;&lt;23) </span><span class="comment">/* Misc. shared kernel routines */</span>
<a name="l00562"></a>00562 
<a name="l00563"></a><a class="code" href="btngpci_8h.html#acb4b2600b548e9e168e40e0431ebd41d">00563</a> <span class="preprocessor">#define BT_TRC_KDDI     (1&lt;&lt;24) </span><span class="comment">/* All 3rd party driver rouitnes KDDI */</span>
<a name="l00564"></a><a class="code" href="btngpci_8h.html#a568d1e9c64b7af0fd7755caee7e051b4">00564</a> <span class="preprocessor">#define BT_TRC_LIO      (1&lt;&lt;25) </span><span class="comment">/* Low level I/O register rd/wr */</span>
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 <span class="comment">/* </span>
<a name="l00567"></a>00567 <span class="comment">**  Modifiers on tracing.</span>
<a name="l00568"></a>00568 <span class="comment">**</span>
<a name="l00569"></a>00569 <span class="comment">**  These bits are always used in combination with the other trace bits,</span>
<a name="l00570"></a>00570 <span class="comment">**  to provide more information. Combine them with any of the functional</span>
<a name="l00571"></a>00571 <span class="comment">**  tracing bits (4-27) above.</span>
<a name="l00572"></a>00572 <span class="comment">*/</span>
<a name="l00573"></a><a class="code" href="btngpci_8h.html#a00fc8cc5b0b35b04b95d42334f721f43">00573</a> <span class="preprocessor">#define BT_TRC_PROFILE  (1&lt;&lt;28) </span><span class="comment">/* enable H/W timing marks for profiling */</span>
<a name="l00574"></a><a class="code" href="btngpci_8h.html#aabdbfa80ae1f96fab73ae7ac4defac87">00574</a> <span class="preprocessor">#define BT_TRC_DETAIL   (1&lt;&lt;29) </span><span class="comment">/* Detailed trace of enabled function */</span>
<a name="l00575"></a><a class="code" href="btngpci_8h.html#affc84683f405cfffec7c8b236f38240c">00575</a> <span class="preprocessor">#define BT_TRC_HW_DEBUG (1&lt;&lt;30) </span><span class="comment">/* enable HW trace messages instead of console */</span>
<a name="l00576"></a>00576 
<a name="l00577"></a>00577 <span class="comment">/* </span>
<a name="l00578"></a>00578 <span class="comment">**  We don&apos;t use bit 31, the sign bit, because it would make some comparison</span>
<a name="l00579"></a>00579 <span class="comment">** operations messy</span>
<a name="l00580"></a>00580 <span class="comment">*/</span>
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 <span class="comment">/* </span>
<a name="l00583"></a>00583 <span class="comment">**  Default trace level </span>
<a name="l00584"></a>00584 <span class="comment">*/</span>
<a name="l00585"></a><a class="code" href="btngpci_8h.html#aa691b811f294a0be8e7730dcfce6f410">00585</a> <span class="preprocessor">#define BT_TRC_DEFAULT  (BT_TRC_ERROR|BT_TRC_WARN)</span>
<a name="l00586"></a>00586 <span class="preprocessor"></span>
<a name="l00587"></a>00587 <span class="comment">/*****************************************************************************</span>
<a name="l00588"></a>00588 <span class="comment">**</span>
<a name="l00589"></a>00589 <span class="comment">**  File numbers for hardware tracing</span>
<a name="l00590"></a>00590 <span class="comment">**</span>
<a name="l00591"></a>00591 <span class="comment">**  Each file should have a unique for number, lower ones for shared, higher</span>
<a name="l00592"></a>00592 <span class="comment">**  ones for private.  These are assigned to trace_file_number_g at the </span>
<a name="l00593"></a>00593 <span class="comment">**  beginning of each file.</span>
<a name="l00594"></a>00594 <span class="comment">**</span>
<a name="l00595"></a>00595 <span class="comment">*****************************************************************************/</span>
<a name="l00596"></a><a class="code" href="btngpci_8h.html#a6d7286e84bd6ce991dfbe1e7b395ac56">00596</a> <span class="preprocessor">#define BT_FILE_NUMBER(fnumber)  static int trace_file_number_g = fnumber</span>
<a name="l00597"></a>00597 <span class="preprocessor"></span>
<a name="l00598"></a><a class="code" href="btngpci_8h.html#a0ad25c4fe7358e26e5624b0758689ac0">00598</a> <span class="preprocessor">#define TRACE_BT_BIT_C              0x1</span>
<a name="l00599"></a><a class="code" href="btngpci_8h.html#a934469a24ffe2742dd8b1d5b7640db49">00599</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_DELAY_C            0x2</span>
<a name="l00600"></a><a class="code" href="btngpci_8h.html#a571870e421b0ba420eb1e4094305b220">00600</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_EVENT_C            0x3</span>
<a name="l00601"></a><a class="code" href="btngpci_8h.html#a1718864905377f08e878959858ecb3d9">00601</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_ICBR_THREAD_C      0x4</span>
<a name="l00602"></a><a class="code" href="btngpci_8h.html#acc8a59fa6663413d32bcd154bd5cd15f">00602</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_ISR_C              0x5</span>
<a name="l00603"></a><a class="code" href="btngpci_8h.html#af1509c4548fb5f9fcac85d969a435d84">00603</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_LLIST_C            0x6</span>
<a name="l00604"></a><a class="code" href="btngpci_8h.html#adf97801db9893e3e12696becca99b41d">00604</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_MEM_C              0x7</span>
<a name="l00605"></a><a class="code" href="btngpci_8h.html#a0d9ba8635950e518a55f6c038794a964">00605</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_MUTEX_C            0x8</span>
<a name="l00606"></a><a class="code" href="btngpci_8h.html#a49d617b8eb21e7acf5f79ee357c1b14a">00606</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_NBUS_C             0x9</span>
<a name="l00607"></a><a class="code" href="btngpci_8h.html#abe6cb8614cbc0598a9121a19ef62cc1f">00607</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_PARAM_C            0xa</span>
<a name="l00608"></a><a class="code" href="btngpci_8h.html#af5c608235ff87fcdb73f749168a1f1e1">00608</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_RWLCK_C            0xb</span>
<a name="l00609"></a><a class="code" href="btngpci_8h.html#abc2da7513220ba246905469502443e80">00609</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_SETUP_C            0xc</span>
<a name="l00610"></a><a class="code" href="btngpci_8h.html#a490a4ca1f976f16567cfa5b2de115153">00610</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_XFER_C             0xd</span>
<a name="l00611"></a><a class="code" href="btngpci_8h.html#ad6419a7bfbd7c09892e4e5f427b420db">00611</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_DIAG_C             0xe</span>
<a name="l00612"></a><a class="code" href="btngpci_8h.html#a2fb6beac7188f7563df92328f80bb80e">00612</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BT_BSP_UNIQUE_C       0xf</span>
<a name="l00613"></a>00613 <span class="preprocessor"></span>
<a name="l00614"></a><a class="code" href="btngpci_8h.html#a00f98007d60cff0e704acf3ecb4b2d89">00614</a> <span class="preprocessor">#define TRACE_BTP_BIND_C            0x81</span>
<a name="l00615"></a><a class="code" href="btngpci_8h.html#a7661fd0582e556724df2d0698351066d">00615</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_CDEV_C            0x82</span>
<a name="l00616"></a><a class="code" href="btngpci_8h.html#ab8b9257d1da16639977153c303872b8a">00616</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_CFG_C             0x83</span>
<a name="l00617"></a><a class="code" href="btngpci_8h.html#a3b587c1145d36f7f4f8b7b517554f81a">00617</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_CTLS_C            0x84</span>
<a name="l00618"></a><a class="code" href="btngpci_8h.html#a01ac6bbe4f73e4fac1ff55728a538917">00618</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_INTR_C            0x85</span>
<a name="l00619"></a><a class="code" href="btngpci_8h.html#aae2fea326dd3d61b6b789b079354c619">00619</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_KERN_C            0x86</span>
<a name="l00620"></a><a class="code" href="btngpci_8h.html#a3ac711e97f50839e29ebce569bb3ac73">00620</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_LWIO_C            0x87</span>
<a name="l00621"></a><a class="code" href="btngpci_8h.html#a09e7503b8199c6b29f694225eae3c0f1">00621</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_MMAP_C            0x88</span>
<a name="l00622"></a><a class="code" href="btngpci_8h.html#a9f322f0188c7f7ebf2aef62e8da92958">00622</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_RDWR_C            0x89</span>
<a name="l00623"></a><a class="code" href="btngpci_8h.html#ae53d63bd50ae5ceadb57f16e5da62d45">00623</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_OPEN_C            0x8a</span>
<a name="l00624"></a>00624 <span class="preprocessor"></span>
<a name="l00625"></a><a class="code" href="btngpci_8h.html#afdade690c9fcdcef053714c417cc1010">00625</a> <span class="preprocessor">#define TRACE_BTP_IOCTL_C           TRACE_BTP_CTLS_C</span>
<a name="l00626"></a><a class="code" href="btngpci_8h.html#a6a45dd24f46e1367823c0ccd6c70c546">00626</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_KERNEL_C          TRACE_BTP_KERN_C</span>
<a name="l00627"></a><a class="code" href="btngpci_8h.html#ab077f5dcf6f11ef120e0f97b6bb24111">00627</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE_BTP_LOWIO_C           TRACE_BTP_LWIO_C</span>
<a name="l00628"></a>00628 <span class="preprocessor"></span>
<a name="l00629"></a>00629 <span class="comment">/*****************************************************************************</span>
<a name="l00630"></a>00630 <span class="comment">**</span>
<a name="l00631"></a>00631 <span class="comment">**  Swapping values.</span>
<a name="l00632"></a>00632 <span class="comment">**</span>
<a name="l00633"></a>00633 <span class="comment">**  Not all are supported on each platform.</span>
<a name="l00634"></a>00634 <span class="comment">**</span>
<a name="l00635"></a>00635 <span class="comment">**  Use with SWAP_BITS parameter (BIOC_PARAM &amp; BIOC_DEV_ATTRIB)</span>
<a name="l00636"></a>00636 <span class="comment">**</span>
<a name="l00637"></a>00637 <span class="comment">*****************************************************************************/</span>
<a name="l00638"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872">00638</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872">BT_SWAP_BITS_VALUE</a> {
<a name="l00639"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872ae8c40444820187eefc07a2b5d009a789">00639</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872ae8c40444820187eefc07a2b5d009a789">BT_SWAP_NONE</a> = 0,   <span class="comment">/* No swapping */</span>
<a name="l00640"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a170ada4ea013cd256bef8f2826c7d279">00640</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a170ada4ea013cd256bef8f2826c7d279">BT_SWAP_BSNBD</a>,      <span class="comment">/* Byte swap, non byte data */</span>
<a name="l00641"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a5480d718ac959a84bac05ae76e1d536c">00641</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a5480d718ac959a84bac05ae76e1d536c">BT_SWAP_WS</a>,         <span class="comment">/* Word swap */</span>
<a name="l00642"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a623d144f5acfd390a426c5f31780098d">00642</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a623d144f5acfd390a426c5f31780098d">BT_SWAP_WS_BSNBD</a>,   <span class="comment">/* Word swap and byte swap, non btye data */</span>
<a name="l00643"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a153fcd633a9ba09e52e43c5a15b31aa6">00643</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a153fcd633a9ba09e52e43c5a15b31aa6">BT_SWAP_BSBD</a>,       <span class="comment">/* Byte swap, btye data */</span>
<a name="l00644"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a51d7be38014cc887546da1d9019427be">00644</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a51d7be38014cc887546da1d9019427be">BT_SWAP_BSBD_BSNBD</a>, <span class="comment">/* Btye swap, byte data and byte swap, non byte data */</span>
<a name="l00645"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a93cb7c4b8e296ab2baba3ea3d05db2cd">00645</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a93cb7c4b8e296ab2baba3ea3d05db2cd">BT_SWAP_BSBD_WS</a>,    <span class="comment">/* Byte swap, byte data and word swap */</span>
<a name="l00646"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a64970da06784b0a6b91c4966b7d658df">00646</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a64970da06784b0a6b91c4966b7d658df">BT_SWAP_BSBD_WS_BSNBD</a>,  <span class="comment">/* All possible swapping */</span>
<a name="l00647"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a09d01cf23b99e719d6d5e806d94f1a26">00647</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a09d01cf23b99e719d6d5e806d94f1a26">BT_SWAP_DEFAULT</a>,    <span class="comment">/* Driver default swapping */</span>
<a name="l00648"></a><a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a3f5434c17c2566b89df2c378b6a4ecaf">00648</a>     <a class="code" href="btngpci_8h.html#ab8ec52866a75ae16e3533b06530ed872a3f5434c17c2566b89df2c378b6a4ecaf">BT_MAX_SWAP</a>
<a name="l00649"></a>00649 } <a class="code" href="btngpci_8h.html#a3545a37b603b052a3b5bf3acfd06fc7f">bt_swap_t</a>;
<a name="l00650"></a>00650 
<a name="l00651"></a>00651 
<a name="l00652"></a>00652 <span class="comment">/*****************************************************************************</span>
<a name="l00653"></a>00653 <span class="comment">**</span>
<a name="l00654"></a>00654 <span class="comment">**  Register access types</span>
<a name="l00655"></a>00655 <span class="comment">**</span>
<a name="l00656"></a>00656 <span class="comment">**  Use with bt_ioaccess_t &amp; bt_pcfg_access_t structure </span>
<a name="l00657"></a>00657 <span class="comment">**  (BIOC_IOREG &amp; BIOC_PCFG)</span>
<a name="l00658"></a>00658 <span class="comment">**</span>
<a name="l00659"></a>00659 <span class="comment">*****************************************************************************/</span>
<a name="l00660"></a><a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6">00660</a> <span class="keyword">enum</span> <a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6">BT_ACCESS</a> {
<a name="l00661"></a><a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6afee5382e2e5d318e087ddd3bb9f5486c">00661</a>     <a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6afee5382e2e5d318e087ddd3bb9f5486c">BT_IOREAD</a>,  <span class="comment">/* Register read */</span>
<a name="l00662"></a><a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6ab1d590412d188a87a25b4d71f7e11ecd">00662</a>     <a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6ab1d590412d188a87a25b4d71f7e11ecd">BT_IOWRITE</a>, <span class="comment">/* Register write */</span>
<a name="l00663"></a><a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6a883eda0ffb1ce915a84c229536508151">00663</a>     <a class="code" href="btngpci_8h.html#a499631d17cf78c4171c0a6e178d396e6a883eda0ffb1ce915a84c229536508151">BT_IOSHOT</a>   <span class="comment">/* Register bit set */</span>
<a name="l00664"></a>00664 };
<a name="l00665"></a>00665 
<a name="l00666"></a>00666 <span class="comment">/*****************************************************************************</span>
<a name="l00667"></a>00667 <span class="comment">**</span>
<a name="l00668"></a>00668 <span class="comment">**  Valid registers</span>
<a name="l00669"></a>00669 <span class="comment">**</span>
<a name="l00670"></a>00670 <span class="comment">**  Use with bt_ioaccess_t structure (BIOC_IOREG)</span>
<a name="l00671"></a>00671 <span class="comment">**</span>
<a name="l00672"></a>00672 <span class="comment">*****************************************************************************/</span>
<a name="l00673"></a><a class="code" href="btngpci_8h.html#ad00614a4230c4e11806068302e0fc19a">00673</a> <span class="preprocessor">#define BT_LOC_START    0</span>
<a name="l00674"></a><a class="code" href="btngpci_8h.html#a11926dd08116b6fb842835afd813f7d4">00674</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_REM_START    80</span>
<a name="l00675"></a><a class="code" href="btngpci_8h.html#a259af0798bf1ac6d1b0b28c09f397899">00675</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_RPQ_START    192</span>
<a name="l00676"></a>00676 <span class="preprocessor"></span>
<a name="l00677"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbc">00677</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbc">BT_REGISTERS</a> {
<a name="l00678"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcad111114286a6cafc0b72a0c2ad984eca">00678</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcad111114286a6cafc0b72a0c2ad984eca">BT_LOC_CMD1</a> = <a class="code" href="btngpci_8h.html#ad00614a4230c4e11806068302e0fc19a">BT_LOC_START</a>,         <span class="comment">/* Local Command register 1 */</span>
<a name="l00679"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca16cc944b95d587378a16d57bb317869e">00679</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca16cc944b95d587378a16d57bb317869e">BT_LOC_INT_CTRL</a>,                    <span class="comment">/* Local Interrupt Control */</span>
<a name="l00680"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca6927b5dff3cef21fb7d6766a03787fd4">00680</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca6927b5dff3cef21fb7d6766a03787fd4">BT_LOC_INT_STATUS</a>,                  <span class="comment">/* Local Interrupt Status */</span>
<a name="l00681"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3aeef993346aa15b4d9caa388319a672">00681</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3aeef993346aa15b4d9caa388319a672">BT_LOC_STATUS</a>,                      <span class="comment">/* Local Status register */</span>
<a name="l00682"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca0e10651c9382f31ca72a534bc8117816">00682</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca0e10651c9382f31ca72a534bc8117816">BT_LOC_HANDSHAKE</a>,                   <span class="comment">/* Local Handshake register */</span>
<a name="l00683"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca887bc71aea13393ead0351b176c43c86">00683</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca887bc71aea13393ead0351b176c43c86">BT_LOC_CONFIG_CTRL</a>,                 <span class="comment">/* Local Configuration Register */</span>
<a name="l00684"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcafcf5f5e1ecad17dba591b86efeae4de3">00684</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcafcf5f5e1ecad17dba591b86efeae4de3">BT_LOC_RCMD2</a>,                       <span class="comment">/* Local access to remote command 2 */</span>
<a name="l00685"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaa5331911f4b5ec309a580fe8457c2dfb">00685</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaa5331911f4b5ec309a580fe8457c2dfb">BT_LOC_RPAGE</a>,                       <span class="comment">/* Local access to remote page reg  */</span>
<a name="l00686"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca80060f16597a77aeab57651ffe071b29">00686</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca80060f16597a77aeab57651ffe071b29">BT_LOC_AMOD</a>,                        <span class="comment">/* Local address modifier */</span>
<a name="l00687"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca5bea34722c54a306bce2cce7b806a0d0">00687</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca5bea34722c54a306bce2cce7b806a0d0">BT_LDMA_CMD</a>,                        <span class="comment">/* Local DMA Command register */</span>
<a name="l00688"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca365aa1d9516d0d65a358c70637ccd850">00688</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca365aa1d9516d0d65a358c70637ccd850">BT_LDMA_RMD_CNT</a>,                    <span class="comment">/* Local DMA Remainder Cnt register */</span>
<a name="l00689"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca7516f6fdb73105d93fe119dcc742faaf">00689</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca7516f6fdb73105d93fe119dcc742faaf">BT_LDMA_ADDR</a>,                       <span class="comment">/* Local DMA Address register */</span>
<a name="l00690"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaa150dd4630346e615bc40a7f9ec74722">00690</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaa150dd4630346e615bc40a7f9ec74722">BT_LDMA_PKT_CNT</a>,                    <span class="comment">/* Local DMA Packet count register */</span>
<a name="l00691"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca46cca033595cd5d6d1f35625ec0f4e33">00691</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca46cca033595cd5d6d1f35625ec0f4e33">BT_LOC_TCSIZE</a>,                      <span class="comment">/* TURBOChannel size register */</span>
<a name="l00692"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca052177ca225e155c9a5f3e86141b8e40">00692</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca052177ca225e155c9a5f3e86141b8e40">BT_LOC_256MB_PAGE</a>,                  <span class="comment">/* Local 256MB window remote page */</span>
<a name="l00693"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca878dfb7445916d33a5e285c4578b1d73">00693</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca878dfb7445916d33a5e285c4578b1d73">BT_LOC_RCMD1</a>,                       <span class="comment">/* Local access to remote command 1 */</span>
<a name="l00694"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcac33db4642cede26a3517f40adca68798">00694</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcac33db4642cede26a3517f40adca68798">BT_LOC_BUS_CTRL</a>,                    <span class="comment">/* Local bus control reg (PCI) */</span>
<a name="l00695"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca256f8559eb689f1f620bcb06aa54bbc6">00695</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca256f8559eb689f1f620bcb06aa54bbc6">BT_LOC_LOOPBACK</a>,                    <span class="comment">/* Local loopback control (PCI Fiber) */</span>
<a name="l00696"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca8eca3b7b7f66d3783134700e6f148ffb">00696</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca8eca3b7b7f66d3783134700e6f148ffb">BT_LOC_MREG_CTRL</a>,                   <span class="comment">/* Local mapping register control */</span>
<a name="l00697"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca43dee674903bd8af2bed37ab9360f38d">00697</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca43dee674903bd8af2bed37ab9360f38d">BT_LOC_SEMA0</a>,                       <span class="comment">/* Local semaphore register 0 */</span>
<a name="l00698"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcac907363b88367e3e48e65631e616d37d">00698</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcac907363b88367e3e48e65631e616d37d">BT_LOC_SEMA1</a>,                       <span class="comment">/* Local semaphore register 1 */</span>
<a name="l00699"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca5a9887e4b78879c03686181eb477c787">00699</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca5a9887e4b78879c03686181eb477c787">BT_LOC_SEMA2</a>,                       <span class="comment">/* Local semaphore register 2 */</span>
<a name="l00700"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca6207f2a77a674550a9a09109cfc2f4f1">00700</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca6207f2a77a674550a9a09109cfc2f4f1">BT_LOC_SEMA3</a>,                       <span class="comment">/* Local semaphore register 3 */</span>
<a name="l00701"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca60fa989c841ed1feaaf4f3dc91dc5f65">00701</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca60fa989c841ed1feaaf4f3dc91dc5f65">BT_LOC_SEMA4</a>,                       <span class="comment">/* Local semaphore register 4 */</span>
<a name="l00702"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca447562941a73f61497174776157b7194">00702</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca447562941a73f61497174776157b7194">BT_LOC_SEMA5</a>,                       <span class="comment">/* Local semaphore register 5 */</span>
<a name="l00703"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3fddae5842090acb348c4c2aa22c6ab7">00703</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3fddae5842090acb348c4c2aa22c6ab7">BT_LOC_SEMA6</a>,                       <span class="comment">/* Local semaphore register 6 */</span>
<a name="l00704"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcabecf24c80fb86c999a793e5d02aa3adf">00704</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcabecf24c80fb86c999a793e5d02aa3adf">BT_LOC_SEMA7</a>,                       <span class="comment">/* Local semaphore register 7 */</span>
<a name="l00705"></a>00705 
<a name="l00706"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca01d2d80a434d8df9bda8b0dd4ea50ebf">00706</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca01d2d80a434d8df9bda8b0dd4ea50ebf">BT_REM_CMD1</a> = <a class="code" href="btngpci_8h.html#a11926dd08116b6fb842835afd813f7d4">BT_REM_START</a>,         <span class="comment">/* Remote Command register 1 */</span>
<a name="l00707"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcadd3ff13d2d78b1693613bcb8cd747182">00707</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcadd3ff13d2d78b1693613bcb8cd747182">BT_REM_STATUS</a>,                      <span class="comment">/* Remote Status register */</span>
<a name="l00708"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca969b2603b807acec42d58a8420a06cce">00708</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca969b2603b807acec42d58a8420a06cce">BT_REM_CMD2</a>,                        <span class="comment">/* Remote Command register 2 */</span>
<a name="l00709"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca1f94f584c58c680c6d6b1ab671431dba">00709</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca1f94f584c58c680c6d6b1ab671431dba">BT_REM_PAGE</a>,                        <span class="comment">/* Remote Page Register */</span>
<a name="l00710"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca084a67f538d27a764229dabb11981e6b">00710</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca084a67f538d27a764229dabb11981e6b">BT_REM_AMOD</a>,                        <span class="comment">/* Remote Address Modifier */</span>
<a name="l00711"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca82799e5266b91f75b53be908ed7d2448">00711</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca82799e5266b91f75b53be908ed7d2448">BT_REM_IACK</a>,                        <span class="comment">/* Remote IACK register */</span>
<a name="l00712"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaf6b6456d6d3ccbe0dccb2b09d52fc9eb">00712</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaf6b6456d6d3ccbe0dccb2b09d52fc9eb">BT_REM_CARD_ID</a>,                     <span class="comment">/* Remote Card ID Register */</span>
<a name="l00713"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcabed583d8876e2f2b8c5929a6ef86b9b9">00713</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcabed583d8876e2f2b8c5929a6ef86b9b9">BT_RDMA_ADDR</a>,                       <span class="comment">/* Remote DMA Address */</span>
<a name="l00714"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcabe15cba2eafe17c13ae2637ad13c2821">00714</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcabe15cba2eafe17c13ae2637ad13c2821">BT_RDMA_RMD_CNT</a>,                    <span class="comment">/* Remote DMA Remainder Count */</span>
<a name="l00715"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca6fcd21e11157da6a4b5890daae349969">00715</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca6fcd21e11157da6a4b5890daae349969">BT_REM_MREG_CTRL</a>,                   <span class="comment">/* Remote mapping register control */</span>
<a name="l00716"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca5d85a1923170f723761fca92f224d139">00716</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca5d85a1923170f723761fca92f224d139">BT_REM_SLAVE_STATUS</a>,                <span class="comment">/* Remote slave status */</span>
<a name="l00717"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3c86f516204a2df20bea5cd27041477b">00717</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3c86f516204a2df20bea5cd27041477b">BT_REM_SLAVE_CLRERR</a>,                <span class="comment">/* Remote slave clear error */</span>
<a name="l00718"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcac30296ee6a91a41f7c8b56518070c7fc">00718</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcac30296ee6a91a41f7c8b56518070c7fc">BT_REM_SEMA0</a>,                       <span class="comment">/* Remote semaphore register 0 */</span>
<a name="l00719"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca39f9390a2816216f1cf7e86a3b0ed639">00719</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca39f9390a2816216f1cf7e86a3b0ed639">BT_REM_SEMA1</a>,                       <span class="comment">/* Remote semaphore register 1 */</span>
<a name="l00720"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca29156bb1300619533f5dc65acd5e5d72">00720</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca29156bb1300619533f5dc65acd5e5d72">BT_REM_SEMA2</a>,                       <span class="comment">/* Remote semaphore register 2 */</span>
<a name="l00721"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca9024bd1b5cf1a0ffbecbdea9a0be8b62">00721</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca9024bd1b5cf1a0ffbecbdea9a0be8b62">BT_REM_SEMA3</a>,                       <span class="comment">/* Remote semaphore register 3 */</span>
<a name="l00722"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca1c849e93645c939f510e142cf1fc2612">00722</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca1c849e93645c939f510e142cf1fc2612">BT_REM_SEMA4</a>,                       <span class="comment">/* Remote semaphore register 4 */</span>
<a name="l00723"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaed1201e1fb4c7c55bf9538565158f974">00723</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaed1201e1fb4c7c55bf9538565158f974">BT_REM_SEMA5</a>,                       <span class="comment">/* Remote semaphore register 5 */</span>
<a name="l00724"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaadf59302fc820aa21029a81884144cc3">00724</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaadf59302fc820aa21029a81884144cc3">BT_REM_SEMA6</a>,                       <span class="comment">/* Remote semaphore register 6 */</span>
<a name="l00725"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaf43c511df98c7d6db982055421f999a3">00725</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaf43c511df98c7d6db982055421f999a3">BT_REM_SEMA7</a>,                       <span class="comment">/* Remote semaphore register 7 */</span>
<a name="l00726"></a>00726 
<a name="l00727"></a>00727     <span class="comment">/*</span>
<a name="l00728"></a>00728 <span class="comment">    ** Do not access these registers unless you have RPQ #601107 </span>
<a name="l00729"></a>00729 <span class="comment">    ** These registers allow direct access to all registers located on</span>
<a name="l00730"></a>00730 <span class="comment">    ** the remote card</span>
<a name="l00731"></a>00731 <span class="comment">    **</span>
<a name="l00732"></a>00732 <span class="comment">    ** For non RPQ #601107 cards these registers will return garbage</span>
<a name="l00733"></a>00733 <span class="comment">    */</span>
<a name="l00734"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaffc6fb638fb44036891ec1682c75f4ea">00734</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaffc6fb638fb44036891ec1682c75f4ea">BT_RPQ_REM_LCMD1</a> = <a class="code" href="btngpci_8h.html#a259af0798bf1ac6d1b0b28c09f397899">BT_RPQ_START</a>,
<a name="l00735"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca202f509f54ace6eeed365b2f3cd005bd">00735</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca202f509f54ace6eeed365b2f3cd005bd">BT_RPQ_REM_LINT_CTRL</a>,
<a name="l00736"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca9617dada526c8a7bceb5ef1d67bec508">00736</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca9617dada526c8a7bceb5ef1d67bec508">BT_RPQ_REM_LSTATUS</a>,
<a name="l00737"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca7b3097980002224be781deb38d0d25cb">00737</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca7b3097980002224be781deb38d0d25cb">BT_RPQ_REM_LINT_STATUS</a>,
<a name="l00738"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca4b643d97b7e9a6c4ca7ef81f7917a4d1">00738</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca4b643d97b7e9a6c4ca7ef81f7917a4d1">BT_RPQ_REM_LBUS_CTRL</a>,
<a name="l00739"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca193c8cbf7b6accb93b20a43fe89c6fd1">00739</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca193c8cbf7b6accb93b20a43fe89c6fd1">BT_RPQ_REM_LLOOPBACK</a>,
<a name="l00740"></a>00740     
<a name="l00741"></a>00741 <span class="comment">/* EAS A64 */</span>
<a name="l00742"></a>00742     <span class="comment">/*</span>
<a name="l00743"></a>00743 <span class="comment">    ** Do not access these registers unless you have RPQ #601332</span>
<a name="l00744"></a>00744 <span class="comment">    ** These registers allow direct access to all registers located on</span>
<a name="l00745"></a>00745 <span class="comment">    ** the remote card</span>
<a name="l00746"></a>00746 <span class="comment">    **</span>
<a name="l00747"></a>00747 <span class="comment">    ** For non RPQ #601332 cards these registers will return garbage</span>
<a name="l00748"></a>00748 <span class="comment">    */</span>
<a name="l00749"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3a38a522d6ddc59c1a8e0c035a08709b">00749</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca3a38a522d6ddc59c1a8e0c035a08709b">BT_RPQ_REM_A64PIO</a>,                  <span class="comment">/* Remote card Upper address A64 - PIO */</span>
<a name="l00750"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca303e52327fbb5871eee91aacb808104a">00750</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbca303e52327fbb5871eee91aacb808104a">BT_RPQ_REM_A64DMA</a>,                  <span class="comment">/* Remote card Upper address A64 - DMA */</span>
<a name="l00751"></a>00751     
<a name="l00752"></a><a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaf64ea2d730590d1920f3bcc0c9039a2f">00752</a>     <a class="code" href="btngpci_8h.html#a18b2c989c334883ff8a662113c413bbcaf64ea2d730590d1920f3bcc0c9039a2f">BT_MAX_REGISTER</a>                     <span class="comment">/* Maximum number of registers */</span>
<a name="l00753"></a>00753 } <a class="code" href="btngpci_8h.html#ac7189e4b4aba36240d687e2d6bd537fe">bt_reg_t</a>;
<a name="l00754"></a>00754 
<a name="l00755"></a>00755 <span class="comment">/* The following member names have been obsoleted:</span>
<a name="l00756"></a>00756 <span class="comment">    BT_REM_LSTATUS    replaced by BT_REM_SLAVE_STATUS</span>
<a name="l00757"></a>00757 <span class="comment">    BT_REM_LCLRERR    replaced by BT_REM_SLAVE_CLRERR</span>
<a name="l00758"></a>00758 <span class="comment">    BT_MAX_REGISTERS  replaced by BT_MAX_REGISTER</span>
<a name="l00759"></a>00759 <span class="comment">*/</span>
<a name="l00760"></a><a class="code" href="btngpci_8h.html#a1a7a2dc6af89122108d8944ead1cc3a4">00760</a> <span class="preprocessor">#define MAX_IOREGS              (0x50)  </span><span class="comment">/* maximum number of I/O registers */</span> 
<a name="l00761"></a>00761 
<a name="l00762"></a>00762 <span class="comment">/*****************************************************************************</span>
<a name="l00763"></a>00763 <span class="comment">**</span>
<a name="l00764"></a>00764 <span class="comment">**  CSR Layout - PCI to VMEbus or PCI to PCI Products Only</span>
<a name="l00765"></a>00765 <span class="comment">**</span>
<a name="l00766"></a>00766 <span class="comment">**  Register bit definitions</span>
<a name="l00767"></a>00767 <span class="comment">**</span>
<a name="l00768"></a>00768 <span class="comment">**  Use with bt_ioaccess_t structure (BIOC_IOREG)</span>
<a name="l00769"></a>00769 <span class="comment">**</span>
<a name="l00770"></a>00770 <span class="comment">*****************************************************************************/</span>
<a name="l00771"></a><a class="code" href="structbt__pci__reg__t.html">00771</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00772"></a>00772 
<a name="l00773"></a>00773 <span class="comment">/*</span>
<a name="l00774"></a>00774 <span class="comment">** Local Node Command Register (read/write, 8 bits)</span>
<a name="l00775"></a>00775 <span class="comment">*/</span>
<a name="l00776"></a><a class="code" href="structbt__pci__reg__t.html#a867da667a1c9563c565f96158a563c68">00776</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         loc_cmd1;
<a name="l00777"></a><a class="code" href="btngpci_8h.html#a8ba42ae623ef0ad03da1bb2ac7a12302">00777</a> <span class="preprocessor">#define LOC_CMD1        (0x00)  </span><span class="comment">/* Local Command Register */</span>
<a name="l00778"></a>00778 
<a name="l00779"></a><a class="code" href="btngpci_8h.html#a7e4d18432a93e8dca4c3581caf6af4d0">00779</a> <span class="preprocessor">#define LC1_CLR_ERROR   (1&lt;&lt;7)  </span><span class="comment">/* w = 1, Clear status error bits */</span>
<a name="l00780"></a><a class="code" href="btngpci_8h.html#ac0dace267353d889e6b55ff6a6e0b0a9">00780</a> <span class="preprocessor">#define LC1_CLR_PR_INT  (1&lt;&lt;6)  </span><span class="comment">/* Clear the PR interrupt */</span>
<a name="l00781"></a><a class="code" href="btngpci_8h.html#a8c9216c127edcae7ed3bb61e0839cee5">00781</a> <span class="preprocessor">#define LC1_SND_PT_INT  (1&lt;&lt;5)  </span><span class="comment">/* Send a PT interrupt */</span>
<a name="l00782"></a><a class="code" href="btngpci_8h.html#ab989411746e2f030dbe923c72504996b">00782</a> <span class="preprocessor">#define LC1_PT_STATUS   LC1_SND_PT_INT  </span><span class="comment">/* Keep consistent with PR name */</span>
<a name="l00783"></a>00783 <span class="comment">/* Bits 4-0 must always be set to 0. */</span>
<a name="l00784"></a>00784 
<a name="l00785"></a>00785 <span class="comment">/*</span>
<a name="l00786"></a>00786 <span class="comment">** Local Interrupt Control Register (read/write, 8 bits)</span>
<a name="l00787"></a>00787 <span class="comment">*/</span>
<a name="l00788"></a><a class="code" href="structbt__pci__reg__t.html#a0610699973cf143d9642be32669ea0e4">00788</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>              loc_int_ctrl;
<a name="l00789"></a><a class="code" href="btngpci_8h.html#a9fcadd6ec8a19eda11895841176da6f3">00789</a> <span class="preprocessor">#define LOC_INT_CTRL            (0x01)  </span><span class="comment">/* local interrupt control register */</span>
<a name="l00790"></a><a class="code" href="btngpci_8h.html#aa6168d7c023022f97bef6826cf2c8937">00790</a> <span class="preprocessor">#define LOC_INT_CTRL_SIZE       (BT_WIDTH_D8)</span>
<a name="l00791"></a><a class="code" href="btngpci_8h.html#a3f8e4269ea7918de07a18f8e74bad1f0">00791</a> <span class="preprocessor"></span><span class="preprocessor">#define LIC_INT_PENDING         (1&lt;&lt;7)  </span><span class="comment">/* r  , set when generating irq     */</span>
<a name="l00792"></a><a class="code" href="btngpci_8h.html#a1f5e431e3257015562ced0ccfe3de7bb">00792</a> <span class="preprocessor">#define LIC_INT_ENABLE          (1&lt;&lt;6)  </span><span class="comment">/* r/w, non-error interrupt enable  */</span>
<a name="l00793"></a><a class="code" href="btngpci_8h.html#af5a41666fbff4e1dd2e4c05e874b9887">00793</a> <span class="preprocessor">#define LIC_ERROR_INT_ENABLE    (1&lt;&lt;5)  </span><span class="comment">/* r/w, error interrupt enable      */</span>
<a name="l00794"></a><a class="code" href="btngpci_8h.html#aecfb4faa4e666996800e121cb83a5ecf">00794</a> <span class="preprocessor">#define LIC_PT_CBL_MASK         (0x7)   </span><span class="comment">/* mask for PT cable select line    */</span>
<a name="l00795"></a><a class="code" href="btngpci_8h.html#a79f0d5205f69fccff4d5316bc56e140e">00795</a> <span class="preprocessor">#define LIC_PT_CBL_NONE         (0x0)   </span><span class="comment">/* send PT interrupt disabled       */</span>
<a name="l00796"></a><a class="code" href="btngpci_8h.html#a071aa3f286746067ad95b67d22d361e2">00796</a> <span class="preprocessor">#define LIC_PT_CBL_1            (0x1)   </span><span class="comment">/* PT interrupt sent on cable irq 1 */</span>
<a name="l00797"></a><a class="code" href="btngpci_8h.html#a21f8b43e3cce43c28745f4b1766eeec6">00797</a> <span class="preprocessor">#define LIC_PT_CBL_2            (0x2)   </span><span class="comment">/* PT interrupt sent on cable irq 2 */</span>
<a name="l00798"></a><a class="code" href="btngpci_8h.html#aea98505632956934a2d707702551ca38">00798</a> <span class="preprocessor">#define LIC_PT_CBL_3            (0x3)   </span><span class="comment">/* PT interrupt sent on cable irq 3 */</span>
<a name="l00799"></a><a class="code" href="btngpci_8h.html#a01d70162d6188e1f594ceb8dc37d9053">00799</a> <span class="preprocessor">#define LIC_PT_CBL_4            (0x4)   </span><span class="comment">/* PT interrupt sent on cable irq 4 */</span>
<a name="l00800"></a><a class="code" href="btngpci_8h.html#a679cd5aec548a7426b4a6206aa16b54e">00800</a> <span class="preprocessor">#define LIC_PT_CBL_5            (0x5)   </span><span class="comment">/* PT interrupt sent on cable irq 5 */</span>
<a name="l00801"></a><a class="code" href="btngpci_8h.html#aee973ce65dcc03905b85703ac2d6e3fd">00801</a> <span class="preprocessor">#define LIC_PT_CBL_6            (0x6)   </span><span class="comment">/* PT interrupt sent on cable irq 6 */</span>
<a name="l00802"></a><a class="code" href="btngpci_8h.html#a44b25b35d411f0500d46dcb9bbe8c570">00802</a> <span class="preprocessor">#define LIC_PT_CBL_7            (0x7)   </span><span class="comment">/* PT interrupt sent on cable irq 7 */</span>
<a name="l00803"></a>00803 
<a name="l00804"></a><a class="code" href="btngpci_8h.html#a201dae7bfdf758c9ff62f4b6e579e200">00804</a> <span class="preprocessor">#define LIC_EN_INTR     (LIC_INT_ENABLE | LIC_ERROR_INT_ENABLE | LIC_PT_CBL_1)</span>
<a name="l00805"></a><a class="code" href="btngpci_8h.html#adad0e56ecb09323d5d1e8791ae74ed7b">00805</a> <span class="preprocessor"></span><span class="preprocessor">#define LIC_DIS_INTR    (LIC_PT_CBL_1)</span>
<a name="l00806"></a>00806 <span class="preprocessor"></span>
<a name="l00807"></a>00807 <span class="comment">/*</span>
<a name="l00808"></a>00808 <span class="comment">** This bit definition only works with RPQ #601107 </span>
<a name="l00809"></a>00809 <span class="comment">*/</span>
<a name="l00810"></a><a class="code" href="btngpci_8h.html#aef74d47dc7e8feddd0ae92aafc758020">00810</a> <span class="preprocessor">#define LIC_INT_D_SET           (1&lt;&lt;4)  </span><span class="comment">/* r/w, Set/Clear INTD# RPQ #601107 only */</span>
<a name="l00811"></a>00811 
<a name="l00812"></a>00812 <span class="comment">/*</span>
<a name="l00813"></a>00813 <span class="comment">** Local Node Status Register (read only, 8 bits)</span>
<a name="l00814"></a>00814 <span class="comment">*/</span>
<a name="l00815"></a><a class="code" href="structbt__pci__reg__t.html#aca1ff0a9426e38351dec89b63e1cd134">00815</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         loc_status;
<a name="l00816"></a><a class="code" href="btngpci_8h.html#a361c64b0f238096c8a33e991002d28e0">00816</a> <span class="preprocessor">#define LOC_STATUS      (0x02)  </span><span class="comment">/* Local Status Register */</span>
<a name="l00817"></a>00817 
<a name="l00818"></a><a class="code" href="btngpci_8h.html#a7888b4b4497920e3c61df39361383a80">00818</a> <span class="preprocessor">#define LSR_PARITY_ERR          (1&lt;&lt;7)</span>
<a name="l00819"></a><a class="code" href="btngpci_8h.html#ae2be9f44de24c277356e4d0d75396361">00819</a> <span class="preprocessor"></span><span class="preprocessor">#define LSR_REMBUS_ERR          (1&lt;&lt;6)</span>
<a name="l00820"></a><a class="code" href="btngpci_8h.html#a6a0730b290fc371742936eed7815e26d">00820</a> <span class="preprocessor"></span><span class="preprocessor">#define LSR_PR_STATUS           (1&lt;&lt;5)</span>
<a name="l00821"></a><a class="code" href="btngpci_8h.html#aa671fa85e6376ef9c73a6e94738ee5e6">00821</a> <span class="preprocessor"></span><span class="preprocessor">#define LSR_TIMEOUT_ERR         (1&lt;&lt;2)</span>
<a name="l00822"></a><a class="code" href="btngpci_8h.html#ae285ea9cc8cb152f7345a8a409c2b497">00822</a> <span class="preprocessor"></span><span class="preprocessor">#define LSR_LRC_ERR             (1&lt;&lt;1)  </span><span class="comment">/* DMA only */</span>
<a name="l00823"></a><a class="code" href="btngpci_8h.html#a626628e3ee7b20b1c3b3908c3d415b4a">00823</a> <span class="preprocessor">#define LSR_NO_CONNECT          (1&lt;&lt;0)</span>
<a name="l00824"></a>00824 <span class="preprocessor"></span>
<a name="l00825"></a><a class="code" href="btngpci_8h.html#ad9e96c4a0625b570c17001a394527241">00825</a> <span class="preprocessor">#define LSR_ERROR_MASK  (LSR_PARITY_ERR|LSR_LRC_ERR|LSR_REMBUS_ERR|LSR_TIMEOUT_ERR)</span>
<a name="l00826"></a><a class="code" href="btngpci_8h.html#adff58a799fd6843e745d286ed1b659f7">00826</a> <span class="preprocessor"></span><span class="preprocessor">#define LSR_CERROR_MASK (LSR_NO_CONNECT|LSR_ERROR_MASK)</span>
<a name="l00827"></a>00827 <span class="preprocessor"></span>
<a name="l00828"></a>00828 <span class="comment">/*</span>
<a name="l00829"></a>00829 <span class="comment">** Local Interrupt Status Register (read only, 8 bits)</span>
<a name="l00830"></a>00830 <span class="comment">*/</span>
<a name="l00831"></a><a class="code" href="structbt__pci__reg__t.html#a915df8a28b49df097e5d1a15a2b94a1d">00831</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>              loc_int_status;
<a name="l00832"></a><a class="code" href="btngpci_8h.html#a2cc8731b00b42ba340664f1fdf8b14a7">00832</a> <span class="preprocessor">#define LOC_INT_STATUS          (0x03)  </span><span class="comment">/* interrupt status register */</span>
<a name="l00833"></a><a class="code" href="btngpci_8h.html#a9ad3e5a80b54da7ade7560a8614e3085">00833</a> <span class="preprocessor">#define LOC_INT_STATUS_SIZE     (BT_WIDTH_D8)</span>
<a name="l00834"></a><a class="code" href="btngpci_8h.html#a3ae728b48e104a2979f7dc54976e6910">00834</a> <span class="preprocessor"></span><span class="preprocessor">#define LIS_CINT7               (1&lt;&lt;7)  </span><span class="comment">/* r  , cable interrupt 7 */</span>
<a name="l00835"></a><a class="code" href="btngpci_8h.html#a0f4a7beb402f0f0d7e46b3e75378ec93">00835</a> <span class="preprocessor">#define LIS_CINT6               (1&lt;&lt;6)  </span><span class="comment">/* r  , cable interrupt 6 */</span>
<a name="l00836"></a><a class="code" href="btngpci_8h.html#a91294389acbf9b3e2b863a97502b174e">00836</a> <span class="preprocessor">#define LIS_CINT5               (1&lt;&lt;5)  </span><span class="comment">/* r  , cable interrupt 5 */</span>
<a name="l00837"></a><a class="code" href="btngpci_8h.html#a3042ed2c463a57c49aeae7029e141eca">00837</a> <span class="preprocessor">#define LIS_CINT4               (1&lt;&lt;4)  </span><span class="comment">/* r  , cable interrupt 4 */</span>
<a name="l00838"></a><a class="code" href="btngpci_8h.html#ac0a1a684ea1f0a2ebd515c8ec4c42dd4">00838</a> <span class="preprocessor">#define LIS_CINT3               (1&lt;&lt;3)  </span><span class="comment">/* r  , cable interrupt 3 */</span>
<a name="l00839"></a><a class="code" href="btngpci_8h.html#a13f8578a183f603da198fcadf873b2af">00839</a> <span class="preprocessor">#define LIS_CINT2               (1&lt;&lt;2)  </span><span class="comment">/* r  , cable interrupt 2 */</span>
<a name="l00840"></a><a class="code" href="btngpci_8h.html#a725bee91092331ba46cc1e0f1edd9eda">00840</a> <span class="preprocessor">#define LIS_CINT1               (1&lt;&lt;1)  </span><span class="comment">/* r  , cable interrupt 1 */</span>
<a name="l00841"></a><a class="code" href="btngpci_8h.html#ad1b6536ba2f3f6786eb7bedf4c70f5df">00841</a> <span class="preprocessor">#define LIS_CINT_MASK (LIS_CINT1 | LIS_CINT2 | LIS_CINT3 | LIS_CINT4 | LIS_CINT5 | LIS_CINT6 | LIS_CINT7)</span>
<a name="l00842"></a>00842 <span class="preprocessor"></span>
<a name="l00843"></a>00843 <span class="comment">/*</span>
<a name="l00844"></a>00844 <span class="comment">** Local Bus Control Register (read/write, 8 bits)</span>
<a name="l00845"></a>00845 <span class="comment">*/</span>
<a name="l00846"></a><a class="code" href="structbt__pci__reg__t.html#a00598347d2a096caa7f481e10762b741">00846</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>              loc_bus_ctrl;
<a name="l00847"></a><a class="code" href="btngpci_8h.html#a5317726c888b017cd3ac95ed13d3b70b">00847</a> <span class="preprocessor">#define LOC_BUS_CTRL            (0x04)  </span><span class="comment">/* bus control register         */</span>
<a name="l00848"></a><a class="code" href="btngpci_8h.html#a8025f173b3d3ab8595297a179cdad53e">00848</a> <span class="preprocessor">#define LOC_BUS_CTRL_SIZE       (BT_WIDTH_D8)</span>
<a name="l00849"></a><a class="code" href="btngpci_8h.html#a807c3d2034e269edd0148966ab045704">00849</a> <span class="preprocessor"></span><span class="preprocessor">#define LBC_GEMS_SWAP_ENABLE    (1&lt;&lt;3)  </span><span class="comment">/* enable lword swap for GEMS   */</span>
<a name="l00850"></a><a class="code" href="btngpci_8h.html#a38683dba758505171379fe55b1334faa">00850</a> <span class="preprocessor">#define LBC_WS_ENABLE           (1&lt;&lt;2)  </span><span class="comment">/* enable word swap             */</span>
<a name="l00851"></a><a class="code" href="btngpci_8h.html#a8ab02937b4ac40c36304ab75fd00a875">00851</a> <span class="preprocessor">#define LBC_PREEMPT_DISABLE     (1&lt;&lt;1)  </span><span class="comment">/* disable local preempt        */</span>
<a name="l00852"></a><a class="code" href="btngpci_8h.html#a021766656d3978aaa4e8c7f2bc843228">00852</a> <span class="preprocessor">#define LBC_TRG_ABORT_ENABLE    (1&lt;&lt;0)  </span><span class="comment">/* target abort enable          */</span>
<a name="l00853"></a>00853 <span class="preprocessor">#if defined(BT965)</span>
<a name="l00854"></a>00854 <span class="preprocessor"></span><span class="preprocessor">#define LBC_NORM_OPER           (LBC_WS_ENABLE)</span>
<a name="l00855"></a>00855 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00856"></a><a class="code" href="btngpci_8h.html#a0d53dac4b6d78842e1e62d5906900db5">00856</a> <span class="preprocessor"></span><span class="preprocessor">#define LBC_NORM_OPER           (0x0)</span>
<a name="l00857"></a>00857 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00858"></a>00858 <span class="preprocessor"></span>
<a name="l00859"></a>00859 <span class="comment">/*</span>
<a name="l00860"></a>00860 <span class="comment">** Loopback Control Register (read/write, 8 bits)</span>
<a name="l00861"></a>00861 <span class="comment">** Only avaliable on special adapter models, check HW manual</span>
<a name="l00862"></a>00862 <span class="comment">*/</span>
<a name="l00863"></a><a class="code" href="structbt__pci__reg__t.html#a9c79061681080e2b9b78ace9ffee5c3c">00863</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>              loc_loopback;
<a name="l00864"></a><a class="code" href="btngpci_8h.html#a02543cd248c6e8cddce13ae3d155e659">00864</a> <span class="preprocessor">#define LOC_LOOPBACK            (0x05)  </span><span class="comment">/* loopback control register    */</span>
<a name="l00865"></a><a class="code" href="btngpci_8h.html#a2bc38953ede8eb76f4929b55261f2bd2">00865</a> <span class="preprocessor">#define LOC_LOOPBACK_SIZE       (BT_WIDTH_D8)</span>
<a name="l00866"></a><a class="code" href="btngpci_8h.html#a169eefc4bb56b4da61287dd88e337c46">00866</a> <span class="preprocessor"></span><span class="preprocessor">#define LLB_LINK_UP             (1&lt;&lt;7)  </span><span class="comment">/* r, link up                   */</span>
<a name="l00867"></a><a class="code" href="btngpci_8h.html#a220c6ae6800164f396f639f44c6c00a6">00867</a> <span class="preprocessor">#define LLB_REM_LB_ENABLE       (1&lt;&lt;1)  </span><span class="comment">/* enable local loopback */</span>
<a name="l00868"></a><a class="code" href="btngpci_8h.html#a3acf6313927251337a0ecba9b5bd7398">00868</a> <span class="preprocessor">#define LLB_LOC_LB_ENABLE       (1&lt;&lt;0)  </span><span class="comment">/* enable local loopback */</span>
<a name="l00869"></a>00869 
<a name="l00870"></a>00870 <span class="comment">/*</span>
<a name="l00871"></a>00871 <span class="comment">** Mapping RAM Control Register (read/write, 8 bits)</span>
<a name="l00872"></a>00872 <span class="comment">** Only avaliable on certain adapter models, check HW manual</span>
<a name="l00873"></a>00873 <span class="comment">*/</span>
<a name="l00874"></a><a class="code" href="structbt__pci__reg__t.html#a20abd48c9eaccc6cb98e2f6590be244f">00874</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>              loc_mreg_ctrl;
<a name="l00875"></a><a class="code" href="btngpci_8h.html#ac2cd8b2e8b931b5fd45635602fb0141c">00875</a> <span class="preprocessor">#define LOC_MREG_CTRL           (0x06)  </span><span class="comment">/* map reg control register */</span>
<a name="l00876"></a><a class="code" href="btngpci_8h.html#acbc01cf4ed8a073c7a727b27e8e5b249">00876</a> <span class="preprocessor">#define LOC_MREG_CTRL_SIZE      (BT_WIDTH_D8)</span>
<a name="l00877"></a><a class="code" href="btngpci_8h.html#aa756690b88040001614d78a52604a7b3">00877</a> <span class="preprocessor"></span><span class="preprocessor">#define LMC_DRIVER_MASTER       (1&lt;&lt;3)  </span><span class="comment">/* local driver master */</span>
<a name="l00878"></a><a class="code" href="btngpci_8h.html#a4a52f2f230411ca9fd4a55557a265ce0">00878</a> <span class="preprocessor">#define LMC_DRIVER_ACTIVE       (1&lt;&lt;2)  </span><span class="comment">/* local driver loaded */</span>
<a name="l00879"></a><a class="code" href="btngpci_8h.html#ad0153a949e32c8ddea97063d63d6f582">00879</a> <span class="preprocessor">#define LMC_DMA_BYPASS_ENABLE   (1&lt;&lt;1)  </span><span class="comment">/* DMA to local bus bypass */</span>
<a name="l00880"></a><a class="code" href="btngpci_8h.html#a2adae90918839e0393a338c61285a6d7">00880</a> <span class="preprocessor">#define LMC_PIO_BYPASS_ENABLE   (1&lt;&lt;0)  </span><span class="comment">/* cable to local bus bypass */</span>
<a name="l00881"></a>00881 
<a name="l00882"></a>00882 <span class="comment">/*</span>
<a name="l00883"></a>00883 <span class="comment">** Undefined area of CSR register space</span>
<a name="l00884"></a>00884 <span class="comment">*/</span>
<a name="l00885"></a><a class="code" href="structbt__pci__reg__t.html#a513a168e5ade3f07d4744913872f0e96">00885</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         reserve07;
<a name="l00886"></a>00886 
<a name="l00887"></a>00887 <span class="comment">/*</span>
<a name="l00888"></a>00888 <span class="comment">** Remote Node Command Register 1 (read/write, 8 bits)</span>
<a name="l00889"></a>00889 <span class="comment">*/</span>
<a name="l00890"></a><a class="code" href="structbt__pci__reg__t.html#a7a41fdfeb6905c424dd998227bc211dd">00890</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         rem_cmd1;
<a name="l00891"></a><a class="code" href="btngpci_8h.html#a02c1a41e6a8ddd6c80073098662e2d77">00891</a> <span class="preprocessor">#define REM_CMD1        (0x08)</span>
<a name="l00892"></a><a class="code" href="btngpci_8h.html#aeb08e7f639c18e386bb02c4f8a4c656e">00892</a> <span class="preprocessor"></span><span class="preprocessor">#define RC1_RESET       (1&lt;&lt;7)  </span><span class="comment">/* Reset remote bus */</span>
<a name="l00893"></a><a class="code" href="btngpci_8h.html#a81e5565a1c0c06a03dc9b73d9caefe6a">00893</a> <span class="preprocessor">#define RC1_CLR_PT_INT  (1&lt;&lt;6)  </span><span class="comment">/* Clear PT interrupt */</span>
<a name="l00894"></a><a class="code" href="btngpci_8h.html#aa3310afd027b4844a59f4801257de819">00894</a> <span class="preprocessor">#define RC1_SND_PR_INT  (1&lt;&lt;5)  </span><span class="comment">/* Send PR interrupt */</span>
<a name="l00895"></a><a class="code" href="btngpci_8h.html#ae5523ba9f7ecf8a6265164f6697a37bc">00895</a> <span class="preprocessor">#define RC1_LOCK_SEL    (1&lt;&lt;4)  </span><span class="comment">/* Lock Remote bus */</span>
<a name="l00896"></a>00896 <span class="comment">/* Bit 3 must always be set to &quot;0&quot; */</span>
<a name="l00897"></a><a class="code" href="btngpci_8h.html#ae6add678b6a3ec7832b236f12bcd78ca">00897</a> <span class="preprocessor">#define RC1_IACK_MASK   (0x7)   </span><span class="comment">/* IACK read level select */</span>
<a name="l00898"></a>00898 
<a name="l00899"></a>00899 <span class="comment">/*</span>
<a name="l00900"></a>00900 <span class="comment">** Remote Node Status Register (read, 8 bits)</span>
<a name="l00901"></a>00901 <span class="comment">** Same ofset as Remote Note command register 1</span>
<a name="l00902"></a>00902 <span class="comment">*/</span>
<a name="l00903"></a><a class="code" href="btngpci_8h.html#a759298c688877280d0e66d309cb92c1a">00903</a> <span class="preprocessor">#define rem_status      rem_cmd1</span>
<a name="l00904"></a><a class="code" href="btngpci_8h.html#ae664a5aa26e1c836e29d967643a8c75c">00904</a> <span class="preprocessor"></span><span class="preprocessor">#define REM_STATUS      (0x08)  </span><span class="comment">/* remote status register */</span>
<a name="l00905"></a><a class="code" href="btngpci_8h.html#a9e12f6c6dec68d1c911d5dc17ecf6a1d">00905</a> <span class="preprocessor">#define RSR_WAS_RESET   (1&lt;&lt;7)  </span><span class="comment">/* Remote bus was reset */</span>
<a name="l00906"></a>00906                                 <span class="comment">/* Valid only for A32 VMEbus adaptors */</span>
<a name="l00907"></a><a class="code" href="btngpci_8h.html#a2bc090b67bdd88f4df8c34583c6a1b65">00907</a> <span class="preprocessor">#define RSR_IACK1       (1&lt;&lt;6)  </span><span class="comment">/* IACK read mode address bit 1 */</span>
<a name="l00908"></a><a class="code" href="btngpci_8h.html#a6a258f9771682ddf24cfe5a5e215f3ea">00908</a> <span class="preprocessor">#define RSR_PR_STATUS   (1&lt;&lt;5)  </span><span class="comment">/* PR Interrupt is set */</span>
<a name="l00909"></a><a class="code" href="btngpci_8h.html#a5955df4ca7720b8534b45b8cdd26fc0c">00909</a> <span class="preprocessor">#define RSR_NOT_LOCK_STATUS (1&lt;&lt;4)      </span><span class="comment">/* Remote bus is *NOT* locked */</span>
<a name="l00910"></a><a class="code" href="btngpci_8h.html#a43398a7ac956b4eaa1b718c5e696b7ea">00910</a> <span class="preprocessor">#define RSR_IACK2       (1&lt;&lt;2)  </span><span class="comment">/* IACK read mode address bit 2 */</span>
<a name="l00911"></a><a class="code" href="btngpci_8h.html#a713f2f43e2b68349a807660473d0638e">00911</a> <span class="preprocessor">#define RSR_PT_STATUS   (1&lt;&lt;1)  </span><span class="comment">/* PT interrupt is set */</span>
<a name="l00912"></a><a class="code" href="btngpci_8h.html#a7ce69f691dd82bd4af0da034a459205c">00912</a> <span class="preprocessor">#define RSR_IACK0       (1&lt;&lt;0)  </span><span class="comment">/* IACK read mode address bit 0 */</span>
<a name="l00913"></a>00913 
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 <span class="comment">/*</span>
<a name="l00916"></a>00916 <span class="comment">** Remote Node Command Register 2 (read/write, 8 bits)</span>
<a name="l00917"></a>00917 <span class="comment">** Nothing of interest in this register for PCI to PCI applications</span>
<a name="l00918"></a>00918 <span class="comment">*/</span>
<a name="l00919"></a><a class="code" href="structbt__pci__reg__t.html#adb3e23be0933d973de1f00103d2ebb11">00919</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         rem_cmd2;
<a name="l00920"></a><a class="code" href="btngpci_8h.html#ae731fac56a0b53cc9724480912788461">00920</a> <span class="preprocessor">#define REM_CMD2        (0x09)</span>
<a name="l00921"></a>00921 <span class="preprocessor"></span>
<a name="l00922"></a><a class="code" href="btngpci_8h.html#a05e2cc6aaa131049c6b28a61e39dbc12">00922</a> <span class="preprocessor">#define RC2_DMA_PAUSE   (1&lt;&lt;7)  </span><span class="comment">/* DMA remote pause after 16 xfers     */</span>
<a name="l00923"></a>00923 <span class="comment">/* Bit 6 must always be set to &quot;0&quot;. */</span>
<a name="l00924"></a><a class="code" href="btngpci_8h.html#a709cf6a193b675d5d3caee2fcc2f44f5">00924</a> <span class="preprocessor">#define RC2_AMOD_SEL    (1&lt;&lt;6)  </span><span class="comment">/* Use Address modifier register       */</span>
<a name="l00925"></a><a class="code" href="btngpci_8h.html#a2c610c2c8eb2bf2f6ce247b2f02b842a">00925</a> <span class="preprocessor">#define RC2_DMA_BLK_SEL (1&lt;&lt;5)  </span><span class="comment">/* DMA remote use Block Mode           */</span>
<a name="l00926"></a><a class="code" href="btngpci_8h.html#a0b4159b77ff1439d4a701c04535d6ac3">00926</a> <span class="preprocessor">#define RC2_CINT_DISABLE (1&lt;&lt;4) </span><span class="comment">/* Disable passing of remote cable intr */</span>
<a name="l00927"></a>00927 
<a name="l00928"></a>00928 
<a name="l00929"></a>00929 <span class="comment">/*</span>
<a name="l00930"></a>00930 <span class="comment">** Undefined area of CSR register space</span>
<a name="l00931"></a>00931 <span class="comment">** This is normally where the VME page register is.  However,</span>
<a name="l00932"></a>00932 <span class="comment">** this unused for PCI to ? application because of mapping RAM</span>
<a name="l00933"></a>00933 <span class="comment">*/</span>
<a name="l00934"></a><a class="code" href="structbt__pci__reg__t.html#a857388309a81a7aec37e26b856e0a4b9">00934</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        reserve0a;
<a name="l00935"></a>00935 
<a name="l00936"></a>00936 <span class="comment">/*</span>
<a name="l00937"></a>00937 <span class="comment">** Remote Node Card ID Register (read, 8 bits)</span>
<a name="l00938"></a>00938 <span class="comment">*/</span>
<a name="l00939"></a><a class="code" href="structbt__pci__reg__t.html#a4fbfe7b0bccd6cd27809bb7b33ab3f73">00939</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         rem_card_id;
<a name="l00940"></a><a class="code" href="btngpci_8h.html#a1fd9b534c9ec07ae000294481fdab6ea">00940</a> <span class="preprocessor">#define REM_CARD_ID     (0x0c)</span>
<a name="l00941"></a>00941 <span class="preprocessor"></span>
<a name="l00942"></a>00942 <span class="comment">/*</span>
<a name="l00943"></a>00943 <span class="comment">** Remote Node Address Modifier Register (read/write, 8 bits)</span>
<a name="l00944"></a>00944 <span class="comment">** Nothing of interest in this register for PCI to PCI applications</span>
<a name="l00945"></a>00945 <span class="comment">*/</span>
<a name="l00946"></a><a class="code" href="structbt__pci__reg__t.html#a693787b27dc15f0db93dc572925edac8">00946</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         rem_amod;
<a name="l00947"></a><a class="code" href="btngpci_8h.html#a38e3974da5dd8fed150e93ac90773eae">00947</a> <span class="preprocessor">#define REM_AMOD        (0x0d)</span>
<a name="l00948"></a>00948 <span class="preprocessor"></span>
<a name="l00949"></a>00949 <span class="comment">/*</span>
<a name="l00950"></a>00950 <span class="comment">** Remote Node Interrupt Acknowledge Register (read, 16 bits)</span>
<a name="l00951"></a>00951 <span class="comment">*/</span>
<a name="l00952"></a><a class="code" href="structbt__pci__reg__t.html#a05b5b94954be3a6ddc9da6247f3d1932">00952</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        rem_iack;
<a name="l00953"></a><a class="code" href="btngpci_8h.html#a55df1b8e302368fa2a9f62abc7b9354e">00953</a> <span class="preprocessor">#define REM_IACK        (0x0e)</span>
<a name="l00954"></a>00954 <span class="preprocessor"></span>
<a name="l00955"></a>00955 <span class="comment">/*</span>
<a name="l00956"></a>00956 <span class="comment">** Remote Node Mapping RAM Control Register (read/write, 8 bits)</span>
<a name="l00957"></a>00957 <span class="comment">** PCI to PCI only, same offset as the Remote Node Interrupt Acknowledge</span>
<a name="l00958"></a>00958 <span class="comment">**</span>
<a name="l00959"></a>00959 <span class="comment">** Use bit definitions for the Local Node Mapping RAM Control Register</span>
<a name="l00960"></a>00960 <span class="comment">*/</span>
<a name="l00961"></a><a class="code" href="btngpci_8h.html#a4b48937abd7f99501800e9bfd52c62d4">00961</a> <span class="preprocessor">#define rem_mreg_ctrl      rem_iack</span>
<a name="l00962"></a><a class="code" href="btngpci_8h.html#a84a0fe5a9121df3b287195da0152557a">00962</a> <span class="preprocessor"></span><span class="preprocessor">#define REM_MREG_CTRL   (0x0e)</span>
<a name="l00963"></a>00963 <span class="preprocessor"></span>
<a name="l00964"></a>00964 <span class="comment">/*</span>
<a name="l00965"></a>00965 <span class="comment">** DMA Registers</span>
<a name="l00966"></a>00966 <span class="comment">*/</span>
<a name="l00967"></a>00967 <span class="comment">/*</span>
<a name="l00968"></a>00968 <span class="comment">** Local Node DMA Command Register (read/write, 8 bits)</span>
<a name="l00969"></a>00969 <span class="comment">*/</span>
<a name="l00970"></a><a class="code" href="structbt__pci__reg__t.html#aa084f22b367a0fa6cfd6200d4b7d0f2c">00970</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         ldma_cmd;
<a name="l00971"></a><a class="code" href="btngpci_8h.html#accb9c7220f51a8c4928843752d5b8bd9">00971</a> <span class="preprocessor">#define LDMA_CMD        (0x10)</span>
<a name="l00972"></a>00972 <span class="preprocessor"></span>
<a name="l00973"></a><a class="code" href="btngpci_8h.html#a9c427a4a8477a3e540fa11a4e1599dcb">00973</a> <span class="preprocessor">#define LDC_START       (1&lt;&lt;7)          </span><span class="comment">/* Start DMA transfer */</span>
<a name="l00974"></a><a class="code" href="btngpci_8h.html#ac79f9713d27c4ca11fa8da3cdb0a39dc">00974</a> <span class="preprocessor">#define LDC_DP_SEL      (1&lt;&lt;6)          </span><span class="comment">/* Transfer to/from dual port RAM */</span>
<a name="l00975"></a><a class="code" href="btngpci_8h.html#a619ee649273a48c124e2aa47f042541b">00975</a> <span class="preprocessor">#define LDC_WRITE_SEL   (1&lt;&lt;5)          </span><span class="comment">/* Transfer from local to remote */</span>
<a name="l00976"></a><a class="code" href="btngpci_8h.html#a966f059e23967d42625a57c76951a7d7">00976</a> <span class="preprocessor">#define LDC_DMA_D32_SEL (1&lt;&lt;4)          </span><span class="comment">/* Transfer as longwords */</span>
<a name="l00977"></a><a class="code" href="btngpci_8h.html#a26434ca1fbe8f2ae1dc30f1c522f2cc1">00977</a> <span class="preprocessor">#define LDC_DMA_INT_ENABLE (1&lt;&lt;2)       </span><span class="comment">/* Enable DMA DONE interrupt */</span>
<a name="l00978"></a><a class="code" href="btngpci_8h.html#a0f90b3be4fe460b2d9dbf3744e71b078">00978</a> <span class="preprocessor">#define LDC_DMA_DONE    (1&lt;&lt;1)          </span><span class="comment">/* r=1, DMA is complete */</span>
<a name="l00979"></a><a class="code" href="btngpci_8h.html#a7e212b3fe8a01c45c89940729bb65590">00979</a> <span class="preprocessor">#define LDC_DMA_BLK_SEL (1&lt;&lt;0)          </span><span class="comment">/* Perform burst DMA transfers */</span>
<a name="l00980"></a>00980 
<a name="l00981"></a>00981 <span class="comment">/*</span>
<a name="l00982"></a>00982 <span class="comment">** Local Node DMA Packet Remainder Count (read/write, 8 bits)</span>
<a name="l00983"></a>00983 <span class="comment">*/</span>
<a name="l00984"></a><a class="code" href="structbt__pci__reg__t.html#a4e91474611991045e0569d33a9ff02db">00984</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         ldma_rmd_cnt;
<a name="l00985"></a><a class="code" href="btngpci_8h.html#a3bcbbdc2a43d0da2dad818fadd783473">00985</a> <span class="preprocessor">#define LDMA_RMD_CNT    (0x11)</span>
<a name="l00986"></a>00986 <span class="preprocessor"></span>
<a name="l00987"></a>00987 <span class="comment">/*</span>
<a name="l00988"></a>00988 <span class="comment">** Local Node DMA Packet Count (read/write, 16 bits)</span>
<a name="l00989"></a>00989 <span class="comment">*/</span>
<a name="l00990"></a><a class="code" href="structbt__pci__reg__t.html#ab39f1f80ac6276318be6c7ad4034ca4a">00990</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        ldma_pkt_cnt;
<a name="l00991"></a><a class="code" href="btngpci_8h.html#a6e458b524daa2d1cb9693412b5910560">00991</a> <span class="preprocessor">#define LDMA_PKT_CNT    (0x12)</span>
<a name="l00992"></a>00992 <span class="preprocessor"></span>
<a name="l00993"></a>00993 <span class="comment">/*</span>
<a name="l00994"></a>00994 <span class="comment">** Local Node DMA Address Register (read/write, 32 bits)</span>
<a name="l00995"></a>00995 <span class="comment">** Certain cards only support 24 bits of local DMA address. See HW manual</span>
<a name="l00996"></a>00996 <span class="comment">** Can only be access by bytes or words</span>
<a name="l00997"></a>00997 <span class="comment">*/</span>
<a name="l00998"></a><a class="code" href="structbt__pci__reg__t.html#a58dc6d6248378a226fb4c721073b11c8">00998</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        ldma_addr_lo;
<a name="l00999"></a><a class="code" href="structbt__pci__reg__t.html#a8551b19dd6043cf9ba8e037a6782345b">00999</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        ldma_addr_hi;
<a name="l01000"></a><a class="code" href="btngpci_8h.html#a6a617ac8eba1aa1b326cb21dc63d9dd8">01000</a> <span class="preprocessor">#define LDMA_ADDR       (0x14)</span>
<a name="l01001"></a><a class="code" href="btngpci_8h.html#a69c1f7bdcc5dad7f6f30ba9fcb3bdbce">01001</a> <span class="preprocessor"></span><span class="preprocessor">#define LDMA_ADDR_MASK  (0x00ffffff)</span>
<a name="l01002"></a>01002 <span class="preprocessor"></span>
<a name="l01003"></a>01003 <span class="comment">/*</span>
<a name="l01004"></a>01004 <span class="comment">** Remote Node DMA Packet Remainder Count (read/write, 8 bits)</span>
<a name="l01005"></a>01005 <span class="comment">*/</span>
<a name="l01006"></a><a class="code" href="structbt__pci__reg__t.html#ab9d4b701ecfac4bc96badc3d06ea31a8">01006</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         rdma_rmd_cnt;
<a name="l01007"></a><a class="code" href="btngpci_8h.html#a337135db1378a22363196bcf855d6d16">01007</a> <span class="preprocessor">#define RDMA_RMD_CNT    (0x18)</span>
<a name="l01008"></a>01008 <span class="preprocessor"></span>
<a name="l01009"></a>01009 <span class="comment">/*</span>
<a name="l01010"></a>01010 <span class="comment">** Undefined area of CSR register space</span>
<a name="l01011"></a>01011 <span class="comment">*/</span>
<a name="l01012"></a><a class="code" href="structbt__pci__reg__t.html#ab2658d9ef4720d70b114a433dde9d27c">01012</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>         reserve19;
<a name="l01013"></a>01013 
<a name="l01014"></a>01014 <span class="comment">/*</span>
<a name="l01015"></a>01015 <span class="comment">** Remote Node DMA Address Register (read/write, 32 bits)</span>
<a name="l01016"></a>01016 <span class="comment">** Certain cards only support 24 bits of remote DMA address. See HW manual</span>
<a name="l01017"></a>01017 <span class="comment">** Can only be access by bytes or words</span>
<a name="l01018"></a>01018 <span class="comment">*/</span>
<a name="l01019"></a><a class="code" href="structbt__pci__reg__t.html#a03eea37580b9555662a822ccc5cba0e5">01019</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        rdma_addr_hi;
<a name="l01020"></a><a class="code" href="structbt__pci__reg__t.html#a0d06af6149c685c9f408e40ab979e6ce">01020</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        rdma_addr_lo;
<a name="l01021"></a><a class="code" href="btngpci_8h.html#af011cd8e40276a410fa75e8fbcfb23c2">01021</a> <span class="preprocessor">#define RDMA_ADDR       (0x1a)</span>
<a name="l01022"></a>01022 <span class="preprocessor"></span>
<a name="l01023"></a>01023 <span class="comment">/*</span>
<a name="l01024"></a>01024 <span class="comment">** Remote Node Slave Status Register (read, 8 bits)</span>
<a name="l01025"></a>01025 <span class="comment">*/</span>
<a name="l01026"></a><a class="code" href="structbt__pci__reg__t.html#a4dae0fbca8904e6146c805703b1f5bfb">01026</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>      rem_slave_status;
<a name="l01027"></a><a class="code" href="btngpci_8h.html#a36f43b84828ca06eb09b423af08e6da9">01027</a> <span class="preprocessor">#define REM_SLAVE_STATUS    (0x1e)  </span><span class="comment">/* remote node slave status register  */</span>
<a name="l01028"></a><a class="code" href="btngpci_8h.html#a5bfa53ecf9bd0613f0596c6c536d9a13">01028</a> <span class="preprocessor">#define RSS_PARITY_ERR      (1&lt;&lt;7)  </span><span class="comment">/* r=1, interface parity error        */</span>
<a name="l01029"></a><a class="code" href="btngpci_8h.html#ab3a2b291c4ad9a7c05d5132ec008c169">01029</a> <span class="preprocessor">#define RSS_REMBUS_ERR      (1&lt;&lt;6)  </span><span class="comment">/* r=1, remote bus error              */</span>
<a name="l01030"></a><a class="code" href="btngpci_8h.html#a13718368f8ae0543f69fb56904e13db9">01030</a> <span class="preprocessor">#define RSS_PR_STATUS       (1&lt;&lt;5)  </span><span class="comment">/* r=1, pr interrupt (from remote)    */</span>
<a name="l01031"></a><a class="code" href="btngpci_8h.html#a430c0df430e8f928e2afdc54871262a4">01031</a> <span class="preprocessor">#define RSS_LRC_ERR         (1&lt;&lt;3)  </span><span class="comment">/* r=1, LRC DMA packet error          */</span>
<a name="l01032"></a><a class="code" href="btngpci_8h.html#af655861c888ef9c904727f51300fdaff">01032</a> <span class="preprocessor">#define RSS_TIMEOUT_ERR     (1&lt;&lt;2)  </span><span class="comment">/* r=1, interface timeout error       */</span>
<a name="l01033"></a><a class="code" href="btngpci_8h.html#a3be40f5b9292d291d99280e22bdf5885">01033</a> <span class="preprocessor">#define RSS_PT_STATUS       (1&lt;&lt;1)  </span><span class="comment">/* r=1, pt interrupt (to remote)      */</span>
<a name="l01034"></a><a class="code" href="btngpci_8h.html#adf2572aedb314b3cb63616ec838ae04e">01034</a> <span class="preprocessor">#define RSS_NO_CONNECT      (1&lt;&lt;0)  </span><span class="comment">/* r=1, no connection to remote       */</span>
<a name="l01035"></a><a class="code" href="btngpci_8h.html#a0ba9bdd06c94602cff88b991f038800c">01035</a> <span class="preprocessor">#define RSS_ERROR_MASK      (RSS_PARITY_ERR | RSS_REMBUS_ERR \</span>
<a name="l01036"></a>01036 <span class="preprocessor">                                | RSS_LRC_ERR | RSS_TIMEOUT_ERR)</span>
<a name="l01037"></a>01037 <span class="preprocessor"></span>
<a name="l01038"></a><a class="code" href="btngpci_8h.html#a61b3ea080b13ebe8599c8599d097b628">01038</a> <span class="preprocessor">#define RSS_CERROR_MASK     (RSS_NO_CONNECT | RSS_ERROR_MASK)</span>
<a name="l01039"></a>01039 <span class="preprocessor"></span>
<a name="l01040"></a>01040 <span class="comment">/*</span>
<a name="l01041"></a>01041 <span class="comment">** Remote Node Slave Clear Register (write, 8 bits)</span>
<a name="l01042"></a>01042 <span class="comment">** Same ofset as Remote Node Slave Status Register</span>
<a name="l01043"></a>01043 <span class="comment">*/</span>
<a name="l01044"></a><a class="code" href="btngpci_8h.html#ad107d3b84dbb43f777de6d252bcd9afe">01044</a> <span class="preprocessor">#define rem_slave_clrerr    rem_slave_status</span>
<a name="l01045"></a><a class="code" href="btngpci_8h.html#a462548a689493e9f38727edc8e5b9de9">01045</a> <span class="preprocessor"></span><span class="preprocessor">#define REM_SLAVE_CLRERR    (0x1e)  </span><span class="comment">/* remote node slave clear error reg. */</span>
<a name="l01046"></a><a class="code" href="btngpci_8h.html#a81a0d7b6e0abb5b0f1b920a792f4141a">01046</a> <span class="preprocessor">#define RSC_CLR_ERROR       (1&lt;&lt;7)  </span><span class="comment">/* w=1, clear status error bits       */</span>
<a name="l01047"></a>01047 
<a name="l01048"></a>01048 <span class="comment">/*</span>
<a name="l01049"></a>01049 <span class="comment">** Undefined area of CSR register space</span>
<a name="l01050"></a>01050 <span class="comment">*/</span>
<a name="l01051"></a><a class="code" href="structbt__pci__reg__t.html#af68a7bea11f4b1facce57e911276f7a2">01051</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserve1f;
<a name="l01052"></a>01052 <span class="comment">/*</span>
<a name="l01053"></a>01053 <span class="comment">** Semaphore Registers</span>
<a name="l01054"></a>01054 <span class="comment">*/</span>
<a name="l01055"></a>01055 <span class="comment">/*</span>
<a name="l01056"></a>01056 <span class="comment">** Local Semaphore Registers (read/write, 8 bits)</span>
<a name="l01057"></a>01057 <span class="comment">** All semaphore registers have the same bit definitions</span>
<a name="l01058"></a>01058 <span class="comment">*/</span>
<a name="l01059"></a><a class="code" href="structbt__pci__reg__t.html#a6e8812e86fd7cf417def93ddb5601824">01059</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema0;
<a name="l01060"></a><a class="code" href="structbt__pci__reg__t.html#a1d4531a450bedd47337e60bb00822d1d">01060</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema1;
<a name="l01061"></a><a class="code" href="structbt__pci__reg__t.html#a3685b56f5da2d33a051b23bb75588eaa">01061</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema2;
<a name="l01062"></a><a class="code" href="structbt__pci__reg__t.html#a83e0d75ae6c530a0a6c39efd1ec42d6d">01062</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema3;
<a name="l01063"></a><a class="code" href="structbt__pci__reg__t.html#a2c4392c98b821e9ce54a6ff7d664aaf7">01063</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema4;
<a name="l01064"></a><a class="code" href="structbt__pci__reg__t.html#a77144c0d5c0794cb5aa8514b8b2ffcea">01064</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema5;
<a name="l01065"></a><a class="code" href="structbt__pci__reg__t.html#af9991a765e938a1646fc7ee3d60a7b7f">01065</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema6;
<a name="l01066"></a><a class="code" href="structbt__pci__reg__t.html#ac3ffabdfbc5a56638ee75211783312dc">01066</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          loc_sema7;
<a name="l01067"></a>01067         
<a name="l01068"></a><a class="code" href="structbt__pci__reg__t.html#a3825004df808dc40eb3d5dd8c420e7c7">01068</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema0;
<a name="l01069"></a><a class="code" href="structbt__pci__reg__t.html#a76b06b0de39460c72c7123b941428d4c">01069</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema1;
<a name="l01070"></a><a class="code" href="structbt__pci__reg__t.html#aa683570da492f96e6565fb1d7a8361b6">01070</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema2;
<a name="l01071"></a><a class="code" href="structbt__pci__reg__t.html#ab04252a9beb8b26202160e19bce7b7bf">01071</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema3;
<a name="l01072"></a><a class="code" href="structbt__pci__reg__t.html#a0e775a18e2b56eb3a1031649c1a96ba6">01072</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema4;
<a name="l01073"></a><a class="code" href="structbt__pci__reg__t.html#a4a0b4c915c4488d8a896880a035d3bf3">01073</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema5;
<a name="l01074"></a><a class="code" href="structbt__pci__reg__t.html#aec33509e7357681d2fb5a6cbdd91a32d">01074</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema6;
<a name="l01075"></a><a class="code" href="structbt__pci__reg__t.html#adb7b03fc22a8afa7adbca99ee01615a8">01075</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rem_sema7;
<a name="l01076"></a><a class="code" href="btngpci_8h.html#aab0ef9daa8d241d8b696b0276c087008">01076</a> <span class="preprocessor">#define BT_SEMA_TAKE        (1&lt;&lt;0)</span>
<a name="l01077"></a><a class="code" href="btngpci_8h.html#a9c0422407195037d02d2a3ccbada3f18">01077</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_SEMA_GIVE        (0)</span>
<a name="l01078"></a>01078 <span class="preprocessor"></span>
<a name="l01079"></a><a class="code" href="structbt__pci__reg__t.html#a972e4f45fc045eea455090ef6b770f8e">01079</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved30;
<a name="l01080"></a><a class="code" href="structbt__pci__reg__t.html#a867a928394c5b9bd1577def36252e1c2">01080</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved31;
<a name="l01081"></a><a class="code" href="structbt__pci__reg__t.html#a34bf20661f9bfc1fae30bfae4eb7db32">01081</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved32;
<a name="l01082"></a><a class="code" href="structbt__pci__reg__t.html#a096407c910432862e053dc23aced0813">01082</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved33;
<a name="l01083"></a><a class="code" href="structbt__pci__reg__t.html#a9c14fa9d37531f42424d8fc596f8d9a2">01083</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved34;
<a name="l01084"></a><a class="code" href="structbt__pci__reg__t.html#ad57a5f9d22980cc3e309165e08d5bac7">01084</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved35;
<a name="l01085"></a><a class="code" href="structbt__pci__reg__t.html#a1f703c26909a13ba1b5ef2606c497210">01085</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved36;
<a name="l01086"></a><a class="code" href="structbt__pci__reg__t.html#a93e69e4147e147b3205a1f9e1b1c71a9">01086</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved37;
<a name="l01087"></a>01087         
<a name="l01088"></a>01088         <span class="comment">/*</span>
<a name="l01089"></a>01089 <span class="comment">        ** Do not access these registers unless you have RPQ #601107 </span>
<a name="l01090"></a>01090 <span class="comment">        ** These registers allow direct access to all local registers </span>
<a name="l01091"></a>01091 <span class="comment">        ** located on the remote card</span>
<a name="l01092"></a>01092 <span class="comment">        **</span>
<a name="l01093"></a>01093 <span class="comment">        ** For non RPQ #601107 cards these registers will return garbage</span>
<a name="l01094"></a>01094 <span class="comment">        **</span>
<a name="l01095"></a>01095 <span class="comment">        ** For bit definitions please use the defines for the </span>
<a name="l01096"></a>01096 <span class="comment">        ** corresponding local registers.</span>
<a name="l01097"></a>01097 <span class="comment">        */</span>
<a name="l01098"></a><a class="code" href="structbt__pci__reg__t.html#a1b20db2d9eed302ebc3a64290369516f">01098</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rpq_rem_lloc_cmd1;
<a name="l01099"></a><a class="code" href="structbt__pci__reg__t.html#ad0c6324e3db198fd993bb07e3920ae61">01099</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rpq_rem_lint_ctrl;
<a name="l01100"></a><a class="code" href="structbt__pci__reg__t.html#a2ffd42ea9ca5d187f859dc892c2edb2b">01100</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rpq_rem_lstatus;
<a name="l01101"></a><a class="code" href="structbt__pci__reg__t.html#a6b6610f38a1a3512f819e87bd493def4">01101</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rpq_rem_lint_status;
<a name="l01102"></a><a class="code" href="structbt__pci__reg__t.html#a788a905557e53ca4b12600fe79171456">01102</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rpq_rem_lbus_ctrl;
<a name="l01103"></a><a class="code" href="structbt__pci__reg__t.html#ad4e51e09629156ba1460c55371b9837f">01103</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          rpq_rem_lloopback;
<a name="l01104"></a><a class="code" href="structbt__pci__reg__t.html#a244028cfe64a1bccabe91e9cf4d9a72b">01104</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved3e;
<a name="l01105"></a><a class="code" href="structbt__pci__reg__t.html#a46524e45aa6215a064f0c54637c84f84">01105</a>         <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>          reserved3f;
<a name="l01106"></a>01106 
<a name="l01107"></a>01107 <span class="comment">/* EAS A64 */</span>
<a name="l01108"></a>01108         <span class="comment">/*</span>
<a name="l01109"></a>01109 <span class="comment">        ** Do not access these registers unless you have RPQ #601332</span>
<a name="l01110"></a>01110 <span class="comment">        ** These registers allow direct access to all local registers </span>
<a name="l01111"></a>01111 <span class="comment">        ** located on the remote card</span>
<a name="l01112"></a>01112 <span class="comment">        **</span>
<a name="l01113"></a>01113 <span class="comment">        ** For non RPQ #601332 cards these registers will return garbage</span>
<a name="l01114"></a>01114 <span class="comment">        **</span>
<a name="l01115"></a>01115 <span class="comment">        ** For bit definitions please use the defines for the </span>
<a name="l01116"></a>01116 <span class="comment">        ** corresponding local registers.</span>
<a name="l01117"></a>01117 <span class="comment">        */</span>
<a name="l01118"></a>01118         
<a name="l01119"></a><a class="code" href="structbt__pci__reg__t.html#a1172f9cb956e7c772b2f2e2b9c6333bc">01119</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        reserved40;
<a name="l01120"></a><a class="code" href="structbt__pci__reg__t.html#a76ae76b5ed293ba30b5c71c18f936a0e">01120</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        reserved42;
<a name="l01121"></a><a class="code" href="structbt__pci__reg__t.html#a3b9a29a6d102a86a3b5f2adf4438aa5f">01121</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        reserved44;
<a name="l01122"></a><a class="code" href="structbt__pci__reg__t.html#a77f836d557fd1e7a0788cb69bf0170cb">01122</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        reserved46;
<a name="l01123"></a>01123         <span class="comment">/* Remote Node Upper Address PIO Register (read/write, 32 bits) offset 0x48 */</span>
<a name="l01124"></a><a class="code" href="structbt__pci__reg__t.html#abf961e239a7388762535c5ea1fae831c">01124</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        rem_a64pio_addr_lo;
<a name="l01125"></a><a class="code" href="structbt__pci__reg__t.html#ade9b005c25a3648c709a3014f3d1b4eb">01125</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        rem_a64pio_addr_hi;
<a name="l01126"></a>01126         <span class="comment">/* Remote Node Upper Address DMA Register (read/write, 32 bits) offset 0x4c */</span>
<a name="l01127"></a><a class="code" href="structbt__pci__reg__t.html#af7dcaee65e2fdaa17bb0482fa496e144">01127</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        rem_a64dma_addr_lo;
<a name="l01128"></a><a class="code" href="structbt__pci__reg__t.html#a52303c52920a3061b91d303f05af898e">01128</a>         <a class="code" href="btdef_8h.html#a0c21a1ea11b46ad2ca1377372dcb51ad">bt_data16_t</a>        rem_a64dma_addr_hi;
<a name="l01129"></a>01129 
<a name="l01130"></a>01130 } <a class="code" href="structbt__pci__reg__t.html">bt_pci_reg_t</a>;
<a name="l01131"></a>01131 
<a name="l01132"></a>01132 <span class="comment">/*****************************************************************************</span>
<a name="l01133"></a>01133 <span class="comment">**</span>
<a name="l01134"></a>01134 <span class="comment">**  Define all possible cable interrupts -- not currently useful</span>
<a name="l01135"></a>01135 <span class="comment">**</span>
<a name="l01136"></a>01136 <span class="comment">*****************************************************************************/</span>
<a name="l01137"></a>01137 
<a name="l01138"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066">01138</a> <span class="keyword">enum</span> <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066">BT_CABLE_INTR</a> {
<a name="l01139"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066acfd5fc32735f2080b0d68117c7efc8e9">01139</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066acfd5fc32735f2080b0d68117c7efc8e9">BT_CINT_1</a> = 1,              <span class="comment">/* Cable interrupt one                      */</span>
<a name="l01140"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a7316cb811a08a3de2a24027b10e1f5eb">01140</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a7316cb811a08a3de2a24027b10e1f5eb">BT_CINT_2</a>,                  <span class="comment">/* Cable interrupt two                      */</span>
<a name="l01141"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a24a07ffa012848e1f0ecf1b3b5ecf9e9">01141</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a24a07ffa012848e1f0ecf1b3b5ecf9e9">BT_CINT_3</a>,                  <span class="comment">/* Cable interrupt three                    */</span>
<a name="l01142"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a97dc9bf473aeda5dfedbf356b35fbbfd">01142</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a97dc9bf473aeda5dfedbf356b35fbbfd">BT_CINT_4</a>,                  <span class="comment">/* Cable interrupt four                     */</span>
<a name="l01143"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a65d3df896ee1123b20cf3ada827e4d1f">01143</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a65d3df896ee1123b20cf3ada827e4d1f">BT_CINT_5</a>,                  <span class="comment">/* Cable interrupt five                     */</span>
<a name="l01144"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a0ca9c9698e572e6ab5ded20f9c865fef">01144</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a0ca9c9698e572e6ab5ded20f9c865fef">BT_CINT_6</a>,                  <span class="comment">/* Cable interrupt six                      */</span>
<a name="l01145"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a6c78d5bc3314cd44503b0d25a5929d9c">01145</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a6c78d5bc3314cd44503b0d25a5929d9c">BT_CINT_7</a>,                  <span class="comment">/* Cable interrupt seven                    */</span>
<a name="l01146"></a><a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a813430e3a35b391903c302cfaa9018bd">01146</a>     <a class="code" href="btngpci_8h.html#acbc9333058f645e11ac3eecb88499066a813430e3a35b391903c302cfaa9018bd">BT_CINT_MAX</a>                 <span class="comment">/* Actually more than the maximum           */</span>
<a name="l01147"></a>01147 };
<a name="l01148"></a>01148 
<a name="l01149"></a>01149 <span class="comment">/*****************************************************************************</span>
<a name="l01150"></a>01150 <span class="comment">**</span>
<a name="l01151"></a>01151 <span class="comment">**  DEFINE GENERIC INTERRUPT HANDLER MACROS:</span>
<a name="l01152"></a>01152 <span class="comment">**</span>
<a name="l01153"></a>01153 <span class="comment">**  Define LOAD_MAP_REG macro here so loading a mapping register is illegal.</span>
<a name="l01154"></a>01154 <span class="comment">**</span>
<a name="l01155"></a>01155 <span class="comment">*****************************************************************************/</span>
<a name="l01156"></a>01156 
<a name="l01157"></a><a class="code" href="btngpci_8h.html#aaa3954f997bd87210790719dfc25ae34">01157</a> <span class="preprocessor">#define LOAD_MAP_REG(map_reg_ptr, rem_addr, addr_mod) \</span>
<a name="l01158"></a>01158 <span class="preprocessor">    </span><span class="comment">/* LOAD_MAP_REG(caddr_t map_reg_ptr, u_long rem_addr, u_char addr_mod) */</span> \
<a name="l01159"></a>01159     <span class="comment">/* This macro may be used only in a kernel extension interrupt handler */</span> \
<a name="l01160"></a>01160     panic(&quot;LOAD_MAP_REG() is illegal - mappable windows are not supported.&quot;)
<a name="l01161"></a>01161 
<a name="l01162"></a>01162 
<a name="l01163"></a><a class="code" href="btngpci_8h.html#abf9a91fd65f8eb15ac3ea5eae4a7ef48">01163</a> <span class="preprocessor">#define BT_FAIL   (-1)</span>
<a name="l01164"></a><a class="code" href="btngpci_8h.html#a590d604d692644c9a41d1308224bfe14">01164</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_SUCC   0</span>
<a name="l01165"></a>01165 <span class="preprocessor"></span>
<a name="l01166"></a>01166 
<a name="l01167"></a>01167 <span class="comment">/*****************************************************************************</span>
<a name="l01168"></a>01168 <span class="comment">**</span>
<a name="l01169"></a>01169 <span class="comment">**  List generic macros below</span>
<a name="l01170"></a>01170 <span class="comment">**</span>
<a name="l01171"></a>01171 <span class="comment">*****************************************************************************/</span>
<a name="l01172"></a>01172 
<a name="l01173"></a><a class="code" href="btngpci_8h.html#a105d05dd077c106fa3c4ab8a7735fcf8">01173</a> <span class="preprocessor">#define  SET_BIT(base, bits)  ((base) |= (bits))</span>
<a name="l01174"></a><a class="code" href="btngpci_8h.html#a7fe8a26da123b5aa202d00eb8b840e0f">01174</a> <span class="preprocessor"></span><span class="preprocessor">#define  CLR_BIT(base, bits)  ((base) &amp;= ~(bits))</span>
<a name="l01175"></a><a class="code" href="btngpci_8h.html#afd68b8d94f3fb6ab3119ee7e14cca286">01175</a> <span class="preprocessor"></span><span class="preprocessor">#define  TST_BIT(base, bits)  (((base) &amp; (bits)) != 0)</span>
<a name="l01176"></a><a class="code" href="btngpci_8h.html#a08d993095db76e25e0b51808b1dcbc6d">01176</a> <span class="preprocessor"></span><span class="preprocessor">#define  IS_CLR(base, bits)   (((base) &amp; (bits)) == 0)</span>
<a name="l01177"></a><a class="code" href="btngpci_8h.html#ac9bd8d3ddaf932df7c5a58985a616d5a">01177</a> <span class="preprocessor"></span><span class="preprocessor">#define  IS_SET(base, bits)   TST_BIT(base, bits)</span>
<a name="l01178"></a>01178 <span class="preprocessor"></span>
<a name="l01179"></a><a class="code" href="btngpci_8h.html#abe2ca9899346f03cdb199456b115c88d">01179</a> <span class="preprocessor">#define IS_D16_ALIGNED(addr)  (((bt_devaddr_t)(addr) &amp; 0x01) == 0)</span>
<a name="l01180"></a><a class="code" href="btngpci_8h.html#aa13e412bf0892cc47c17f8392f668f43">01180</a> <span class="preprocessor"></span><span class="preprocessor">#define IS_D32_ALIGNED(addr)  (((bt_devaddr_t)(addr) &amp; 0x03) == 0)</span>
<a name="l01181"></a><a class="code" href="btngpci_8h.html#a448596867d529b5ee828de602a599579">01181</a> <span class="preprocessor"></span><span class="preprocessor">#define IS_D64_ALIGNED(addr)  (((bt_devaddr_t)(addr) &amp; 0x07) == 0)</span>
<a name="l01182"></a>01182 <span class="preprocessor"></span>
<a name="l01183"></a>01183 
<a name="l01184"></a>01184 <span class="comment">/*****************************************************************************</span>
<a name="l01185"></a>01185 <span class="comment">**</span>
<a name="l01186"></a>01186 <span class="comment">**  List diagnostic and Mirror API macros below</span>
<a name="l01187"></a>01187 <span class="comment">**</span>
<a name="l01188"></a>01188 <span class="comment">**  For Internal Use Only!</span>
<a name="l01189"></a>01189 <span class="comment">**</span>
<a name="l01190"></a>01190 <span class="comment">*****************************************************************************/</span>
<a name="l01191"></a><a class="code" href="btngpci_8h.html#a377438680c7e265ca65ef0a8dc61b35b">01191</a> <span class="preprocessor">#define BT_DIAG_MREG_OFFSET         (0x0)</span>
<a name="l01192"></a><a class="code" href="btngpci_8h.html#a66a27626512c9f81016f66ff33a45847">01192</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_DIAG_NIO_OFFSET          (0x40000000)</span>
<a name="l01193"></a><a class="code" href="btngpci_8h.html#ab0f62c727ca06006e9d986d561fe5ccc">01193</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_DIAG_ISR_Q_OFFSET        (0x40100000)</span>
<a name="l01194"></a>01194 <span class="preprocessor"></span>
<a name="l01195"></a>01195 <span class="comment">/* </span>
<a name="l01196"></a>01196 <span class="comment">** These macros make it easier to update the code below for adding </span>
<a name="l01197"></a>01197 <span class="comment">** interrupt types, keeping track of which irq queue was</span>
<a name="l01198"></a>01198 <span class="comment">** use to do the malloc, and each q size in bytes.  </span>
<a name="l01199"></a>01199 <span class="comment">**</span>
<a name="l01200"></a>01200 <span class="comment">** Both the library and the driver assume that the interrupt queues</span>
<a name="l01201"></a>01201 <span class="comment">** are assigned in the following order from the malloced or mmaped</span>
<a name="l01202"></a>01202 <span class="comment">** buffer: error, programmed, and then VME/IACK.  </span>
<a name="l01203"></a>01203 <span class="comment">**</span>
<a name="l01204"></a>01204 <span class="comment">** BTK_Q_USE and BTK_Q_NUM are used only by the driver, but included</span>
<a name="l01205"></a>01205 <span class="comment">** here to make them easier to find.</span>
<a name="l01206"></a>01206 <span class="comment">**</span>
<a name="l01207"></a>01207 <span class="comment">** BTK_Q_SIZE stands for the size of each queue including the controlling</span>
<a name="l01208"></a>01208 <span class="comment">** bt_irq_q_t structure.  BTK_Q_NUM * BTK_Q_SIZE is the number of bytes </span>
<a name="l01209"></a>01209 <span class="comment">** malloced and the number of bytes that should be mmap by the library.</span>
<a name="l01210"></a>01210 <span class="comment">**</span>
<a name="l01211"></a>01211 <span class="comment">** BTK_Q_ASSIGN assigns each queue structure to the proper portion of the</span>
<a name="l01212"></a>01212 <span class="comment">** malloced or mmapped region described by q_start_p.</span>
<a name="l01213"></a>01213 <span class="comment">**</span>
<a name="l01214"></a>01214 <span class="comment">** Note:</span>
<a name="l01215"></a>01215 <span class="comment">** To get the q_size (qz) the library should call bt_get_info with</span>
<a name="l01216"></a>01216 <span class="comment">** BT_INFO_ICBR_Q_SIZE</span>
<a name="l01217"></a>01217 <span class="comment">*/</span>
<a name="l01218"></a><a class="code" href="btngpci_8h.html#a0658946cd9b5db22b410d701a7843895">01218</a> <span class="preprocessor">#define BTK_Q_NUM               (BT_MAX_IRQ - 1)    </span><span class="comment">/* # of irq thread queues */</span>
<a name="l01219"></a><a class="code" href="btngpci_8h.html#a87969100e7a4832863fc0857431bf52b">01219</a> <span class="preprocessor">#define BTK_Q_USE               (unit_p-&gt;error_irq_q_p) </span><span class="comment">/* Which queue as used for malloc */</span>
<a name="l01220"></a><a class="code" href="btngpci_8h.html#ae927250a123e2f71bc8462827c83e33b">01220</a> <span class="preprocessor">#define BTK_Q_BYTES(q_size)     (sizeof(bt_irq_q_t) + sizeof(bt_data32_t) * (q_size - 1))</span>
<a name="l01221"></a><a class="code" href="btngpci_8h.html#abb151c90f4cd50fa2dd3580e1ccee56b">01221</a> <span class="preprocessor"></span><span class="preprocessor">#define BTK_Q_SIZE(qz)          ((BTK_Q_BYTES(qz) % sizeof(bt_data64_t)) ? BTK_Q_BYTES(qz) + sizeof(bt_data32_t) : BTK_Q_BYTES(qz))</span>
<a name="l01222"></a><a class="code" href="btngpci_8h.html#a8b4d7481fa9c0110794c0ab8f1904dfb">01222</a> <span class="preprocessor"></span><span class="preprocessor">#define BTK_Q_ASSIGN(q_start_p, err_q_p, prog_q_p, vme_q_p, q_size)  \</span>
<a name="l01223"></a>01223 <span class="preprocessor">        err_q_p = (bt_irq_q_t *) q_start_p; \</span>
<a name="l01224"></a>01224 <span class="preprocessor">        prog_q_p = (bt_irq_q_t *) (q_start_p + BTK_Q_SIZE(q_size)); \</span>
<a name="l01225"></a>01225 <span class="preprocessor">        vme_q_p = (bt_irq_q_t *) (q_start_p + 2 * BTK_Q_SIZE(q_size)); </span>
<a name="l01226"></a>01226 <span class="preprocessor"></span>
<a name="l01227"></a>01227 <span class="comment">/*</span>
<a name="l01228"></a>01228 <span class="comment">**  List all Bit 3 adaptor IDs registered to date.</span>
<a name="l01229"></a>01229 <span class="comment">**  Used in process of determining remote identification.</span>
<a name="l01230"></a>01230 <span class="comment">*/</span>
<a name="l01231"></a><a class="code" href="btngpci_8h.html#ab2300d268c601636f0db54bdaad8533e">01231</a> <span class="preprocessor">#define BT_ID_EISA      0x62                </span><span class="comment">/* EISA ID Value                */</span>
<a name="l01232"></a><a class="code" href="btngpci_8h.html#af3662a32066d02f516f7f272c6b176be">01232</a> <span class="preprocessor">#define BT_ID_EISA2     0x41                </span><span class="comment">/* New EISA ID Value            */</span>
<a name="l01233"></a><a class="code" href="btngpci_8h.html#aa3752700ba83cb18c459b9c114d0e867">01233</a> <span class="preprocessor">#define BT_ID_MCA3_DMA  0x76                </span><span class="comment">/* MCA type 3 w/slave DMA       */</span>
<a name="l01234"></a><a class="code" href="btngpci_8h.html#ab29d32b12697a62d23bbe7037e1e34eb">01234</a> <span class="preprocessor">#define BT_ID_SB_DMA    0xDF                </span><span class="comment">/* SBus ID Value                */</span>
<a name="l01235"></a><a class="code" href="btngpci_8h.html#a600eb022f1b664d16f807d2f1eb125a6">01235</a> <span class="preprocessor">#define BT_ID_TC        0x4D                </span><span class="comment">/* TURBOchannel ID Value        */</span>
<a name="l01236"></a><a class="code" href="btngpci_8h.html#a80c7bce188a03f25b42f4c6284f0dee5">01236</a> <span class="preprocessor">#define BT_ID_VME_SDMA  0x80                </span><span class="comment">/* VMEbus w/ Slave DMA          */</span>
<a name="l01237"></a><a class="code" href="btngpci_8h.html#a356998cc603a6f0f837cbf0003579757">01237</a> <span class="preprocessor">#define BT_ID_GIO       0x47                </span><span class="comment">/* GIO ID value - ASCII &quot;G&quot;     */</span>
<a name="l01238"></a><a class="code" href="btngpci_8h.html#a8d7c5935abeb073e9e7ad5fa4afc8481">01238</a> <span class="preprocessor">#define BT_ID_PCI_DMA   0xAB                </span><span class="comment">/* PCI card ID value            */</span>
<a name="l01239"></a><a class="code" href="btngpci_8h.html#a741f5334b0fb4e75574fd111255e03e5">01239</a> <span class="preprocessor">#define BT_ID_PCI       0xAC                </span><span class="comment">/* PCI wo/DMA card ID value     */</span>
<a name="l01240"></a><a class="code" href="btngpci_8h.html#a791edca37ae42f7934aeb743a736d183">01240</a> <span class="preprocessor">#define BT_ID_VME_NODMA 0x81                </span><span class="comment">/* VME wo/DMA card ID value     */</span>
<a name="l01241"></a><a class="code" href="btngpci_8h.html#acdcb88f27b3ba556dd066afa90dfd3e4">01241</a> <span class="preprocessor">#define BT_ID_VME_NOINC 0x82                </span><span class="comment">/* VME RPQ w/ DMA Inc Inhibit   */</span>
<a name="l01242"></a><a class="code" href="btngpci_8h.html#ae8cd987dba918eaf1c67970b5048cf23">01242</a> <span class="preprocessor">#define BT_ID_VME_FIBER 0x83                </span><span class="comment">/* VME Fiberoptic card          */</span>
<a name="l01243"></a><a class="code" href="btngpci_8h.html#abf1dc3e11b27622b69f116204e5ea1ea">01243</a> <span class="preprocessor">#define BT_ID_VME_FIBER_D64 0x84            </span><span class="comment">/* VME Fiberoptic card w/D64    */</span>
<a name="l01244"></a><a class="code" href="btngpci_8h.html#ae75f1c8f09d0f34828b7ba94fc32b53b">01244</a> <span class="preprocessor">#define BT_ID_VME_DB    0x85            </span><span class="comment">/* VME dataBLIZZARD w/D64 */</span>
<a name="l01245"></a><a class="code" href="btngpci_8h.html#a77ed1765a48f0817a60d0a8adcfe6297">01245</a> <span class="preprocessor">#define BT_ID_PCI_FIBER 0xAD                </span><span class="comment">/* PCI Fiberoptic card          */</span>
<a name="l01246"></a><a class="code" href="btngpci_8h.html#a3792f50cfe592bcddc497d539e11f341">01246</a> <span class="preprocessor">#define BT_ID_PCI_FIBER_D64 0xAE            </span><span class="comment">/* PCI Fiberoptic card w/D64    */</span>
<a name="l01247"></a><a class="code" href="btngpci_8h.html#af01c69b14c6659337539379a22bad186">01247</a> <span class="preprocessor">#define BT_ID_PCI_DBA64_RPQ 0xAF            </span><span class="comment">/* PCI Fiberoptic card w/A64 RPQ 601332    */</span>
<a name="l01248"></a>01248 
<a name="l01249"></a>01249 <span class="comment">/*****************************************************************************</span>
<a name="l01250"></a>01250 <span class="comment">**</span>
<a name="l01251"></a>01251 <span class="comment">**  Include old type and macros names for backwards compatiblity only.</span>
<a name="l01252"></a>01252 <span class="comment">**</span>
<a name="l01253"></a>01253 <span class="comment">**  Do Not Use These Names For New Development.  </span>
<a name="l01254"></a>01254 <span class="comment">**  These Names May Be Obsoleted At Any Time.</span>
<a name="l01255"></a>01255 <span class="comment">**</span>
<a name="l01256"></a>01256 <span class="comment">*****************************************************************************/</span>
<a name="l01257"></a>01257 <span class="comment">/*******************************************************************************</span>
<a name="l01258"></a>01258 <span class="comment">**</span>
<a name="l01259"></a>01259 <span class="comment">**  Lock device structure (for BIOC_LOCK)</span>
<a name="l01260"></a>01260 <span class="comment">**</span>
<a name="l01261"></a>01261 <span class="comment">*******************************************************************************/</span>
<a name="l01262"></a><a class="code" href="structbt__lock__d.html">01262</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbt__lock__d.html">bt_lock_d</a> {
<a name="l01263"></a><a class="code" href="structbt__lock__d.html#af323359b3450822ed835b13c79406e07">01263</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  <a class="code" href="structbt__lock__d.html#af323359b3450822ed835b13c79406e07">error</a>;                 <span class="comment">/* Error code                        */</span>
<a name="l01264"></a><a class="code" href="structbt__lock__d.html#a0c40ff35188357a76115144291e45f78">01264</a>     <a class="code" href="btwdef_8h.html#aaa3d346aa6a046a64fdcc9e9a76b4ad2">bt_msec_t</a>    <a class="code" href="structbt__lock__d.html#a0c40ff35188357a76115144291e45f78">timeout</a>;               <span class="comment">/* Maximum lock time in milliseconds */</span>
<a name="l01265"></a><a class="code" href="structbt__lock__d.html#a87a851e3f19882f59a192f3c8f11e40f">01265</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  <a class="code" href="structbt__lock__d.html#a87a851e3f19882f59a192f3c8f11e40f">signum</a>;                <span class="comment">/* Signal number to send on timeout  */</span>
<a name="l01266"></a><a class="code" href="structbt__lock__d.html#a448ff05b85eae067e197074c925083a9">01266</a>     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  <a class="code" href="structbt__lock__d.html#a448ff05b85eae067e197074c925083a9">nowait</a>;                <span class="comment">/* FALSE = wait; TRUE = don&apos;t wait   */</span>
<a name="l01267"></a>01267 } <a class="code" href="structbt__lock__d.html">bt_lock_t</a>;
<a name="l01268"></a>01268 
<a name="l01269"></a>01269 <span class="preprocessor">#if defined(__osf__)</span>
<a name="l01270"></a>01270 <span class="preprocessor"></span>
<a name="l01271"></a>01271 <span class="keyword">typedef</span> u_char  <a class="code" href="btngpci_8h.html#a515042ea18fe7cc5e23e652ec4624bfb">data8_t</a>;
<a name="l01272"></a>01272 <span class="keyword">typedef</span> u_short <a class="code" href="btngpci_8h.html#abd7200f8a28ddff8324ac8f151b8e156">data16_t</a>;
<a name="l01273"></a>01273 <span class="keyword">typedef</span> <a class="code" href="console_8h.html#ad46b2ebcd4c426b06cda147ddc1001e7">uint</a>    <a class="code" href="btngpci_8h.html#a4641acffce9f4d581b1003ab861a6699">data32_t</a>; <span class="comment">/* uint = unsigned int = 32 bits */</span>
<a name="l01274"></a>01274 <span class="keyword">typedef</span> u_long  data64_t; <span class="comment">/* u_long = 64 bits for Alpha */</span>
<a name="l01275"></a>01275 
<a name="l01276"></a>01276 <span class="preprocessor">#define DATA8_SIZ    sizeof(data8_t)</span>
<a name="l01277"></a>01277 <span class="preprocessor"></span><span class="preprocessor">#define DATA16_SIZ   sizeof(data16_t)</span>
<a name="l01278"></a>01278 <span class="preprocessor"></span><span class="preprocessor">#define DATA32_SIZ   sizeof(data32_t)</span>
<a name="l01279"></a>01279 <span class="preprocessor"></span><span class="preprocessor">#define DATA64_SIZ   sizeof(data64_t)</span>
<a name="l01280"></a>01280 <span class="preprocessor"></span><span class="preprocessor">#define DATA_ANY_SIZ 0</span>
<a name="l01281"></a>01281 <span class="preprocessor"></span>
<a name="l01282"></a>01282 <span class="preprocessor">#elif defined(_sun) </span><span class="comment">/* _sun */</span>
<a name="l01283"></a>01283 
<a name="l01284"></a>01284 <span class="keyword">typedef</span> uint8_t         <a class="code" href="btngpci_8h.html#a515042ea18fe7cc5e23e652ec4624bfb">data8_t</a>;
<a name="l01285"></a>01285 <span class="keyword">typedef</span> uint16_t        <a class="code" href="btngpci_8h.html#abd7200f8a28ddff8324ac8f151b8e156">data16_t</a>;
<a name="l01286"></a>01286 <span class="keyword">typedef</span> uint32_t        <a class="code" href="btngpci_8h.html#a4641acffce9f4d581b1003ab861a6699">data32_t</a>;
<a name="l01287"></a>01287 <span class="keyword">typedef</span> uint64_t        data64_t;
<a name="l01288"></a>01288 
<a name="l01289"></a>01289 <span class="preprocessor">#define DATA8_SIZ    sizeof(data8_t)</span>
<a name="l01290"></a>01290 <span class="preprocessor"></span><span class="preprocessor">#define DATA16_SIZ   sizeof(data16_t)</span>
<a name="l01291"></a>01291 <span class="preprocessor"></span><span class="preprocessor">#define DATA32_SIZ   sizeof(data32_t)</span>
<a name="l01292"></a>01292 <span class="preprocessor"></span><span class="preprocessor">#define DATA64_SIZ   sizeof(data64_t)</span>
<a name="l01293"></a>01293 <span class="preprocessor"></span><span class="preprocessor">#define DATA_ANY_SIZ 0</span>
<a name="l01294"></a>01294 <span class="preprocessor"></span>
<a name="l01295"></a>01295 <span class="preprocessor">#else </span><span class="comment">/* __osf__ */</span>
<a name="l01296"></a>01296 
<a name="l01297"></a><a class="code" href="btngpci_8h.html#a515042ea18fe7cc5e23e652ec4624bfb">01297</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  <a class="code" href="btngpci_8h.html#a515042ea18fe7cc5e23e652ec4624bfb">data8_t</a>;
<a name="l01298"></a><a class="code" href="btngpci_8h.html#abd7200f8a28ddff8324ac8f151b8e156">01298</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="btngpci_8h.html#abd7200f8a28ddff8324ac8f151b8e156">data16_t</a>;
<a name="l01299"></a><a class="code" href="btngpci_8h.html#a4641acffce9f4d581b1003ab861a6699">01299</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>  <a class="code" href="btngpci_8h.html#a4641acffce9f4d581b1003ab861a6699">data32_t</a>;
<a name="l01300"></a>01300 
<a name="l01301"></a><a class="code" href="btngpci_8h.html#a361a9ac848026529da914fcc96d9ce4f">01301</a> <span class="preprocessor">#define DATA8_SIZ    sizeof(data8_t)</span>
<a name="l01302"></a><a class="code" href="btngpci_8h.html#a987c92b4b5ac9cb30ac386b460cd0191">01302</a> <span class="preprocessor"></span><span class="preprocessor">#define DATA16_SIZ   sizeof(data16_t)</span>
<a name="l01303"></a><a class="code" href="btngpci_8h.html#a6b9c103f70d02967a9938e0bd8a07aac">01303</a> <span class="preprocessor"></span><span class="preprocessor">#define DATA32_SIZ   sizeof(data32_t)</span>
<a name="l01304"></a><a class="code" href="btngpci_8h.html#a1078172b525e6a1fd189b3e07dd5a807">01304</a> <span class="preprocessor"></span><span class="preprocessor">#define DATA_ANY_SIZ 0</span>
<a name="l01305"></a>01305 <span class="preprocessor"></span>
<a name="l01306"></a>01306 <span class="preprocessor">#endif </span><span class="comment">/* __osf__ */</span>
<a name="l01307"></a>01307 
<a name="l01308"></a><a class="code" href="btngpci_8h.html#ad6da760f7187cd6bb54eb85948cbac0f">01308</a> <span class="preprocessor">#define NIBL_MASK 0xF</span>
<a name="l01309"></a><a class="code" href="btngpci_8h.html#a8f01ac138ce0a1e79d1fa8c0d294e113">01309</a> <span class="preprocessor"></span><span class="preprocessor">#define NIBL_SHFT 4</span>
<a name="l01310"></a><a class="code" href="btngpci_8h.html#a25c8363b88d9b8f73cc6b1a98bba8d9c">01310</a> <span class="preprocessor"></span><span class="preprocessor">#define BYTE_MASK 0xFF</span>
<a name="l01311"></a><a class="code" href="btngpci_8h.html#ab88dab05e1414a4c31003a74fca8c220">01311</a> <span class="preprocessor"></span><span class="preprocessor">#define BYTE_SHFT 8</span>
<a name="l01312"></a><a class="code" href="btngpci_8h.html#abcb67eb1473b6632cf4c8a8a653f35be">01312</a> <span class="preprocessor"></span><span class="preprocessor">#define WORD_MASK 0xFFFF</span>
<a name="l01313"></a><a class="code" href="btngpci_8h.html#aabffffacbd279ebed61a88e588c05537">01313</a> <span class="preprocessor"></span><span class="preprocessor">#define WORD_SHFT 16</span>
<a name="l01314"></a>01314 <span class="preprocessor"></span><span class="comment">/* #define LONG_MASK 0xFFFFFFFF  conflict with ntddk.h */</span>
<a name="l01315"></a>01315 
<a name="l01316"></a><a class="code" href="btngpci_8h.html#a46d6c83a34100d57c2073b867581ba06">01316</a> <span class="preprocessor">#define WORD_ALIGN(addr)      (((bt_data32_t)(addr) &amp; 0x01) == 0)</span>
<a name="l01317"></a><a class="code" href="btngpci_8h.html#adae385969320fb06f5e3cd3be279e1d0">01317</a> <span class="preprocessor"></span><span class="preprocessor">#define LONG_ALIGN(addr)      (((bt_data32_t)(addr) &amp; 0x03) == 0)</span>
<a name="l01318"></a><a class="code" href="btngpci_8h.html#aef4177413797d07caf089dc078ae1055">01318</a> <span class="preprocessor"></span><span class="preprocessor">#define LONGLONG_ALIGN(addr)  (((bt_data32_t)(addr) &amp; 0x07) == 0)</span>
<a name="l01319"></a>01319 <span class="preprocessor"></span>
<a name="l01320"></a><a class="code" href="btngpci_8h.html#af27df909b2763bfd7aa904387d9a9c4c">01320</a> <span class="preprocessor">#define ISBTCLR(base, bits)  (((base) &amp; (bits)) == 0)</span>
<a name="l01321"></a><a class="code" href="btngpci_8h.html#a793d075f86e5f7615c308c2664fe5d13">01321</a> <span class="preprocessor"></span><span class="preprocessor">#define ISBTSET(base, bits)  TST_BIT(base, bits)</span>
<a name="l01322"></a>01322 <span class="preprocessor"></span>
<a name="l01323"></a><a class="code" href="btngpci_8h.html#aff65152ccb344d50860c57e09bb48927">01323</a> <span class="preprocessor">#define VME_A32_SB  0x0F    </span><span class="comment">/* A32 Extended Supervisory Block Transfer      */</span>
<a name="l01324"></a><a class="code" href="btngpci_8h.html#ac8e558379d5903c4a587026801c1be63">01324</a> <span class="preprocessor">#define VME_A32_SP  0x0E    </span><span class="comment">/* A32 Extended Supervisory Program Access      */</span>
<a name="l01325"></a><a class="code" href="btngpci_8h.html#afd01d6eaea18b99114112b186feb6bfc">01325</a> <span class="preprocessor">#define VME_A32_SD  0x0D    </span><span class="comment">/* A32 Extended Supervisory Data Access         */</span>
<a name="l01326"></a><a class="code" href="btngpci_8h.html#ad51cb41842de8de5255532c85d675f3d">01326</a> <span class="preprocessor">#define VME_A32_NB  0x0B    </span><span class="comment">/* A32 Extended Non-Privileged Block Transfer   */</span>
<a name="l01327"></a><a class="code" href="btngpci_8h.html#a9ba698b677aa21565e9c4fa8b5f5aa27">01327</a> <span class="preprocessor">#define VME_A32_NP  0x0A    </span><span class="comment">/* A32 Extended Non-Privileged Program Access   */</span>
<a name="l01328"></a><a class="code" href="btngpci_8h.html#ab38fe60a95693e93fa879194265b835f">01328</a> <span class="preprocessor">#define VME_A32_ND  0x09    </span><span class="comment">/* A32 Extended Non-Privileged Data Access      */</span>
<a name="l01329"></a>01329 
<a name="l01330"></a><a class="code" href="btngpci_8h.html#a715c8f8bffd9ca982bef558d63608958">01330</a> <span class="preprocessor">#define VME_A32     VME_A32_SD</span>
<a name="l01331"></a>01331 <span class="preprocessor"></span>
<a name="l01332"></a><a class="code" href="btngpci_8h.html#aca6b8c9c35e10bd347a2e1f9c75f25cd">01332</a> <span class="preprocessor">#define VME_A24_SB  0x3F    </span><span class="comment">/* A24 Standard Supervisory Block Transfer      */</span>
<a name="l01333"></a><a class="code" href="btngpci_8h.html#ac8147d3b8eb41d7204f697947f769716">01333</a> <span class="preprocessor">#define VME_A24_SP  0x3E    </span><span class="comment">/* A24 Standard Supervisory Program Access      */</span>
<a name="l01334"></a><a class="code" href="btngpci_8h.html#a52d318667c5dd6df7e0ec551cad4fa7f">01334</a> <span class="preprocessor">#define VME_A24_SD  0x3D    </span><span class="comment">/* A24 Standard Supervisory Data Access         */</span>
<a name="l01335"></a><a class="code" href="btngpci_8h.html#a5d0554dbe9266799506eabe14059ad6f">01335</a> <span class="preprocessor">#define VME_A24_NB  0x3B    </span><span class="comment">/* A24 Standard Non-Privileged Block Transfer   */</span>
<a name="l01336"></a><a class="code" href="btngpci_8h.html#aed2a51454c335ca1a0c912ff5e6468c8">01336</a> <span class="preprocessor">#define VME_A24_NP  0x3A    </span><span class="comment">/* A24 Standard Non-Privileged Program Access   */</span>
<a name="l01337"></a><a class="code" href="btngpci_8h.html#ae49543e2af0ea9b18c3ac0eebf87b7af">01337</a> <span class="preprocessor">#define VME_A24_ND  0x39    </span><span class="comment">/* A24 Standard Non-Privileged Data Access      */</span>
<a name="l01338"></a>01338 
<a name="l01339"></a><a class="code" href="btngpci_8h.html#a88f8be3ca2b6078c3b415abb93bc057e">01339</a> <span class="preprocessor">#define VME_A24     VME_A24_SD</span>
<a name="l01340"></a><a class="code" href="btngpci_8h.html#a57914ecb42013eae56f6e2870c1d0a59">01340</a> <span class="preprocessor"></span><span class="preprocessor">#define VME_A24_MAX 0x1000000</span>
<a name="l01341"></a>01341 <span class="preprocessor"></span>
<a name="l01342"></a><a class="code" href="btngpci_8h.html#a908e9cf1dbf21fe63d6981ddf163290e">01342</a> <span class="preprocessor">#define VME_A16_SD  0x2D    </span><span class="comment">/* A16 Short Supervisory Data Access            */</span>
<a name="l01343"></a><a class="code" href="btngpci_8h.html#aa6f14dcacf5c9b6c2f7c4de383f3537a">01343</a> <span class="preprocessor">#define VME_A16_ND  0x29    </span><span class="comment">/* A16 Short Non-Privileged Data Access         */</span>
<a name="l01344"></a>01344 
<a name="l01345"></a><a class="code" href="btngpci_8h.html#ad043ce2dee3fe3bad0705043205d5c5c">01345</a> <span class="preprocessor">#define VME_A16     VME_A16_SD</span>
<a name="l01346"></a>01346 <span class="preprocessor"></span>
<a name="l01347"></a>01347 <span class="comment">/*</span>
<a name="l01348"></a>01348 <span class="comment">**  List of any card specific values here.</span>
<a name="l01349"></a>01349 <span class="comment">*/</span>
<a name="l01350"></a><a class="code" href="btngpci_8h.html#a013067db86ff088d902990b9d7248c0d">01350</a> <span class="preprocessor">#define BT_QB_PG_MAX    0x3F                </span><span class="comment">/* Qbus max page register value */</span>
<a name="l01351"></a>01351 
<a name="l01352"></a>01352 <span class="comment">/*****************************************************************************</span>
<a name="l01353"></a>01353 <span class="comment">**</span>
<a name="l01354"></a>01354 <span class="comment">**  Kernel Level Information</span>
<a name="l01355"></a>01355 <span class="comment">**</span>
<a name="l01356"></a>01356 <span class="comment">**  NOT Useful or Visable To Applications</span>
<a name="l01357"></a>01357 <span class="comment">**</span>
<a name="l01358"></a>01358 <span class="comment">**  Do not use because these things change often and are not supporred</span>
<a name="l01359"></a>01359 <span class="comment">**  at the application level.</span>
<a name="l01360"></a>01360 <span class="comment">**</span>
<a name="l01361"></a>01361 <span class="comment">*****************************************************************************/</span>
<a name="l01362"></a>01362 
<a name="l01363"></a>01363 <span class="comment">/*</span>
<a name="l01364"></a>01364 <span class="comment">**  Logical devices and unit macros</span>
<a name="l01365"></a>01365 <span class="comment">*/</span>
<a name="l01366"></a><a class="code" href="btngpci_8h.html#a7d3352fdd82ab0faeda3e23a7f107fa5">01366</a> <span class="preprocessor">#define BT_MOCK_UNIT   99               </span><span class="comment">/* When real physical unit is unknown */</span>
<a name="l01367"></a>01367 
<a name="l01368"></a><a class="code" href="btngpci_8h.html#a78ba90c741f77cc862ab4ad3c36b23ec">01368</a> <span class="preprocessor">#define BT_DEV_SHFT     (5)</span>
<a name="l01369"></a><a class="code" href="btngpci_8h.html#a2327c13fe6a6e56ccf8994369626f6f0">01369</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_AXS_SHFT     BT_DEV_SHFT     </span><span class="comment">/* Older name */</span>
<a name="l01370"></a>01370 
<a name="l01371"></a>01371 <span class="comment">/*</span>
<a name="l01372"></a>01372 <span class="comment">** Linux requires that BT_MAX_UNITS be a simple integer with no parathesis</span>
<a name="l01373"></a>01373 <span class="comment">** or operators. It MUST NOT be an expression.</span>
<a name="l01374"></a>01374 <span class="comment">*/</span>
<a name="l01375"></a><a class="code" href="btngpci_8h.html#a49b43a3e6d31968518db378a3fdeb9f3">01375</a> <span class="preprocessor">#define BT_MAX_UNITS    31      </span><span class="comment">/* Don&apos;t change or you will break Linux */</span>
<a name="l01376"></a>01376 <span class="preprocessor">#if     BT_MAX_UNITS != ((1 &lt;&lt; BT_DEV_SHFT) - 1)</span>
<a name="l01377"></a>01377 <span class="preprocessor"></span><span class="preprocessor">#error  &quot;Shift and maximum values out of sync.&quot;</span>
<a name="l01378"></a>01378 <span class="preprocessor"></span><span class="preprocessor">#endif  </span><span class="comment">/* BT_MAX_UNITS */</span>
<a name="l01379"></a>01379 
<a name="l01380"></a>01380 <span class="preprocessor">#if defined(_BTDD_H)</span>
<a name="l01381"></a>01381 <span class="preprocessor"></span><span class="preprocessor">#ifdef __sgi</span>
<a name="l01382"></a>01382 <span class="preprocessor"></span><span class="keyword">extern</span> minor_t btp_get_minor_no (dev_t <a class="code" href="vmedrv_8c.html#a8910285a0352a5c710e65ec9ecbe32a1">dev</a>);
<a name="l01383"></a>01383 <span class="preprocessor">#define BT_UNIT(dev)   ((int)(((long) btp_get_minor_no(dev)) &amp; BT_MAX_UNITS))</span>
<a name="l01384"></a>01384 <span class="preprocessor"></span><span class="preprocessor">#define BT_AXSTYP(dev) ((int)(((long) btp_get_minor_no(dev)) &gt;&gt; BT_DEV_SHFT))</span>
<a name="l01385"></a>01385 <span class="preprocessor"></span>
<a name="l01386"></a>01386 <span class="preprocessor">#elif defined(__sun)</span>
<a name="l01387"></a>01387 <span class="preprocessor"></span><span class="preprocessor">#define BT_UNIT(dev)   (int)(getminor(dev) &amp; BT_MAX_UNITS)</span>
<a name="l01388"></a>01388 <span class="preprocessor"></span><span class="preprocessor">#define BT_AXSTYP(dev) (int)(getminor(dev) &gt;&gt; BT_DEV_SHFT)</span>
<a name="l01389"></a>01389 <span class="preprocessor"></span>
<a name="l01390"></a>01390 <span class="preprocessor">#elif defined(__linux__)</span>
<a name="l01391"></a>01391 <span class="preprocessor"></span>
<a name="l01392"></a>01392 <span class="preprocessor">#if     LINUX_VERSION_CODE &gt;= KERNEL_VERSION(2,5,0)</span>
<a name="l01393"></a>01393 <span class="preprocessor"></span><span class="preprocessor">#define BT_UNIT(dev)   (int)(MINOR(dev) &amp; BT_MAX_UNITS)</span>
<a name="l01394"></a>01394 <span class="preprocessor"></span><span class="preprocessor">#define BT_AXSTYP(dev) (int)(MINOR(dev) &gt;&gt; BT_DEV_SHFT)</span>
<a name="l01395"></a>01395 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l01396"></a>01396 <span class="preprocessor"></span><span class="preprocessor">#define BT_UNIT(dev)   (int)(minor(dev) &amp; BT_MAX_UNITS)</span>
<a name="l01397"></a>01397 <span class="preprocessor"></span><span class="preprocessor">#define BT_AXSTYP(dev) (int)(minor(dev) &gt;&gt; BT_DEV_SHFT)</span>
<a name="l01398"></a>01398 <span class="preprocessor"></span><span class="preprocessor">#endif  </span><span class="comment">/* LINUX_VERSION_CODE &gt;= KERNEL_VERSION(2,5,0) */</span>
<a name="l01399"></a>01399 
<a name="l01400"></a>01400 <span class="preprocessor">#else</span>
<a name="l01401"></a>01401 <span class="preprocessor"></span>
<a name="l01402"></a>01402 <span class="preprocessor">#define BT_UNIT(dev)   (int)(minor(dev) &amp; BT_MAX_UNITS)</span>
<a name="l01403"></a>01403 <span class="preprocessor"></span><span class="preprocessor">#define BT_AXSTYP(dev) (int)(minor(dev) &gt;&gt; BT_DEV_SHFT)</span>
<a name="l01404"></a>01404 <span class="preprocessor"></span>
<a name="l01405"></a>01405 <span class="preprocessor">#endif</span>
<a name="l01406"></a>01406 <span class="preprocessor"></span>
<a name="l01407"></a>01407 <span class="comment">/* </span>
<a name="l01408"></a>01408 <span class="comment">** Used to circumvent lseek() deficiency of using signed 32bit values </span>
<a name="l01409"></a>01409 <span class="comment">*/</span>
<a name="l01410"></a>01410 <span class="preprocessor">#define RE_ADJUST (0x80000000UL)</span>
<a name="l01411"></a>01411 <span class="preprocessor"></span>
<a name="l01412"></a>01412 <span class="comment">/*</span>
<a name="l01413"></a>01413 <span class="comment">** Types of mapping registers</span>
<a name="l01414"></a>01414 <span class="comment">*/</span>
<a name="l01415"></a>01415 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l01416"></a>01416     BT_LMREG_PCI_2_CABLE,
<a name="l01417"></a>01417     BT_LMREG_CABLE_2_PCI,
<a name="l01418"></a>01418     BT_LMREG_DMA_2_PCI,
<a name="l01419"></a>01419     BT_RMREG_PCI_2_CABLE,
<a name="l01420"></a>01420     BT_RMREG_CABLE_2_PCI,
<a name="l01421"></a>01421     BT_RMREG_DMA_2_PCI,
<a name="l01422"></a>01422     BT_MREG_PRG_VECTOR = 0x1ffe,
<a name="l01423"></a>01423     BT_MREG_HW_TRACE = 0x1fff
<a name="l01424"></a>01424 } bt_mreg_t;
<a name="l01425"></a>01425 
<a name="l01426"></a>01426 <span class="comment">/*</span>
<a name="l01427"></a>01427 <span class="comment">** Vector values used for intra-driver communications</span>
<a name="l01428"></a>01428 <span class="comment">**</span>
<a name="l01429"></a>01429 <span class="comment">** All values above BT_DRV_VECTOR_BASE are reserved</span>
<a name="l01430"></a>01430 <span class="comment">** for SBS use only.</span>
<a name="l01431"></a>01431 <span class="comment">*/</span>
<a name="l01432"></a>01432 <span class="preprocessor">#define BT_DRV_VECTOR_BASE              0xff000000</span>
<a name="l01433"></a>01433 <span class="preprocessor"></span><span class="preprocessor">#define BT_DRV_VECTOR_PEER2PEER         BT_DRV_VECTOR_BASE + 1</span>
<a name="l01434"></a>01434 <span class="preprocessor"></span><span class="preprocessor">#define BT_DRV_VECTOR_SEMA_RELEASE      BT_DRV_VECTOR_BASE + 2</span>
<a name="l01435"></a>01435 <span class="preprocessor"></span>
<a name="l01436"></a>01436 <span class="comment">/*</span>
<a name="l01437"></a>01437 <span class="comment">** Paging structure for the driver</span>
<a name="l01438"></a>01438 <span class="comment">*/</span>
<a name="l01439"></a>01439 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l01440"></a>01440     <span class="keywordtype">size_t</span>          page_size;
<a name="l01441"></a>01441     <span class="keywordtype">size_t</span>          page_offset;
<a name="l01442"></a>01442     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>     page_number;
<a name="l01443"></a>01443     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    mreg_start;
<a name="l01444"></a>01444     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    mreg_need;
<a name="l01445"></a>01445     caddr_t         bus_base_p;
<a name="l01446"></a>01446 } btk_page_t;
<a name="l01447"></a>01447 
<a name="l01448"></a>01448 <span class="comment">/*</span>
<a name="l01449"></a>01449 <span class="comment">** ICBR thread tracking data</span>
<a name="l01450"></a>01450 <span class="comment">*/</span>
<a name="l01451"></a>01451 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l01452"></a>01452     bt_event_t      thread_event;
<a name="l01453"></a>01453     <a class="code" href="structbt__data64__t.html">bt_data64_t</a>     thread_id;
<a name="l01454"></a>01454     <span class="keywordtype">int</span>             error_count;
<a name="l01455"></a>01455     <span class="keywordtype">int</span>             prog_count;
<a name="l01456"></a>01456     <span class="keywordtype">int</span>             vme_count;
<a name="l01457"></a>01457 } bt_ttrack_t;
<a name="l01458"></a>01458 
<a name="l01459"></a>01459 <span class="comment">/*</span>
<a name="l01460"></a>01460 <span class="comment">** Various types of device operations</span>
<a name="l01461"></a>01461 <span class="comment">*/</span>
<a name="l01462"></a>01462 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l01463"></a>01463     BT_OP_OPEN,     <span class="comment">/* Only used with btk_invalid_op() */</span>
<a name="l01464"></a>01464     BT_OP_CLOSE,    <span class="comment">/* Only used with btk_invalid_op() */</span>
<a name="l01465"></a>01465     BT_OP_READ,     <span class="comment">/* Only used with btk_invalid_op() */</span>
<a name="l01466"></a>01466     BT_OP_WRITE,    <span class="comment">/* Only used with btk_invalid_op() */</span>
<a name="l01467"></a>01467     BT_OP_MMAP,
<a name="l01468"></a>01468     BT_OP_BIND,
<a name="l01469"></a>01469     BT_OP_DMA,      <span class="comment">/* Only used with btk_setup_mreg() */</span>
<a name="l01470"></a>01470     BT_OP_PIO,      <span class="comment">/* Only used with btk_setup_mreg() */</span>
<a name="l01471"></a>01471     BT_MAX_OP
<a name="l01472"></a>01472 } bt_operation_t;
<a name="l01473"></a>01473 
<a name="l01474"></a>01474 <span class="comment">/*</span>
<a name="l01475"></a>01475 <span class="comment">** Mapping register constants</span>
<a name="l01476"></a>01476 <span class="comment">*/</span>
<a name="l01477"></a>01477 <span class="preprocessor">#define BT_MREG_SWAP_SHIFT      (1)             </span><span class="comment">/* Swap shift */</span>
<a name="l01478"></a>01478 <span class="preprocessor">#define BT_MREG_SWAP_MASK       (0xe)           </span><span class="comment">/* Swap mask */</span>
<a name="l01479"></a>01479 <span class="preprocessor">#define BT_MREG_FUNCT_SHIFT     (4)             </span><span class="comment">/* Function shift */</span>
<a name="l01480"></a>01480 <span class="preprocessor">#define BT_MREG_FUNCT_MASK      (0x30)          </span><span class="comment">/* Function mask */</span>
<a name="l01481"></a>01481 <span class="preprocessor">#define BT_MREG_AMOD_SHIFT      (6)             </span><span class="comment">/* Amod shift */</span>
<a name="l01482"></a>01482 <span class="preprocessor">#define BT_MREG_AMOD_MASK       (0xfc0)         </span><span class="comment">/* Amod mask */</span>
<a name="l01483"></a>01483 <span class="preprocessor">#define BT_MREG_ADDR_SHIFT      (12)            </span><span class="comment">/* Address shift */</span>
<a name="l01484"></a>01484 <span class="preprocessor">#define BT_MREG_ADDR_MASK       (0xfffff000)    </span><span class="comment">/* Address mask */</span>
<a name="l01485"></a>01485 
<a name="l01486"></a>01486 <span class="preprocessor">#define BT_MREG_INVALID         (1&lt;&lt;0)  </span><span class="comment">/* Invalidate mapping register */</span>
<a name="l01487"></a>01487 <span class="preprocessor">#define BT_MREG_FUNCT_PCFG      (0)     </span><span class="comment">/* Remote configurationfunction code */</span>
<a name="l01488"></a>01488 <span class="preprocessor">#define BT_MREG_FUNCT_RIO       (1)     </span><span class="comment">/* Remote I/O function code */</span>
<a name="l01489"></a>01489 <span class="preprocessor">#define BT_MREG_FUNCT_RRAM      (2)     </span><span class="comment">/* Remote RAM  function code */</span>
<a name="l01490"></a>01490 <span class="preprocessor">#define BT_MREG_FUNCT_DPORT     (3)     </span><span class="comment">/* Dual Port RAM  function code */</span>
<a name="l01491"></a>01491 
<a name="l01492"></a>01492 <span class="comment">/*</span>
<a name="l01493"></a>01493 <span class="comment">** PCI card constants</span>
<a name="l01494"></a>01494 <span class="comment">*/</span>
<a name="l01495"></a>01495 <span class="preprocessor">#define BT_CCR_DISABLE_DEV      (0x0)           </span><span class="comment">/* disables the 617 */</span>
<a name="l01496"></a>01496 <span class="preprocessor">#define BT_CCR_NORM_OPER        (0x46)          </span><span class="comment">/* normal operation mode */</span>
<a name="l01497"></a>01497 
<a name="l01498"></a>01498 <span class="preprocessor">#define BT_CSR_RESET_ERR        (0xffff)        </span><span class="comment">/* reset any errors */</span>
<a name="l01499"></a>01499 
<a name="l01500"></a>01500 <span class="preprocessor">#define BT_CLT_MAX_VALUE        (0xe0)          </span><span class="comment">/* Max. latency timer */</span>
<a name="l01501"></a>01501 
<a name="l01502"></a>01502 <span class="comment">/*</span>
<a name="l01503"></a>01503 <span class="comment">** PCI BAR 2, mapping registers, sizes</span>
<a name="l01504"></a>01504 <span class="comment">** _P2P indicates sizes or offsets for PCI to PCI applications</span>
<a name="l01505"></a>01505 <span class="comment">** _NGEN indicates sizes for next generation adapters</span>
<a name="l01506"></a>01506 <span class="comment">*/</span>
<a name="l01507"></a>01507 <span class="preprocessor">#define BT_CMR_SPACE_SIZE       (0x10000)       </span><span class="comment">/* 64k of mapping regs */</span>
<a name="l01508"></a>01508 <span class="preprocessor">#define BT_CMR_SPACE_SIZE_NGEN  (0x80000)       </span><span class="comment">/* 512k of mapping regs NEXT_GEN*/</span>
<a name="l01509"></a>01509 <span class="preprocessor">#define BT_CMR_REG_SIZE         (BT_WIDTH_D32)  </span><span class="comment">/* size of a mapping reg */</span>
<a name="l01510"></a>01510 <span class="preprocessor">#define BT_617_PAGE_SIZE        (0x1000)    </span><span class="comment">/* 4K page size */</span>
<a name="l01511"></a>01511 
<a name="l01512"></a>01512 <span class="comment">/*</span>
<a name="l01513"></a>01513 <span class="comment">** Offsets and sizes in to the mapping register windows for the various</span>
<a name="l01514"></a>01514 <span class="comment">** adapter windows PCI to cable, local dual port, etc.</span>
<a name="l01515"></a>01515 <span class="comment">*/</span>
<a name="l01516"></a>01516 <span class="comment">/*</span>
<a name="l01517"></a>01517 <span class="comment">** Local PCI to cable mapping register window constants (Remote memory)</span>
<a name="l01518"></a>01518 <span class="comment">** _P2P indicates sizes or offsets for PCI to PCI applications</span>
<a name="l01519"></a>01519 <span class="comment">** _NGEN indicates sizes for next generation adapters</span>
<a name="l01520"></a>01520 <span class="comment">*/</span>
<a name="l01521"></a>01521 <span class="preprocessor">#define BT_CMR_RMEM_OFFSET      (0x0) </span>
<a name="l01522"></a>01522 <span class="preprocessor"></span><span class="preprocessor">#define BT_CMR_RMEM_SIZE        (0x8000)</span>
<a name="l01523"></a>01523 <span class="preprocessor"></span><span class="preprocessor">#define BT_CMR_RMEM_SIZE_P2P    (0x4000) </span>
<a name="l01524"></a>01524 <span class="preprocessor"></span>
<a name="l01525"></a>01525 <span class="comment">/*</span>
<a name="l01526"></a>01526 <span class="comment">** Local Cable to PCI mapping register window constants (Local memory)</span>
<a name="l01527"></a>01527 <span class="comment">** _P2P indicates sizes or offsets for PCI to PCI applications</span>
<a name="l01528"></a>01528 <span class="comment">** _NGEN indicates sizes for next generation adapters</span>
<a name="l01529"></a>01529 <span class="comment">*/</span>
<a name="l01530"></a>01530 <span class="preprocessor">#define BT_CMR_LMEM_OFFSET      (BT_CMR_RMEM_SIZE)</span>
<a name="l01531"></a>01531 <span class="preprocessor"></span><span class="preprocessor">#define BT_CMR_LMEM_SIZE        (0x4000)</span>
<a name="l01532"></a>01532 <span class="preprocessor"></span><span class="preprocessor">#define BT_MAX_SDMA_LEN         (BT_CMR_LMEM_SIZE*BT_617_PAGE_SIZE/BT_CMR_REG_SIZE)</span>
<a name="l01533"></a>01533 <span class="preprocessor"></span>
<a name="l01534"></a>01534 <span class="comment">/*</span>
<a name="l01535"></a>01535 <span class="comment">** Local DMA to PCI mapping register window constants (DMA memory)</span>
<a name="l01536"></a>01536 <span class="comment">** _P2P indicates sizes or offsets for PCI to PCI applications</span>
<a name="l01537"></a>01537 <span class="comment">** _NGEN indicates sizes for next generation adapters</span>
<a name="l01538"></a>01538 <span class="comment">*/</span>
<a name="l01539"></a>01539 <span class="preprocessor">#define BT_CMR_LDMA_OFFSET      (BT_CMR_LMEM_OFFSET + BT_CMR_LMEM_SIZE)</span>
<a name="l01540"></a>01540 <span class="preprocessor"></span><span class="preprocessor">#define BT_CMR_LDMA_SIZE        (0x4000) </span>
<a name="l01541"></a>01541 <span class="preprocessor"></span><span class="preprocessor">#define BT_MAX_DMA_LEN          BT_MAX_SDMA_LEN</span>
<a name="l01542"></a>01542 <span class="preprocessor"></span>
<a name="l01543"></a>01543 <span class="comment">/*</span>
<a name="l01544"></a>01544 <span class="comment">** Local Dual Port memory portion of mapping registers (LDP memory)</span>
<a name="l01545"></a>01545 <span class="comment">** _P2P indicates sizes or offsets for PCI to PCI applications</span>
<a name="l01546"></a>01546 <span class="comment">** This only exists on next generation products so _NGEN has been dropped</span>
<a name="l01547"></a>01547 <span class="comment">*/</span>
<a name="l01548"></a>01548 <span class="preprocessor">#define BT_CMR_DP_OFFSET        (BT_CMR_LDMA_OFFSET + BT_CMR_LDMA_SIZE)</span>
<a name="l01549"></a>01549 <span class="preprocessor"></span><span class="preprocessor">#define BT_CMR_DP_SIZE          ((BT_CMR_SPACE_SIZE_NGEN/2)-BT_CMR_DP_OFFSET)</span>
<a name="l01550"></a>01550 <span class="preprocessor"></span>
<a name="l01551"></a>01551 <span class="comment">/*</span>
<a name="l01552"></a>01552 <span class="comment">** Remote mapping registers are identical to local ones just add</span>
<a name="l01553"></a>01553 <span class="comment">** half the total mapping registers</span>
<a name="l01554"></a>01554 <span class="comment">*/</span>
<a name="l01555"></a>01555 <span class="preprocessor">#define BT_CMR_REMOTE_OFFSET    (BT_CMR_SPACE_SIZE_NGEN/2)</span>
<a name="l01556"></a>01556 <span class="preprocessor"></span>
<a name="l01557"></a>01557 <span class="comment">/*</span>
<a name="l01558"></a>01558 <span class="comment">** PCI Bar 3, remote memory window sizes</span>
<a name="l01559"></a>01559 <span class="comment">*/</span>
<a name="l01560"></a>01560 <span class="preprocessor">#define BT_CRM_SPACE_SIZE       (0x2000000)</span>
<a name="l01561"></a>01561 <span class="preprocessor"></span><span class="preprocessor">#define BT_CRM_SPACE_SIZE_P2P   (0x1000000)</span>
<a name="l01562"></a>01562 <span class="preprocessor"></span>
<a name="l01563"></a>01563 <span class="preprocessor">#define BT_MAX_MMAP_BIT  (BT_CMR_RMEM_SIZE/BT_CMR_REG_SIZE) </span><span class="comment">/* Max bit in mmap bit map */</span>
<a name="l01564"></a>01564 <span class="preprocessor">#define BT_MAX_SDMA_BIT  (BT_CMR_LMEM_SIZE/BT_CMR_REG_SIZE) </span><span class="comment">/* Max bit in sdma bit map */</span>
<a name="l01565"></a>01565 
<a name="l01566"></a>01566 <span class="preprocessor">#if defined(__vxworks)</span>
<a name="l01567"></a>01567 <span class="preprocessor"></span>
<a name="l01568"></a>01568 <span class="comment">/*</span>
<a name="l01569"></a>01569 <span class="comment">**  OS specific unit structure map structure for accessing remote resouces</span>
<a name="l01570"></a>01570 <span class="comment">*/</span>
<a name="l01571"></a>01571 <span class="keyword">typedef</span> <span class="keyword">struct </span>{ 
<a name="l01572"></a>01572     
<a name="l01573"></a>01573     caddr_t     nio_p;         <span class="comment">/* Ptr to node registers */</span>
<a name="l01574"></a>01574     caddr_t     mreg_p;        <span class="comment">/* ptr to allocated mapping register */</span>
<a name="l01575"></a>01575     caddr_t     rmem_p;        <span class="comment">/* ptr to remote memory to use */</span>
<a name="l01576"></a>01576     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> loc_id;        <span class="comment">/* Id of local card */</span>
<a name="l01577"></a>01577     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> rem_id;        <span class="comment">/* Id of remote card */</span>
<a name="l01578"></a>01578     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> nio_len;       <span class="comment">/* Lenght of node regs */</span>
<a name="l01579"></a>01579     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> mreg_start;    <span class="comment">/* Starting mapping register allocated */</span>
<a name="l01580"></a>01580     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> mreg_len;      <span class="comment">/* Number of isr mapping regs */</span>
<a name="l01581"></a>01581     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> rmem_len;      <span class="comment">/* Length of isr remote memory */</span>
<a name="l01582"></a>01582     <a class="code" href="btngpci_8h.html#a3545a37b603b052a3b5bf3acfd06fc7f">bt_swap_t</a>   default_swap;  <span class="comment">/* Default swapping for adaptor */</span>
<a name="l01583"></a>01583 } bt_kmap_t;                   <span class="comment">/*   May be wrong if no remote power */</span>
<a name="l01584"></a>01584                                <span class="comment">/*   during load or if remote */</span>
<a name="l01585"></a>01585                                <span class="comment">/*   adaptor is changed without */</span>
<a name="l01586"></a>01586                                <span class="comment">/*   rebooting */</span>
<a name="l01587"></a>01587 
<a name="l01588"></a>01588 
<a name="l01589"></a>01589 <span class="comment">/*</span>
<a name="l01590"></a>01590 <span class="comment">** Prototypes for kernel functions</span>
<a name="l01591"></a>01591 <span class="comment">*/</span>
<a name="l01592"></a>01592 <span class="keyword">extern</span> <span class="keywordtype">int</span> bt_kmap(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> unit, bt_kmap_t *kmap_p);
<a name="l01593"></a>01593 <span class="keyword">extern</span> <span class="keywordtype">int</span> bt_kunmap(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> unit, bt_kmap_t *kmap_p);
<a name="l01594"></a>01594 
<a name="l01595"></a>01595 
<a name="l01596"></a>01596 <span class="preprocessor">#endif </span><span class="comment">/* defined __vxworks */</span>
<a name="l01597"></a>01597 
<a name="l01598"></a>01598 <span class="preprocessor">#if (defined(BT983) || defined(BT984))</span>
<a name="l01599"></a>01599 <span class="preprocessor"></span>    <span class="comment">/* additions for XP */</span>
<a name="l01600"></a>01600 <span class="preprocessor">#define PCI_NUM_BARS                    7      // Total number of PCI BAR registers</span>
<a name="l01601"></a>01601 <span class="preprocessor"></span><span class="preprocessor">#define MAX_NAME_LENGTH                 0x20   // Max length of registered device name</span>
<a name="l01602"></a>01602 <span class="preprocessor"></span>
<a name="l01603"></a>01603 <span class="comment">// Device Location Structure</span>
<a name="l01604"></a>01604 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__DEVICE__LOCATION.html">_DEVICE_LOCATION</a>
<a name="l01605"></a>01605 {
<a name="l01606"></a>01606     u_long <a class="code" href="struct__DEVICE__LOCATION.html#abda442e05882a4f32c736f61ba1c8f3b">DeviceId</a>;
<a name="l01607"></a>01607     u_long <a class="code" href="struct__DEVICE__LOCATION.html#ad541527fd47cda98bd14c125078e6e55">VendorId</a>;
<a name="l01608"></a>01608     u_long <a class="code" href="struct__DEVICE__LOCATION.html#ae4e4a368083acff7809e03e89a624670">BusNumber</a>;
<a name="l01609"></a>01609     u_long <a class="code" href="struct__DEVICE__LOCATION.html#a27f6f17a23fc40aae400ed27c0caf5a5">SlotNumber</a>;
<a name="l01610"></a>01610     <a class="code" href="jorway73a_8h.html#a4f4bb67531a9bf6f0b9c6ad76aeba587">UCHAR</a> <a class="code" href="struct__DEVICE__LOCATION.html#a6695558d8393c0fe734ee23c290208d4">SerialNumber</a>[16];
<a name="l01611"></a>01611 } <a class="code" href="struct__DEVICE__LOCATION.html">DEVICE_LOCATION</a>;
<a name="l01612"></a>01612 
<a name="l01613"></a>01613 <span class="comment">// PCI BAR Space information </span>
<a name="l01614"></a>01614 <span class="keyword">typedef</span> <span class="keyword">struct </span>_PCI_BAR_INFO
<a name="l01615"></a>01615 {
<a name="l01616"></a>01616     u_long             *pVa;                    <span class="comment">// BAR Kernel Addresses</span>
<a name="l01617"></a>01617     PHYSICAL_ADDRESS  Physical;                <span class="comment">// BAR Physical Addresses</span>
<a name="l01618"></a>01618     u_long             Size;                    <span class="comment">// BAR size</span>
<a name="l01619"></a>01619     <a class="code" href="directio_8cpp.html#aec7e62084419d7857ae740a4c68241cf">BOOLEAN</a>           IsIoMapped;              <span class="comment">// Memory or I/O mapped?</span>
<a name="l01620"></a>01620     <a class="code" href="directio_8cpp.html#aec7e62084419d7857ae740a4c68241cf">BOOLEAN</a>           IsUserMappable;          <span class="comment">// Can this BAR be mapped?</span>
<a name="l01621"></a>01621     PMDL              pMdl;                    <span class="comment">// MDL for the BAR space</span>
<a name="l01622"></a>01622 } PCI_BAR_INFO;
<a name="l01623"></a>01623 <span class="preprocessor">#endif</span>
<a name="l01624"></a>01624 <span class="preprocessor"></span>
<a name="l01625"></a>01625 
<a name="l01626"></a>01626 <span class="comment">/******************************************************************************</span>
<a name="l01627"></a>01627 <span class="comment">**</span>
<a name="l01628"></a>01628 <span class="comment">** Information held by driver on each unit</span>
<a name="l01629"></a>01629 <span class="comment">**</span>
<a name="l01630"></a>01630 <span class="comment">** Unit Structure</span>
<a name="l01631"></a>01631 <span class="comment">**</span>
<a name="l01632"></a>01632 <span class="comment">******************************************************************************/</span>
<a name="l01633"></a>01633 <span class="keyword">typedef</span> <span class="keyword">struct </span>bt_unit_d {
<a name="l01634"></a>01634 
<a name="l01635"></a>01635 <span class="comment">/*****</span>
<a name="l01636"></a>01636 <span class="comment">****** START OF OS UNIQUE UNIT STUCTURE INFORMATION </span>
<a name="l01637"></a>01637 <span class="comment">*****/</span>
<a name="l01638"></a>01638 
<a name="l01639"></a>01639     <span class="comment">/*</span>
<a name="l01640"></a>01640 <span class="comment">    ** SGI 965 specific infomation</span>
<a name="l01641"></a>01641 <span class="comment">    */</span>
<a name="l01642"></a>01642 <span class="preprocessor">#if defined(BT965)</span>
<a name="l01643"></a>01643 <span class="preprocessor"></span>    vertex_hdl_t dev_vertex;            <span class="comment">/* Vertex to the device */</span>
<a name="l01644"></a>01644     pciio_piomap_t cfg_map;             <span class="comment">/* Mappings for various windows */</span>
<a name="l01645"></a>01645     pciio_piomap_t nio_map;
<a name="l01646"></a>01646     pciio_piomap_t mreg_map;
<a name="l01647"></a>01647     pciio_piomap_t rmem_map;
<a name="l01648"></a>01648     <span class="keyword">struct </span><a class="code" href="new__fadc0_8cpp.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>      *dmabuf_p;          <span class="comment">/* Current buf structure pointer */</span>
<a name="l01649"></a>01649     pciio_dmamap_t  dma_map;            <span class="comment">/* DMA map pointer */</span>
<a name="l01650"></a>01650     alenlist_t      p_list;             <span class="comment">/* Address list- PCI physical */</span>
<a name="l01651"></a>01651     alenlist_t      v_list;             <span class="comment">/* Address list- kernel virtual */</span>
<a name="l01652"></a>01652     <span class="keyword">struct </span>bt_kmap_s *window_p;         <span class="comment">/* Adaptor window information */</span>
<a name="l01653"></a>01653     pciio_intr_t  intr_hdl;             <span class="comment">/* Handle for isr attach routine */</span>
<a name="l01654"></a>01654     device_desc_t device_desc;          <span class="comment">/* device descriptor */</span>
<a name="l01655"></a>01655     lock_t  isr_lock;                   <span class="comment">/* Lock for interrupt service rouitne */</span>
<a name="l01656"></a>01656     <span class="keyword">struct </span><a class="code" href="new__fadc0_8cpp.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>  *lm_buf_p;              <span class="comment">/* Pointer to local memory device buf */</span>
<a name="l01657"></a>01657     caddr_t     lm_raw_p;               <span class="comment">/* Original local memory pointer to free */</span>
<a name="l01658"></a>01658     <span class="keywordtype">int</span>         lm_raw_len;             <span class="comment">/* Original local memory allocated */</span>
<a name="l01659"></a>01659     pciio_dmamap_t lm_map_p;            <span class="comment">/* DMA map used for local memory */</span>
<a name="l01660"></a>01660     vertex_hdl_t logdev_node[BT_MAX_AXSTYPS];   <span class="comment">/* The verticies created for the</span>
<a name="l01661"></a>01661 <span class="comment">                                                   logical devices. */</span>
<a name="l01662"></a>01662     <span class="keywordtype">int</span>         first_dma;
<a name="l01663"></a>01663     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        lm_start;       <span class="comment">/* Starting mreg of local memory */</span>
<a name="l01664"></a>01664     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        lm_need;        <span class="comment">/* Number of mregs need for local memory */</span>
<a name="l01665"></a>01665 <span class="preprocessor">#elif defined(BT993)</span>
<a name="l01666"></a>01666 <span class="preprocessor"></span>
<a name="l01667"></a>01667     <span class="comment">/*</span>
<a name="l01668"></a>01668 <span class="comment">    ** The VxWorks device header must be the first thing in its unit </span>
<a name="l01669"></a>01669 <span class="comment">    ** sturcture! DO NOT MOVE vxw_hdr. </span>
<a name="l01670"></a>01670 <span class="comment">    */</span>
<a name="l01671"></a>01671     DEV_HDR       vxw_hdr;         <span class="comment">/* VxWorks device header */</span>
<a name="l01672"></a>01672 
<a name="l01673"></a>01673     <span class="comment">/*</span>
<a name="l01674"></a>01674 <span class="comment">    **    pci device information </span>
<a name="l01675"></a>01675 <span class="comment">    */</span>
<a name="l01676"></a>01676     <span class="keywordtype">int</span>           pci_bus;         <span class="comment">/* PCI Bus number */</span>
<a name="l01677"></a>01677     <span class="keywordtype">int</span>           pci_device;      <span class="comment">/* PCI device number */</span>
<a name="l01678"></a>01678     <span class="keywordtype">int</span>           pci_func;        <span class="comment">/* PCI function number */</span>
<a name="l01679"></a>01679     <span class="keywordtype">int</span>           pci_bus_type;    <span class="comment">/* PCI bus type (internal, pri, sec) */</span>
<a name="l01680"></a>01680     <span class="keywordtype">char</span>         *name_p;          <span class="comment">/* Base name of the device */</span>
<a name="l01681"></a>01681 
<a name="l01682"></a>01682     <span class="comment">/*</span>
<a name="l01683"></a>01683 <span class="comment">    **    Mapping register information </span>
<a name="l01684"></a>01684 <span class="comment">    */</span>
<a name="l01685"></a>01685     <span class="keywordtype">char</span>         *cfg_map;         <span class="comment">/* Physical PCI addr of config registers  */</span>
<a name="l01686"></a>01686     <span class="keywordtype">char</span>         *nio_map;         <span class="comment">/* Physical PCI addr of CSR registers  */</span>
<a name="l01687"></a>01687     <span class="keywordtype">char</span>         *mreg_map;        <span class="comment">/* Physical PCI addr of map registers  */</span>
<a name="l01688"></a>01688     <span class="keywordtype">char</span>         *rmem_map;        <span class="comment">/* Physical PCI addr of remote windows */</span>
<a name="l01689"></a>01689 
<a name="l01690"></a>01690 
<a name="l01691"></a>01691     <span class="comment">/*</span>
<a name="l01692"></a>01692 <span class="comment">    **  Interrupt related variables</span>
<a name="l01693"></a>01693 <span class="comment">    */</span>
<a name="l01694"></a>01694     bt_kmap_t     window;          <span class="comment">/* Adapter window information */</span>
<a name="l01695"></a>01695     <span class="keywordtype">int</span>           disp_stack;      <span class="comment">/* Stack size of dispatch task */</span>
<a name="l01696"></a>01696     <span class="keywordtype">int</span>           disp_prio;       <span class="comment">/* Priority of dispatch task */</span>
<a name="l01697"></a>01697 
<a name="l01698"></a>01698     <span class="comment">/*</span>
<a name="l01699"></a>01699 <span class="comment">    **  needed for VMEbus to PCI slave DMA accesses</span>
<a name="l01700"></a>01700 <span class="comment">    */</span>
<a name="l01701"></a>01701     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  mr_page;         <span class="comment">/* Mapping regs per page */</span>
<a name="l01702"></a>01702 
<a name="l01703"></a>01703 
<a name="l01704"></a>01704     <span class="comment">/*</span>
<a name="l01705"></a>01705 <span class="comment">    ** Keep track of open()s, close()s, and logical devices.</span>
<a name="l01706"></a>01706 <span class="comment">    */</span>
<a name="l01707"></a>01707     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> ref_count;                <span class="comment">/* Current total number of open()s */</span>
<a name="l01708"></a>01708     <span class="keywordtype">long</span>          open_total;               <span class="comment">/* Opens across all logical devs */</span>
<a name="l01709"></a>01709 
<a name="l01710"></a>01710     
<a name="l01711"></a>01711     <span class="comment">/*</span>
<a name="l01712"></a>01712 <span class="comment">    **  Local memory information</span>
<a name="l01713"></a>01713 <span class="comment">    */</span>
<a name="l01714"></a>01714     <span class="keywordtype">int</span>           lm_raw_len;       <span class="comment">/* Original local memory allocated */</span>
<a name="l01715"></a>01715     caddr_t       lm_raw_p;         <span class="comment">/* Original local memory allocated */</span>
<a name="l01716"></a>01716 
<a name="l01717"></a>01717 
<a name="l01718"></a>01718     <span class="comment">/*</span>
<a name="l01719"></a>01719 <span class="comment">    ** Local Memory (BT_DEV_LM) device information </span>
<a name="l01720"></a>01720 <span class="comment">    */</span>
<a name="l01721"></a>01721     <span class="keywordtype">char</span>           *lm_phys_addr;   <span class="comment">/* VMEbus A24/A32 address of BT_DEV_LM */</span>
<a name="l01722"></a>01722     bt_addr_width_t lm_space;       <span class="comment">/* Address Width: BT_AW_A32 or BT_AW_A24 */</span>
<a name="l01723"></a>01723     <span class="keywordtype">char</span>           *lm_base_p;      <span class="comment">/* Local bus address of BT_DEV_LM */</span>
<a name="l01724"></a>01724     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    lm_b_resid;     <span class="comment">/* need to release resources for lm device */</span>
<a name="l01725"></a>01725     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    lm_b_flags;
<a name="l01726"></a>01726     
<a name="l01727"></a>01727     <span class="comment">/*</span>
<a name="l01728"></a>01728 <span class="comment">    ** Windows NT 983 984 specific infomation</span>
<a name="l01729"></a>01729 <span class="comment">    */</span>
<a name="l01730"></a>01730 <span class="preprocessor">#elif (defined(BT983) || defined(BT984))</span>
<a name="l01731"></a>01731 <span class="preprocessor"></span>    bt_pci_config_t     pci_config;     <span class="comment">/* PCI configuration from HAL */</span>
<a name="l01732"></a>01732     PADAPTER_OBJECT     adapter_object; <span class="comment">/* DMA adapter object from HAL */</span>
<a name="l01733"></a>01733     PHYSICAL_ADDRESS    q_paddr;        <span class="comment">/* Physical bus address of interrupt queue */</span>
<a name="l01734"></a>01734     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         open_cnt;       <span class="comment">/* Number of opens */</span>
<a name="l01735"></a>01735     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        uisr_mreg;      <span class="comment">/* Which mapping reg is for user ISRs */</span>
<a name="l01736"></a>01736     KSPIN_LOCK          isr_lock;       <span class="comment">/* Lock for interrupt service rouitne */</span>
<a name="l01737"></a>01737     PHYSICAL_ADDRESS    lm_paddr;       <span class="comment">/* Physical bus address of local memory */</span>
<a name="l01738"></a>01738     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        lm_start;       <span class="comment">/* Starting mreg of local memory */</span>
<a name="l01739"></a>01739     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        lm_need;        <span class="comment">/* Number of mregs need for local memory */</span>
<a name="l01740"></a>01740     UNICODE_STRING      params_path;    <span class="comment">/* registry path for unit parameters */</span>
<a name="l01741"></a>01741 
<a name="l01742"></a>01742     <span class="comment">/* additions for XP */</span>
<a name="l01743"></a>01743     <span class="keywordtype">int</span>                 dpc_busy_flag;  <span class="comment">/* set to TRUE if the DPC is running */</span>
<a name="l01744"></a>01744     KDPC                irq_dpc;
<a name="l01745"></a>01745     KSPIN_LOCK          irq_sl;         <span class="comment">/* Lock for interrupt service rouitne */</span>
<a name="l01746"></a>01746     KEVENT              evRemove;
<a name="l01747"></a>01747     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>         <a class="code" href="odb__check_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>;
<a name="l01748"></a>01748     PDEVICE_OBJECT      pPhysicalDeviceObject;
<a name="l01749"></a>01749     PDEVICE_OBJECT      pDeviceObject;            <span class="comment">// Device object this extension belongs to</span>
<a name="l01750"></a>01750     PDEVICE_OBJECT      pLowerDeviceObject;
<a name="l01751"></a>01751     <a class="code" href="struct__DEVICE__LOCATION.html">DEVICE_LOCATION</a>     Device;
<a name="l01752"></a>01752     WCHAR               DeviceLinkNameBuffer[MAX_NAME_LENGTH];
<a name="l01753"></a>01753     PCI_BAR_INFO        PciBar[PCI_NUM_BARS];
<a name="l01754"></a>01754     <span class="comment">// Hardware locking parameters</span>
<a name="l01755"></a>01755     KSPIN_LOCK          HwAccessLock;
<a name="l01756"></a>01756     LIST_ENTRY          InterruptEventList;
<a name="l01757"></a>01757     KSPIN_LOCK          InterruptEventListLock;
<a name="l01758"></a>01758     LIST_ENTRY          UserAddressMappingList;
<a name="l01759"></a>01759     KSPIN_LOCK          UserAddressMappingListLock;
<a name="l01760"></a>01760     LIST_ENTRY          UserCommonBufferMappingList;
<a name="l01761"></a>01761     KSPIN_LOCK          UserCommonBufferMappingListLock;
<a name="l01762"></a>01762     DEVICE_POWER_STATE  Power;
<a name="l01763"></a>01763     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> *       PowerIdleCounter;
<a name="l01764"></a>01764     <span class="comment">// Interrupt handling variables</span>
<a name="l01765"></a>01765     PKINTERRUPT         pInterruptObject;
<a name="l01766"></a>01766     <a class="code" href="directio_8cpp.html#aec7e62084419d7857ae740a4c68241cf">BOOLEAN</a>             removing;
<a name="l01767"></a>01767 
<a name="l01768"></a>01768     <span class="comment">/*</span>
<a name="l01769"></a>01769 <span class="comment">    ** Solaris Model 946 specific infomation</span>
<a name="l01770"></a>01770 <span class="comment">    */</span>
<a name="l01771"></a>01771 <span class="preprocessor">#elif defined(BT946)</span>
<a name="l01772"></a>01772 <span class="preprocessor"></span>    dev_info_t  *devinfo_p;             <span class="comment">/* Device information */</span>
<a name="l01773"></a>01773     
<a name="l01774"></a>01774     ddi_acc_handle_t  nio_regs_hdl;     <span class="comment">/* Node register handle */</span>
<a name="l01775"></a>01775     ddi_acc_handle_t  mregs_hdl;        <span class="comment">/* mapping register handle */</span>
<a name="l01776"></a>01776     ddi_acc_handle_t  rmem_hdl;         <span class="comment">/* Remote memory window handle  */</span>
<a name="l01777"></a>01777 
<a name="l01778"></a>01778     ddi_dma_handle_t    dma_handle;     <span class="comment">/* Put here for btp_intr().    */</span>
<a name="l01779"></a>01779     ddi_iblock_cookie_t iblock_cookie;  <span class="comment">/* Returned by ddi_add_intr(). */</span>
<a name="l01780"></a>01780     
<a name="l01781"></a>01781     <span class="keyword">struct </span><a class="code" href="new__fadc0_8cpp.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>  *lm_buf_p;              <span class="comment">/* Pointer to buf structure for local memory */</span>
<a name="l01782"></a>01782     <span class="keywordtype">int</span>         lm_start;               <span class="comment">/* Starting mapping reg for local memory */</span>
<a name="l01783"></a>01783     <span class="keywordtype">int</span>         lm_need;                <span class="comment">/* Number of mapping regs needed for local memory */</span>
<a name="l01784"></a>01784     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> lm_offset;              <span class="comment">/* Offset to align local memory to 4k page */</span>
<a name="l01785"></a>01785     kmutex_t    isr_lock;               <span class="comment">/* Lock for interrupt service rouitne */</span>
<a name="l01786"></a>01786     kmutex_t    kddi_mutex;             <span class="comment">/* Lock for interrupt service rouitne */</span>
<a name="l01787"></a>01787     
<a name="l01788"></a>01788     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> buf_offset;             <span class="comment">/* uio_offset from read/write for DMA */</span>
<a name="l01789"></a>01789     kcondvar_t  buf_condvar;            <span class="comment">/* Buf condvar per unit.       */</span>
<a name="l01790"></a>01790 
<a name="l01791"></a>01791     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> rem_ram_addr;           <span class="comment">/* Starting address of REM RAM window on VME */</span>
<a name="l01792"></a>01792     
<a name="l01793"></a>01793 <span class="preprocessor">#elif defined(BT1003)</span>
<a name="l01794"></a>01794 <span class="preprocessor"></span>
<a name="l01795"></a>01795     <span class="keyword">struct </span>pci_dev *dev_p;              <span class="comment">/* Location of device in PCI space */</span>
<a name="l01796"></a>01796 
<a name="l01797"></a>01797     <span class="comment">/* </span>
<a name="l01798"></a>01798 <span class="comment">    ** PCI configuration information  -- NOT FROM PCI CONFIG REGISTERS </span>
<a name="l01799"></a>01799 <span class="comment">    */</span>
<a name="l01800"></a>01800     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> csr_phys_addr;    <span class="comment">/* physical address of Node I/O */</span>
<a name="l01801"></a>01801     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> rr_phys_addr;     <span class="comment">/* physical address of remote ram */</span>
<a name="l01802"></a>01802     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mr_phys_addr;     <span class="comment">/* physical address of mapping ram */</span>
<a name="l01803"></a>01803     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="crate6__CAEN__TDC_2hyt1331_8c.html#ae960f3d6d8d9d8c9b29337a4983563c4">irq</a>;               <span class="comment">/* System IRQ level */</span>
<a name="l01804"></a>01804 
<a name="l01805"></a>01805     bt_cookie_t hirq_cookie;        <span class="comment">/* Hardware IRQ cookie */</span>
<a name="l01806"></a>01806     bt_cookie_t sirq_cookie;        <span class="comment">/* Software IRQ cookie */</span>
<a name="l01807"></a>01807     bt_cookie_t task_cookie;        <span class="comment">/* Task level cookie, no special context */</span>
<a name="l01808"></a>01808 
<a name="l01809"></a>01809     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    mr_page;               <span class="comment">/* Mapping regs per page */</span>
<a name="l01810"></a>01810 
<a name="l01811"></a>01811     bt_mutex_t  llist_mutex;        <span class="comment">/* Protect non-isr linked lists */</span>
<a name="l01812"></a>01812     <span class="comment">/* Related shared members are: llist_bind_mutex and llist_map_mutex. */</span>
<a name="l01813"></a>01813 
<a name="l01814"></a>01814     <span class="comment">/*  [Used only by btk_mutex_init() and btk_mutex_fini() in btp_attach().]</span>
<a name="l01815"></a>01815 <span class="comment">    **  Locking variables that do inhibit the interrupt service routine</span>
<a name="l01816"></a>01816 <span class="comment">    */</span>
<a name="l01817"></a>01817     bt_mutex_t      isr_lock;       <span class="comment">/* Lock for interrupt service rouitne */</span>
<a name="l01818"></a>01818 
<a name="l01819"></a>01819     <span class="comment">/*</span>
<a name="l01820"></a>01820 <span class="comment">    **  DMA related parameters</span>
<a name="l01821"></a>01821 <span class="comment">    */</span>
<a name="l01822"></a>01822     <span class="keywordtype">void</span> *          dma_buf_p;      <span class="comment">/* Kernel intermediate data buffer */</span>
<a name="l01823"></a>01823     <span class="keywordtype">size_t</span>          dma_buf_size;   <span class="comment">/* Size of buffer */</span>
<a name="l01824"></a>01824 <span class="preprocessor">#if     LINUX_VERSION_CODE &gt;= KERNEL_VERSION(2,5,0)</span>
<a name="l01825"></a>01825 <span class="preprocessor"></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    linux_dma_lock; <span class="comment">/* actual dma lock as can no longer hold a spinlock through an interrupt */</span>
<a name="l01826"></a>01826 <span class="preprocessor">#endif</span>
<a name="l01827"></a>01827 <span class="preprocessor"></span>
<a name="l01828"></a>01828     <span class="comment">/* </span>
<a name="l01829"></a>01829 <span class="comment">    **  Logical device variables</span>
<a name="l01830"></a>01830 <span class="comment">    */</span>
<a name="l01831"></a>01831     <span class="keywordtype">long</span>        open_cnt[BT_MAX_AXSTYPS];       <span class="comment">/* Opens on this logical dev */</span>
<a name="l01832"></a>01832 
<a name="l01833"></a>01833 
<a name="l01834"></a>01834     <span class="comment">/*</span>
<a name="l01835"></a>01835 <span class="comment">    **  Local memory information</span>
<a name="l01836"></a>01836 <span class="comment">    */</span>
<a name="l01837"></a>01837     caddr_t         lm_kaddr;       <span class="comment">/* Kernel address of local memory */</span>
<a name="l01838"></a>01838     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    lm_start;       <span class="comment">/* Starting mapping reg */</span>
<a name="l01839"></a>01839     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    lm_need;        <span class="comment">/* Number mapping regs needed */</span>
<a name="l01840"></a>01840 
<a name="l01841"></a>01841     <span class="comment">/* </span>
<a name="l01842"></a>01842 <span class="comment">    **  Misc variables</span>
<a name="l01843"></a>01843 <span class="comment">    */</span>
<a name="l01844"></a>01844     <span class="keywordtype">long</span>        open_total;     <span class="comment">/* Opens across all logical devs */</span>
<a name="l01845"></a>01845 
<a name="l01846"></a>01846 <span class="preprocessor">#else </span><span class="comment">/* By Product */</span>
<a name="l01847"></a>01847 <span class="preprocessor">#error Unknown product</span>
<a name="l01848"></a>01848 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* By Product */</span>
<a name="l01849"></a>01849 
<a name="l01850"></a>01850 
<a name="l01851"></a>01851 <span class="comment">/*****</span>
<a name="l01852"></a>01852 <span class="comment">****** START OF COMMON UNIT STUCTURE INFORMATION</span>
<a name="l01853"></a>01853 <span class="comment">*****/</span>
<a name="l01854"></a>01854 
<a name="l01855"></a>01855     <span class="keyword">volatile</span> <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>   <a class="code" href="btwapi_8h.html#afd489638e31c5a256a829eb11ff37654">bt_status</a>;  <span class="comment">/* Status word for this unit */</span>
<a name="l01856"></a>01856 <span class="preprocessor">#define BT_OPEN_INHIBIT     (1&lt;&lt; 0)     </span><span class="comment">/* Inhibit device open */</span>
<a name="l01857"></a>01857 <span class="preprocessor">#define BT_IS_OPEN          (1&lt;&lt; 1)     </span><span class="comment">/* At least one unit is open */</span>
<a name="l01858"></a>01858 <span class="preprocessor">#define BT_ONLINE           (1&lt;&lt; 2)     </span><span class="comment">/* Set if Device is online */</span>
<a name="l01859"></a>01859 <span class="preprocessor">#define BT_PRIV             (1&lt;&lt; 3)     </span><span class="comment">/* Set if in privileged mode */</span>
<a name="l01860"></a>01860 <span class="preprocessor">#define BT_LOGERR           (1&lt;&lt; 4)     </span><span class="comment">/* Set if status interrupt errlog EN */</span>
<a name="l01861"></a>01861 <span class="preprocessor">#define BT_LM_EN            (1&lt;&lt; 5)     </span><span class="comment">/* Set if Local Memory is ENabled */</span>
<a name="l01862"></a>01862 <span class="preprocessor">#define BT_INT              (1&lt;&lt; 6)     </span><span class="comment">/* Set if interrupt handler registrd */</span>
<a name="l01863"></a>01863 <span class="preprocessor">#define BT_DMA_FIFO         (1&lt;&lt; 7)     </span><span class="comment">/* Set if DMA to FIFO */</span>
<a name="l01864"></a>01864 <span class="preprocessor">#define BT_RESET            (1&lt;&lt; 8)     </span><span class="comment">/* Set if a reset is pending */</span>
<a name="l01865"></a>01865 <span class="preprocessor">#define BT_DMA_ERROR        (1&lt;&lt; 9)     </span><span class="comment">/* Set if error during DMA */</span>
<a name="l01866"></a>01866 <span class="preprocessor">#define BT_POWER            (1&lt;&lt;10)     </span><span class="comment">/* Set if NO remote connection */</span>
<a name="l01867"></a>01867 <span class="preprocessor">#define BT_ERROR            (1&lt;&lt;11)     </span><span class="comment">/* Set if an Error has occurred */</span>
<a name="l01868"></a>01868 <span class="preprocessor">#define BT_DMA_LOCAL        (1&lt;&lt;12)     </span><span class="comment">/* Set if local adaptor does DMA */</span>
<a name="l01869"></a>01869 <span class="preprocessor">#define BT_DMA_AVAIL        (1&lt;&lt;13)     </span><span class="comment">/* Set if adaptor pair can does DMA */</span>
<a name="l01870"></a>01870 <span class="preprocessor">#define BT_DMA_BLOCK        (1&lt;&lt;14)     </span><span class="comment">/* Set if use block mode for DMAs */</span>
<a name="l01871"></a>01871 <span class="preprocessor">#define BT_DMA_WAIT         (1&lt;&lt;15)     </span><span class="comment">/* Set if DMA is in PAUSE mode */</span>
<a name="l01872"></a>01872 <span class="preprocessor">#define BT_PCI2PCI          (1&lt;&lt;16)     </span><span class="comment">/* Set if remote card is PCI based */</span>
<a name="l01873"></a>01873 <span class="preprocessor">#define BT_NEXT_GEN         (1&lt;&lt;17)     </span><span class="comment">/* Set if adapteris next gen design */</span>
<a name="l01874"></a>01874 <span class="comment">/*                          (1&lt;&lt;18)        Not Used */</span>
<a name="l01875"></a>01875 <span class="preprocessor">#define BT_DMA_ACTIVE       (1&lt;&lt;19)     </span><span class="comment">/* A DMA is in progress */</span>
<a name="l01876"></a>01876 <span class="preprocessor">#define BT_RB_INTR          (1&lt;&lt;20)     </span><span class="comment">/* Rembus intr handler is registered */</span>
<a name="l01877"></a>01877 <span class="preprocessor">#define BT_PT_INTR          (1&lt;&lt;21)     </span><span class="comment">/* Prog intr handler is registered */</span>
<a name="l01878"></a>01878 <span class="preprocessor">#define BT_ER_INTR          (1&lt;&lt;22)     </span><span class="comment">/* Error intr handler is registered */</span>
<a name="l01879"></a>01879 <span class="preprocessor">#define BT_SEND_PT          (1&lt;&lt;23)     </span><span class="comment">/* When set, use PT when sending irq */</span>
<a name="l01880"></a>01880 <span class="preprocessor">#define BT_PEER2PEER        (1&lt;&lt;24)     </span><span class="comment">/* Set if remote driver is installed */</span>
<a name="l01881"></a>01881 <span class="preprocessor">#define BT_MASTER           (1&lt;&lt;25)     </span><span class="comment">/* Set if use local sem7 to control */</span>
<a name="l01882"></a>01882                                         <span class="comment">/* DMA otherwise use remote sema7 */</span> 
<a name="l01883"></a>01883 <span class="preprocessor">#define BT_LOOPBACK         (1&lt;&lt;26)     </span><span class="comment">/* Set if loopback connector is installed */</span>
<a name="l01884"></a>01884 <span class="preprocessor">#define BT_GEMS_SWAP        (1&lt;&lt;27)     </span><span class="comment">/* Set if GEMS swapping is in effect */</span>
<a name="l01885"></a>01885 <span class="comment">/*                          (1&lt;&lt;28)        Not Used */</span>
<a name="l01886"></a>01886 <span class="preprocessor">#define BT_BUF_WAIT         (1&lt;&lt;29)     </span><span class="comment">/* Another is waiting to enter strategy, Solaris only */</span>
<a name="l01887"></a>01887 <span class="preprocessor">#define BT_BUF_LOCK         (1&lt;&lt;30)     </span><span class="comment">/* Process currently entering stratedy, Solaris only */</span>
<a name="l01888"></a>01888 <span class="comment">/*                          (1&lt;&lt;31)        Not Used */</span>
<a name="l01889"></a>01889 
<a name="l01890"></a>01890 <span class="comment">/* </span>
<a name="l01891"></a>01891 <span class="comment">**  Format string for %b printf() of bt_status flags </span>
<a name="l01892"></a>01892 <span class="comment">*/</span>
<a name="l01893"></a>01893 <span class="preprocessor">#define BT_STATUS_FORMAT &quot;\20\40NOTUSED\37BUFLOCK\36BUFWAIT\35NOTUSED\34NOTUSED\33NOTUSED\32MASTER\31PEER2PEER\30NOTUSED\27ER_INTR\26PT_INTR\25RB_INTR\24DMA_ACTIVE\23NOTUSED\22NEXT_GEN\21PCI2PCI\20DMA_WAIT\17NOTUSED\16DMA_AVAIL\15DMA_LOCAL\14ERROR\13POWER\12TRANSMIT\11RESET\10HANDSHAKE\7INT\6DPLOC\5LOGERR\4PRIV\3ONLINE\2IS_OPEN\1OPEN_INHIBIT&quot;</span>
<a name="l01894"></a>01894 <span class="preprocessor"></span>
<a name="l01895"></a>01895     <span class="comment">/*</span>
<a name="l01896"></a>01896 <span class="comment">    **  Physical card information</span>
<a name="l01897"></a>01897 <span class="comment">    */</span>
<a name="l01898"></a>01898     <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>  unit_number;            <span class="comment">/* Physical unit number */</span>
<a name="l01899"></a>01899     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> loc_id;                 <span class="comment">/* Part number of local card */</span>
<a name="l01900"></a>01900     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> rem_id;                 <span class="comment">/* Part number of remote card */</span>
<a name="l01901"></a>01901     <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>  board_revision;         <span class="comment">/* PCI config rev id register value */</span>
<a name="l01902"></a>01902     <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a>  driver_version[<a class="code" href="btngpci_8h.html#a14e1e49c6641007a2f5db4da0459e5eb">BT_DIAG_MAX_REV_INFO</a>];   <span class="comment">/* Driver version string */</span>
<a name="l01903"></a>01903 
<a name="l01904"></a>01904     <span class="comment">/*</span>
<a name="l01905"></a>01905 <span class="comment">    **  Mapping register information</span>
<a name="l01906"></a>01906 <span class="comment">    */</span>
<a name="l01907"></a>01907     caddr_t cfg_p;                        <span class="comment">/* Pointers for various windows */</span>
<a name="l01908"></a>01908     caddr_t nio_p;
<a name="l01909"></a>01909     caddr_t mreg_p;
<a name="l01910"></a>01910     caddr_t rmem_p;
<a name="l01911"></a>01911     <a class="code" href="structbt__pci__reg__t.html">bt_pci_reg_t</a> *csr_p;                <span class="comment">/* Pointer to CSRs */</span>
<a name="l01912"></a>01912 
<a name="l01913"></a>01913     <span class="comment">/*</span>
<a name="l01914"></a>01914 <span class="comment">    **  DMA related parameters</span>
<a name="l01915"></a>01915 <span class="comment">    */</span>
<a name="l01916"></a>01916     <span class="keywordtype">int</span>             dma_threshold;      <span class="comment">/* DMA transfer threshold value */</span>
<a name="l01917"></a>01917     <span class="keywordtype">int</span>             dma_poll_size;      <span class="comment">/* Size at which &lt; to use polled DMA */</span>
<a name="l01918"></a>01918     <a class="code" href="btwdef_8h.html#aaa3d346aa6a046a64fdcc9e9a76b4ad2">bt_msec_t</a>       dma_timeout;        <span class="comment">/* DMA watchdog timer value (1 msec) */</span>
<a name="l01919"></a>01919     bt_event_t      dma_event;          <span class="comment">/* Synchronization for DMA completion */</span>
<a name="l01920"></a>01920     bt_mutex_t      dma_mutex;          <span class="comment">/* Prevents two DMAs from occurring */</span>
<a name="l01921"></a>01921     btk_timeout_t   watchdog_id;        <span class="comment">/* DMA watchdog timeout id */</span>
<a name="l01922"></a>01922 
<a name="l01923"></a>01923     <span class="comment">/* </span>
<a name="l01924"></a>01924 <span class="comment">    **  queue heads for various stages of interrupt processing </span>
<a name="l01925"></a>01925 <span class="comment">    */</span>
<a name="l01926"></a>01926     btk_llist_t qh_err_fn;             <span class="comment">/* Error interrupt handlers */</span>
<a name="l01927"></a>01927     btk_llist_t qh_prg_fn;             <span class="comment">/* Programmed interrupt handlers */</span>
<a name="l01928"></a>01928     btk_llist_t qh_iack_fn;            <span class="comment">/* Remote bus interrupt handlers */</span>
<a name="l01929"></a>01929     btk_llist_t icbr_thread_list;      <span class="comment">/* List of ICBR threads to wake */</span>
<a name="l01930"></a>01930     <a class="code" href="structbt__irq__q__t.html">bt_irq_q_t</a>  *error_irq_q_p;        <span class="comment">/* Error interrupt queue */</span>
<a name="l01931"></a>01931     <a class="code" href="structbt__irq__q__t.html">bt_irq_q_t</a>  *prog_irq_q_p;         <span class="comment">/* Programmed  interrupt queue */</span>
<a name="l01932"></a>01932     <a class="code" href="structbt__irq__q__t.html">bt_irq_q_t</a>  *vme_irq_q_p;          <span class="comment">/* VME interrupt queue */</span>
<a name="l01933"></a>01933     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> q_size;                <span class="comment">/* Interrupt q size */</span>
<a name="l01934"></a>01934 
<a name="l01935"></a>01935     <span class="comment">/* </span>
<a name="l01936"></a>01936 <span class="comment">    **  Interrupt servicing and status information</span>
<a name="l01937"></a>01937 <span class="comment">    */</span>
<a name="l01938"></a>01938     <span class="keyword">volatile</span> <span class="keywordtype">int</span>   sig_count;          <span class="comment">/* Number of signals sent to processes */</span>
<a name="l01939"></a>01939     <span class="keyword">volatile</span> <span class="keywordtype">int</span>   sig_prg_cnt;        <span class="comment">/* ... from programmed interrupts. */</span>
<a name="l01940"></a>01940     <span class="keyword">volatile</span> <span class="keywordtype">int</span>   sig_err_cnt;        <span class="comment">/* ... from error interrupts. */</span>
<a name="l01941"></a>01941     <span class="keyword">volatile</span> <span class="keywordtype">int</span>   sig_other_cnt;      <span class="comment">/* ... for any other reason. */</span>
<a name="l01942"></a>01942 
<a name="l01943"></a>01943     <span class="comment">/*</span>
<a name="l01944"></a>01944 <span class="comment">    **  Interrupt related variables</span>
<a name="l01945"></a>01945 <span class="comment">    */</span>
<a name="l01946"></a>01946     btk_timeout_t wakeup_id;            <span class="comment">/* Remote bus reset timeout id */</span>
<a name="l01947"></a>01947 
<a name="l01948"></a>01948     <span class="comment">/* </span>
<a name="l01949"></a>01949 <span class="comment">    **  Logical device variables</span>
<a name="l01950"></a>01950 <span class="comment">    */</span>
<a name="l01951"></a>01951     caddr_t     kern_addr[BT_MAX_AXSTYPS];      <span class="comment">/* Kernel addr of windows */</span>
<a name="l01952"></a>01952     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> kern_length[BT_MAX_AXSTYPS];    <span class="comment">/* Kernel size of windows */</span>
<a name="l01953"></a>01953     <span class="keywordtype">int</span>         pio_addr_mod[BT_MAX_AXSTYPS];   <span class="comment">/* Addr modifiers used for PIO */</span>
<a name="l01954"></a>01954     <span class="keywordtype">int</span>         dma_addr_mod[BT_MAX_AXSTYPS];   <span class="comment">/* Addr modifiers used for DMA */</span>
<a name="l01955"></a>01955     <span class="keywordtype">int</span>         mmap_addr_mod[BT_MAX_AXSTYPS];  <span class="comment">/* Addr modifiers used for MMAP */</span>
<a name="l01956"></a>01956     <span class="keywordtype">int</span>         swap_bits[BT_MAX_AXSTYPS];      <span class="comment">/* Swap bit each logical dev */</span>
<a name="l01957"></a>01957     <span class="keywordtype">int</span>         <a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a>[BT_MAX_AXSTYPS];      <span class="comment">/* Data transfer size */</span>
<a name="l01958"></a>01958     <span class="keywordtype">int</span>         open[BT_MAX_AXSTYPS];           <span class="comment">/* Device currently open */</span>
<a name="l01959"></a>01959     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a> logstat[BT_MAX_AXSTYPS];        <span class="comment">/* Device status */</span>
<a name="l01960"></a>01960 <span class="preprocessor">#define  STAT_ONLINE     (1&lt;&lt;0)         </span><span class="comment">/* Set if logical device is online */</span>
<a name="l01961"></a>01961 <span class="preprocessor">#define  STAT_READ       (1&lt;&lt;2)         </span><span class="comment">/* Set if can read logical device */</span>
<a name="l01962"></a>01962 <span class="preprocessor">#define  STAT_WRITE      (1&lt;&lt;3)         </span><span class="comment">/* Set if can write logical device */</span>
<a name="l01963"></a>01963 <span class="preprocessor">#define  STAT_BIND       (1&lt;&lt;4)         </span><span class="comment">/* Set if can bind logical device */</span>
<a name="l01964"></a>01964 <span class="preprocessor">#define  STAT_DMA        (1&lt;&lt;5)         </span><span class="comment">/* Set if can use DMA to go to dev */</span>
<a name="l01965"></a>01965 <span class="preprocessor">#define  STAT_LOCAL      (1&lt;&lt;6)         </span><span class="comment">/* set if this device is local */</span>
<a name="l01966"></a>01966 <span class="preprocessor">#define  STAT_MMAP       (1&lt;&lt;7)         </span><span class="comment">/* Can logical device use mmap */</span>
<a name="l01967"></a>01967 
<a name="l01968"></a>01968 <span class="comment">/* </span>
<a name="l01969"></a>01969 <span class="comment">**  Format string for %b printf() of logstat flags </span>
<a name="l01970"></a>01970 <span class="comment">*/</span>
<a name="l01971"></a>01971 <span class="preprocessor">#define BT_LOGSTAT_FORMAT &quot;\20\10MMAP\7LOCAL\6DMA\5NOTUSED\4WRITE\3READ\2OPEN\1ONLINE&quot;</span>
<a name="l01972"></a>01972 <span class="preprocessor"></span>
<a name="l01973"></a>01973 
<a name="l01974"></a>01974     <span class="comment">/* </span>
<a name="l01975"></a>01975 <span class="comment">    **  Resources necessary for tracking mmap and slave DMA requests.</span>
<a name="l01976"></a>01976 <span class="comment">    **  Pointers are to bit maps of available mapping registers, </span>
<a name="l01977"></a>01977 <span class="comment">    **  One bit map is needed for PCI to VMEbus mmap requests and the second is</span>
<a name="l01978"></a>01978 <span class="comment">    **  needed for VMEbus to PCI slave DMA accesses.</span>
<a name="l01979"></a>01979 <span class="comment">    */</span>
<a name="l01980"></a>01980     <span class="keywordtype">void</span>        *mmap_aval_p;
<a name="l01981"></a>01981     <span class="keywordtype">void</span>        *sdma_aval_p;
<a name="l01982"></a>01982     btk_llist_t qh_mmap_requests;      <span class="comment">/* Used to track the mmap requests */</span>
<a name="l01983"></a>01983     btk_llist_t qh_bind_requests;      <span class="comment">/* Used to track the bind requests */</span>
<a name="l01984"></a>01984 
<a name="l01985"></a>01985     <span class="comment">/*</span>
<a name="l01986"></a>01986 <span class="comment">    **  Locking variables that do not effect the interrupt service routine</span>
<a name="l01987"></a>01987 <span class="comment">    */</span>
<a name="l01988"></a>01988     bt_mutex_t  unit_lock;          <span class="comment">/* General unit locking */</span>
<a name="l01989"></a>01989     bt_mutex_t  open_mutex;         <span class="comment">/* Prevents open and close from clashing */</span>
<a name="l01990"></a>01990     bt_mutex_t  mreg_mutex;         <span class="comment">/* Protects the mreg bit maps while alloc or free */</span>
<a name="l01991"></a>01991     bt_mutex_t  llist_bind_mutex;   <span class="comment">/* Protect bind linked lists */</span>
<a name="l01992"></a>01992     bt_mutex_t  llist_map_mutex;    <span class="comment">/* Protect map linked lists */</span>
<a name="l01993"></a>01993     bt_mutex_t  prg_irq_mutex;      <span class="comment">/* Protect against sending two prog interrupt at same time */</span>
<a name="l01994"></a>01994     bt_rwlock_t hw_rwlock;          <span class="comment">/* Prevents TAS/CAS &amp; PIO from clashing */</span>
<a name="l01995"></a>01995 
<a name="l01996"></a>01996     <span class="comment">/*</span>
<a name="l01997"></a>01997 <span class="comment">    **  Local memory information</span>
<a name="l01998"></a>01998 <span class="comment">    */</span>
<a name="l01999"></a>01999     <span class="keywordtype">int</span>         lm_size;                <span class="comment">/* User requested local memory size */</span>
<a name="l02000"></a>02000 
<a name="l02001"></a>02001     <span class="comment">/* </span>
<a name="l02002"></a>02002 <span class="comment">    **  Misc variables</span>
<a name="l02003"></a>02003 <span class="comment">    */</span>
<a name="l02004"></a>02004     <a class="code" href="btwdef_8h.html#aaa3d346aa6a046a64fdcc9e9a76b4ad2">bt_msec_t</a>           reset_timer;    <span class="comment">/* Time in 10ms to wait for reset */</span>
<a name="l02005"></a>02005     <span class="keyword">volatile</span> <a class="code" href="btdef_8h.html#ab8cf470caa1abd4bcdae342bc1d6087e">bt_data8_t</a> last_error;     <span class="comment">/* ORed value of last error(s) */</span>
<a name="l02006"></a>02006 
<a name="l02007"></a>02007     <span class="keywordtype">int</span>                 pio_count;      <span class="comment">/* track active pio&apos;s             */</span>
<a name="l02008"></a>02008 <span class="comment">/* EAS A64 */</span>
<a name="l02009"></a>02009     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        a64_offset;     <span class="comment">/* RPQ 601332 A32-A63 and mode bit */</span>
<a name="l02010"></a>02010 <span class="comment">/* EAS BIND CODE */</span>
<a name="l02011"></a>02011     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    bt_kmalloc_size;    <span class="comment">/* size of kernel buffer to kmalloc for bind */</span>
<a name="l02012"></a>02012     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    *bt_kmalloc_buf;    <span class="comment">/* aligned kernel buffer kmalloced for bind */</span>
<a name="l02013"></a>02013     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    *bt_kmalloc_ptr;    <span class="comment">/* kernel buffer kmalloced for bind (save for free) */</span>
<a name="l02014"></a>02014 
<a name="l02015"></a>02015 } bt_unit_t;
<a name="l02016"></a>02016 
<a name="l02017"></a>02017 
<a name="l02018"></a>02018 <span class="preprocessor">#if defined(__vxworks)</span>
<a name="l02019"></a>02019 <span class="preprocessor"></span>
<a name="l02020"></a>02020 <span class="comment">/* The lseek_off must be tracked with each open call */</span>
<a name="l02021"></a>02021 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l02022"></a>02022     <span class="comment">/* Stuff to keep track of for each file descriptor openned */</span>
<a name="l02023"></a>02023     bt_unit_t    *unit_p;
<a name="l02024"></a>02024     <span class="keywordtype">int</span>           unit;
<a name="l02025"></a>02025     <a class="code" href="btngpci_8h.html#a9f644f5689b8d88a0c013f044a01c0ad">bt_dev_t</a>      logdev;
<a name="l02026"></a>02026     <span class="keywordtype">long</span>          lseek_off;
<a name="l02027"></a>02027 } bt_fd_t;
<a name="l02028"></a>02028 
<a name="l02029"></a>02029 <span class="keyword">typedef</span> bt_fd_t *bt_dev_id_t;
<a name="l02030"></a>02030 
<a name="l02031"></a>02031 <span class="preprocessor">#endif </span><span class="comment">/* defined __vxworks */</span>
<a name="l02032"></a>02032 
<a name="l02033"></a>02033 <span class="preprocessor">#endif </span><span class="comment">/* _BTDD_H */</span>
<a name="l02034"></a>02034 
<a name="l02035"></a>02035 
<a name="l02036"></a>02036 <span class="comment">/******************************************************************************</span>
<a name="l02037"></a>02037 <span class="comment">**</span>
<a name="l02038"></a>02038 <span class="comment">**  PCI configuration register defines</span>
<a name="l02039"></a>02039 <span class="comment">**</span>
<a name="l02040"></a>02040 <span class="comment">******************************************************************************/</span>
<a name="l02041"></a><a class="code" href="btngpci_8h.html#a98a34813ef6023f7411cd0026189d21a">02041</a> <span class="preprocessor">#define BT_MAX_CFGREG   64</span>
<a name="l02042"></a>02042 <span class="preprocessor"></span>
<a name="l02043"></a>02043 <span class="comment">/*</span>
<a name="l02044"></a>02044 <span class="comment">**  Vendor ID Register</span>
<a name="l02045"></a>02045 <span class="comment">*/</span>
<a name="l02046"></a><a class="code" href="btngpci_8h.html#a5516f7116d5fa3bbe0d07ff70153a0a4">02046</a> <span class="preprocessor">#define CFG_VENDOR_ID           (0x0)           </span><span class="comment">/* vendor ID register */</span>
<a name="l02047"></a><a class="code" href="btngpci_8h.html#acb60ac1f9f4ec184fd40d6a70e7c837d">02047</a> <span class="preprocessor">#define CFG_VENDOR_ID_SIZE      (BT_WIDTH_D16)</span>
<a name="l02048"></a>02048 <span class="preprocessor"></span>
<a name="l02049"></a><a class="code" href="btngpci_8h.html#a52eaa380ae6be661ff72fa4b17501941">02049</a> <span class="preprocessor">#define CVI_BIT3_ID             (0x108A)        </span><span class="comment">/* Bit 3 Computer Corp ID */</span>  
<a name="l02050"></a><a class="code" href="btngpci_8h.html#a44bdaa1d0ad059ece5d1ab04d9d5858f">02050</a> <span class="preprocessor">#define BT_MAX_POSREG 7</span>
<a name="l02051"></a>02051 <span class="preprocessor"></span>
<a name="l02052"></a>02052 <span class="comment">/*</span>
<a name="l02053"></a>02053 <span class="comment">**  Device ID Register</span>
<a name="l02054"></a>02054 <span class="comment">*/</span>
<a name="l02055"></a><a class="code" href="btngpci_8h.html#a9f5d694c58c5cebb62b870f89ffc421f">02055</a> <span class="preprocessor">#define CFG_DEVICE_ID           (0x2)           </span><span class="comment">/* device ID register */</span>
<a name="l02056"></a><a class="code" href="btngpci_8h.html#adbcdeab8e2c220f4eee604f879eebab8">02056</a> <span class="preprocessor">#define CFG_DEVICE_ID_SIZE      (BT_WIDTH_D16)</span>
<a name="l02057"></a>02057 <span class="preprocessor"></span>
<a name="l02058"></a>02058 <span class="comment">/*</span>
<a name="l02059"></a>02059 <span class="comment">**  Command Register</span>
<a name="l02060"></a>02060 <span class="comment">*/</span>
<a name="l02061"></a><a class="code" href="btngpci_8h.html#a34e29a049b83ee471ece81020e44933c">02061</a> <span class="preprocessor">#define CFG_COMMAND             (0x4)           </span><span class="comment">/* command register */</span>
<a name="l02062"></a><a class="code" href="btngpci_8h.html#a769921c85bc4fd3303e544ccea22c7a5">02062</a> <span class="preprocessor">#define CFG_COMMAND_SIZE        (BT_WIDTH_D16)</span>
<a name="l02063"></a>02063 <span class="preprocessor"></span>
<a name="l02064"></a>02064 <span class="comment">/*</span>
<a name="l02065"></a>02065 <span class="comment">**  Status Register</span>
<a name="l02066"></a>02066 <span class="comment">*/</span>
<a name="l02067"></a><a class="code" href="btngpci_8h.html#a24b3ffa72ae7c40e133644a07c90a1ab">02067</a> <span class="preprocessor">#define CFG_STATUS              (0x6)           </span><span class="comment">/* status register */</span>
<a name="l02068"></a><a class="code" href="btngpci_8h.html#ac710e1861b5ce088dbc6e05c5561e63a">02068</a> <span class="preprocessor">#define CFG_STATUS_SIZE         (BT_WIDTH_D16)</span>
<a name="l02069"></a>02069 <span class="preprocessor"></span>
<a name="l02070"></a>02070 <span class="comment">/*</span>
<a name="l02071"></a>02071 <span class="comment">**  Revision ID Register</span>
<a name="l02072"></a>02072 <span class="comment">*/</span>
<a name="l02073"></a><a class="code" href="btngpci_8h.html#aa6ad0d54b47fa591a45e9e7199855022">02073</a> <span class="preprocessor">#define CFG_REVISION_ID         (0x8)           </span><span class="comment">/* revision ID register */</span>
<a name="l02074"></a><a class="code" href="btngpci_8h.html#ab1b58c7e1a646cf5c1fec0354c934f92">02074</a> <span class="preprocessor">#define CFG_REVISION_ID_SIZE    (BT_WIDTH_D8)</span>
<a name="l02075"></a>02075 <span class="preprocessor"></span>
<a name="l02076"></a>02076 <span class="comment">/*</span>
<a name="l02077"></a>02077 <span class="comment">**  Register Level Programming Register (not used)</span>
<a name="l02078"></a>02078 <span class="comment">*/</span>
<a name="l02079"></a><a class="code" href="btngpci_8h.html#aa459d6bf2051bfd84680d12739b224bc">02079</a> <span class="preprocessor">#define CFG_REGISTER_PROG       (0x9)           </span><span class="comment">/* low byte of class code */</span>
<a name="l02080"></a><a class="code" href="btngpci_8h.html#a0e9b72c31aacd799901d8da4f4a385ad">02080</a> <span class="preprocessor">#define CFG_REGISTER_PROG_SIZE  (BT_WIDTH_D8)</span>
<a name="l02081"></a>02081 <span class="preprocessor"></span>
<a name="l02082"></a>02082 <span class="comment">/*</span>
<a name="l02083"></a>02083 <span class="comment">**  Class Code Register</span>
<a name="l02084"></a>02084 <span class="comment">*/</span>
<a name="l02085"></a><a class="code" href="btngpci_8h.html#ad48de997606b1a93b0dc7c4502972b46">02085</a> <span class="preprocessor">#define CFG_CLASS_CODE          (0xa)           </span><span class="comment">/* upper bytes of class code */</span>
<a name="l02086"></a><a class="code" href="btngpci_8h.html#ade16f8b2bd36e4711cf12e90c2cff4ae">02086</a> <span class="preprocessor">#define CFG_CLASS_CODE_SIZE     (BT_WIDTH_D16)</span>
<a name="l02087"></a>02087 <span class="preprocessor"></span>
<a name="l02088"></a>02088 <span class="comment">/*</span>
<a name="l02089"></a>02089 <span class="comment">**  Cache Line Register (not used)</span>
<a name="l02090"></a>02090 <span class="comment">*/</span>
<a name="l02091"></a><a class="code" href="btngpci_8h.html#a7cbae0604ee992fd0bf29fe8119576d7">02091</a> <span class="preprocessor">#define CFG_CACHE_LINE          (0xc)           </span><span class="comment">/* cache line size register */</span>
<a name="l02092"></a><a class="code" href="btngpci_8h.html#abc858798a5c9076f711e16d185e31631">02092</a> <span class="preprocessor">#define CFG_CACHE_LINE_SIZE     (BT_WIDTH_D8)</span>
<a name="l02093"></a>02093 <span class="preprocessor"></span>
<a name="l02094"></a>02094 <span class="comment">/*</span>
<a name="l02095"></a>02095 <span class="comment">**  Latency Timer Register</span>
<a name="l02096"></a>02096 <span class="comment">*/</span>
<a name="l02097"></a><a class="code" href="btngpci_8h.html#a5a3453de897de5cbddd938fc6b660672">02097</a> <span class="preprocessor">#define CFG_LATENCY_TIMER       (0xd)           </span><span class="comment">/* latency timer register */</span>
<a name="l02098"></a><a class="code" href="btngpci_8h.html#ac298d4e098409844cd767a5156c8e7c0">02098</a> <span class="preprocessor">#define CFG_LATENCY_TIMER_SIZE  (BT_WIDTH_D8)</span>
<a name="l02099"></a>02099 <span class="preprocessor"></span>
<a name="l02100"></a>02100 <span class="comment">/*</span>
<a name="l02101"></a>02101 <span class="comment">**  Header Type Register (not used)</span>
<a name="l02102"></a>02102 <span class="comment">*/</span>
<a name="l02103"></a><a class="code" href="btngpci_8h.html#a7f9b4ffdaa9234b8bb06700e90388f5c">02103</a> <span class="preprocessor">#define CFG_HEADER_TYPE         (0xe)           </span><span class="comment">/* header type register */</span>
<a name="l02104"></a><a class="code" href="btngpci_8h.html#a30e6203ea42d26522933b3105bed2c4b">02104</a> <span class="preprocessor">#define CFG_HEADER_TYPE_SIZE    (BT_WIDTH_D8)</span>
<a name="l02105"></a>02105 <span class="preprocessor"></span>
<a name="l02106"></a>02106 <span class="comment">/*</span>
<a name="l02107"></a>02107 <span class="comment">**  Built-In Self Test Register (not used)</span>
<a name="l02108"></a>02108 <span class="comment">*/</span>
<a name="l02109"></a><a class="code" href="btngpci_8h.html#ac506623b1e77efcbe5328f6f680bddec">02109</a> <span class="preprocessor">#define CFG_SELF_TEST           (0xf)           </span><span class="comment">/* self test register */</span>
<a name="l02110"></a><a class="code" href="btngpci_8h.html#a0a7f6d8aebca1d6fd6a3ddd550efa796">02110</a> <span class="preprocessor">#define CFG_SELF_TEST_SIZE      (BT_WIDTH_D8)</span>
<a name="l02111"></a>02111 <span class="preprocessor"></span>
<a name="l02112"></a>02112 <span class="comment">/*</span>
<a name="l02113"></a>02113 <span class="comment">**  I/O Mapped Node I/O Base Address Register (not used in AIX)</span>
<a name="l02114"></a>02114 <span class="comment">*/</span>
<a name="l02115"></a><a class="code" href="btngpci_8h.html#ae939c32dae558d45424034d312dadb22">02115</a> <span class="preprocessor">#define CFG_IO_IO_BASE          (0x10)          </span><span class="comment">/* I/O mapped node I/O */</span>
<a name="l02116"></a><a class="code" href="btngpci_8h.html#aca78ecb031315e391fd0477e823512b7">02116</a> <span class="preprocessor">#define CFG_IO_IO_BASE_SIZE     (BT_WIDTH_D32)</span>
<a name="l02117"></a>02117 <span class="preprocessor"></span>
<a name="l02118"></a>02118 <span class="comment">/*</span>
<a name="l02119"></a>02119 <span class="comment">**  Memory Mapped Node I/O Base Address Register</span>
<a name="l02120"></a>02120 <span class="comment">*/</span>
<a name="l02121"></a><a class="code" href="btngpci_8h.html#a5ea4d729ca0cb1eaa89a5f4ecb2caa48">02121</a> <span class="preprocessor">#define CFG_MM_IO_BASE          (0x14)          </span><span class="comment">/* memory mapped node I/O */</span>
<a name="l02122"></a><a class="code" href="btngpci_8h.html#ac23a8146a0e3d5c99d653d9b89f8be96">02122</a> <span class="preprocessor">#define CFG_MM_IO_BASE_SIZE     (BT_WIDTH_D32)</span>
<a name="l02123"></a>02123 <span class="preprocessor"></span>
<a name="l02124"></a>02124 <span class="comment">/*</span>
<a name="l02125"></a>02125 <span class="comment">**  Mapping Register Base Address Register</span>
<a name="l02126"></a>02126 <span class="comment">*/</span>
<a name="l02127"></a><a class="code" href="btngpci_8h.html#a96f2d2c7873ffb2d2b37cfbe8a1d4cad">02127</a> <span class="preprocessor">#define CFG_MAP_REG_BASE        (0x18)          </span><span class="comment">/* mapping registers base addr */</span>
<a name="l02128"></a><a class="code" href="btngpci_8h.html#a9485ab69351a6375e261b0d0df5e6d12">02128</a> <span class="preprocessor">#define CFG_MAP_REG_BASE_SIZE   (BT_WIDTH_D32)</span>
<a name="l02129"></a>02129 <span class="preprocessor"></span>
<a name="l02130"></a>02130 
<a name="l02131"></a>02131 <span class="comment">/*</span>
<a name="l02132"></a>02132 <span class="comment">**  Remote Memory Base Address Register</span>
<a name="l02133"></a>02133 <span class="comment">*/</span>
<a name="l02134"></a><a class="code" href="btngpci_8h.html#ac6413a4de31db583bdee9212471812df">02134</a> <span class="preprocessor">#define CFG_REM_MEM_BASE        (0x1c)          </span><span class="comment">/* remote memory base addr */</span>
<a name="l02135"></a><a class="code" href="btngpci_8h.html#a18fe3c65854a6b23518fad005083b54c">02135</a> <span class="preprocessor">#define CFG_REM_MEM_BASE_SIZE   (BT_WIDTH_D32)</span>
<a name="l02136"></a>02136 <span class="preprocessor"></span>
<a name="l02137"></a>02137 <span class="comment">/*</span>
<a name="l02138"></a>02138 <span class="comment">**  Interrupt Line Register </span>
<a name="l02139"></a>02139 <span class="comment">*/</span>
<a name="l02140"></a><a class="code" href="btngpci_8h.html#a20b6eb0336153ff43275422c2a1f88db">02140</a> <span class="preprocessor">#define CFG_IRQ_LINE            (0x3c)          </span><span class="comment">/* interrupt line register */</span>
<a name="l02141"></a><a class="code" href="btngpci_8h.html#aad39456122e1b3caf1e35823cba4aa72">02141</a> <span class="preprocessor">#define CFG_IRQ_LINE_SIZE       (BT_WIDTH_D8)</span>
<a name="l02142"></a>02142 <span class="preprocessor"></span>
<a name="l02143"></a>02143 <span class="comment">/*</span>
<a name="l02144"></a>02144 <span class="comment">**  Interrupt Pin Register (not used)</span>
<a name="l02145"></a>02145 <span class="comment">*/</span>
<a name="l02146"></a><a class="code" href="btngpci_8h.html#acb1ad1a7889fdae0cb747532ffee8fd1">02146</a> <span class="preprocessor">#define CFG_IRQ_PIN             (0x3d)          </span><span class="comment">/* interrupt pin register */</span>
<a name="l02147"></a><a class="code" href="btngpci_8h.html#ad39fe45e21f5fd6e35c01ade581cc1bc">02147</a> <span class="preprocessor">#define CFG_IRQ_PIN_SIZE        (BT_WIDTH_D8)</span>
<a name="l02148"></a>02148 <span class="preprocessor"></span>
<a name="l02149"></a>02149 <span class="comment">/*</span>
<a name="l02150"></a>02150 <span class="comment">**  Min_Gnt Register (not used)</span>
<a name="l02151"></a>02151 <span class="comment">*/</span>
<a name="l02152"></a><a class="code" href="btngpci_8h.html#a9a2eb545f5771884662917d7a70b9089">02152</a> <span class="preprocessor">#define CFG_MIN_GNT             (0x3e)          </span><span class="comment">/* Min_Gnt register */</span>
<a name="l02153"></a><a class="code" href="btngpci_8h.html#a148d7a3ee129b9f9280fa60dc3bf5112">02153</a> <span class="preprocessor">#define CFG_MIN_GNT_SIZE        (BT_WIDTH_D8)</span>
<a name="l02154"></a>02154 <span class="preprocessor"></span>
<a name="l02155"></a>02155 <span class="comment">/*</span>
<a name="l02156"></a>02156 <span class="comment">**  Max_Lat Register (not used)</span>
<a name="l02157"></a>02157 <span class="comment">*/</span>
<a name="l02158"></a><a class="code" href="btngpci_8h.html#a70b3630480b026fc209a05675f59e27a">02158</a> <span class="preprocessor">#define CFG_MAX_LAT             (0x3f)          </span><span class="comment">/* Max_Lat register */</span>
<a name="l02159"></a><a class="code" href="btngpci_8h.html#abb9bdbf8b5e694092601be22f54959ef">02159</a> <span class="preprocessor">#define CFG_MAX_LAT_SIZE        (BT_WIDTH_D8)</span>
<a name="l02160"></a>02160 <span class="preprocessor"></span>
<a name="l02161"></a>02161 <span class="comment">/*</span>
<a name="l02162"></a>02162 <span class="comment">**  Other defines</span>
<a name="l02163"></a>02163 <span class="comment">*/</span>
<a name="l02164"></a><a class="code" href="btngpci_8h.html#ae494b1ec6ecbe7251dfc412a1ec53c1b">02164</a> <span class="preprocessor">#define BT_WRITE   (1&lt;&lt;0)</span>
<a name="l02165"></a><a class="code" href="btngpci_8h.html#a97602a974d2d6fc127c706307f385f32">02165</a> <span class="preprocessor"></span><span class="preprocessor">#define BT_READ    (1&lt;&lt;1)</span>
<a name="l02166"></a>02166 <span class="preprocessor"></span>
<a name="l02167"></a>02167 <span class="comment">/*</span>
<a name="l02168"></a>02168 <span class="comment">** Size definitions</span>
<a name="l02169"></a>02169 <span class="comment">*/</span>
<a name="l02170"></a><a class="code" href="btngpci_8h.html#a92b3227ff6c63b0b5a8a7b6dec4d6322">02170</a> <span class="preprocessor">#define SIZE_1KB            0x00000400  </span><span class="comment">/* 1KByte */</span>
<a name="l02171"></a><a class="code" href="btngpci_8h.html#a893d7f21ccd211aa54f16e4c259f04ff">02171</a> <span class="preprocessor">#define SIZE_4KB            0x00001000  </span><span class="comment">/* 4Kbytes */</span>
<a name="l02172"></a><a class="code" href="btngpci_8h.html#a2f7e1ec00be04ca89bf1639b865d10f5">02172</a> <span class="preprocessor">#define SIZE_8KB            0x00002000  </span><span class="comment">/* 8Kbytes */</span>
<a name="l02173"></a><a class="code" href="btngpci_8h.html#adef4d3cde98cd4687ba35abaa5be58bc">02173</a> <span class="preprocessor">#define SIZE_16KB           0x00004000  </span><span class="comment">/* 16Kbytes */</span>
<a name="l02174"></a><a class="code" href="btngpci_8h.html#a8e4c0d8d744a9cd3959525e6a634a2a2">02174</a> <span class="preprocessor">#define SIZE_32KB           0x00008000  </span><span class="comment">/* 32Kbytes */</span>
<a name="l02175"></a><a class="code" href="btngpci_8h.html#a5c27e467dc0d358ad6b6f25cbe7c9b64">02175</a> <span class="preprocessor">#define SIZE_64KB           0x00010000  </span><span class="comment">/* 64Kbytes */</span>
<a name="l02176"></a><a class="code" href="btngpci_8h.html#ad7633b78633cd8267f5004a5e9cc9f52">02176</a> <span class="preprocessor">#define SIZE_128KB          0x00020000  </span><span class="comment">/* 128Kbytes */</span>
<a name="l02177"></a><a class="code" href="btngpci_8h.html#a210d59c340d096c24a2d04ac898da78f">02177</a> <span class="preprocessor">#define SIZE_256KB          0x00040000  </span><span class="comment">/* 256Kbytes */</span>
<a name="l02178"></a><a class="code" href="btngpci_8h.html#aa487e4f9a9237a9f2a26e45f6c13672a">02178</a> <span class="preprocessor">#define SIZE_512KB          0x00080000  </span><span class="comment">/* 512Kbytes */</span>
<a name="l02179"></a><a class="code" href="btngpci_8h.html#a9b412c9d08303d9c02cb78d4f15d12ad">02179</a> <span class="preprocessor">#define SIZE_1MB            0x00100000  </span><span class="comment">/* 1Mbytes */</span>
<a name="l02180"></a><a class="code" href="btngpci_8h.html#ae88b7422dc6627f348b3e67a1849b27a">02180</a> <span class="preprocessor">#define SIZE_2MB            0x00200000  </span><span class="comment">/* 1Mbytes */</span>
<a name="l02181"></a><a class="code" href="btngpci_8h.html#aefd86f0836e5dbc1d962a9ddcd73d2d3">02181</a> <span class="preprocessor">#define SIZE_4MB            0x00400000  </span><span class="comment">/* 4Mbytes */</span>
<a name="l02182"></a><a class="code" href="btngpci_8h.html#abb155706eaa5151d739aaeab515464c6">02182</a> <span class="preprocessor">#define SIZE_8MB            0x00800000  </span><span class="comment">/* 8Mbytes */</span>
<a name="l02183"></a><a class="code" href="btngpci_8h.html#aa6e8a628ab05c56309d88444c8a36048">02183</a> <span class="preprocessor">#define SIZE_16MB           0x01000000  </span><span class="comment">/* 16Mbytes */</span>
<a name="l02184"></a><a class="code" href="btngpci_8h.html#a61ee366ad7f1810ca59328d106730182">02184</a> <span class="preprocessor">#define SIZE_32MB           0x02000000  </span><span class="comment">/* 32Mbytes */</span>
<a name="l02185"></a><a class="code" href="btngpci_8h.html#a7f4168cf9eb4f0c9fa1cd49d2f8c5b78">02185</a> <span class="preprocessor">#define SIZE_4GB            0x100000000 </span><span class="comment">/* 4Gbytes */</span>
<a name="l02186"></a>02186 
<a name="l02187"></a>02187 <span class="comment">/*</span>
<a name="l02188"></a>02188 <span class="comment">** Structure for VxWork trace message streams </span>
<a name="l02189"></a>02189 <span class="comment">*/</span>
<a name="l02190"></a>02190 
<a name="l02191"></a>02191 <span class="preprocessor">#if defined(__vxworks)</span>
<a name="l02192"></a>02192 <span class="preprocessor"></span>
<a name="l02193"></a>02193 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l02194"></a>02194     <a class="code" href="btdef_8h.html#a3914ab8323f92ba56d2feaa6082e654b">bt_data32_t</a>  error;
<a name="l02195"></a>02195     FILE        *stream1;
<a name="l02196"></a>02196     FILE        *stream2;
<a name="l02197"></a>02197 } bt_trace_init_t;
<a name="l02198"></a>02198 
<a name="l02199"></a>02199 <span class="preprocessor">#endif </span><span class="comment">/* defined(__vxworks) */</span>
<a name="l02200"></a>02200 
<a name="l02201"></a>02201 
<a name="l02202"></a>02202 <span class="comment">/******************************************************************************</span>
<a name="l02203"></a>02203 <span class="comment">**</span>
<a name="l02204"></a>02204 <span class="comment">**      Define error numbers</span>
<a name="l02205"></a>02205 <span class="comment">**</span>
<a name="l02206"></a>02206 <span class="comment">** In the cases where there is an errno defined by Standard C or POSIX that</span>
<a name="l02207"></a>02207 <span class="comment">** is the equivilent to our error return, we would like to use it.</span>
<a name="l02208"></a>02208 <span class="comment">******************************************************************************/</span>
<a name="l02209"></a>02209 
<a name="l02210"></a>02210 <span class="preprocessor">#if     defined(__vxworks)</span>
<a name="l02211"></a>02211 <span class="preprocessor"></span><span class="preprocessor">#define POSIX_EQUIV(BT_ENO, ENO)        BT_ENO = ENO</span>
<a name="l02212"></a>02212 <span class="preprocessor"></span><span class="preprocessor">#define BT_ESTART       M_btp</span>
<a name="l02213"></a>02213 <span class="preprocessor"></span>
<a name="l02214"></a>02214 <span class="preprocessor">#elif   defined(BT_WINNT)</span>
<a name="l02215"></a>02215 <span class="preprocessor"></span><span class="preprocessor">#define POSIX_EQUIV(BT_ENO, ENO)        BT_ENO</span>
<a name="l02216"></a>02216 <span class="preprocessor"></span>
<a name="l02217"></a>02217 <span class="preprocessor">#elif   defined(__sun)</span>
<a name="l02218"></a>02218 <span class="preprocessor"></span><span class="preprocessor">#define POSIX_EQUIV(BT_ENO, ENO)        BT_ENO</span>
<a name="l02219"></a>02219 <span class="preprocessor"></span><span class="preprocessor">#define BT_ESTART       0x1000</span>
<a name="l02220"></a>02220 <span class="preprocessor"></span>
<a name="l02221"></a>02221 <span class="preprocessor">#elif   defined(__sgi)</span>
<a name="l02222"></a>02222 <span class="preprocessor"></span><span class="preprocessor">#define POSIX_EQUIV(BT_ENO, ENO)        BT_ENO</span>
<a name="l02223"></a>02223 <span class="preprocessor"></span><span class="preprocessor">#define BT_ESTART       0x1000</span>
<a name="l02224"></a>02224 <span class="preprocessor"></span>
<a name="l02225"></a>02225 <span class="preprocessor">#elif   defined(__linux__)</span>
<a name="l02226"></a>02226 <span class="preprocessor"></span><span class="preprocessor">#define POSIX_EQUIV(BT_ENO, ENO)        BT_ENO</span>
<a name="l02227"></a>02227 <span class="preprocessor"></span><span class="preprocessor">#define BT_ESTART       0x1000</span>
<a name="l02228"></a>02228 <span class="preprocessor"></span>
<a name="l02229"></a>02229 <span class="preprocessor">#else   </span><span class="comment">/* unknown operating system */</span>
<a name="l02230"></a>02230 <span class="preprocessor">#error Unknown Operating System!</span>
<a name="l02231"></a>02231 <span class="preprocessor"></span><span class="preprocessor">#endif  </span><span class="comment">/* defined(__vxworks) */</span>
<a name="l02232"></a>02232 
<a name="l02233"></a><a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696">02233</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l02234"></a><a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a4beb98499611b1e2c050e80a70e47c71">02234</a>     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a4beb98499611b1e2c050e80a70e47c71">BT_SUCCESS</a> = 0,                     <span class="comment">/* Everything is just swell */</span>
<a name="l02235"></a><a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">02235</a>     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_EIO, EIO),           <span class="comment">/* Input or output error */</span>
<a name="l02236"></a>02236     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_ENXIO, ENXIO),       <span class="comment">/* Non-existent device */</span>
<a name="l02237"></a>02237     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_ENOMEM, ENOMEM),     <span class="comment">/* Out of memory or other resource */</span>
<a name="l02238"></a>02238     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_EINVAL, <a class="code" href="khyt1331_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>),     <span class="comment">/* Invalid parameter */</span>
<a name="l02239"></a>02239     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_EACCESS, EACCES),    <span class="comment">/* Access failed: permission denied */</span>
<a name="l02240"></a>02240     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_EDESC, EBADF),       <span class="comment">/* Invalid descriptor */</span>
<a name="l02241"></a>02241     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_ENOSUP, ENOSYS),     <span class="comment">/* Option not supported on this */</span>
<a name="l02242"></a>02242                                         <span class="comment">/* particular implementation. */</span>
<a name="l02243"></a>02243 
<a name="l02244"></a>02244     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_EABORT, EINTR),      <span class="comment">/* Interrupted a system call */</span>
<a name="l02245"></a>02245 
<a name="l02246"></a><a class="code" href="btngpci_8h.html#a0d7d94ab652a84130c997ba015e9b6dd">02246</a> <span class="preprocessor">#define BT_EINTR BT_EABORT              </span><span class="comment">/* Obsolete form */</span>
<a name="l02247"></a>02247 
<a name="l02248"></a>02248     <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696a086db9b45c7fce7fffb9e7e0254afc52">POSIX_EQUIV</a>(BT_ESYSMAX, BT_ESTART), <span class="comment">/* past last POSIX defined error */</span>
<a name="l02249"></a>02249 
<a name="l02250"></a>02250     BT_EFAIL,           <span class="comment">/* Something went wrong. Generic error. */</span>
<a name="l02251"></a>02251     BT_ENORD,           <span class="comment">/* Device does not support reads */</span>
<a name="l02252"></a>02252     BT_ENOWR,           <span class="comment">/* Device does not support writes */</span>
<a name="l02253"></a>02253     BT_ESTATUS,         <span class="comment">/* Status register error value */</span>
<a name="l02254"></a>02254     BT_ENOPWR,          <span class="comment">/* Power is off or cable is disconnected */</span>
<a name="l02255"></a>02255     BT_EPWRCYC,         <span class="comment">/* Power was cycled */</span>
<a name="l02256"></a>02256     BT_EBUSY,           <span class="comment">/* Timer expired before a resource became available. */</span>
<a name="l02257"></a>02257     BT_ELCARD,          <span class="comment">/* Local card failed diagnostics */</span>
<a name="l02258"></a>02258     BT_ECABLE,          <span class="comment">/* Interconnection cable failed diagnostics */</span>
<a name="l02259"></a>02259     BT_ERCARD,          <span class="comment">/* Remote card failed diagnostics */</span>
<a name="l02260"></a>02260     BT_EPAIR,           <span class="comment">/* The pair of adapter cards failed diagnostics */</span>
<a name="l02261"></a>02261     BT_EEXCEPT,         <span class="comment">/* OS exception error */</span>
<a name="l02262"></a>02262     BT_EEVT_NOT_REGISTERED, <span class="comment">/* enviorment not registered */</span>
<a name="l02263"></a>02263     BT_ENOT_FOUND,      <span class="comment">/* Attempt to acquire or remove an unknown event */</span>
<a name="l02264"></a>02264     BT_ENOT_LOCKED,     <span class="comment">/* attempt to unlock a unlocked unit */</span> 
<a name="l02265"></a>02265     BT_ENOT_TRANSMITTER, <span class="comment">/* Remote access requested on a unit that is not a transmitter */</span>
<a name="l02266"></a>02266     BT_EPCI_CONFIG,     <span class="comment">/* Error reading or writting PCI configuration registers */</span>
<a name="l02267"></a>02267     BT_ELOCAL,          <span class="comment">/* Attempt to perform TAS or CAS on local device */</span>
<a name="l02268"></a>02268     BT_EUNKNOWN_REMID,  <span class="comment">/* Remote adaptor not supported */</span>
<a name="l02269"></a>02269     BT_ENO_UNIT,        <span class="comment">/* Unit does not exist */</span>
<a name="l02270"></a>02270     BT_ENO_MMAP,        <span class="comment">/* Logical device does not support bt_mmap() */</span>
<a name="l02271"></a>02271     BT_EHANDLE,         <span class="comment">/* Attempt to get unique signal handle failed */</span>
<a name="l02272"></a>02272 
<a name="l02273"></a>02273     BT_MAX_ERR          <span class="comment">/* Last Error number */</span>
<a name="l02274"></a>02274 } <a class="code" href="btngpci_8h.html#ab1759f6ed871153e4b84ff68427f4696">bt_error_t</a>;
<a name="l02275"></a>02275 
<a name="l02276"></a>02276 
<a name="l02277"></a>02277 <span class="preprocessor">#undef  POSIX_EQUIV</span>
<a name="l02278"></a>02278 <span class="preprocessor"></span>
<a name="l02279"></a>02279 <span class="preprocessor">#endif </span><span class="comment">/* !_BTNGPCI_H */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: rootana/src/TAP_generators/template_fitting/Convolver.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>rootana/src/TAP_generators/template_fitting/Convolver.h</h1><a href="Convolver_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef TEMPLATE_FITTING_CONVOLVER_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define TEMPLATE_FITTING_CONVOLVER_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;<a class="code" href="debug__tools_8h.html">debug_tools.h</a>&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;TH1.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;utility&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="keyword">namespace </span>Algorithm{
<a name="l00010"></a>00010    <span class="keyword">class </span>TH1_c_iterator;
<a name="l00011"></a>00011    <span class="keyword">class </span>TH1_wrapper;
<a name="l00012"></a>00012    <span class="keyword">template</span> &lt; <span class="keyword">typename</span> WeightIterator&gt;
<a name="l00013"></a>00013    <span class="keyword">class </span>Convolver;
<a name="l00014"></a>00014    <span class="keyword">template</span> &lt; <span class="keyword">typename</span> InputIterator&gt;
<a name="l00015"></a><a class="code" href="namespaceAlgorithm.html#a9be3fa84e6e394ad5b0c7f4d972231e7">00015</a>    <span class="keyword">class </span><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html">Pedestal_iterator</a>;
<a name="l00016"></a>00016    <span class="keyword">typedef</span> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html">Pedestal_iterator&lt;std::vector&lt;int&gt;::const_iterator</a>&gt; <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html">TpiMinusPedestal_iterator</a>;
<a name="l00017"></a>00017 }
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">00019</a> <span class="keyword">class </span><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">Algorithm::TH1_c_iterator</a>:<span class="keyword">public</span> std::<a class="code" href="namespacemodules.html#a5ce57c86284eadc5b573cfab0949bfdb">iterator</a>&lt;std::random_access_iterator_tag, double&gt;{
<a name="l00020"></a>00020    <span class="keyword">public</span>:
<a name="l00021"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa117e24ff1db12e4efb7549c96ef2890">00021</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa117e24ff1db12e4efb7549c96ef2890">TH1_c_iterator</a>():<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>(NULL),<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>(0),<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2df77fba75b9b3c8ee5ab3d3b2cc8824">fScale</a>(1.){}
<a name="l00022"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#abab573da21656e88e3c2d647341fd0dc">00022</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#abab573da21656e88e3c2d647341fd0dc">TH1_c_iterator</a>(<span class="keyword">const</span> TH1* hist, <span class="keywordtype">int</span> init=1,<span class="keywordtype">double</span> scale=1.):<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>(hist),<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>(init),<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2df77fba75b9b3c8ee5ab3d3b2cc8824">fScale</a>(scale){}
<a name="l00023"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#ae766061f158913b812e9f8c90e964b3a">00023</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#ae766061f158913b812e9f8c90e964b3a">TH1_c_iterator</a>(<span class="keyword">const</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a>&amp; rhs):<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>(rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>),<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>(rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>),<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2df77fba75b9b3c8ee5ab3d3b2cc8824">fScale</a>(rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2df77fba75b9b3c8ee5ab3d3b2cc8824">fScale</a>){}
<a name="l00024"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa9f004aa57df14edda75a6b41dd9c52d">00024</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa9f004aa57df14edda75a6b41dd9c52d">operator++</a>(){
<a name="l00025"></a>00025        ++<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>;
<a name="l00026"></a>00026        <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00027"></a>00027      }
<a name="l00028"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#af3b90c696ab4644818ff8fa544ab3eee">00028</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#af3b90c696ab4644818ff8fa544ab3eee">operator++</a>(<span class="keywordtype">int</span>){
<a name="l00029"></a>00029        <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> tmp(*<span class="keyword">this</span>);
<a name="l00030"></a>00030        ++<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>;
<a name="l00031"></a>00031        <span class="keywordflow">return</span> tmp;
<a name="l00032"></a>00032      }
<a name="l00033"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aca738d365de2b63f7f889b56e4ddbbc5">00033</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aca738d365de2b63f7f889b56e4ddbbc5">operator--</a>(){
<a name="l00034"></a>00034        --<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>;
<a name="l00035"></a>00035        <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00036"></a>00036      }
<a name="l00037"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a21ef40c300df72b7b053606019d3574b">00037</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a21ef40c300df72b7b053606019d3574b">operator--</a>(<span class="keywordtype">int</span>){
<a name="l00038"></a>00038        <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> tmp(*<span class="keyword">this</span>);
<a name="l00039"></a>00039        --<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>;
<a name="l00040"></a>00040        <span class="keywordflow">return</span> tmp;
<a name="l00041"></a>00041      }
<a name="l00042"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#ae8964e33db6e680acf1191712a81fa6d">00042</a>      <span class="keywordtype">double</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#ae8964e33db6e680acf1191712a81fa6d">operator*</a>()<span class="keyword">const</span>{ 
<a name="l00043"></a>00043        <span class="keywordflow">if</span>(<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a> ) <span class="keywordflow">return</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>-&gt;GetBinContent(<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>)*<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2df77fba75b9b3c8ee5ab3d3b2cc8824">fScale</a>;
<a name="l00044"></a>00044        <span class="keywordflow">return</span> 0;
<a name="l00045"></a>00045      }
<a name="l00046"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a294859f3eee2f1fb181f8fc20ac380d6">00046</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a294859f3eee2f1fb181f8fc20ac380d6">operator+=</a>(<span class="keywordtype">int</span> n){
<a name="l00047"></a>00047        <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>+=n;
<a name="l00048"></a>00048        <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00049"></a>00049      }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a1ded85534f726d2a788d9ee33ec5a9f7">00051</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a1ded85534f726d2a788d9ee33ec5a9f7">operator+</a>(<span class="keywordtype">int</span> n)<span class="keyword">const</span>{ 
<a name="l00052"></a>00052        <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> tmp(*<span class="keyword">this</span>);
<a name="l00053"></a>00053        tmp.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>+=n;
<a name="l00054"></a>00054        <span class="keywordflow">return</span> tmp;
<a name="l00055"></a>00055      }
<a name="l00056"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a997d1f63378451625c1245a466019598">00056</a>      <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a997d1f63378451625c1245a466019598">operator-</a>(<span class="keywordtype">int</span> n)<span class="keyword">const</span>{ 
<a name="l00057"></a>00057        <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> tmp(*<span class="keyword">this</span>);
<a name="l00058"></a>00058        tmp.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>-=n;
<a name="l00059"></a>00059        <span class="keywordflow">return</span> tmp;
<a name="l00060"></a>00060      }
<a name="l00061"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a193e1069ffd128e036ec1b93d57f1324">00061</a>      <span class="keywordtype">bool</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a193e1069ffd128e036ec1b93d57f1324">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a>&amp; rhs)<span class="keyword">const</span>{
<a name="l00062"></a>00062        <span class="keywordflow">return</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>!=rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a> || <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>!=rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a> ;
<a name="l00063"></a>00063      }
<a name="l00064"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2aa26c2c0fb6d71ea8ff977a48c9738a">00064</a>      <span class="keywordtype">bool</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2aa26c2c0fb6d71ea8ff977a48c9738a">operator==</a>(<span class="keyword">const</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a>&amp; rhs)<span class="keyword">const</span>{
<a name="l00065"></a>00065        <span class="keywordflow">return</span>  <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>==rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a> &amp;&amp; <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>==rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>;
<a name="l00066"></a>00066      }
<a name="l00067"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2ddeca42baa505181cf0595a86ebf7d8">00067</a>      <span class="keywordtype">int</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2ddeca42baa505181cf0595a86ebf7d8">operator-</a>(<span class="keyword">const</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a>&amp; rhs)<span class="keyword">const</span>{ 
<a name="l00068"></a>00068        <span class="keywordflow">return</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>-rhs.<a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>;
<a name="l00069"></a>00069      }
<a name="l00070"></a>00070 
<a name="l00071"></a>00071    <span class="keyword">private</span>:
<a name="l00072"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">00072</a>      <span class="keyword">const</span> TH1* <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a8ab006f32589db84441a33a4fec134f8">fHist</a>;
<a name="l00073"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">00073</a>      <span class="keywordtype">int</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#aa1a75136126e2652ad63150c5deb187c">fCurrentBin</a>;
<a name="l00074"></a><a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2df77fba75b9b3c8ee5ab3d3b2cc8824">00074</a>      <span class="keywordtype">double</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html#a2df77fba75b9b3c8ee5ab3d3b2cc8824">fScale</a>;
<a name="l00075"></a>00075 };
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="structAlgorithm_1_1TH1__wrapper.html">00077</a> <span class="keyword">struct </span><a class="code" href="structAlgorithm_1_1TH1__wrapper.html">Algorithm::TH1_wrapper</a>{
<a name="l00078"></a><a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a368c88fac3194feb0f9793542674d2e9">00078</a>     <a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a368c88fac3194feb0f9793542674d2e9">TH1_wrapper</a>(<span class="keyword">const</span> TH1*  hist, <span class="keywordtype">double</span> scale=1.): <a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a1eacea70703c99940c4660c07e042adc">fHisto</a>(hist), <a class="code" href="structAlgorithm_1_1TH1__wrapper.html#adbb9488a50d769c160eaf59b47378a1a">fScale</a>(scale){};
<a name="l00079"></a><a class="code" href="structAlgorithm_1_1TH1__wrapper.html#ad8d7bd3a7f7656c0b5c16105962b656a">00079</a>     <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="structAlgorithm_1_1TH1__wrapper.html#ad8d7bd3a7f7656c0b5c16105962b656a">begin</a>(<span class="keywordtype">int</span> skip=0)<span class="keyword">const</span>{<span class="keywordflow">return</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a>(<a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a1eacea70703c99940c4660c07e042adc">fHisto</a>,1+skip,<a class="code" href="structAlgorithm_1_1TH1__wrapper.html#adbb9488a50d769c160eaf59b47378a1a">fScale</a>);}
<a name="l00080"></a><a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a327a84acde0fb9fecc2c99a66ecc087c">00080</a>     <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a> <a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a327a84acde0fb9fecc2c99a66ecc087c">end</a>(<span class="keywordtype">int</span> skip=0)<span class="keyword">const</span>{<span class="keywordflow">return</span> <a class="code" href="classAlgorithm_1_1TH1__c__iterator.html">TH1_c_iterator</a>(<a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a1eacea70703c99940c4660c07e042adc">fHisto</a>,<a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a1eacea70703c99940c4660c07e042adc">fHisto</a>-&gt;GetNbinsX()-skip,<a class="code" href="structAlgorithm_1_1TH1__wrapper.html#adbb9488a50d769c160eaf59b47378a1a">fScale</a>);}
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="keyword">private</span>:
<a name="l00083"></a><a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a1eacea70703c99940c4660c07e042adc">00083</a>     <span class="keyword">const</span> TH1* <a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a1eacea70703c99940c4660c07e042adc">fHisto</a>;
<a name="l00084"></a><a class="code" href="structAlgorithm_1_1TH1__wrapper.html#adbb9488a50d769c160eaf59b47378a1a">00084</a>     <span class="keywordtype">double</span> <a class="code" href="structAlgorithm_1_1TH1__wrapper.html#adbb9488a50d769c160eaf59b47378a1a">fScale</a>;
<a name="l00085"></a>00085 };
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> InputIterator &gt;
<a name="l00088"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html">00088</a> <span class="keyword">struct </span><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html">Algorithm::Pedestal_iterator</a>:<span class="keyword">public</span> InputIterator{
<a name="l00089"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a5a3cd471c3a96f922b3c2ea099e98207">00089</a> <span class="keyword">typedef</span> std::pair&lt;TH1_c_iterator, TH1_c_iterator&gt; <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a5a3cd471c3a96f922b3c2ea099e98207">HistIter</a>;
<a name="l00090"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a1e794fa7d5c80afb7ffd346071e944f5">00090</a> <span class="keyword">typedef</span> std::vector&lt;HistIter&gt; <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a1e794fa7d5c80afb7ffd346071e944f5">HistList</a>;
<a name="l00091"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#afe80363b665de4719d09b007e5bf661f">00091</a>      <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#afe80363b665de4719d09b007e5bf661f">Pedestal_iterator</a>(<span class="keyword">const</span> InputIterator&amp; it, <span class="keywordtype">double</span> ped):InputIterator(it),<a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a890f3c1766b0a7596e1e178abccad074">fPedestal</a>(ped){}
<a name="l00092"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a4d02e6290b3c4ad87eaf761e796a0886">00092</a>      <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a4d02e6290b3c4ad87eaf761e796a0886">Pedestal_iterator</a>(<span class="keyword">const</span> InputIterator&amp; it):InputIterator(it),<a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a890f3c1766b0a7596e1e178abccad074">fPedestal</a>(0){}
<a name="l00093"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a7a501f3b6bcc8c2b7adf8baa5c2675d3">00093</a>      <span class="keywordtype">double</span> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a7a501f3b6bcc8c2b7adf8baa5c2675d3">operator*</a>()<span class="keyword">const</span>{
<a name="l00094"></a>00094         <span class="keywordflow">return</span> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a7a501f3b6bcc8c2b7adf8baa5c2675d3">InputIterator::operator*</a>() - <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a73e278d5eeaf94e91e19ffe8684885f7">GetPedestal</a>();
<a name="l00095"></a>00095      }
<a name="l00096"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a73e278d5eeaf94e91e19ffe8684885f7">00096</a>      <span class="keywordtype">double</span> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a73e278d5eeaf94e91e19ffe8684885f7">GetPedestal</a>()<span class="keyword">const</span>{
<a name="l00097"></a>00097         <span class="keywordtype">double</span> val=<a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a890f3c1766b0a7596e1e178abccad074">fPedestal</a>;
<a name="l00098"></a>00098         <span class="comment">//for(HistList::const_iterator i_hist=fHistograms.begin(); i_hist!=fHistograms.end(); ++i_hist){</span>
<a name="l00099"></a>00099         <span class="comment">//   val+=*(i_hist-&gt;first);</span>
<a name="l00100"></a>00100         <span class="comment">//}</span>
<a name="l00101"></a>00101        <span class="keywordflow">return</span> val;
<a name="l00102"></a>00102      }
<a name="l00103"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a13a9e49e81e29199b04bcb25a285bbf3">00103</a>      <span class="keywordtype">void</span> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a13a9e49e81e29199b04bcb25a285bbf3">operator++</a>(){
<a name="l00104"></a>00104         <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a13a9e49e81e29199b04bcb25a285bbf3">InputIterator::operator++</a>();
<a name="l00105"></a>00105         <span class="keywordflow">for</span>(<a class="code" href="namespacemodules.html#a5ce57c86284eadc5b573cfab0949bfdb">HistList::iterator</a> i_hist=<a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#ab00f302b17388a9be33e1b30f03a76bb">fHistograms</a>.begin(); i_hist!=<a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#ab00f302b17388a9be33e1b30f03a76bb">fHistograms</a>.end(); ){
<a name="l00106"></a>00106            ++(i_hist-&gt;first);
<a name="l00107"></a>00107            <span class="keywordflow">if</span>( i_hist-&gt;first == i_hist-&gt;second ){
<a name="l00108"></a>00108              <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#ab00f302b17388a9be33e1b30f03a76bb">fHistograms</a>.erase(i_hist); 
<a name="l00109"></a>00109              <span class="keywordflow">continue</span>;
<a name="l00110"></a>00110            }
<a name="l00111"></a>00111            ++i_hist;
<a name="l00112"></a>00112         }
<a name="l00113"></a>00113      }
<a name="l00114"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a53feb1ac266bd43b31ee58cde4b8348c">00114</a>      <span class="keywordtype">void</span> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a53feb1ac266bd43b31ee58cde4b8348c">AddHistogram</a>(TH1* hist,<span class="keywordtype">double</span> scale, <span class="keywordtype">int</span> shift){
<a name="l00115"></a>00115        <a class="code" href="structAlgorithm_1_1TH1__wrapper.html">TH1_wrapper</a> wrap(hist, scale);
<a name="l00116"></a>00116        <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#ab00f302b17388a9be33e1b30f03a76bb">fHistograms</a>.push_back(std::make_pair(wrap.<a class="code" href="structAlgorithm_1_1TH1__wrapper.html#ad8d7bd3a7f7656c0b5c16105962b656a">begin</a>(shift), wrap.<a class="code" href="structAlgorithm_1_1TH1__wrapper.html#a327a84acde0fb9fecc2c99a66ecc087c">end</a>()));
<a name="l00117"></a>00117      }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119      <span class="keyword">private</span>:
<a name="l00120"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a890f3c1766b0a7596e1e178abccad074">00120</a>      <span class="keywordtype">double</span> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a890f3c1766b0a7596e1e178abccad074">fPedestal</a>;
<a name="l00121"></a><a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#ab00f302b17388a9be33e1b30f03a76bb">00121</a>      <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#a1e794fa7d5c80afb7ffd346071e944f5">HistList</a> <a class="code" href="structAlgorithm_1_1Pedestal__iterator.html#ab00f302b17388a9be33e1b30f03a76bb">fHistograms</a>;
<a name="l00122"></a>00122 };
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="keyword">template</span> &lt; <span class="keyword">typename</span> WeightIterator&gt;
<a name="l00125"></a><a class="code" href="classAlgorithm_1_1Convolver.html">00125</a> <span class="keyword">class </span><a class="code" href="classAlgorithm_1_1Convolver.html">Algorithm::Convolver</a>{
<a name="l00126"></a>00126    <span class="keyword">public</span>:
<a name="l00127"></a><a class="code" href="classAlgorithm_1_1Convolver.html#a8581240df08b90c13f113d80aa615ffb">00127</a>       <a class="code" href="classAlgorithm_1_1Convolver.html#a8581240df08b90c13f113d80aa615ffb">Convolver</a>( WeightIterator begin, WeightIterator end):<a class="code" href="classAlgorithm_1_1Convolver.html#a5ae1bf78fe4a82667d0d00081bb66a18">fNWeights</a>(end-begin),<a class="code" href="classAlgorithm_1_1Convolver.html#a39a95c64b468d47141ba1581614e1d23">fBegin</a>(begin), <a class="code" href="classAlgorithm_1_1Convolver.html#a0ce8b3b704d999c01ff77a9792eb9c27">fEnd</a>(end){
<a name="l00128"></a>00128       }
<a name="l00129"></a>00129       
<a name="l00130"></a>00130       <span class="keyword">template</span> &lt;<span class="keyword">typename</span> InputIterator &gt;
<a name="l00131"></a><a class="code" href="classAlgorithm_1_1Convolver.html#a0371d38099e64c15bcbe8d1ab4c95bf1">00131</a>       <span class="keywordtype">double</span> <a class="code" href="classAlgorithm_1_1Convolver.html#a0371d38099e64c15bcbe8d1ab4c95bf1">operator()</a>(<span class="keyword">const</span> InputIterator&amp; start){
<a name="l00132"></a>00132         <span class="keywordtype">double</span> ret_val=0;
<a name="l00133"></a>00133         InputIterator i_in=start;
<a name="l00134"></a>00134         <span class="keywordflow">for</span>(WeightIterator i_weight=<a class="code" href="classAlgorithm_1_1Convolver.html#a39a95c64b468d47141ba1581614e1d23">fBegin</a>; i_weight!=<a class="code" href="classAlgorithm_1_1Convolver.html#a0ce8b3b704d999c01ff77a9792eb9c27">fEnd</a>; ++i_weight){
<a name="l00135"></a>00135            ret_val+=(*i_weight)*(*i_in);
<a name="l00136"></a>00136            ++i_in;
<a name="l00137"></a>00137         }
<a name="l00138"></a>00138         <span class="keywordflow">return</span> ret_val;
<a name="l00139"></a>00139       }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141       <span class="keyword">template</span> &lt;<span class="keyword">typename</span> InputIterator, <span class="keyword">typename</span> OutputIterator &gt;
<a name="l00142"></a><a class="code" href="classAlgorithm_1_1Convolver.html#a5d3e2990984c61db20a825218997afea">00142</a>       OutputIterator <a class="code" href="classAlgorithm_1_1Convolver.html#a5d3e2990984c61db20a825218997afea">Process</a>(<span class="keyword">const</span> InputIterator&amp; start, <span class="keyword">const</span> InputIterator&amp; stop, OutputIterator result){
<a name="l00143"></a>00143         InputIterator end=stop-<a class="code" href="classAlgorithm_1_1Convolver.html#a5ae1bf78fe4a82667d0d00081bb66a18">fNWeights</a>;
<a name="l00144"></a>00144         <span class="keywordflow">for</span>(InputIterator i_in=start;i_in!=end;++i_in){
<a name="l00145"></a>00145            *(result)=<span class="keyword">operator</span>()(i_in);
<a name="l00146"></a>00146            ++result;
<a name="l00147"></a>00147         }
<a name="l00148"></a>00148         <span class="keywordflow">return</span> result;
<a name="l00149"></a>00149       }
<a name="l00150"></a><a class="code" href="classAlgorithm_1_1Convolver.html#adb6dfcff274f0286b2215f4b4fb9d77f">00150</a>       <span class="keywordtype">int</span> <a class="code" href="classAlgorithm_1_1Convolver.html#adb6dfcff274f0286b2215f4b4fb9d77f">GetNWeights</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <a class="code" href="classAlgorithm_1_1Convolver.html#a5ae1bf78fe4a82667d0d00081bb66a18">fNWeights</a>;}
<a name="l00151"></a>00151 
<a name="l00152"></a>00152    <span class="keyword">private</span>:
<a name="l00153"></a><a class="code" href="classAlgorithm_1_1Convolver.html#a5ae1bf78fe4a82667d0d00081bb66a18">00153</a>       <span class="keywordtype">int</span> <a class="code" href="classAlgorithm_1_1Convolver.html#a5ae1bf78fe4a82667d0d00081bb66a18">fNWeights</a>;
<a name="l00154"></a><a class="code" href="classAlgorithm_1_1Convolver.html#a39a95c64b468d47141ba1581614e1d23">00154</a>       WeightIterator <a class="code" href="classAlgorithm_1_1Convolver.html#a39a95c64b468d47141ba1581614e1d23">fBegin</a>;
<a name="l00155"></a><a class="code" href="classAlgorithm_1_1Convolver.html#a0ce8b3b704d999c01ff77a9792eb9c27">00155</a>       WeightIterator <a class="code" href="classAlgorithm_1_1Convolver.html#a0ce8b3b704d999c01ff77a9792eb9c27">fEnd</a>;
<a name="l00156"></a>00156 };
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 <span class="preprocessor">#endif// TEMPLATE_FITTING_CONVOLVER_H</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 2 Nov 2015 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

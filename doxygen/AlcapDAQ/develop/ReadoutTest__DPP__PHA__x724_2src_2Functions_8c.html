<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: CAEN/CAENDigitizer/CAENDigitizer_2.3.2/samples/ReadoutTest_DPP_PHA_x724/src/Functions.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CAEN/CAENDigitizer/CAENDigitizer_2.3.2/samples/ReadoutTest_DPP_PHA_x724/src/Functions.c File Reference</h1><code>#include &quot;<a class="el" href="test_2include_2keyb_8h_source.html">keyb.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ReadoutTest__DPP__PSD__x720_2include_2Functions_8h_source.html">Functions.h</a>&quot;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>

<p><a href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c.html#a88ce190469b178c2a26c05229ee5db69">get_time</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get time in milliseconds.  <a href="#a88ce190469b178c2a26c05229ee5db69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c.html#ac4b6f39003c717291c046fb51783570f">DataConsistencyCheck</a> (uint32_t *buff32, int NumWords)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Do some data consistency check.  <a href="#ac4b6f39003c717291c046fb51783570f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c.html#a3ab198295597655f55bad2a2a19e414f">SaveHistogram</a> (char *<a class="el" href="generate-MODULES_8h.html#aa50effd2c5aae5986e5da8ebd3e2502c">basename</a>, int b, int ch, uint32_t *EHisto)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c.html#a19fd4dffb35bea38cd908da4f8703352">SaveWaveform</a> (int b, int ch, int trace, int <a class="el" href="slowcontrol_2vacuum__sensor_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, int16_t *WaveData)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c.html#a13499a51b86dd1269682b9fb002011ca">SaveDigitalProbe</a> (int b, int ch, int trace, int <a class="el" href="slowcontrol_2vacuum__sensor_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, uint8_t *WaveData)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save Digital Waveforms to output file.  <a href="#a13499a51b86dd1269682b9fb002011ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c.html#abe9c30945080b8312d46f29b1490bed6">PrintInterface</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print the interface to screen.  <a href="#abe9c30945080b8312d46f29b1490bed6"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac4b6f39003c717291c046fb51783570f"></a><!-- doxytag: member="Functions.c::DataConsistencyCheck" ref="ac4b6f39003c717291c046fb51783570f" args="(uint32_t *buff32, int NumWords)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DataConsistencyCheck </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&nbsp;</td>
          <td class="paramname"> <em>buff32</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>NumWords</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Do some data consistency check. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0=success; -1=error </dd></dl>

<p>Definition at line <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html#l00064">64</a> of file <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html">Functions.c</a>.</p>

<p>References <a class="el" href="mdump_8c_source.html#l00115">i</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00065"></a>00065 {
<a name="l00066"></a>00066     <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, zcnt=0, pnt=0;
<a name="l00067"></a>00067     uint32_t EventSize;
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <span class="keywordflow">if</span> (NumWords == 0)
<a name="l00070"></a>00070         <span class="keywordflow">return</span> 0;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="comment">// Check for events integrity</span>
<a name="l00073"></a>00073     <span class="keywordflow">do</span> {
<a name="l00074"></a>00074         EventSize = buff32[pnt] &amp; 0x0FFFFFFF;
<a name="l00075"></a>00075         pnt += EventSize;  <span class="comment">// Jump to next event</span>
<a name="l00076"></a>00076     } <span class="keywordflow">while</span> (pnt&lt;NumWords);
<a name="l00077"></a>00077     <span class="keywordflow">if</span> (pnt != NumWords) {
<a name="l00078"></a>00078         printf(<span class="stringliteral">&quot;Data Error: Event truncation\n&quot;</span>);
<a name="l00079"></a>00079         <span class="keywordflow">return</span> -1;
<a name="l00080"></a>00080     }
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="comment">// Check for burst of zeroes (more than 2 consecutive zeroes)</span>
<a name="l00083"></a>00083     <span class="keywordflow">for</span>(i=0; i&lt;NumWords; i++) {
<a name="l00084"></a>00084         <span class="keywordflow">if</span> (buff32[i] == 0)   zcnt++;
<a name="l00085"></a>00085         <span class="keywordflow">else</span>                  zcnt=0;
<a name="l00086"></a>00086         <span class="keywordflow">if</span> (zcnt &gt; 2) {
<a name="l00087"></a>00087             printf(<span class="stringliteral">&quot;Data Error: Burst of zeroes\n&quot;</span>);
<a name="l00088"></a>00088             <span class="keywordflow">return</span> -1;
<a name="l00089"></a>00089         }
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091     <span class="keywordflow">return</span> 0;
<a name="l00092"></a>00092 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a88ce190469b178c2a26c05229ee5db69"></a><!-- doxytag: member="Functions.c::get_time" ref="a88ce190469b178c2a26c05229ee5db69" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long get_time </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get time in milliseconds. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>time in msec</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>TERMS OF USE: This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. The user relies on the software, documentation and results solely at his own risk.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>time in msec </dd></dl>

<p>Definition at line <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html#l00043">43</a> of file <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html">Functions.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00044"></a>00044 {
<a name="l00045"></a>00045     <span class="keywordtype">long</span> time_ms;
<a name="l00046"></a>00046 <span class="preprocessor">#ifdef WIN32</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>    <span class="keyword">struct </span>_timeb timebuffer;
<a name="l00048"></a>00048     _ftime( &amp;timebuffer );
<a name="l00049"></a>00049     time_ms = (long)timebuffer.time * 1000 + (<span class="keywordtype">long</span>)timebuffer.millitm;
<a name="l00050"></a>00050 <span class="preprocessor">#else</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>    <span class="keyword">struct </span>timeval t1;
<a name="l00052"></a>00052     <span class="keyword">struct </span>timezone tz;
<a name="l00053"></a>00053     gettimeofday(&amp;t1, &amp;tz);
<a name="l00054"></a>00054     time_ms = (t1.tv_sec) * 1000 + t1.tv_usec / 1000;
<a name="l00055"></a>00055 #endif
<a name="l00056"></a>00056     <span class="keywordflow">return</span> time_ms;
<a name="l00057"></a>00057 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abe9c30945080b8312d46f29b1490bed6"></a><!-- doxytag: member="Functions.c::PrintInterface" ref="abe9c30945080b8312d46f29b1490bed6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrintInterface </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print the interface to screen. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>none /* --------------------------------------------------------------------------------------------------------- </dd></dl>

<p>Definition at line <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html#l00177">177</a> of file <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html">Functions.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00177"></a>00177                       {
<a name="l00178"></a>00178         printf(<span class="stringliteral">&quot;\ns ) Start acquisition\n&quot;</span>);
<a name="l00179"></a>00179         printf(<span class="stringliteral">&quot;S ) Stop acquisition\n&quot;</span>);
<a name="l00180"></a>00180         printf(<span class="stringliteral">&quot;r ) Restart acquisition\n&quot;</span>);
<a name="l00181"></a>00181         printf(<span class="stringliteral">&quot;q ) Quit\n&quot;</span>);
<a name="l00182"></a>00182         printf(<span class="stringliteral">&quot;t ) Send a software trigger\n&quot;</span>);
<a name="l00183"></a>00183         printf(<span class="stringliteral">&quot;h ) Save Histograms to file\n&quot;</span>);
<a name="l00184"></a>00184         printf(<span class="stringliteral">&quot;w ) Save waveforms to file\n\n\n&quot;</span>);
<a name="l00185"></a>00185 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a13499a51b86dd1269682b9fb002011ca"></a><!-- doxytag: member="Functions.c::SaveDigitalProbe" ref="a13499a51b86dd1269682b9fb002011ca" args="(int b, int ch, int trace, int size, uint8_t *WaveData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SaveDigitalProbe </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>trace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>WaveData</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Save Digital Waveforms to output file. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0=success; -1=error </dd></dl>

<p>Definition at line <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html#l00153">153</a> of file <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html">Functions.c</a>.</p>

<p>References <a class="el" href="fal_8c_source.html#l00219">filename</a>, and <a class="el" href="mdump_8c_source.html#l00115">i</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00154"></a>00154 {
<a name="l00155"></a>00155         <span class="comment">/*</span>
<a name="l00156"></a>00156 <span class="comment">        This function saves the digital waveform in a textfile as a sequence of number representing the wave height</span>
<a name="l00157"></a>00157 <span class="comment">        */</span>
<a name="l00158"></a>00158     FILE *fh;
<a name="l00159"></a>00159     <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00160"></a>00160     <span class="keywordtype">char</span> <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>[20];
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     sprintf(filename, <span class="stringliteral">&quot;DWaveform_%d_%d_%d.txt&quot;</span>, b, ch, trace);
<a name="l00163"></a>00163     fh = fopen(filename, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (fh == NULL)
<a name="l00165"></a>00165         <span class="keywordflow">return</span> -1;
<a name="l00166"></a>00166     <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a>; i++)
<a name="l00167"></a>00167         fprintf(fh, <span class="stringliteral">&quot;%d\n&quot;</span>, WaveData[i]); <span class="comment">//&amp;((1&lt;&lt;MAXNBITS)-1)</span>
<a name="l00168"></a>00168     fclose(fh);
<a name="l00169"></a>00169     <span class="keywordflow">return</span> 0;
<a name="l00170"></a>00170 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3ab198295597655f55bad2a2a19e414f"></a><!-- doxytag: member="Functions.c::SaveHistogram" ref="a3ab198295597655f55bad2a2a19e414f" args="(char *basename, int b, int ch, uint32_t *EHisto)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SaveHistogram </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>basename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&nbsp;</td>
          <td class="paramname"> <em>EHisto</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html#l00101">101</a> of file <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html">Functions.c</a>.</p>

<p>References <a class="el" href="fal_8c_source.html#l00219">filename</a>, and <a class="el" href="mdump_8c_source.html#l00115">i</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00102"></a>00102 {
<a name="l00103"></a>00103         <span class="comment">/*</span>
<a name="l00104"></a>00104 <span class="comment">        This function saves the first 10000 bin of each EHisto[ch] array in separate text files</span>
<a name="l00105"></a>00105 <span class="comment">        each array value is a number representing the histogram height in the corresponding bin</span>
<a name="l00106"></a>00106 <span class="comment">        NB: each EHisto[ch] must be a pointer already initialized with at least 10000 values</span>
<a name="l00107"></a>00107 <span class="comment">        */</span>
<a name="l00108"></a>00108     FILE *fh;
<a name="l00109"></a>00109     <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00110"></a>00110     <span class="keywordtype">char</span> <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>[20];
<a name="l00111"></a>00111     sprintf(filename, <span class="stringliteral">&quot;%s_%d_%d.txt&quot;</span>, <a class="code" href="generate-MODULES_8h.html#aa50effd2c5aae5986e5da8ebd3e2502c">basename</a>, b, ch);
<a name="l00112"></a>00112     fh = fopen(filename, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l00113"></a>00113     <span class="keywordflow">if</span> (fh == NULL)
<a name="l00114"></a>00114                 <span class="keywordflow">return</span> -1;
<a name="l00115"></a>00115     <span class="keywordflow">for</span>(i=0; i&lt;(1&lt;&lt;12); i++) {
<a name="l00116"></a>00116                 fprintf(fh, <span class="stringliteral">&quot;%d\n&quot;</span>, EHisto[i]);
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118     fclose(fh);
<a name="l00119"></a>00119     printf(<span class="stringliteral">&quot;Histograms saved to &apos;%s_&lt;board&gt;_&lt;channel&gt;.txt&apos;\n&quot;</span>, <a class="code" href="generate-MODULES_8h.html#aa50effd2c5aae5986e5da8ebd3e2502c">basename</a>);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121     <span class="keywordflow">return</span> 0;
<a name="l00122"></a>00122 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a19fd4dffb35bea38cd908da4f8703352"></a><!-- doxytag: member="Functions.c::SaveWaveform" ref="a19fd4dffb35bea38cd908da4f8703352" args="(int b, int ch, int trace, int size, int16_t *WaveData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SaveWaveform </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>trace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&nbsp;</td>
          <td class="paramname"> <em>WaveData</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html#l00129">129</a> of file <a class="el" href="ReadoutTest__DPP__PHA__x724_2src_2Functions_8c_source.html">Functions.c</a>.</p>

<p>References <a class="el" href="fal_8c_source.html#l00219">filename</a>, and <a class="el" href="mdump_8c_source.html#l00115">i</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00130"></a>00130 {
<a name="l00131"></a>00131         <span class="comment">/*</span>
<a name="l00132"></a>00132 <span class="comment">        This function saves the waveform in a textfile as a sequence of number representing the wave height</span>
<a name="l00133"></a>00133 <span class="comment">        */</span>
<a name="l00134"></a>00134     FILE *fh;
<a name="l00135"></a>00135     <span class="keywordtype">int</span> <a class="code" href="mdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00136"></a>00136     <span class="keywordtype">char</span> <a class="code" href="fal_8c.html#a258adbf16b88a7db88c7d8bce9708c50">filename</a>[20];
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     sprintf(filename, <span class="stringliteral">&quot;Waveform_%d_%d_%d.txt&quot;</span>, b, ch, trace);
<a name="l00139"></a>00139     fh = fopen(filename, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l00140"></a>00140     <span class="keywordflow">if</span> (fh == NULL)
<a name="l00141"></a>00141         <span class="keywordflow">return</span> -1;
<a name="l00142"></a>00142     <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="ybos_8c.html#adfdd3a80d1d8ea7918a6d1ebee518102">size</a>; i++)
<a name="l00143"></a>00143         fprintf(fh, <span class="stringliteral">&quot;%d\n&quot;</span>, WaveData[i]); <span class="comment">//&amp;((1&lt;&lt;MAXNBITS)-1)</span>
<a name="l00144"></a>00144     fclose(fh);
<a name="l00145"></a>00145     <span class="keywordflow">return</span> 0;
<a name="l00146"></a>00146 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: analyzer/compress/mucap_compress.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>analyzer/compress/mucap_compress.h File Reference</h1>
<p><a href="mucap__compress_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structio__buffer.html">io_buffer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhuffman__table.html">huffman_table</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrle__state.html">rle_state</a></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structhuffman__node.html">huffman_node</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a4a3ded9e16f16adff3f2f3df81d859d6">huffman_node</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtdc400__word.html">tdc400_word</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a21c832546bfc0bc263b76390e1041f4e">tdc400_word</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structstack__elt.html">stack_elt</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a5cc50038d20cc8eea079735d308fd94e">stack_elt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcaen__word.html">caen_word</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ab881bda239a3f3917484a63b1ffd1028">caen_word</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structchannel__hit.html">channel_hit</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a7f95cbc199ca040311be1140b8bdf3e6">channel_hit</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef union <a class="el" href="unioncomp__word.html">comp_word</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a1c2b8b3516490db970c838e020db4164">comp_word</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structfadc__word.html">fadc_word</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a597a9f096bf875bcb1a7044c7394316a">fadc_word</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="mucap__compress_8h.html#a223f2c43fab0aaed1eeebd814788e629">nfadc_word</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a223f2c43fab0aaed1eeebd814788e629">nfadc_word</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="mucap__compress_8h.html#a8ca1ab108b747af168d12b9a0fad4f63">n2fadc_tpc_word</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a8ca1ab108b747af168d12b9a0fad4f63">n2fadc_tpc_word</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="mucap__compress_8h.html#ab638d8fc1b5e473906457653ca56bc7a">n2fadc_ndet_word</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ab638d8fc1b5e473906457653ca56bc7a">n2fadc_ndet_word</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a> )(unsigned char *input, int input_size, void *output, int userParam)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a> (<a class="el" href="structio__buffer.html">io_buffer</a> *buffer, unsigned char *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#af53dac5c67e861179d7a37f3cbe75961">flush_output_buffer</a> (<a class="el" href="structio__buffer.html">io_buffer</a> *buffer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a7050a18b99c505bf329251c5dc435604">io_buffer_put</a> (<a class="el" href="structio__buffer.html">io_buffer</a> *buffer, unsigned int code_bits, int code_length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a> (<a class="el" href="structio__buffer.html">io_buffer</a> *buffer, unsigned char *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ad72a17b4cdcccfde3419ab0cfc3bdf0a">io_buffer_get</a> (<a class="el" href="structio__buffer.html">io_buffer</a> *buffer, int num_bits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a81a23f1eabc888ce48ec931fb80b1179">huffman_put_symbol</a> (<a class="el" href="structhuffman__table.html">huffman_table</a> *table, <a class="el" href="structio__buffer.html">io_buffer</a> *buffer, int symbol)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ad6be44228ca3e1de5375487dc336b73d">huffman_get_symbol</a> (<a class="el" href="structhuffman__table.html">huffman_table</a> *table, <a class="el" href="structio__buffer.html">io_buffer</a> *buffer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a> (<a class="el" href="structhuffman__table.html">huffman_table</a> *table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a> (<a class="el" href="structhuffman__table.html">huffman_table</a> *table, int num_symbols)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a> (char *key_dir, <a class="el" href="structhuffman__table.html">huffman_table</a> *table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a> (char *key_dir, <a class="el" href="structhuffman__table.html">huffman_table</a> *table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a7b2a49e299d8ab4bf7660a2dc15cbb3b">rle_put</a> (unsigned char b, <a class="el" href="structrle__state.html">rle_state</a> *s, <a class="el" href="structio__buffer.html">io_buffer</a> *output)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a046b47629347b32d4988db528e7ea64a">flush_rle</a> (<a class="el" href="structrle__state.html">rle_state</a> *s, <a class="el" href="structio__buffer.html">io_buffer</a> *output)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a03a609e68b24e7234190414c2cb95408">rle_get</a> (<a class="el" href="structio__buffer.html">io_buffer</a> *input, <a class="el" href="structrle__state.html">rle_state</a> *s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#acc9f7c5053d3580a19c74dd259d4c3fc">tdc400_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a2be7c78e8f179774a3493583e306eb2d">tdc400_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#abde84ecb3c3f08dfa302dec6574ba2f6">tdc400_compress</a> (<a class="el" href="structtdc400__word.html">tdc400_word</a> *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ac27e28cf458c963278afad4320bab951">tdc400_expand</a> (unsigned char *input, int input_size, <a class="el" href="structtdc400__word.html">tdc400_word</a> *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#aa7bcf5584b002d0dcb024317bc49bad3">stck_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a6d6a1769960d561769d0240899336667">stck_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ab0275c9f673671ab39ff22b231d2f1c9">stck_compress</a> (<a class="el" href="structstack__elt.html">stack_elt</a> *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a7b238ff7c1c32f4d6a7a15a3a2b61357">stck_expand</a> (unsigned char *input, int input_size, <a class="el" href="structstack__elt.html">stack_elt</a> *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a568a8bca87f87e4e733d8207aae962c0">comp_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a1a89c5fe4a4d1c7bd3ff9a66e65cbb07">comp_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#acb3ee666bb352d1cfbdc6be86b609a68">caen_compress</a> (<a class="el" href="structcaen__word.html">caen_word</a> *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a28b441e0077961cbb5b5363dc6856183">caen_expand</a> (unsigned char *input, int input_size, <a class="el" href="structcaen__word.html">caen_word</a> *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a5261d1557630b2927f4f8e610fce4471">hits_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a6b63caa67d3395d68399fcc83d37f986">hits_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#af1013190f361853fc63838396c6fa13d">hits_compress</a> (<a class="el" href="structchannel__hit.html">channel_hit</a> *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#aef2def428cc0defbfd450b19d4171965">hits_expand</a> (unsigned char *input, int input_size, <a class="el" href="structchannel__hit.html">channel_hit</a> *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a710edf6c48915463187dfdcf461275cb">caen_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a60eefed87853433213c3d4962138bf7e">caen_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a57fa8a60fa054079752ea0bffb085a3c">cmp_compress</a> (<a class="el" href="unioncomp__word.html">comp_word</a> *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a121793e8213834634095e0a3343eaf54">cmp_expand</a> (unsigned char *input, int input_size, <a class="el" href="unioncomp__word.html">comp_word</a> *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a97dd8d8818f350f6d7cbcff039b87184">fadc_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a45a91046e07196d9388e44a722ba210e">fadc_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a58e5467cc0741997f62c98424b6baa72">fadc_compress</a> (<a class="el" href="structfadc__word.html">fadc_word</a> *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ae44101ecd6db1b1e5d5231b46664f590">fadc_expand</a> (unsigned char *input, int input_size, <a class="el" href="structfadc__word.html">fadc_word</a> *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#acaaf8d538e20571781d4da27ee0f0b1e">nfadc_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ade1cdb0dda78df6520064b5830a3e5c2">nfadc_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#aa5e0a27761952c37263cdb9d2368a1bc">nfadc_compress</a> (unsigned char *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#aa3e17a1077be2fb193f8c62fa5971e64">nfadc_expand</a> (unsigned char *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a63eea1f9be10c30001f65168d6f4f7d7">n2fadc_tpc_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a86a4ac76c7b6125175e9775feedb990e">n2fadc_tpc_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a0a87849d757dc54a5d625f65b0e3eb3a">n2fadc_tpc_compress</a> (unsigned char *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ae06eddaa8d7752d09c7aeac6cc93a09d">n2fadc_tpc_expand</a> (unsigned char *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#aaf9ead365e68c4c31d7fd320619c50a5">n2fadc_ndet_load</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a2466c2fb04c759ac78a1dc9896acd942">n2fadc_ndet_optimize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a9060a385e4d28af5f646fe51cc74e814">n2fadc_ndet_compress</a> (unsigned char *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a12b6cae2f43c25150ac744b029639959">n2fadc_ndet_expand</a> (unsigned char *input, int input_size, unsigned char *output, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a493fa651aca557df06e41e2fd6519117">read_midas_event</a> (FILE *fp, char *pevent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a35d87daa41169b893c60e3cae2c83874">compress_event</a> (void *input_event, void *output_event, bool USE_OLD_COMPRESSION=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ade5589fa7b790fff2721d9f30558e305">compress_event_skim</a> (void *input_event, void *output_event, bool keep_etc, bool USE_OLD_COMPRESSION=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a862d0f478fee422f0329ac9dfd28b5d7">expand_event</a> (void *input_event, void *output_event, bool USE_OLD_COMPRESSION=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a> (unsigned char *input_data, int input_size, void *output_event, char *output_name, <a class="el" href="overall_8cpp.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a> f, int userParam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ab8d3d2d200bab8b6c9cf0bd01787383f">compress_load_all</a> (bool USE_OLD_COMPRESSION=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#af7769c57c67bd948865331d82c5f45cd">compress_optimize_all</a> (bool USE_OLD_COMPRESSION=false)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhuffman__table.html">huffman_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a119f5e1899fa0d99a4cf8cea6a18cb3f">time_huffman</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhuffman__table.html">huffman_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a> [2]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a2dadd9a43c97d37b6b60f99b8c6e650f">should_compress_tdc400</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhuffman__table.html">huffman_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a1e83b87d183358315fa4a171f364d347">caen_channel_huffman</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a020522a88f7970dfe1bcaf99f8847e68">should_compress_caen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhuffman__table.html">huffman_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a63610c548aa468e4dfa414dd061e8205">cmp_channel_huffman</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhuffman__table.html">huffman_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a> [2]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a2579964081d7e77b11b77695ea6625e5">should_compress_comp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhuffman__table.html">huffman_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a352b2a6a9acd731b42daa2987d513272">fadc_run_huffman</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhuffman__table.html">huffman_table</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a46892afbe19f20dc7106961045e80932">fadc_small_huffman</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#af6b7be055ab2104fefa3a1f3dc8644a2">should_compress_fadc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a0c56dade5ca8b94e1c62de9d3d5a57e2">should_compress_nfadc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a3e90d51c60a85540951186d31984ace1">should_compress_n2fadc_tpc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#a151c2cecd99176e9c48ba34d1c279658">should_compress_n2fadc_ndet</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HNDLE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mucap__compress_8h.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a></td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ab881bda239a3f3917484a63b1ffd1028"></a><!-- doxytag: member="mucap_compress.h::caen_word" ref="ab881bda239a3f3917484a63b1ffd1028" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcaen__word.html">caen_word</a> <a class="el" href="structcaen__word.html">caen_word</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00081">81</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7f95cbc199ca040311be1140b8bdf3e6"></a><!-- doxytag: member="mucap_compress.h::channel_hit" ref="a7f95cbc199ca040311be1140b8bdf3e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structchannel__hit.html">channel_hit</a> <a class="el" href="structchannel__hit.html">channel_hit</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00093">93</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1c2b8b3516490db970c838e020db4164"></a><!-- doxytag: member="mucap_compress.h::comp_word" ref="a1c2b8b3516490db970c838e020db4164" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef union <a class="el" href="unioncomp__word.html">comp_word</a> <a class="el" href="unioncomp__word.html">comp_word</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00102">102</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab76f2413499be166796a45bbc9e345cf"></a><!-- doxytag: member="mucap_compress.h::expand_fcn" ref="ab76f2413499be166796a45bbc9e345cf" args=")(unsigned char *input, int input_size, void *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="overall_8cpp.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>)(unsigned char *input, int input_size, void *output, int userParam)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00164">164</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a597a9f096bf875bcb1a7044c7394316a"></a><!-- doxytag: member="mucap_compress.h::fadc_word" ref="a597a9f096bf875bcb1a7044c7394316a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structfadc__word.html">fadc_word</a> <a class="el" href="structfadc__word.html">fadc_word</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00114">114</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a3ded9e16f16adff3f2f3df81d859d6"></a><!-- doxytag: member="mucap_compress.h::huffman_node" ref="a4a3ded9e16f16adff3f2f3df81d859d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structhuffman__node.html">huffman_node</a> <a class="el" href="structhuffman__node.html">huffman_node</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00020">20</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab638d8fc1b5e473906457653ca56bc7a"></a><!-- doxytag: member="mucap_compress.h::n2fadc_ndet_word" ref="ab638d8fc1b5e473906457653ca56bc7a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="mucap__compress_8h.html#ab638d8fc1b5e473906457653ca56bc7a">n2fadc_ndet_word</a> <a class="el" href="mucap__compress_8h.html#ab638d8fc1b5e473906457653ca56bc7a">n2fadc_ndet_word</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00150">150</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8ca1ab108b747af168d12b9a0fad4f63"></a><!-- doxytag: member="mucap_compress.h::n2fadc_tpc_word" ref="a8ca1ab108b747af168d12b9a0fad4f63" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="mucap__compress_8h.html#a8ca1ab108b747af168d12b9a0fad4f63">n2fadc_tpc_word</a> <a class="el" href="mucap__compress_8h.html#a8ca1ab108b747af168d12b9a0fad4f63">n2fadc_tpc_word</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00139">139</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a223f2c43fab0aaed1eeebd814788e629"></a><!-- doxytag: member="mucap_compress.h::nfadc_word" ref="a223f2c43fab0aaed1eeebd814788e629" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="mucap__compress_8h.html#a223f2c43fab0aaed1eeebd814788e629">nfadc_word</a> <a class="el" href="mucap__compress_8h.html#a223f2c43fab0aaed1eeebd814788e629">nfadc_word</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00126">126</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5cc50038d20cc8eea079735d308fd94e"></a><!-- doxytag: member="mucap_compress.h::stack_elt" ref="a5cc50038d20cc8eea079735d308fd94e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structstack__elt.html">stack_elt</a> <a class="el" href="structstack__elt.html">stack_elt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00070">70</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<a class="anchor" id="a21c832546bfc0bc263b76390e1041f4e"></a><!-- doxytag: member="mucap_compress.h::tdc400_word" ref="a21c832546bfc0bc263b76390e1041f4e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtdc400__word.html">tdc400_word</a> <a class="el" href="structtdc400__word.html">tdc400_word</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8h_source.html#l00056">56</a> of file <a class="el" href="mucap__compress_8h_source.html">mucap_compress.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="acb3ee666bb352d1cfbdc6be86b609a68"></a><!-- doxytag: member="mucap_compress.h::caen_compress" ref="acb3ee666bb352d1cfbdc6be86b609a68" args="(caen_word *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int caen_compress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaen__word.html">caen_word</a> *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="caen__compress_8cpp_source.html#l00117">117</a> of file <a class="el" href="caen__compress_8cpp_source.html">caen_compress.cpp</a>.</p>

<p>References <a class="el" href="caen__compress_8cpp_source.html#l00043">encode_caen()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 {
<a name="l00119"></a>00119   input_size /= <span class="keyword">sizeof</span>(<a class="code" href="structcaen__word.html">caen_word</a>);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00122"></a>00122 
<a name="l00123"></a>00123   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125   <span class="comment">// reserve space for size of uncompressed data (may be different from</span>
<a name="l00126"></a>00126   <span class="comment">// input size, since some hits may be stripped)</span>
<a name="l00127"></a>00127   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00128"></a>00128   output += <span class="keyword">sizeof</span>(int);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130   <span class="comment">// reserve space for the size of the compressed data</span>
<a name="l00131"></a>00131   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00132"></a>00132   output += <span class="keyword">sizeof</span>(int);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   <span class="comment">// compress times</span>
<a name="l00135"></a>00135   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00136"></a>00136   <span class="keywordtype">int</span> compressed_time_size =
<a name="l00137"></a>00137       <a class="code" href="caen__compress_8cpp.html#a8d0e8edf20d43d5e017805db8ea86715">encode_caen</a>(input, input_size, &amp;output_buffer, uncompressed_size_p);
<a name="l00138"></a>00138   output += compressed_time_size;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   <span class="comment">// store size of compressed times</span>
<a name="l00141"></a>00141   *compressed_time_size_p = compressed_time_size;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143   <span class="keywordflow">return</span> compressed_time_size + 2 * <span class="keyword">sizeof</span>(int);
<a name="l00144"></a>00144 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a28b441e0077961cbb5b5363dc6856183"></a><!-- doxytag: member="mucap_compress.h::caen_expand" ref="a28b441e0077961cbb5b5363dc6856183" args="(unsigned char *input, int input_size, caen_word *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int caen_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcaen__word.html">caen_word</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="caen__compress_8cpp_source.html#l00219">219</a> of file <a class="el" href="caen__compress_8cpp_source.html">caen_compress.cpp</a>.</p>

<p>References <a class="el" href="caen__compress_8cpp_source.html#l00156">decode_caen()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00220"></a>00220 {
<a name="l00221"></a>00221   <span class="comment">// </span>
<a name="l00222"></a>00222   <span class="comment">// Uncompress the data produced by caen_compress().</span>
<a name="l00223"></a>00223   <span class="comment">// </span>
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   <span class="comment">// Get uncompressed data size</span>
<a name="l00228"></a>00228   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00229"></a>00229   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00230"></a>00230   input += <span class="keyword">sizeof</span>(int);
<a name="l00231"></a>00231   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   <span class="comment">// Get size of compressed time data</span>
<a name="l00234"></a>00234   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00235"></a>00235   <span class="keywordtype">int</span> compressed_time_size = *compressed_time_size_p;
<a name="l00236"></a>00236   input += <span class="keyword">sizeof</span>(int);
<a name="l00237"></a>00237   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="comment">// Uncompress times</span>
<a name="l00240"></a>00240   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00241"></a>00241   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00242"></a>00242   <a class="code" href="caen__compress_8cpp.html#aa6debc5084f84643cb9b58698a31691e">decode_caen</a>(&amp;input_buffer, output);
<a name="l00243"></a>00243   input += compressed_time_size;
<a name="l00244"></a>00244   input_size -= compressed_time_size;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246   <span class="keywordflow">return</span> uncompressed_size * <span class="keyword">sizeof</span>(<a class="code" href="structcaen__word.html">caen_word</a>);
<a name="l00247"></a>00247 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a710edf6c48915463187dfdcf461275cb"></a><!-- doxytag: member="mucap_compress.h::caen_load" ref="a710edf6c48915463187dfdcf461275cb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void caen_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="caen__compress_8cpp_source.html#l00025">25</a> of file <a class="el" href="caen__compress_8cpp_source.html">caen_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="huffman_8cpp_source.html#l00305">huffman_init_default()</a>, <a class="el" href="huffman_8cpp_source.html#l00429">load_huffman()</a>, <a class="el" href="caen__compress_8cpp_source.html#l00015">should_compress_caen</a>, <a class="el" href="caen__compress_8cpp_source.html#l00017">should_strip_r1</a>, <a class="el" href="caen__compress_8cpp_source.html#l00016">should_strip_trailing_edge</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00026"></a>00026 {
<a name="l00027"></a>00027   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="caen__compress_8cpp.html#a1e83b87d183358315fa4a171f364d347">caen_channel_huffman</a>, 129);
<a name="l00028"></a>00028   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/CAEN/Huffman/Channel&quot;</span>, &amp;<a class="code" href="caen__compress_8cpp.html#a1e83b87d183358315fa4a171f364d347">caen_channel_huffman</a>);
<a name="l00029"></a>00029 
<a name="l00030"></a>00030   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00031"></a>00031   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/CAEN/Enabled&quot;</span>, &amp;<a class="code" href="caen__compress_8cpp.html#a020522a88f7970dfe1bcaf99f8847e68">should_compress_caen</a>, 
<a name="l00032"></a>00032     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00033"></a>00033 
<a name="l00034"></a>00034   size = <span class="keyword">sizeof</span>(BOOL);
<a name="l00035"></a>00035   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/CAEN/Strip trailing edge&quot;</span>, 
<a name="l00036"></a>00036     &amp;<a class="code" href="caen__compress_8cpp.html#a47556200f6ad369900ddf97e6caf91d5">should_strip_trailing_edge</a>, &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00037"></a>00037 
<a name="l00038"></a>00038   size = <span class="keyword">sizeof</span>(BOOL);
<a name="l00039"></a>00039   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/CAEN/Strip R1&quot;</span>,
<a name="l00040"></a>00040     &amp;<a class="code" href="caen__compress_8cpp.html#a368be12bba125aac78b846713fd399da">should_strip_r1</a>, &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00041"></a>00041 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a60eefed87853433213c3d4962138bf7e"></a><!-- doxytag: member="mucap_compress.h::caen_optimize" ref="a60eefed87853433213c3d4962138bf7e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void caen_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="caen__compress_8cpp_source.html#l00019">19</a> of file <a class="el" href="caen__compress_8cpp_source.html">caen_compress.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00200">huffman_optimize_tree()</a>, and <a class="el" href="huffman_8cpp_source.html#l00321">save_huffman()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00390">compress_optimize_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00020"></a>00020 {
<a name="l00021"></a>00021   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="caen__compress_8cpp.html#a1e83b87d183358315fa4a171f364d347">caen_channel_huffman</a>);
<a name="l00022"></a>00022   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/CAEN/Huffman/Channel&quot;</span>, &amp;<a class="code" href="caen__compress_8cpp.html#a1e83b87d183358315fa4a171f364d347">caen_channel_huffman</a>);
<a name="l00023"></a>00023 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a57fa8a60fa054079752ea0bffb085a3c"></a><!-- doxytag: member="mucap_compress.h::cmp_compress" ref="a57fa8a60fa054079752ea0bffb085a3c" args="(comp_word *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cmp_compress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncomp__word.html">comp_word</a> *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="comp__compress_8cpp_source.html#l00133">133</a> of file <a class="el" href="comp__compress_8cpp_source.html">comp_compress.cpp</a>.</p>

<p>References <a class="el" href="comp__compress_8cpp_source.html#l00054">encode_cmp_bits()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00081">encode_cmp_times()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00134"></a>00134 {
<a name="l00135"></a>00135   <span class="comment">// </span>
<a name="l00136"></a>00136   <span class="comment">// Encode compressor data, which are in the following format:</span>
<a name="l00137"></a>00137   <span class="comment">// | B | A | FPGA number (6 bits) | Time (24 bits) |</span>
<a name="l00138"></a>00138   <span class="comment">// ... followed by one or two 32-bit masks indicating which</span>
<a name="l00139"></a>00139   <span class="comment">// channels</span>
<a name="l00140"></a>00140   <span class="comment">// within the group have fired.  </span>
<a name="l00141"></a>00141   <span class="comment">// </span>
<a name="l00142"></a>00142 
<a name="l00143"></a>00143   input_size /= <span class="keyword">sizeof</span>(<a class="code" href="unioncomp__word.html">comp_word</a>);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00146"></a>00146 
<a name="l00147"></a>00147   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   <span class="comment">// store size of input data</span>
<a name="l00150"></a>00150   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00151"></a>00151   *uncompressed_size_p = input_size;
<a name="l00152"></a>00152   output += <span class="keyword">sizeof</span>(int);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   <span class="comment">// reserve space for the size of the compressed times</span>
<a name="l00155"></a>00155   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00156"></a>00156   output += <span class="keyword">sizeof</span>(int);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   <span class="comment">// compress times</span>
<a name="l00159"></a>00159   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00160"></a>00160   <span class="keywordtype">int</span> compressed_time_size =
<a name="l00161"></a>00161       <a class="code" href="comp__compress_8cpp.html#a346632d04fc9816248986de9bc61a45c">encode_cmp_times</a>(input, input_size, &amp;output_buffer);
<a name="l00162"></a>00162   output += compressed_time_size;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   <span class="comment">// store size of compressed times</span>
<a name="l00165"></a>00165   *compressed_time_size_p = compressed_time_size;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167   <span class="comment">// reserve space for the size of the compressed bit patterns</span>
<a name="l00168"></a>00168   <span class="keywordtype">int</span> *compressed_bits_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00169"></a>00169   output += <span class="keyword">sizeof</span>(int);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="comment">// compress bit patterns</span>
<a name="l00172"></a>00172   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00173"></a>00173   <span class="keywordtype">int</span> compressed_bits_size =
<a name="l00174"></a>00174       <a class="code" href="comp__compress_8cpp.html#a9e42e5107c509f0fc3f4ca91a0f78395">encode_cmp_bits</a>(input, input_size, &amp;output_buffer);
<a name="l00175"></a>00175   output += compressed_time_size;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="comment">// store size of compressed bit patterns </span>
<a name="l00178"></a>00178   *compressed_bits_size_p = compressed_bits_size;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180   <span class="keywordflow">return</span> compressed_time_size + compressed_bits_size + 3 * <span class="keyword">sizeof</span>(int);
<a name="l00181"></a>00181 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a121793e8213834634095e0a3343eaf54"></a><!-- doxytag: member="mucap_compress.h::cmp_expand" ref="a121793e8213834634095e0a3343eaf54" args="(unsigned char *input, int input_size, comp_word *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cmp_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncomp__word.html">comp_word</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="comp__compress_8cpp_source.html#l00243">243</a> of file <a class="el" href="comp__compress_8cpp_source.html">comp_compress.cpp</a>.</p>

<p>References <a class="el" href="comp__compress_8cpp_source.html#l00225">decode_cmp_bits()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00183">decode_cmp_times()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00244"></a>00244 {
<a name="l00245"></a>00245   <span class="comment">// </span>
<a name="l00246"></a>00246   <span class="comment">// Uncompress the data produced by cmp_compress().</span>
<a name="l00247"></a>00247   <span class="comment">// </span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   <span class="comment">// Get uncompressed data size</span>
<a name="l00252"></a>00252   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00253"></a>00253   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00254"></a>00254   input += <span class="keyword">sizeof</span>(int);
<a name="l00255"></a>00255   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   <span class="comment">// Get size of compressed time data</span>
<a name="l00258"></a>00258   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00259"></a>00259   <span class="keywordtype">int</span> compressed_time_size = *compressed_time_size_p;
<a name="l00260"></a>00260   input += <span class="keyword">sizeof</span>(int);
<a name="l00261"></a>00261   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263   <span class="comment">// Uncompress times</span>
<a name="l00264"></a>00264   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00265"></a>00265   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00266"></a>00266   <a class="code" href="comp__compress_8cpp.html#a7c25f06e6b56f30477bcd3740b1d017e">decode_cmp_times</a>(&amp;input_buffer, output);
<a name="l00267"></a>00267   input += compressed_time_size;
<a name="l00268"></a>00268   input_size -= compressed_time_size;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="comment">// Get size of compressed bit patterns</span>
<a name="l00271"></a>00271   <span class="keywordtype">int</span> *compressed_bits_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00272"></a>00272   <span class="keywordtype">int</span> compressed_bits_size = *compressed_bits_size_p;
<a name="l00273"></a>00273   input += <span class="keyword">sizeof</span>(int);
<a name="l00274"></a>00274   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <span class="comment">// Uncompress bit patterns</span>
<a name="l00277"></a>00277   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00278"></a>00278   <a class="code" href="comp__compress_8cpp.html#af99359e17a3085dfab9ec729c28a92e8">decode_cmp_bits</a>(&amp;input_buffer, output, uncompressed_size);
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <span class="keywordflow">return</span> uncompressed_size * <span class="keyword">sizeof</span>(<a class="code" href="unioncomp__word.html">comp_word</a>);
<a name="l00281"></a>00281 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a568a8bca87f87e4e733d8207aae962c0"></a><!-- doxytag: member="mucap_compress.h::comp_load" ref="a568a8bca87f87e4e733d8207aae962c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void comp_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="comp__compress_8cpp_source.html#l00029">29</a> of file <a class="el" href="comp__compress_8cpp_source.html">comp_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="huffman_8cpp_source.html#l00305">huffman_init_default()</a>, <a class="el" href="huffman_8cpp_source.html#l00429">load_huffman()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00016">should_compress_comp</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00030"></a>00030 {
<a name="l00031"></a>00031   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="comp__compress_8cpp.html#a63610c548aa468e4dfa414dd061e8205">cmp_channel_huffman</a>, 256);
<a name="l00032"></a>00032   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[0], 128);
<a name="l00033"></a>00033   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[1], 128);
<a name="l00034"></a>00034 
<a name="l00035"></a>00035   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/COMP/Huffman/Channel&quot;</span>, &amp;<a class="code" href="comp__compress_8cpp.html#a63610c548aa468e4dfa414dd061e8205">cmp_channel_huffman</a>);
<a name="l00036"></a>00036   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/COMP/Huffman/Bits 0&quot;</span>, &amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[0]);
<a name="l00037"></a>00037   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/COMP/Huffman/Bits 1&quot;</span>, &amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[1]);
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00040"></a>00040   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/COMP/Enabled&quot;</span>, &amp;<a class="code" href="comp__compress_8cpp.html#a2579964081d7e77b11b77695ea6625e5">should_compress_comp</a>,
<a name="l00041"></a>00041     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00042"></a>00042 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1a89c5fe4a4d1c7bd3ff9a66e65cbb07"></a><!-- doxytag: member="mucap_compress.h::comp_optimize" ref="a1a89c5fe4a4d1c7bd3ff9a66e65cbb07" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void comp_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="comp__compress_8cpp_source.html#l00018">18</a> of file <a class="el" href="comp__compress_8cpp_source.html">comp_compress.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00200">huffman_optimize_tree()</a>, and <a class="el" href="huffman_8cpp_source.html#l00321">save_huffman()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00390">compress_optimize_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00019"></a>00019 {
<a name="l00020"></a>00020   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="comp__compress_8cpp.html#a63610c548aa468e4dfa414dd061e8205">cmp_channel_huffman</a>);
<a name="l00021"></a>00021   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[0]);
<a name="l00022"></a>00022   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[1]);
<a name="l00023"></a>00023 
<a name="l00024"></a>00024   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/COMP/Huffman/Channel&quot;</span>, &amp;<a class="code" href="comp__compress_8cpp.html#a63610c548aa468e4dfa414dd061e8205">cmp_channel_huffman</a>);
<a name="l00025"></a>00025   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/COMP/Huffman/Bits 0&quot;</span>, &amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[0]);
<a name="l00026"></a>00026   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/COMP/Huffman/Bits 1&quot;</span>, &amp;<a class="code" href="comp__compress_8cpp.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[1]);
<a name="l00027"></a>00027 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a35d87daa41169b893c60e3cae2c83874"></a><!-- doxytag: member="mucap_compress.h::compress_event" ref="a35d87daa41169b893c60e3cae2c83874" args="(void *input_event, void *output_event, bool USE_OLD_COMPRESSION=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compress_event </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>input_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>output_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>USE_OLD_COMPRESSION</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="overall_8cpp_source.html#l00069">69</a> of file <a class="el" href="overall_8cpp_source.html">overall.cpp</a>.</p>

<p>References <a class="el" href="caen__compress_8cpp_source.html#l00117">caen_compress()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00133">cmp_compress()</a>, <a class="el" href="overall_8cpp_source.html#l00046">compress_bank()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00092">fadc_compress()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00097">n2fadc_ndet_compress()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00104">n2fadc_tpc_compress()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00108">nfadc_compress()</a>, <a class="el" href="caen__compress_8cpp_source.html#l00015">should_compress_caen</a>, <a class="el" href="comp__compress_8cpp_source.html#l00016">should_compress_comp</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00016">should_compress_fadc</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00014">should_compress_n2fadc_ndet</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00014">should_compress_n2fadc_tpc</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00014">should_compress_nfadc</a>, <a class="el" href="tdc400__compress_8cpp_source.html#l00017">should_compress_tdc400</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00207">tdc400_compress()</a>.</p>

<p>Referenced by <a class="el" href="ebuser_8cpp_source.html#l00259">eb_user()</a>, and <a class="el" href="mucap__compress_8cpp_source.html#l00013">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00070"></a>00070 {
<a name="l00071"></a>00071     <span class="comment">// If it&apos;s not a 32-bit event, just copy from input to output</span>
<a name="l00072"></a>00072     BANK_HEADER *bank_header = (BANK_HEADER *)input_event;
<a name="l00073"></a>00073     BOOL is_32 = (bank_header-&gt;flags &amp; BANK_FORMAT_32BIT);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     <span class="keywordflow">if</span>(!is_32) {
<a name="l00076"></a>00076       memcpy(output_event, input_event, 
<a name="l00077"></a>00077                  bank_header-&gt;data_size + <span class="keyword">sizeof</span>(BANK_HEADER));
<a name="l00078"></a>00078       <span class="keywordflow">return</span>;
<a name="l00079"></a>00079     }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     BANK32 *input_bank = NULL;
<a name="l00082"></a>00082     <span class="keywordtype">void</span> *input_data = NULL;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <span class="keywordflow">while</span> (1) {
<a name="l00085"></a>00085         <span class="keywordtype">int</span> input_size =
<a name="l00086"></a>00086             bk_iterate32(input_event, &amp;input_bank, &amp;input_data);
<a name="l00087"></a>00087         <span class="keywordflow">if</span> (input_bank == NULL) {
<a name="l00088"></a>00088             <span class="keywordflow">break</span>;
<a name="l00089"></a>00089         }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091         <span class="keywordtype">char</span> output_name[5];
<a name="l00092"></a>00092         <span class="keywordflow">if</span> (<a class="code" href="mucap__compress_8h.html#a2dadd9a43c97d37b6b60f99b8c6e650f">should_compress_tdc400</a> &amp;&amp; !strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;TDC&quot;</span>, 3)) {
<a name="l00093"></a>00093             sprintf(output_name, <span class="stringliteral">&quot;CTD%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00094"></a>00094             <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00095"></a>00095                           output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#abde84ecb3c3f08dfa302dec6574ba2f6">tdc400_compress</a>, 0);
<a name="l00096"></a>00096         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="fadc__compress_8cpp.html#af6b7be055ab2104fefa3a1f3dc8644a2">should_compress_fadc</a>
<a name="l00097"></a>00097                    &amp;&amp; !strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;ADC&quot;</span>, 3)) {
<a name="l00098"></a>00098           sprintf(output_name, <span class="stringliteral">&quot;CAD%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00099"></a>00099           <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00100"></a>00100                         output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="fadc__compress_8cpp.html#a58e5467cc0741997f62c98424b6baa72">fadc_compress</a>, 0);
<a name="l00101"></a>00101         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (USE_OLD_COMPRESSION &amp;&amp;
<a name="l00102"></a>00102                    <a class="code" href="mucap__compress_8h.html#a0c56dade5ca8b94e1c62de9d3d5a57e2">should_compress_nfadc</a>
<a name="l00103"></a>00103                    &amp;&amp; input_bank-&gt;name[0] == <span class="charliteral">&apos;N&apos;</span> 
<a name="l00104"></a>00104                    &amp;&amp; (input_bank-&gt;name[1] == <span class="charliteral">&apos;a&apos;</span> || 
<a name="l00105"></a>00105                        input_bank-&gt;name[1] == <span class="charliteral">&apos;b&apos;</span> || 
<a name="l00106"></a>00106                        input_bank-&gt;name[1] == <span class="charliteral">&apos;c&apos;</span> || 
<a name="l00107"></a>00107                        input_bank-&gt;name[1] == <span class="charliteral">&apos;d&apos;</span>) 
<a name="l00108"></a>00108                    &amp;&amp; isxdigit(input_bank-&gt;name[2]) 
<a name="l00109"></a>00109                    &amp;&amp; isxdigit(input_bank-&gt;name[3])) {
<a name="l00110"></a>00110           printf(<span class="stringliteral">&quot;Using run10 compression\n&quot;</span>);
<a name="l00111"></a>00111           sprintf(output_name, <span class="stringliteral">&quot;n%c%c%c&quot;</span>, input_bank-&gt;name[1], 
<a name="l00112"></a>00112                   input_bank-&gt;name[2], input_bank-&gt;name[3]);
<a name="l00113"></a>00113           <span class="keywordtype">int</span> board_number = 16*(input_bank-&gt;name[2]-<span class="charliteral">&apos;0&apos;</span>) + (input_bank-&gt;name[3]-<span class="charliteral">&apos;0&apos;</span>);
<a name="l00114"></a>00114           <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00115"></a>00115                         output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#aa5e0a27761952c37263cdb9d2368a1bc">nfadc_compress</a>, board_number);
<a name="l00116"></a>00116         } <span class="comment">//start paste</span>
<a name="l00117"></a>00117         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!USE_OLD_COMPRESSION &amp;&amp;
<a name="l00118"></a>00118                  input_bank-&gt;name[0] == <span class="charliteral">&apos;N&apos;</span> 
<a name="l00119"></a>00119                  &amp;&amp; input_bank-&gt;name[1] &gt;= <span class="charliteral">&apos;a&apos;</span>
<a name="l00120"></a>00120                  &amp;&amp; input_bank-&gt;name[1] &lt;= <span class="charliteral">&apos;h&apos;</span>
<a name="l00121"></a>00121                  &amp;&amp; isxdigit(input_bank-&gt;name[2]) 
<a name="l00122"></a>00122                  &amp;&amp; isxdigit(input_bank-&gt;name[3])) {
<a name="l00123"></a>00123           printf(<span class="stringliteral">&quot;Using run11+ compression\n&quot;</span>);
<a name="l00124"></a>00124           sprintf(output_name, <span class="stringliteral">&quot;n%c%c%c&quot;</span>, input_bank-&gt;name[1], 
<a name="l00125"></a>00125                   input_bank-&gt;name[2], input_bank-&gt;name[3]);
<a name="l00126"></a>00126           <span class="keywordtype">int</span> board_number = 16*(input_bank-&gt;name[2]-<span class="charliteral">&apos;0&apos;</span>) + (input_bank-&gt;name[3]-<span class="charliteral">&apos;0&apos;</span>);
<a name="l00127"></a>00127           <span class="keywordflow">if</span>(board_number &lt; 128 &amp;&amp; <a class="code" href="mucap__compress_8h.html#a3e90d51c60a85540951186d31984ace1">should_compress_n2fadc_tpc</a>) {
<a name="l00128"></a>00128             <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00129"></a>00129                           output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#a0a87849d757dc54a5d625f65b0e3eb3a">n2fadc_tpc_compress</a>, board_number);
<a name="l00130"></a>00130           }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="mucap__compress_8h.html#a151c2cecd99176e9c48ba34d1c279658">should_compress_n2fadc_ndet</a>) {
<a name="l00131"></a>00131             <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00132"></a>00132                           output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#a9060a385e4d28af5f646fe51cc74e814">n2fadc_ndet_compress</a>, board_number);
<a name="l00133"></a>00133           }
<a name="l00134"></a>00134         }<span class="comment">//end paste</span>
<a name="l00135"></a>00135         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="caen__compress_8cpp.html#a020522a88f7970dfe1bcaf99f8847e68">should_compress_caen</a>
<a name="l00136"></a>00136                  &amp;&amp; !strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CAE&quot;</span>, 3)) {
<a name="l00137"></a>00137           sprintf(output_name, <span class="stringliteral">&quot;CCA%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00138"></a>00138           <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00139"></a>00139                         output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="caen__compress_8cpp.html#acb3ee666bb352d1cfbdc6be86b609a68">caen_compress</a>, 0);
<a name="l00140"></a>00140         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="comp__compress_8cpp.html#a2579964081d7e77b11b77695ea6625e5">should_compress_comp</a>
<a name="l00141"></a>00141                    &amp;&amp; !strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CMP&quot;</span>, 3)) {
<a name="l00142"></a>00142           sprintf(output_name, <span class="stringliteral">&quot;CCM%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00143"></a>00143           <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00144"></a>00144                         output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="comp__compress_8cpp.html#a57fa8a60fa054079752ea0bffb085a3c">cmp_compress</a>, 0);
<a name="l00145"></a>00145         } <span class="keywordflow">else</span> {
<a name="l00146"></a>00146           <span class="comment">// Otherwise: if the input and output events are not the same,</span>
<a name="l00147"></a>00147           <span class="comment">// just copy the bank whole.</span>
<a name="l00148"></a>00148           <span class="keywordflow">if</span>(input_event != output_event) {
<a name="l00149"></a>00149             <span class="keywordtype">char</span> *output_data;
<a name="l00150"></a>00150             bk_create(output_event, input_bank-&gt;name, input_bank-&gt;type,
<a name="l00151"></a>00151                       &amp;output_data);
<a name="l00152"></a>00152             memcpy(output_data, input_data, input_size);
<a name="l00153"></a>00153             bk_close(output_event, output_data + input_size);
<a name="l00154"></a>00154           }
<a name="l00155"></a>00155         }
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ade5589fa7b790fff2721d9f30558e305"></a><!-- doxytag: member="mucap_compress.h::compress_event_skim" ref="ade5589fa7b790fff2721d9f30558e305" args="(void *input_event, void *output_event, bool keep_etc, bool USE_OLD_COMPRESSION=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compress_event_skim </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>input_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>output_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>keep_etc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>USE_OLD_COMPRESSION</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="overall_8cpp_source.html#l00160">160</a> of file <a class="el" href="overall_8cpp_source.html">overall.cpp</a>.</p>

<p>References <a class="el" href="overall_8cpp_source.html#l00046">compress_bank()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00092">fadc_compress()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00077">hits_compress()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00097">n2fadc_ndet_compress()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00104">n2fadc_tpc_compress()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00108">nfadc_compress()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00014">should_compress_n2fadc_ndet</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00014">should_compress_n2fadc_tpc</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00014">should_compress_nfadc</a>, and <a class="el" href="stck__compress_8cpp_source.html#l00220">stck_compress()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00161"></a>00161 {
<a name="l00162"></a>00162   <span class="comment">// If it&apos;s not a 32-bit event, just copy from input to output</span>
<a name="l00163"></a>00163   BANK_HEADER *bank_header = (BANK_HEADER *)input_event;
<a name="l00164"></a>00164   BOOL is_32 = (bank_header-&gt;flags &amp; BANK_FORMAT_32BIT);
<a name="l00165"></a>00165   
<a name="l00166"></a>00166   <span class="keywordflow">if</span>(!is_32 || EVENT_ID(input_event) != 1) {
<a name="l00167"></a>00167     memcpy(output_event, input_event,
<a name="l00168"></a>00168            bank_header-&gt;data_size + <span class="keyword">sizeof</span>(BANK_HEADER));
<a name="l00169"></a>00169     <span class="keywordflow">return</span>;
<a name="l00170"></a>00170   }
<a name="l00171"></a>00171   
<a name="l00172"></a>00172   BANK32 *input_bank = NULL;
<a name="l00173"></a>00173   <span class="keywordtype">void</span> *input_data = NULL;
<a name="l00174"></a>00174   
<a name="l00175"></a>00175   <span class="keywordflow">while</span> (1) {
<a name="l00176"></a>00176     <span class="keywordtype">int</span> input_size =
<a name="l00177"></a>00177       bk_iterate32(input_event, &amp;input_bank, &amp;input_data);
<a name="l00178"></a>00178     <span class="keywordflow">if</span> (input_bank == NULL) {
<a name="l00179"></a>00179       <span class="keywordflow">break</span>;
<a name="l00180"></a>00180     }
<a name="l00181"></a>00181     
<a name="l00182"></a>00182     <span class="keywordtype">char</span> output_name[5];
<a name="l00183"></a>00183     <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;RTPC&quot;</span>, 4)) {
<a name="l00184"></a>00184       <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00185"></a>00185                     <span class="stringliteral">&quot;CTPC&quot;</span>, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#ab0275c9f673671ab39ff22b231d2f1c9">stck_compress</a>, 0);
<a name="l00186"></a>00186     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;RHIT&quot;</span>, 4)) {
<a name="l00187"></a>00187       <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00188"></a>00188                     <span class="stringliteral">&quot;HITZ&quot;</span>, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="hits__compress_8cpp.html#af1013190f361853fc63838396c6fa13d">hits_compress</a>, 0);
<a name="l00189"></a>00189     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;SKIM&quot;</span>, 4)) {
<a name="l00190"></a>00190       <span class="comment">// save bank of gskim triggers</span>
<a name="l00191"></a>00191       <span class="keywordflow">if</span>(input_event != output_event) {
<a name="l00192"></a>00192         <span class="keywordtype">char</span> *output_data;
<a name="l00193"></a>00193         bk_create(output_event, <span class="stringliteral">&quot;GSKM&quot;</span>, input_bank-&gt;type,
<a name="l00194"></a>00194                   &amp;output_data);
<a name="l00195"></a>00195         memcpy(output_data, input_data, input_size);
<a name="l00196"></a>00196         bk_close(output_event, output_data + input_size);
<a name="l00197"></a>00197       }
<a name="l00198"></a>00198     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (USE_OLD_COMPRESSION &amp;&amp;
<a name="l00199"></a>00199                <a class="code" href="mucap__compress_8h.html#a0c56dade5ca8b94e1c62de9d3d5a57e2">should_compress_nfadc</a>
<a name="l00200"></a>00200                &amp;&amp; input_bank-&gt;name[0] == <span class="charliteral">&apos;N&apos;</span> 
<a name="l00201"></a>00201                &amp;&amp; (input_bank-&gt;name[1] == <span class="charliteral">&apos;a&apos;</span> || 
<a name="l00202"></a>00202                    input_bank-&gt;name[1] == <span class="charliteral">&apos;b&apos;</span> || 
<a name="l00203"></a>00203                    input_bank-&gt;name[1] == <span class="charliteral">&apos;c&apos;</span> || 
<a name="l00204"></a>00204                    input_bank-&gt;name[1] == <span class="charliteral">&apos;d&apos;</span>) 
<a name="l00205"></a>00205                &amp;&amp; isxdigit(input_bank-&gt;name[2]) 
<a name="l00206"></a>00206                &amp;&amp; isxdigit(input_bank-&gt;name[3])) {
<a name="l00207"></a>00207       sprintf(output_name, <span class="stringliteral">&quot;n%c%c%c&quot;</span>, input_bank-&gt;name[1], 
<a name="l00208"></a>00208               input_bank-&gt;name[2], input_bank-&gt;name[3]);
<a name="l00209"></a>00209       <span class="keywordtype">int</span> board_number = 16*(input_bank-&gt;name[2]-<span class="charliteral">&apos;0&apos;</span>) + (input_bank-&gt;name[3]-<span class="charliteral">&apos;0&apos;</span>);
<a name="l00210"></a>00210       <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00211"></a>00211                     output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#aa5e0a27761952c37263cdb9d2368a1bc">nfadc_compress</a>, board_number);
<a name="l00212"></a>00212     } <span class="comment">//start paste</span>
<a name="l00213"></a>00213     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!USE_OLD_COMPRESSION &amp;&amp;
<a name="l00214"></a>00214              input_bank-&gt;name[0] == <span class="charliteral">&apos;N&apos;</span> 
<a name="l00215"></a>00215              &amp;&amp; input_bank-&gt;name[1] &gt;= <span class="charliteral">&apos;a&apos;</span>
<a name="l00216"></a>00216              &amp;&amp; input_bank-&gt;name[1] &lt;= <span class="charliteral">&apos;h&apos;</span>
<a name="l00217"></a>00217              &amp;&amp; isxdigit(input_bank-&gt;name[2]) 
<a name="l00218"></a>00218              &amp;&amp; isxdigit(input_bank-&gt;name[3])) {
<a name="l00219"></a>00219       sprintf(output_name, <span class="stringliteral">&quot;n%c%c%c&quot;</span>, input_bank-&gt;name[1], 
<a name="l00220"></a>00220               input_bank-&gt;name[2], input_bank-&gt;name[3]);
<a name="l00221"></a>00221       <span class="keywordtype">int</span> board_number = 16*(input_bank-&gt;name[2]-<span class="charliteral">&apos;0&apos;</span>) + (input_bank-&gt;name[3]-<span class="charliteral">&apos;0&apos;</span>);
<a name="l00222"></a>00222       <span class="keywordflow">if</span>(board_number &lt; 128 &amp;&amp; <a class="code" href="mucap__compress_8h.html#a3e90d51c60a85540951186d31984ace1">should_compress_n2fadc_tpc</a>) {
<a name="l00223"></a>00223         <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00224"></a>00224                       output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#a0a87849d757dc54a5d625f65b0e3eb3a">n2fadc_tpc_compress</a>, board_number);
<a name="l00225"></a>00225       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="mucap__compress_8h.html#a151c2cecd99176e9c48ba34d1c279658">should_compress_n2fadc_ndet</a>) {
<a name="l00226"></a>00226         <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00227"></a>00227                       output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="mucap__compress_8h.html#a9060a385e4d28af5f646fe51cc74e814">n2fadc_ndet_compress</a>, board_number);
<a name="l00228"></a>00228       }
<a name="l00229"></a>00229     }<span class="comment">//end paste</span>
<a name="l00230"></a>00230     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;ADC&quot;</span>, 3)) {
<a name="l00231"></a>00231       sprintf(output_name, <span class="stringliteral">&quot;CAD%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00232"></a>00232       <a class="code" href="overall_8cpp.html#a17b7a74d6c2ec30c19da140da464aee0">compress_bank</a>(input_data, input_size, output_event,
<a name="l00233"></a>00233                     output_name, (<a class="code" href="overall_8cpp.html#ab39865f4e48b373450c93df71075f6ab">comp_fcn</a>) <a class="code" href="fadc__compress_8cpp.html#a58e5467cc0741997f62c98424b6baa72">fadc_compress</a>, 0);
<a name="l00234"></a>00234     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (keep_etc &amp;&amp; (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;LAD&quot;</span>, 3) ||
<a name="l00235"></a>00235                             
<a name="l00236"></a>00236                             <span class="comment">//                              !strncmp(input_bank-&gt;name, &quot;LSPK&quot;, 4) ||</span>
<a name="l00237"></a>00237                             !strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CAET&quot;</span>, 4)))
<a name="l00238"></a>00238       {
<a name="l00239"></a>00239         <span class="comment">// Otherwise: if the input and output events are not the same,</span>
<a name="l00240"></a>00240         <span class="comment">// just copy the bank whole.</span>
<a name="l00241"></a>00241         
<a name="l00242"></a>00242         <span class="keywordflow">if</span>(input_event != output_event) {
<a name="l00243"></a>00243           <span class="keywordtype">char</span> *output_data;
<a name="l00244"></a>00244           bk_create(output_event, input_bank-&gt;name, input_bank-&gt;type,
<a name="l00245"></a>00245                     &amp;output_data);
<a name="l00246"></a>00246           memcpy(output_data, input_data, input_size);
<a name="l00247"></a>00247           bk_close(output_event, output_data + input_size);
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249       }
<a name="l00250"></a>00250   }
<a name="l00251"></a>00251 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab8d3d2d200bab8b6c9cf0bd01787383f"></a><!-- doxytag: member="mucap_compress.h::compress_load_all" ref="ab8d3d2d200bab8b6c9cf0bd01787383f" args="(bool USE_OLD_COMPRESSION=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compress_load_all </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>USE_OLD_COMPRESSION</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="overall_8cpp_source.html#l00373">373</a> of file <a class="el" href="overall_8cpp_source.html">overall.cpp</a>.</p>

<p>References <a class="el" href="caen__compress_8cpp_source.html#l00025">caen_load()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00029">comp_load()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00029">fadc_load()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00024">hits_load()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00024">n2fadc_ndet_load()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00024">n2fadc_tpc_load()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00024">nfadc_load()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00032">stck_load()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00030">tdc400_load()</a>.</p>

<p>Referenced by <a class="el" href="ebuser_8cpp_source.html#l00145">eb_begin_of_run()</a>, <a class="el" href="mucap__compress_8cpp_source.html#l00013">main()</a>, <a class="el" href="MUnCompressRawData_8cpp_source.html#l00058">MUnCompressRawData_init()</a>, and <a class="el" href="res__analysis_8cxx_source.html#l00067">process_file()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00374"></a>00374 {
<a name="l00375"></a>00375   <a class="code" href="mucap__compress_8h.html#acc9f7c5053d3580a19c74dd259d4c3fc">tdc400_load</a>();
<a name="l00376"></a>00376   <a class="code" href="fadc__compress_8cpp.html#a97dd8d8818f350f6d7cbcff039b87184">fadc_load</a>();
<a name="l00377"></a>00377   
<a name="l00378"></a>00378   <span class="keywordflow">if</span> (USE_OLD_COMPRESSION){
<a name="l00379"></a>00379     <a class="code" href="mucap__compress_8h.html#acaaf8d538e20571781d4da27ee0f0b1e">nfadc_load</a>();}
<a name="l00380"></a>00380   <span class="keywordflow">else</span>{
<a name="l00381"></a>00381     <a class="code" href="mucap__compress_8h.html#a63eea1f9be10c30001f65168d6f4f7d7">n2fadc_tpc_load</a>();
<a name="l00382"></a>00382     <a class="code" href="mucap__compress_8h.html#aaf9ead365e68c4c31d7fd320619c50a5">n2fadc_ndet_load</a>();
<a name="l00383"></a>00383   }
<a name="l00384"></a>00384   <a class="code" href="caen__compress_8cpp.html#a710edf6c48915463187dfdcf461275cb">caen_load</a>();
<a name="l00385"></a>00385   <a class="code" href="comp__compress_8cpp.html#a568a8bca87f87e4e733d8207aae962c0">comp_load</a>();
<a name="l00386"></a>00386   <a class="code" href="hits__compress_8cpp.html#a5261d1557630b2927f4f8e610fce4471">hits_load</a>();
<a name="l00387"></a>00387   <a class="code" href="mucap__compress_8h.html#aa7bcf5584b002d0dcb024317bc49bad3">stck_load</a>();
<a name="l00388"></a>00388 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af7769c57c67bd948865331d82c5f45cd"></a><!-- doxytag: member="mucap_compress.h::compress_optimize_all" ref="af7769c57c67bd948865331d82c5f45cd" args="(bool USE_OLD_COMPRESSION=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compress_optimize_all </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>USE_OLD_COMPRESSION</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="overall_8cpp_source.html#l00390">390</a> of file <a class="el" href="overall_8cpp_source.html">overall.cpp</a>.</p>

<p>References <a class="el" href="caen__compress_8cpp_source.html#l00019">caen_optimize()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00018">comp_optimize()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00020">fadc_optimize()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00020">n2fadc_ndet_optimize()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00020">n2fadc_tpc_optimize()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00020">nfadc_optimize()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00019">tdc400_optimize()</a>.</p>

<p>Referenced by <a class="el" href="mucap__optimize_8cpp_source.html#l00013">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00391"></a>00391 {
<a name="l00392"></a>00392   <a class="code" href="mucap__compress_8h.html#a2be7c78e8f179774a3493583e306eb2d">tdc400_optimize</a>();
<a name="l00393"></a>00393   <a class="code" href="fadc__compress_8cpp.html#a45a91046e07196d9388e44a722ba210e">fadc_optimize</a>();
<a name="l00394"></a>00394   <span class="keywordflow">if</span> (USE_OLD_COMPRESSION){ 
<a name="l00395"></a>00395     <a class="code" href="mucap__compress_8h.html#ade1cdb0dda78df6520064b5830a3e5c2">nfadc_optimize</a>();
<a name="l00396"></a>00396   }
<a name="l00397"></a>00397   <span class="keywordflow">else</span>{
<a name="l00398"></a>00398     <a class="code" href="mucap__compress_8h.html#a86a4ac76c7b6125175e9775feedb990e">n2fadc_tpc_optimize</a>();
<a name="l00399"></a>00399     <a class="code" href="mucap__compress_8h.html#a2466c2fb04c759ac78a1dc9896acd942">n2fadc_ndet_optimize</a>();
<a name="l00400"></a>00400   }
<a name="l00401"></a>00401   <a class="code" href="caen__compress_8cpp.html#a60eefed87853433213c3d4962138bf7e">caen_optimize</a>();
<a name="l00402"></a>00402   <a class="code" href="comp__compress_8cpp.html#a1a89c5fe4a4d1c7bd3ff9a66e65cbb07">comp_optimize</a>();
<a name="l00403"></a>00403 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a03cdc3911677bc5928bc2b935930b252"></a><!-- doxytag: member="mucap_compress.h::expand_bank" ref="a03cdc3911677bc5928bc2b935930b252" args="(unsigned char *input_data, int input_size, void *output_event, char *output_name, expand_fcn f, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void expand_bank </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>output_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>output_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="overall_8cpp.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="overall_8cpp_source.html#l00255">255</a> of file <a class="el" href="overall_8cpp_source.html">overall.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00257"></a>00257 {
<a name="l00258"></a>00258   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *uncompressed_bank;
<a name="l00259"></a>00259   <span class="keywordtype">int</span> bank_type = TID_DWORD;
<a name="l00260"></a>00260   <span class="keywordflow">if</span>(output_name[0] == <span class="charliteral">&apos;N&apos;</span>) bank_type = TID_BYTE;
<a name="l00261"></a>00261   bk_create(output_event, output_name, bank_type, &amp;uncompressed_bank);
<a name="l00262"></a>00262   
<a name="l00263"></a>00263   <span class="comment">// uncompress the data; &quot;sizeof(int)&quot; accounts for the checksum word</span>
<a name="l00264"></a>00264   <span class="keywordtype">int</span> uncompressed_size = (*f) (input_data, input_size - <span class="keyword">sizeof</span>(int), 
<a name="l00265"></a>00265                                 uncompressed_bank, userParam);
<a name="l00266"></a>00266   
<a name="l00267"></a>00267   <span class="comment">// verify the Adler32 checksum</span>
<a name="l00268"></a>00268   <span class="keywordtype">int</span> checksum = adler32(0x5555, uncompressed_bank, uncompressed_size);
<a name="l00269"></a>00269   <span class="keywordtype">int</span> *checksum_ptr = (<span class="keywordtype">int</span> *) &amp;input_data[input_size-<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)];
<a name="l00270"></a>00270   <span class="keywordflow">if</span>(checksum != *checksum_ptr) {
<a name="l00271"></a>00271     printf(<span class="stringliteral">&quot;*** CHECKSUM TEST FAILED: Bank %s (0x%x -&gt; 0x%x) ***\n&quot;</span>,
<a name="l00272"></a>00272            output_name, *checksum_ptr, checksum); 
<a name="l00273"></a>00273   } <span class="keywordflow">else</span> {
<a name="l00274"></a>00274     
<a name="l00275"></a>00275     <span class="comment">//       printf(&quot;Checksum OK for bank %s (0x%x)\n&quot;, output_name, checksum);</span>
<a name="l00276"></a>00276     
<a name="l00277"></a>00277     
<a name="l00278"></a>00278   }
<a name="l00279"></a>00279   
<a name="l00280"></a>00280   bk_close(output_event, uncompressed_bank + uncompressed_size);
<a name="l00281"></a>00281 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a862d0f478fee422f0329ac9dfd28b5d7"></a><!-- doxytag: member="mucap_compress.h::expand_event" ref="a862d0f478fee422f0329ac9dfd28b5d7" args="(void *input_event, void *output_event, bool USE_OLD_COMPRESSION=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void expand_event </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>input_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>output_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>USE_OLD_COMPRESSION</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="overall_8cpp_source.html#l00283">283</a> of file <a class="el" href="overall_8cpp_source.html">overall.cpp</a>.</p>

<p>References <a class="el" href="caen__compress_8cpp_source.html#l00219">caen_expand()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00243">cmp_expand()</a>, <a class="el" href="overall_8cpp_source.html#l00255">expand_bank()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00165">fadc_expand()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00148">hits_expand()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00166">n2fadc_ndet_expand()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00172">n2fadc_tpc_expand()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00181">nfadc_expand()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00269">stck_expand()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00255">tdc400_expand()</a>.</p>

<p>Referenced by <a class="el" href="mucap__expand_8cpp_source.html#l00013">main()</a>, <a class="el" href="MUnCompressRawData_8cpp_source.html#l00067">MUnCompressRawData()</a>, and <a class="el" href="res__analysis_8cxx_source.html#l00067">process_file()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00284"></a>00284 {
<a name="l00285"></a>00285   <span class="comment">// If it&apos;s not a 32-bit event, just copy from input to output</span>
<a name="l00286"></a>00286   BANK_HEADER *bank_header = (BANK_HEADER *)input_event;
<a name="l00287"></a>00287   BOOL is_32 = (bank_header-&gt;flags &amp; BANK_FORMAT_32BIT);
<a name="l00288"></a>00288   
<a name="l00289"></a>00289   <span class="keywordflow">if</span>(!is_32) {
<a name="l00290"></a>00290     memcpy(output_event, input_event, 
<a name="l00291"></a>00291            bank_header-&gt;data_size + <span class="keyword">sizeof</span>(BANK_HEADER));
<a name="l00292"></a>00292     <span class="keywordflow">return</span>;
<a name="l00293"></a>00293   }
<a name="l00294"></a>00294   
<a name="l00295"></a>00295   BANK32 *input_bank = NULL;
<a name="l00296"></a>00296   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *input_data = NULL;
<a name="l00297"></a>00297   
<a name="l00298"></a>00298   <span class="keywordflow">while</span> (1) {
<a name="l00299"></a>00299     <span class="keywordtype">int</span> input_size =
<a name="l00300"></a>00300       bk_iterate32(input_event, &amp;input_bank, &amp;input_data);
<a name="l00301"></a>00301     <span class="keywordflow">if</span> (input_bank == NULL) {
<a name="l00302"></a>00302       <span class="keywordflow">break</span>;
<a name="l00303"></a>00303     }
<a name="l00304"></a>00304     
<a name="l00305"></a>00305     <span class="keywordtype">char</span> output_name[5];
<a name="l00306"></a>00306     <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CTD&quot;</span>, 3)) {
<a name="l00307"></a>00307       sprintf(output_name, <span class="stringliteral">&quot;TDC%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00308"></a>00308       <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00309"></a>00309                   output_name, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="mucap__compress_8h.html#ac27e28cf458c963278afad4320bab951">tdc400_expand</a>, 0);
<a name="l00310"></a>00310     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(USE_OLD_COMPRESSION &amp;&amp;
<a name="l00311"></a>00311               input_bank-&gt;name[0] == <span class="charliteral">&apos;n&apos;</span> 
<a name="l00312"></a>00312               &amp;&amp; (input_bank-&gt;name[1] == <span class="charliteral">&apos;a&apos;</span> || 
<a name="l00313"></a>00313                   input_bank-&gt;name[1] == <span class="charliteral">&apos;b&apos;</span> || 
<a name="l00314"></a>00314                   input_bank-&gt;name[1] == <span class="charliteral">&apos;c&apos;</span> || 
<a name="l00315"></a>00315                   input_bank-&gt;name[1] == <span class="charliteral">&apos;d&apos;</span>) 
<a name="l00316"></a>00316               &amp;&amp; isxdigit(input_bank-&gt;name[2]) 
<a name="l00317"></a>00317               &amp;&amp; isxdigit(input_bank-&gt;name[3])) {
<a name="l00318"></a>00318       sprintf(output_name, <span class="stringliteral">&quot;N%c%c%c&quot;</span>, input_bank-&gt;name[1],
<a name="l00319"></a>00319               input_bank-&gt;name[2], input_bank-&gt;name[3]);
<a name="l00320"></a>00320       <span class="keywordtype">int</span> board_number = 16*(input_bank-&gt;name[2]-<span class="charliteral">&apos;0&apos;</span>) + (input_bank-&gt;name[3]-<span class="charliteral">&apos;0&apos;</span>);
<a name="l00321"></a>00321       <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00322"></a>00322                   output_name, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="mucap__compress_8h.html#aa3e17a1077be2fb193f8c62fa5971e64">nfadc_expand</a>, board_number);
<a name="l00323"></a>00323     } 
<a name="l00324"></a>00324     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!USE_OLD_COMPRESSION &amp;&amp;
<a name="l00325"></a>00325             input_bank-&gt;name[0] == <span class="charliteral">&apos;n&apos;</span> 
<a name="l00326"></a>00326             &amp;&amp; input_bank-&gt;name[1] &gt;= <span class="charliteral">&apos;a&apos;</span>
<a name="l00327"></a>00327             &amp;&amp; input_bank-&gt;name[1] &lt;= <span class="charliteral">&apos;h&apos;</span>
<a name="l00328"></a>00328             &amp;&amp; isxdigit(input_bank-&gt;name[2]) 
<a name="l00329"></a>00329             &amp;&amp; isxdigit(input_bank-&gt;name[3])) {
<a name="l00330"></a>00330       sprintf(output_name, <span class="stringliteral">&quot;N%c%c%c&quot;</span>, input_bank-&gt;name[1],
<a name="l00331"></a>00331               input_bank-&gt;name[2], input_bank-&gt;name[3]);
<a name="l00332"></a>00332       <span class="keywordtype">int</span> board_number = 16*(input_bank-&gt;name[2]-<span class="charliteral">&apos;0&apos;</span>) + (input_bank-&gt;name[3]-<span class="charliteral">&apos;0&apos;</span>);
<a name="l00333"></a>00333       <span class="keywordflow">if</span>(board_number &lt; 128) {
<a name="l00334"></a>00334         <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00335"></a>00335                     output_name, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="mucap__compress_8h.html#ae06eddaa8d7752d09c7aeac6cc93a09d">n2fadc_tpc_expand</a>, board_number);
<a name="l00336"></a>00336       } <span class="keywordflow">else</span> {
<a name="l00337"></a>00337         <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00338"></a>00338                     output_name, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="mucap__compress_8h.html#a12b6cae2f43c25150ac744b029639959">n2fadc_ndet_expand</a>, board_number);
<a name="l00339"></a>00339       }
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CAD&quot;</span>, 3)) {
<a name="l00342"></a>00342       sprintf(output_name, <span class="stringliteral">&quot;ADC%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00343"></a>00343       <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00344"></a>00344                   output_name, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="fadc__compress_8cpp.html#ae44101ecd6db1b1e5d5231b46664f590">fadc_expand</a>, 0);
<a name="l00345"></a>00345     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CCA&quot;</span>, 3)) {
<a name="l00346"></a>00346       sprintf(output_name, <span class="stringliteral">&quot;CAE%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00347"></a>00347       <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00348"></a>00348                   output_name, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="caen__compress_8cpp.html#a28b441e0077961cbb5b5363dc6856183">caen_expand</a>, 0);
<a name="l00349"></a>00349     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CCM&quot;</span>, 3)) {
<a name="l00350"></a>00350       sprintf(output_name, <span class="stringliteral">&quot;CMP%c&quot;</span>, input_bank-&gt;name[3]);
<a name="l00351"></a>00351       <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00352"></a>00352                   output_name, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="comp__compress_8cpp.html#a121793e8213834634095e0a3343eaf54">cmp_expand</a>, 0);
<a name="l00353"></a>00353     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;HITZ&quot;</span>, 4)) {
<a name="l00354"></a>00354       <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00355"></a>00355                   <span class="stringliteral">&quot;HITS&quot;</span>, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="hits__compress_8cpp.html#aef2def428cc0defbfd450b19d4171965">hits_expand</a>, 0);
<a name="l00356"></a>00356     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(input_bank-&gt;name, <span class="stringliteral">&quot;CTPC&quot;</span>, 4)) {
<a name="l00357"></a>00357       <a class="code" href="mucap__compress_8h.html#a03cdc3911677bc5928bc2b935930b252">expand_bank</a>(input_data, input_size, output_event,
<a name="l00358"></a>00358                   <span class="stringliteral">&quot;STCK&quot;</span>, (<a class="code" href="mucap__compress_8h.html#ab76f2413499be166796a45bbc9e345cf">expand_fcn</a>) <a class="code" href="mucap__compress_8h.html#a7b238ff7c1c32f4d6a7a15a3a2b61357">stck_expand</a>, 0);
<a name="l00359"></a>00359     } <span class="keywordflow">else</span> {
<a name="l00360"></a>00360       <span class="comment">// Otherwise: if the input and output events are not the same,</span>
<a name="l00361"></a>00361       <span class="comment">// just copy the bank whole.</span>
<a name="l00362"></a>00362       <span class="keywordflow">if</span>(input_event != output_event) {
<a name="l00363"></a>00363         <span class="keywordtype">char</span> *output_data;
<a name="l00364"></a>00364         bk_create(output_event, input_bank-&gt;name, input_bank-&gt;type,
<a name="l00365"></a>00365                   &amp;output_data);
<a name="l00366"></a>00366         memcpy(output_data, input_data, input_size);
<a name="l00367"></a>00367         bk_close(output_event, output_data + input_size);
<a name="l00368"></a>00368       }
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370   }
<a name="l00371"></a>00371 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a58e5467cc0741997f62c98424b6baa72"></a><!-- doxytag: member="mucap_compress.h::fadc_compress" ref="a58e5467cc0741997f62c98424b6baa72" args="(fadc_word *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fadc_compress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfadc__word.html">fadc_word</a> *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fadc__compress_8cpp_source.html#l00092">92</a> of file <a class="el" href="fadc__compress_8cpp_source.html">fadc_compress.cpp</a>.</p>

<p>References <a class="el" href="fadc__compress_8cpp_source.html#l00042">encode_fadc()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, and <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00093"></a>00093 {
<a name="l00094"></a>00094   input_size /= <span class="keyword">sizeof</span>(<a class="code" href="structfadc__word.html">fadc_word</a>);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00097"></a>00097 
<a name="l00098"></a>00098   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   <span class="comment">// store size of input data</span>
<a name="l00101"></a>00101   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00102"></a>00102   *uncompressed_size_p = input_size;
<a name="l00103"></a>00103   output += <span class="keyword">sizeof</span>(int);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <span class="comment">// reserve space for the size of the compressed data</span>
<a name="l00106"></a>00106   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00107"></a>00107   output += <span class="keyword">sizeof</span>(int);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109   <span class="comment">// compress samples</span>
<a name="l00110"></a>00110   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00111"></a>00111   <span class="keywordtype">int</span> compressed_size = <a class="code" href="fadc__compress_8cpp.html#a4cd7f372f0802a0ccb9b94663838830c">encode_fadc</a>(input, input_size, &amp;output_buffer);
<a name="l00112"></a>00112   output += compressed_size;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   <span class="comment">// store size of compressed times</span>
<a name="l00115"></a>00115   *compressed_time_size_p = compressed_size;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117   <span class="keywordflow">return</span> compressed_size + 2 * <span class="keyword">sizeof</span>(int);
<a name="l00118"></a>00118 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae44101ecd6db1b1e5d5231b46664f590"></a><!-- doxytag: member="mucap_compress.h::fadc_expand" ref="ae44101ecd6db1b1e5d5231b46664f590" args="(unsigned char *input, int input_size, fadc_word *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fadc_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfadc__word.html">fadc_word</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fadc__compress_8cpp_source.html#l00165">165</a> of file <a class="el" href="fadc__compress_8cpp_source.html">fadc_compress.cpp</a>.</p>

<p>References <a class="el" href="fadc__compress_8cpp_source.html#l00120">decode_fadc()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00166"></a>00166 {
<a name="l00167"></a>00167   <span class="comment">// </span>
<a name="l00168"></a>00168   <span class="comment">// Uncompress the data produced by caen_compress().</span>
<a name="l00169"></a>00169   <span class="comment">// </span>
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="comment">// Get uncompressed data size</span>
<a name="l00174"></a>00174   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00175"></a>00175   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00176"></a>00176   input += <span class="keyword">sizeof</span>(int);
<a name="l00177"></a>00177   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00178"></a>00178 
<a name="l00179"></a>00179   <span class="comment">// Get size of compressed data</span>
<a name="l00180"></a>00180   <span class="keywordtype">int</span> *compressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00181"></a>00181   <span class="keywordtype">int</span> compressed_size = *compressed_size_p;
<a name="l00182"></a>00182   input += <span class="keyword">sizeof</span>(int);
<a name="l00183"></a>00183   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185   <span class="comment">// Uncompress data</span>
<a name="l00186"></a>00186   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00187"></a>00187   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00188"></a>00188   <a class="code" href="fadc__compress_8cpp.html#a85fdd63aef3c4c46f449b365c3d31bc5">decode_fadc</a>(&amp;input_buffer, output, uncompressed_size);
<a name="l00189"></a>00189   input += compressed_size;
<a name="l00190"></a>00190   input_size -= compressed_size;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="keywordflow">return</span> uncompressed_size * <span class="keyword">sizeof</span>(<a class="code" href="structfadc__word.html">fadc_word</a>);
<a name="l00193"></a>00193 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a97dd8d8818f350f6d7cbcff039b87184"></a><!-- doxytag: member="mucap_compress.h::fadc_load" ref="a97dd8d8818f350f6d7cbcff039b87184" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fadc_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fadc__compress_8cpp_source.html#l00029">29</a> of file <a class="el" href="fadc__compress_8cpp_source.html">fadc_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="huffman_8cpp_source.html#l00305">huffman_init_default()</a>, <a class="el" href="huffman_8cpp_source.html#l00429">load_huffman()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00016">should_compress_fadc</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00030"></a>00030 {
<a name="l00031"></a>00031   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="fadc__compress_8cpp.html#a352b2a6a9acd731b42daa2987d513272">fadc_run_huffman</a>, 32);
<a name="l00032"></a>00032   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="fadc__compress_8cpp.html#a46892afbe19f20dc7106961045e80932">fadc_small_huffman</a>, 9);
<a name="l00033"></a>00033 
<a name="l00034"></a>00034   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/FADC/Huffman/Run&quot;</span>, &amp;<a class="code" href="fadc__compress_8cpp.html#a352b2a6a9acd731b42daa2987d513272">fadc_run_huffman</a>);
<a name="l00035"></a>00035   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/FADC/Huffman/Small&quot;</span>, &amp;<a class="code" href="fadc__compress_8cpp.html#a46892afbe19f20dc7106961045e80932">fadc_small_huffman</a>);
<a name="l00036"></a>00036 
<a name="l00037"></a>00037   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00038"></a>00038   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/FADC/Enabled&quot;</span>, &amp;<a class="code" href="fadc__compress_8cpp.html#af6b7be055ab2104fefa3a1f3dc8644a2">should_compress_fadc</a>,
<a name="l00039"></a>00039     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00040"></a>00040 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a45a91046e07196d9388e44a722ba210e"></a><!-- doxytag: member="mucap_compress.h::fadc_optimize" ref="a45a91046e07196d9388e44a722ba210e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fadc_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fadc__compress_8cpp_source.html#l00020">20</a> of file <a class="el" href="fadc__compress_8cpp_source.html">fadc_compress.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00200">huffman_optimize_tree()</a>, and <a class="el" href="huffman_8cpp_source.html#l00321">save_huffman()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00390">compress_optimize_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00021"></a>00021 {
<a name="l00022"></a>00022   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="fadc__compress_8cpp.html#a352b2a6a9acd731b42daa2987d513272">fadc_run_huffman</a>);
<a name="l00023"></a>00023   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="fadc__compress_8cpp.html#a46892afbe19f20dc7106961045e80932">fadc_small_huffman</a>);
<a name="l00024"></a>00024 
<a name="l00025"></a>00025   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/FADC/Huffman/Run&quot;</span>, &amp;<a class="code" href="fadc__compress_8cpp.html#a352b2a6a9acd731b42daa2987d513272">fadc_run_huffman</a>);
<a name="l00026"></a>00026   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/FADC/Huffman/Small&quot;</span>, &amp;<a class="code" href="fadc__compress_8cpp.html#a46892afbe19f20dc7106961045e80932">fadc_small_huffman</a>);
<a name="l00027"></a>00027 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af53dac5c67e861179d7a37f3cbe75961"></a><!-- doxytag: member="mucap_compress.h::flush_output_buffer" ref="af53dac5c67e861179d7a37f3cbe75961" args="(io_buffer *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int flush_output_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="io__buffer_8cpp_source.html#l00023">23</a> of file <a class="el" href="io__buffer_8cpp_source.html">io_buffer.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00008">io_buffer::num_codes</a>, <a class="el" href="mucap__compress_8h_source.html#l00007">io_buffer::p</a>, <a class="el" href="mucap__compress_8h_source.html#l00006">io_buffer::start</a>, <a class="el" href="mucap__compress_8h_source.html#l00004">io_buffer::w</a>, and <a class="el" href="mucap__compress_8h_source.html#l00005">io_buffer::w_bits</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00043">encode_caen()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00081">encode_cmp_times()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00042">encode_fadc()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00034">encode_hits()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00031">encode_n2fadc_ndet()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00031">encode_n2fadc_tpc()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00031">encode_nfadc()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00046">encode_times()</a>, and <a class="el" href="rle_8cpp_source.html#l00103">flush_rle()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00024"></a>00024 {
<a name="l00025"></a>00025   <span class="comment">// store the last word</span>
<a name="l00026"></a>00026   *((buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a>)++) = buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &lt;&lt; buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a>;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028   <span class="comment">// remember the length of the buffer, in bytes and in codes</span>
<a name="l00029"></a>00029   *(buffer-&gt;<a class="code" href="structio__buffer.html#a254d4c17decf53510bbe592463c0568b">start</a>) = buffer-&gt;<a class="code" href="structio__buffer.html#ac161bad76549a663121121346d803ff7">num_codes</a>;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031   <span class="comment">//return ((unsigned int) buffer-&gt;p) - ((unsigned int) buffer-&gt;start);</span>
<a name="l00032"></a>00032   return (<span class="keywordtype">int</span>) (((<span class="keywordtype">char</span> *) buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a>) - ((<span class="keywordtype">char</span> *) buffer-&gt;<a class="code" href="structio__buffer.html#a254d4c17decf53510bbe592463c0568b">start</a>));
<a name="l00033"></a>00033 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a046b47629347b32d4988db528e7ea64a"></a><!-- doxytag: member="mucap_compress.h::flush_rle" ref="a046b47629347b32d4988db528e7ea64a" args="(rle_state *s, io_buffer *output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int flush_rle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrle__state.html">rle_state</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rle_8cpp_source.html#l00103">103</a> of file <a class="el" href="rle_8cpp_source.html">rle.cpp</a>.</p>

<p>References <a class="el" href="io__buffer_8cpp_source.html#l00023">flush_output_buffer()</a>, <a class="el" href="mucap__compress_8h_source.html#l00046">rle_state::huffman</a>, <a class="el" href="mucap__compress_8h_source.html#l00044">rle_state::huffman_length</a>, <a class="el" href="huffman_8cpp_source.html#l00028">huffman_put_symbol()</a>, <a class="el" href="io__buffer_8cpp_source.html#l00036">io_buffer_put()</a>, <a class="el" href="mucap__compress_8h_source.html#l00043">rle_state::run_length</a>, and <a class="el" href="mucap__compress_8h_source.html#l00042">rle_state::running_digit</a>.</p>

<p>Referenced by <a class="el" href="stck__compress_8cpp_source.html#l00137">encode_bits()</a>, and <a class="el" href="comp__compress_8cpp_source.html#l00054">encode_cmp_bits()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00104"></a>00104 {
<a name="l00105"></a>00105   <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> != 0) {
<a name="l00106"></a>00106       <span class="keywordflow">if</span>(s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> &lt; s-&gt;<a class="code" href="structrle__state.html#a05a8d5da678c963bd89d8f321b7381ba">huffman_length</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>]) {
<a name="l00107"></a>00107         <a class="code" href="huffman_8cpp.html#a81a23f1eabc888ce48ec931fb80b1179">huffman_put_symbol</a>(&amp;s-&gt;<a class="code" href="structrle__state.html#a201e54d8a893857d6933bb7e9f2a0051">huffman</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>], output, s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>);
<a name="l00108"></a>00108       } <span class="keywordflow">else</span> {
<a name="l00109"></a>00109         <a class="code" href="huffman_8cpp.html#a81a23f1eabc888ce48ec931fb80b1179">huffman_put_symbol</a>(&amp;s-&gt;<a class="code" href="structrle__state.html#a201e54d8a893857d6933bb7e9f2a0051">huffman</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>], output, s-&gt;<a class="code" href="structrle__state.html#a05a8d5da678c963bd89d8f321b7381ba">huffman_length</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>]);
<a name="l00110"></a>00110         <a class="code" href="io__buffer_8cpp.html#a7050a18b99c505bf329251c5dc435604">io_buffer_put</a>(output, s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>, 24);
<a name="l00111"></a>00111       }
<a name="l00112"></a>00112   }
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   <span class="keywordflow">return</span> <a class="code" href="io__buffer_8cpp.html#af53dac5c67e861179d7a37f3cbe75961">flush_output_buffer</a>(output);
<a name="l00115"></a>00115 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af1013190f361853fc63838396c6fa13d"></a><!-- doxytag: member="mucap_compress.h::hits_compress" ref="af1013190f361853fc63838396c6fa13d" args="(channel_hit *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hits_compress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchannel__hit.html">channel_hit</a> *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hits__compress_8cpp_source.html#l00077">77</a> of file <a class="el" href="hits__compress_8cpp_source.html">hits_compress.cpp</a>.</p>

<p>References <a class="el" href="hits__compress_8cpp_source.html#l00034">encode_hits()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00078"></a>00078 {
<a name="l00079"></a>00079   input_size /= <span class="keyword">sizeof</span>(<a class="code" href="structchannel__hit.html">channel_hit</a>);
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00082"></a>00082 
<a name="l00083"></a>00083   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="comment">// reserve space for size of uncompressed data (may be different from</span>
<a name="l00086"></a>00086   <span class="comment">// input size, since some hits may be stripped)</span>
<a name="l00087"></a>00087   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00088"></a>00088   output += <span class="keyword">sizeof</span>(int);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   <span class="comment">// reserve space for the size of the compressed data</span>
<a name="l00091"></a>00091   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00092"></a>00092   output += <span class="keyword">sizeof</span>(int);
<a name="l00093"></a>00093 
<a name="l00094"></a>00094   <span class="comment">// compress times</span>
<a name="l00095"></a>00095   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00096"></a>00096   <span class="keywordtype">int</span> compressed_time_size =
<a name="l00097"></a>00097       <a class="code" href="hits__compress_8cpp.html#ae78cb710270373d18894dbbd263aa9b6">encode_hits</a>(input, input_size, &amp;output_buffer, uncompressed_size_p);
<a name="l00098"></a>00098   output += compressed_time_size;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   <span class="comment">// store size of compressed times</span>
<a name="l00101"></a>00101   *compressed_time_size_p = compressed_time_size;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   <span class="keywordflow">return</span> compressed_time_size + 2 * <span class="keyword">sizeof</span>(int);
<a name="l00104"></a>00104 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aef2def428cc0defbfd450b19d4171965"></a><!-- doxytag: member="mucap_compress.h::hits_expand" ref="aef2def428cc0defbfd450b19d4171965" args="(unsigned char *input, int input_size, channel_hit *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hits_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchannel__hit.html">channel_hit</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hits__compress_8cpp_source.html#l00148">148</a> of file <a class="el" href="hits__compress_8cpp_source.html">hits_compress.cpp</a>.</p>

<p>References <a class="el" href="hits__compress_8cpp_source.html#l00106">decode_hits()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00149"></a>00149 {
<a name="l00150"></a>00150   <span class="comment">// </span>
<a name="l00151"></a>00151   <span class="comment">// Uncompress the data produced by hits_compress().</span>
<a name="l00152"></a>00152   <span class="comment">// </span>
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00155"></a>00155 
<a name="l00156"></a>00156   <span class="comment">// Get uncompressed data size</span>
<a name="l00157"></a>00157   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00158"></a>00158   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00159"></a>00159   input += <span class="keyword">sizeof</span>(int);
<a name="l00160"></a>00160   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   <span class="comment">// Get size of compressed time data</span>
<a name="l00163"></a>00163   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00164"></a>00164   <span class="keywordtype">int</span> compressed_time_size = *compressed_time_size_p;
<a name="l00165"></a>00165   input += <span class="keyword">sizeof</span>(int);
<a name="l00166"></a>00166   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   <span class="comment">// Uncompress times</span>
<a name="l00169"></a>00169   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00170"></a>00170   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00171"></a>00171   <a class="code" href="hits__compress_8cpp.html#a9d6a0529b2274fbdc238bad4962da18b">decode_hits</a>(&amp;input_buffer, output);
<a name="l00172"></a>00172   input += compressed_time_size;
<a name="l00173"></a>00173   input_size -= compressed_time_size;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175   <span class="keywordflow">return</span> uncompressed_size * <span class="keyword">sizeof</span>(<a class="code" href="structchannel__hit.html">channel_hit</a>);
<a name="l00176"></a>00176 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5261d1557630b2927f4f8e610fce4471"></a><!-- doxytag: member="mucap_compress.h::hits_load" ref="a5261d1557630b2927f4f8e610fce4471" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hits_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hits__compress_8cpp_source.html#l00024">24</a> of file <a class="el" href="hits__compress_8cpp_source.html">hits_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="huffman_8cpp_source.html#l00305">huffman_init_default()</a>, <a class="el" href="huffman_8cpp_source.html#l00429">load_huffman()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00016">should_compress_hits</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00025"></a>00025 {
<a name="l00026"></a>00026   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="hits__compress_8cpp.html#a0c5389662e9b425377dea9e884b1314d">hits_parameter_huffman</a>, 322);
<a name="l00027"></a>00027   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/HITS/Huffman/Parameter&quot;</span>, &amp;<a class="code" href="hits__compress_8cpp.html#a0c5389662e9b425377dea9e884b1314d">hits_parameter_huffman</a>);
<a name="l00028"></a>00028 
<a name="l00029"></a>00029   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00030"></a>00030   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/HITS/Enabled&quot;</span>, &amp;<a class="code" href="hits__compress_8cpp.html#aff2faa4abb9c4b33915fa7258109c167">should_compress_hits</a>, 
<a name="l00031"></a>00031     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00032"></a>00032 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6b63caa67d3395d68399fcc83d37f986"></a><!-- doxytag: member="mucap_compress.h::hits_optimize" ref="a6b63caa67d3395d68399fcc83d37f986" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hits_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="hits__compress_8cpp_source.html#l00018">18</a> of file <a class="el" href="hits__compress_8cpp_source.html">hits_compress.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00200">huffman_optimize_tree()</a>, and <a class="el" href="huffman_8cpp_source.html#l00321">save_huffman()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00405">compress_optimize_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00019"></a>00019 {
<a name="l00020"></a>00020   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="hits__compress_8cpp.html#a0c5389662e9b425377dea9e884b1314d">hits_parameter_huffman</a>);
<a name="l00021"></a>00021   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/HITS/Huffman/Parameter&quot;</span>, &amp;<a class="code" href="hits__compress_8cpp.html#a0c5389662e9b425377dea9e884b1314d">hits_parameter_huffman</a>);
<a name="l00022"></a>00022 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad6be44228ca3e1de5375487dc336b73d"></a><!-- doxytag: member="mucap_compress.h::huffman_get_symbol" ref="ad6be44228ca3e1de5375487dc336b73d" args="(huffman_table *table, io_buffer *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int huffman_get_symbol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhuffman__table.html">huffman_table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="huffman_8cpp_source.html#l00087">87</a> of file <a class="el" href="huffman_8cpp_source.html">huffman.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00017">huffman_node::branch0</a>, <a class="el" href="huffman_8cpp_source.html#l00018">huffman_node::branch1</a>, <a class="el" href="mucap__compress_8h_source.html#l00026">huffman_table::code_length</a>, <a class="el" href="mucap__compress_8h_source.html#l00028">huffman_table::decode_symbols</a>, <a class="el" href="mucap__compress_8h_source.html#l00008">io_buffer::num_codes</a>, <a class="el" href="mucap__compress_8h_source.html#l00007">io_buffer::p</a>, <a class="el" href="huffman_8cpp_source.html#l00023">huffman_node::symbol</a>, <a class="el" href="mucap__compress_8h_source.html#l00027">huffman_table::tree</a>, <a class="el" href="mucap__compress_8h_source.html#l00004">io_buffer::w</a>, and <a class="el" href="mucap__compress_8h_source.html#l00005">io_buffer::w_bits</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00156">decode_caen()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00183">decode_cmp_times()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00120">decode_fadc()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00106">decode_hits()</a>, <a class="el" href="tdc400__compress_8cpp_source.html#l00133">decode_times()</a>, and <a class="el" href="rle_8cpp_source.html#l00117">rle_get()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00088"></a>00088 {
<a name="l00089"></a>00089   <span class="comment">// Get the next symbol from a Huffman-coded buffer.  Again, this </span>
<a name="l00090"></a>00090   <span class="comment">// function is in an inner loop and therefore performance-critical.</span>
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="keywordflow">if</span> (buffer-&gt;<a class="code" href="structio__buffer.html#ac161bad76549a663121121346d803ff7">num_codes</a> &lt;= 0) {
<a name="l00093"></a>00093     <span class="keywordflow">return</span> -1;
<a name="l00094"></a>00094   }
<a name="l00095"></a>00095   buffer-&gt;<a class="code" href="structio__buffer.html#ac161bad76549a663121121346d803ff7">num_codes</a>--;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="comment">// If we have at least 8 bits pre-read from the buffer, then check the</span>
<a name="l00098"></a>00098   <span class="comment">// table of pre-computed short symbols.</span>
<a name="l00099"></a>00099   <span class="keywordflow">if</span>(buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> &gt;= 8) {
<a name="l00100"></a>00100     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> byte = (buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &gt;&gt; 24) &amp; 0xff;
<a name="l00101"></a>00101     <span class="keywordtype">int</span> symbol = table-&gt;<a class="code" href="structhuffman__table.html#adcf6bb1bfc5f919fd21bc3c2daf12b19">decode_symbols</a>[byte];
<a name="l00102"></a>00102     <span class="keywordflow">if</span>(symbol != -1) {
<a name="l00103"></a>00103       <span class="keywordtype">int</span> code_length = table-&gt;<a class="code" href="structhuffman__table.html#a7c3ba9d9d06ae04789db8ec7f487d232">code_length</a>[symbol];
<a name="l00104"></a>00104       buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &lt;&lt;= code_length;
<a name="l00105"></a>00105       buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> -= code_length;
<a name="l00106"></a>00106       <span class="keywordflow">return</span> symbol; 
<a name="l00107"></a>00107     } 
<a name="l00108"></a>00108   }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110   <span class="comment">// Otherwise, do it the slow way, walking bit-by-bit through the tree</span>
<a name="l00111"></a>00111   <a class="code" href="structhuffman__node.html">huffman_node</a> *node = table-&gt;<a class="code" href="structhuffman__table.html#a912470f90dc4ac4d036f352b08c0b079">tree</a>;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113   <span class="keywordflow">while</span> (1) {
<a name="l00114"></a>00114     <span class="comment">// We may already be there...</span>
<a name="l00115"></a>00115     <span class="keywordflow">if</span> (node-&gt;<a class="code" href="structhuffman__node.html#a23d802c0a18b9faa5d6a918e8d92df44">symbol</a> != -1) {
<a name="l00116"></a>00116       <span class="keywordflow">return</span> node-&gt;<a class="code" href="structhuffman__node.html#a23d802c0a18b9faa5d6a918e8d92df44">symbol</a>;
<a name="l00117"></a>00117     } <span class="keywordflow">else</span> {
<a name="l00118"></a>00118       <span class="comment">// If not, consume a bit from the input and follow the tree</span>
<a name="l00119"></a>00119       <span class="keywordflow">if</span> (buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> == 0) {
<a name="l00120"></a>00120         buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = *((buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a>)++);
<a name="l00121"></a>00121         buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> = 32;
<a name="l00122"></a>00122       }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bit = buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &amp; (1u &lt;&lt; 31);
<a name="l00125"></a>00125       buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &lt;&lt;= 1;
<a name="l00126"></a>00126       buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a>--;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128       <span class="keywordflow">if</span> (bit == 0) {
<a name="l00129"></a>00129         node = node-&gt;<a class="code" href="structhuffman__node.html#a5aaaf002d5c5fd7c98360bed5cda3c67">branch0</a>;
<a name="l00130"></a>00130       } <span class="keywordflow">else</span> {
<a name="l00131"></a>00131         node = node-&gt;<a class="code" href="structhuffman__node.html#a20d1ee510569d1959da33dbe369bad59">branch1</a>;
<a name="l00132"></a>00132       }
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134   }
<a name="l00135"></a>00135 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa1243022907f8d3c575a6a842eb8cff2"></a><!-- doxytag: member="mucap_compress.h::huffman_init_default" ref="aa1243022907f8d3c575a6a842eb8cff2" args="(huffman_table *table, int num_symbols)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void huffman_init_default </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhuffman__table.html">huffman_table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_symbols</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="huffman_8cpp_source.html#l00305">305</a> of file <a class="el" href="huffman_8cpp_source.html">huffman.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00025">huffman_table::code_bits</a>, <a class="el" href="mucap__compress_8h_source.html#l00026">huffman_table::code_length</a>, <a class="el" href="mucap__compress_8h_source.html#l00024">huffman_table::frequency</a>, <a class="el" href="huffman_8cpp_source.html#l00200">huffman_optimize_tree()</a>, <a class="el" href="mzdump_8c_source.html#l00129">i</a>, <a class="el" href="mucap__compress_8h_source.html#l00023">huffman_table::num_symbols</a>, and <a class="el" href="mucap__compress_8h_source.html#l00027">huffman_table::tree</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00025">caen_load()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00029">comp_load()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00029">fadc_load()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00024">hits_load()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00032">stck_load()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00030">tdc400_load()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00306"></a>00306 {
<a name="l00307"></a>00307   table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a> = num_symbols;
<a name="l00308"></a>00308   table-&gt;<a class="code" href="structhuffman__table.html#afd9ab6266a0211dce30fdf9246c0a7df">frequency</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[num_symbols];
<a name="l00309"></a>00309   table-&gt;<a class="code" href="structhuffman__table.html#a4a10010f66a0d6bf532958c64c163773">code_bits</a> = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>[num_symbols];
<a name="l00310"></a>00310   table-&gt;<a class="code" href="structhuffman__table.html#a7c3ba9d9d06ae04789db8ec7f487d232">code_length</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[num_symbols];
<a name="l00311"></a>00311   table-&gt;<a class="code" href="structhuffman__table.html#a912470f90dc4ac4d036f352b08c0b079">tree</a> = NULL;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   <span class="comment">// Assume that all symbols have equal probability </span>
<a name="l00314"></a>00314   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> &lt; num_symbols; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>++) {
<a name="l00315"></a>00315     table-&gt;<a class="code" href="structhuffman__table.html#afd9ab6266a0211dce30fdf9246c0a7df">frequency</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>] = 1;
<a name="l00316"></a>00316   }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(table);
<a name="l00319"></a>00319 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2d64cbf0373bf8d62a5ddbb6aa372170"></a><!-- doxytag: member="mucap_compress.h::huffman_optimize_tree" ref="a2d64cbf0373bf8d62a5ddbb6aa372170" args="(huffman_table *table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL huffman_optimize_tree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhuffman__table.html">huffman_table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="huffman_8cpp_source.html#l00200">200</a> of file <a class="el" href="huffman_8cpp_source.html">huffman.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00017">huffman_node::branch0</a>, <a class="el" href="huffman_8cpp_source.html#l00018">huffman_node::branch1</a>, <a class="el" href="mucap__compress_8h_source.html#l00026">huffman_table::code_length</a>, <a class="el" href="mucap__compress_8h_source.html#l00024">huffman_table::frequency</a>, <a class="el" href="huffman_8cpp_source.html#l00024">huffman_node::frequency</a>, <a class="el" href="huffman_8cpp_source.html#l00176">huffman_node_compare()</a>, <a class="el" href="huffman_8cpp_source.html#l00137">huffman_precompute_decode()</a>, <a class="el" href="huffman_8cpp_source.html#l00185">huffman_visit()</a>, <a class="el" href="mzdump_8c_source.html#l00129">i</a>, <a class="el" href="huffman_8cpp_source.html#l00021">huffman_node::next</a>, <a class="el" href="mucap__compress_8h_source.html#l00023">huffman_table::num_symbols</a>, <a class="el" href="mvmestd_8h_source.html#l00045">SUCCESS</a>, <a class="el" href="huffman_8cpp_source.html#l00023">huffman_node::symbol</a>, and <a class="el" href="mucap__compress_8h_source.html#l00027">huffman_table::tree</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00019">caen_optimize()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00018">comp_optimize()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00020">fadc_optimize()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00018">hits_optimize()</a>, <a class="el" href="huffman_8cpp_source.html#l00305">huffman_init_default()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00022">stck_optimize()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00019">tdc400_optimize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00201"></a>00201 {
<a name="l00202"></a>00202   <span class="comment">// Start by allocating terminal nodes for the symbols.</span>
<a name="l00203"></a>00203   <a class="code" href="structhuffman__node.html">huffman_node</a> *terminals[table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>];
<a name="l00204"></a>00204   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> &lt; table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>++) {
<a name="l00205"></a>00205     <a class="code" href="structhuffman__node.html">huffman_node</a> *node = <span class="keyword">new</span> <a class="code" href="structhuffman__node.html">huffman_node</a>;
<a name="l00206"></a>00206     node-&gt;<a class="code" href="structhuffman__node.html#a5aaaf002d5c5fd7c98360bed5cda3c67">branch0</a> = NULL;
<a name="l00207"></a>00207     node-&gt;<a class="code" href="structhuffman__node.html#a20d1ee510569d1959da33dbe369bad59">branch1</a> = NULL;
<a name="l00208"></a>00208     node-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> = NULL;
<a name="l00209"></a>00209     node-&gt;<a class="code" href="structhuffman__node.html#a23d802c0a18b9faa5d6a918e8d92df44">symbol</a> = <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>;
<a name="l00210"></a>00210     node-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a> = table-&gt;<a class="code" href="structhuffman__table.html#afd9ab6266a0211dce30fdf9246c0a7df">frequency</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>];
<a name="l00211"></a>00211     terminals[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>] = node;
<a name="l00212"></a>00212   }
<a name="l00213"></a>00213 
<a name="l00214"></a>00214   <span class="comment">// Now sort the array of terminals by frequency.</span>
<a name="l00215"></a>00215   qsort(terminals, table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>,
<a name="l00216"></a>00216         <span class="keyword">sizeof</span>(<a class="code" href="structhuffman__node.html">huffman_node</a> *), <a class="code" href="huffman_8cpp.html#a3883fdf325b315e85b18d3d3d1784d52">huffman_node_compare</a>);
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   <span class="comment">// Set up the linked list pointers</span>
<a name="l00219"></a>00219   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> &lt; table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a> - 1; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>++) {
<a name="l00220"></a>00220     terminals[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>]-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> = terminals[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> + 1];
<a name="l00221"></a>00221   }
<a name="l00222"></a>00222   <a class="code" href="structhuffman__node.html">huffman_node</a> *root = terminals[0];
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="comment">// Now repeat: draw the two least probable nodes </span>
<a name="l00225"></a>00225   <span class="comment">// and combine them, sorting the resulting combination</span>
<a name="l00226"></a>00226   <span class="comment">// into the correct position in the list.</span>
<a name="l00227"></a>00227   <span class="keywordflow">while</span> (root-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> != NULL) {
<a name="l00228"></a>00228     <a class="code" href="structhuffman__node.html">huffman_node</a> *node0 = root;
<a name="l00229"></a>00229     <a class="code" href="structhuffman__node.html">huffman_node</a> *node1 = node0-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a>;
<a name="l00230"></a>00230     root = node1-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a>;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     <a class="code" href="structhuffman__node.html">huffman_node</a> *combined = <span class="keyword">new</span> <a class="code" href="structhuffman__node.html">huffman_node</a>;
<a name="l00233"></a>00233     combined-&gt;<a class="code" href="structhuffman__node.html#a5aaaf002d5c5fd7c98360bed5cda3c67">branch0</a> = node0;
<a name="l00234"></a>00234     combined-&gt;<a class="code" href="structhuffman__node.html#a20d1ee510569d1959da33dbe369bad59">branch1</a> = node1;
<a name="l00235"></a>00235     combined-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> = NULL;
<a name="l00236"></a>00236     combined-&gt;<a class="code" href="structhuffman__node.html#a23d802c0a18b9faa5d6a918e8d92df44">symbol</a> = -1;
<a name="l00237"></a>00237     combined-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a> = node0-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a> + node1-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a>;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (root == NULL) {
<a name="l00240"></a>00240       root = combined;
<a name="l00241"></a>00241     } <span class="keywordflow">else</span> {
<a name="l00242"></a>00242       <span class="comment">// Search through the list to find the right position for the</span>
<a name="l00243"></a>00243       <span class="comment">// new </span>
<a name="l00244"></a>00244       <span class="comment">// node, and put it there.</span>
<a name="l00245"></a>00245       <a class="code" href="structhuffman__node.html">huffman_node</a> *pos = root;
<a name="l00246"></a>00246       <a class="code" href="structhuffman__node.html">huffman_node</a> *prev = NULL;
<a name="l00247"></a>00247       <span class="keywordflow">while</span> (pos != NULL) {
<a name="l00248"></a>00248         <span class="keywordflow">if</span> (combined-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a> &lt;= pos-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a>) {
<a name="l00249"></a>00249           combined-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> = pos;
<a name="l00250"></a>00250           <span class="keywordflow">if</span> (prev != NULL) {
<a name="l00251"></a>00251             prev-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> = combined;
<a name="l00252"></a>00252           } <span class="keywordflow">else</span> {
<a name="l00253"></a>00253             root = combined;
<a name="l00254"></a>00254           }
<a name="l00255"></a>00255           <span class="keywordflow">break</span>;
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257         prev = pos;
<a name="l00258"></a>00258         pos = pos-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a>;
<a name="l00259"></a>00259       }
<a name="l00260"></a>00260 
<a name="l00261"></a>00261       <span class="keywordflow">if</span> (pos == NULL) {
<a name="l00262"></a>00262         combined-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> = NULL;
<a name="l00263"></a>00263         prev-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a> = combined;
<a name="l00264"></a>00264       }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00267"></a>00267 <span class="preprocessor"></span>      <span class="comment">// Check that we didn&apos;t screw up</span>
<a name="l00268"></a>00268       pos = root;
<a name="l00269"></a>00269       prev = NULL;
<a name="l00270"></a>00270       <span class="keywordtype">int</span> node_count = 0;
<a name="l00271"></a>00271       <span class="keywordflow">while</span> (pos != NULL) {
<a name="l00272"></a>00272         <span class="keywordflow">if</span> (prev != NULL &amp;&amp; pos-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a> &lt; prev-&gt;<a class="code" href="structhuffman__node.html#a20f5249c926844e584656771f83f0f76">frequency</a>) {
<a name="l00273"></a>00273           cm_msg(MERROR, <span class="stringliteral">&quot;huffman_optimize_tree&quot;</span>, <span class="stringliteral">&quot;List out of order&quot;</span>);
<a name="l00274"></a>00274           <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00275"></a>00275         }
<a name="l00276"></a>00276         prev = pos;
<a name="l00277"></a>00277         pos = pos-&gt;<a class="code" href="structhuffman__node.html#a5bd1f58302d9562a082ea2c382281ec0">next</a>;
<a name="l00278"></a>00278         node_count++;
<a name="l00279"></a>00279       }
<a name="l00280"></a>00280 <span class="preprocessor">#endif</span>
<a name="l00281"></a>00281 <span class="preprocessor"></span>    }
<a name="l00282"></a>00282   }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   table-&gt;<a class="code" href="structhuffman__table.html#a912470f90dc4ac4d036f352b08c0b079">tree</a> = root;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286   <span class="comment">// Now we have the tree; read off the codes by recursively visiting </span>
<a name="l00287"></a>00287   <span class="comment">// each node.</span>
<a name="l00288"></a>00288   <a class="code" href="huffman_8cpp.html#a17420f8ab91e612fccde05b9d88b871b">huffman_visit</a>(table, root, 0, 0);
<a name="l00289"></a>00289 
<a name="l00290"></a>00290   <span class="comment">// Check that the number of bits used by each key is less than 32.</span>
<a name="l00291"></a>00291   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> &lt; table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>++) {
<a name="l00292"></a>00292     <span class="keywordflow">if</span>(table-&gt;<a class="code" href="structhuffman__table.html#a7c3ba9d9d06ae04789db8ec7f487d232">code_length</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>] &gt; 32) {
<a name="l00293"></a>00293       cm_msg(MERROR, <span class="stringliteral">&quot;huffman_optimize_tree&quot;</span>, 
<a name="l00294"></a>00294         <span class="stringliteral">&quot;Code length for symbol %d is too long (%d bits)&quot;</span>, <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, 
<a name="l00295"></a>00295         table-&gt;<a class="code" href="structhuffman__table.html#a7c3ba9d9d06ae04789db8ec7f487d232">code_length</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>]);
<a name="l00296"></a>00296       <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298   }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300   <a class="code" href="huffman_8cpp.html#af9ba9de7ed5659a00c8beaa15bdc5eb6">huffman_precompute_decode</a>(table);
<a name="l00301"></a>00301 
<a name="l00302"></a>00302   <span class="keywordflow">return</span> <a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00303"></a>00303 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a81a23f1eabc888ce48ec931fb80b1179"></a><!-- doxytag: member="mucap_compress.h::huffman_put_symbol" ref="a81a23f1eabc888ce48ec931fb80b1179" args="(huffman_table *table, io_buffer *buffer, int symbol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void huffman_put_symbol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhuffman__table.html">huffman_table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>symbol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="huffman_8cpp_source.html#l00028">28</a> of file <a class="el" href="huffman_8cpp_source.html">huffman.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00025">huffman_table::code_bits</a>, <a class="el" href="mucap__compress_8h_source.html#l00026">huffman_table::code_length</a>, <a class="el" href="mucap__compress_8h_source.html#l00024">huffman_table::frequency</a>, <a class="el" href="io__buffer_8cpp_source.html#l00036">io_buffer_put()</a>, and <a class="el" href="mucap__compress_8h_source.html#l00008">io_buffer::num_codes</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00043">encode_caen()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00081">encode_cmp_times()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00042">encode_fadc()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00034">encode_hits()</a>, <a class="el" href="tdc400__compress_8cpp_source.html#l00074">encode_times()</a>, <a class="el" href="rle_8cpp_source.html#l00103">flush_rle()</a>, and <a class="el" href="rle_8cpp_source.html#l00066">rle_put()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00029"></a>00029 {
<a name="l00030"></a>00030   <span class="comment">// Huffman encode a single symbol and send it to an output buffer.</span>
<a name="l00031"></a>00031   <span class="comment">// This function is in an inner loop and therefore</span>
<a name="l00032"></a>00032   <span class="comment">// performance-critical.</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034   <span class="comment">// Update the frequency count for this symbol.</span>
<a name="l00035"></a>00035   table-&gt;<a class="code" href="structhuffman__table.html#afd9ab6266a0211dce30fdf9246c0a7df">frequency</a>[symbol]++;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037   <span class="comment">// Get the code corresponding to this symbol.</span>
<a name="l00038"></a>00038   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> code_bits = table-&gt;<a class="code" href="structhuffman__table.html#a4a10010f66a0d6bf532958c64c163773">code_bits</a>[symbol];
<a name="l00039"></a>00039   <span class="keywordtype">int</span> code_length = table-&gt;<a class="code" href="structhuffman__table.html#a7c3ba9d9d06ae04789db8ec7f487d232">code_length</a>[symbol];
<a name="l00040"></a>00040 
<a name="l00041"></a>00041   <span class="comment">// Put it in the buffer</span>
<a name="l00042"></a>00042   <a class="code" href="io__buffer_8cpp.html#a7050a18b99c505bf329251c5dc435604">io_buffer_put</a>(buffer, code_bits, code_length);
<a name="l00043"></a>00043 
<a name="l00044"></a>00044   buffer-&gt;<a class="code" href="structio__buffer.html#ac161bad76549a663121121346d803ff7">num_codes</a>++;
<a name="l00045"></a>00045 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad72a17b4cdcccfde3419ab0cfc3bdf0a"></a><!-- doxytag: member="mucap_compress.h::io_buffer_get" ref="ad72a17b4cdcccfde3419ab0cfc3bdf0a" args="(io_buffer *buffer, int num_bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int io_buffer_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_bits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="io__buffer_8cpp_source.html#l00070">70</a> of file <a class="el" href="io__buffer_8cpp_source.html">io_buffer.cpp</a>.</p>

<p>References <a class="el" href="io__buffer_8cpp_source.html#l00070">io_buffer_get()</a>, <a class="el" href="mucap__compress_8h_source.html#l00007">io_buffer::p</a>, <a class="el" href="mucap__compress_8h_source.html#l00004">io_buffer::w</a>, and <a class="el" href="mucap__compress_8h_source.html#l00005">io_buffer::w_bits</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00156">decode_caen()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00183">decode_cmp_times()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00120">decode_fadc()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00106">decode_hits()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00114">decode_n2fadc_ndet()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00121">decode_n2fadc_tpc()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00125">decode_nfadc()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00101">decode_times()</a>, <a class="el" href="io__buffer_8cpp_source.html#l00070">io_buffer_get()</a>, and <a class="el" href="rle_8cpp_source.html#l00117">rle_get()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00071"></a>00071 {
<a name="l00072"></a>00072   <span class="keywordflow">if</span> (buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> == 0) {
<a name="l00073"></a>00073     buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = *((buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a>)++);
<a name="l00074"></a>00074     buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> = 32;
<a name="l00075"></a>00075   }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077   <span class="keywordtype">int</span> w_bits = buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a>;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> retval;
<a name="l00080"></a>00080   <span class="keywordflow">if</span> (num_bits &lt;= w_bits) {
<a name="l00081"></a>00081     retval = buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &gt;&gt; (32 - num_bits);
<a name="l00082"></a>00082     buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &lt;&lt; num_bits;
<a name="l00083"></a>00083     buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> = w_bits - num_bits;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   } <span class="keywordflow">else</span> {
<a name="l00086"></a>00086     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> first_part =
<a name="l00087"></a>00087         <a class="code" href="io__buffer_8cpp.html#ad72a17b4cdcccfde3419ab0cfc3bdf0a">io_buffer_get</a>(buffer, w_bits) &lt;&lt; (num_bits - w_bits);
<a name="l00088"></a>00088     retval = first_part | <a class="code" href="io__buffer_8cpp.html#ad72a17b4cdcccfde3419ab0cfc3bdf0a">io_buffer_get</a>(buffer, num_bits - w_bits);
<a name="l00089"></a>00089   }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091   <span class="keywordflow">return</span> retval;
<a name="l00092"></a>00092 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7050a18b99c505bf329251c5dc435604"></a><!-- doxytag: member="mucap_compress.h::io_buffer_put" ref="a7050a18b99c505bf329251c5dc435604" args="(io_buffer *buffer, unsigned int code_bits, int code_length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void io_buffer_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>code_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>code_length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="io__buffer_8cpp_source.html#l00036">36</a> of file <a class="el" href="io__buffer_8cpp_source.html">io_buffer.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00007">io_buffer::p</a>, <a class="el" href="mucap__compress_8h_source.html#l00004">io_buffer::w</a>, and <a class="el" href="mucap__compress_8h_source.html#l00005">io_buffer::w_bits</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00043">encode_caen()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00081">encode_cmp_times()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00042">encode_fadc()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00034">encode_hits()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00031">encode_n2fadc_ndet()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00031">encode_n2fadc_tpc()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00031">encode_nfadc()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00046">encode_times()</a>, <a class="el" href="rle_8cpp_source.html#l00103">flush_rle()</a>, <a class="el" href="huffman_8cpp_source.html#l00028">huffman_put_symbol()</a>, and <a class="el" href="rle_8cpp_source.html#l00066">rle_put()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00037"></a>00037 {
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   assert(code_length &gt; 0 &amp;&amp; code_length &lt; 32);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041   <span class="comment">// Does this symbol fit in our buffer word?</span>
<a name="l00042"></a>00042   <span class="keywordflow">if</span> (code_length &lt; buffer-&gt;w_bits) {
<a name="l00043"></a>00043     <span class="comment">// OK, so put it there...</span>
<a name="l00044"></a>00044     buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = (buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &lt;&lt; code_length) | code_bits;
<a name="l00045"></a>00045     buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> -= code_length;
<a name="l00046"></a>00046   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (code_length == buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a>) {
<a name="l00047"></a>00047     <span class="comment">// Only barely...write out the buffer word</span>
<a name="l00048"></a>00048     buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = (buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &lt;&lt; code_length) | code_bits;
<a name="l00049"></a>00049     *((buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a>)++) = buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a>;
<a name="l00050"></a>00050     buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> = 32;
<a name="l00051"></a>00051   } <span class="keywordflow">else</span> {
<a name="l00052"></a>00052     <span class="comment">// No, we&apos;ll have to split the code across two words.</span>
<a name="l00053"></a>00053     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> first_code_bits =
<a name="l00054"></a>00054         code_bits &gt;&gt; (code_length - buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a>);
<a name="l00055"></a>00055     *((buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a>)++) = (buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> &lt;&lt; buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a>) | first_code_bits;
<a name="l00056"></a>00056     buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = code_bits;
<a name="l00057"></a>00057     buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> = 32 - code_length + buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a>;
<a name="l00058"></a>00058   }
<a name="l00059"></a>00059 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5e92c1dfa160fcef488964550b48b79e"></a><!-- doxytag: member="mucap_compress.h::load_huffman" ref="a5e92c1dfa160fcef488964550b48b79e" args="(char *key_dir, huffman_table *table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL load_huffman </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhuffman__table.html">huffman_table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="huffman_8cpp_source.html#l00429">429</a> of file <a class="el" href="huffman_8cpp_source.html">huffman.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00025">huffman_table::code_bits</a>, <a class="el" href="mucap__compress_8h_source.html#l00026">huffman_table::code_length</a>, <a class="el" href="p30_8h_source.html#l00042">FALSE</a>, <a class="el" href="mucap__compress_8h_source.html#l00024">huffman_table::frequency</a>, <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="huffman_8cpp_source.html#l00376">huffman_build_tree()</a>, <a class="el" href="mzdump_8c_source.html#l00129">i</a>, <a class="el" href="mucap__compress_8h_source.html#l00023">huffman_table::num_symbols</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="mvmestd_8h_source.html#l00045">SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00025">caen_load()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00029">comp_load()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00029">fadc_load()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00024">hits_load()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00032">stck_load()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00030">tdc400_load()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00430"></a>00430 {
<a name="l00431"></a>00431   <span class="keywordtype">char</span> key_name[MAX_ODB_PATH];
<a name="l00432"></a>00432   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> &lt; table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>++) {
<a name="l00435"></a>00435     table-&gt;<a class="code" href="structhuffman__table.html#afd9ab6266a0211dce30fdf9246c0a7df">frequency</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>] = 1;
<a name="l00436"></a>00436   }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438   sprintf(key_name, <span class="stringliteral">&quot;%s/code_bits&quot;</span>, key_dir);
<a name="l00439"></a>00439   size = table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a> * <span class="keyword">sizeof</span>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>);
<a name="l00440"></a>00440   <span class="keywordtype">int</span> stat = db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, key_name, table-&gt;<a class="code" href="structhuffman__table.html#a4a10010f66a0d6bf532958c64c163773">code_bits</a>, &amp;size, 
<a name="l00441"></a>00441     TID_DWORD, <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>); 
<a name="l00442"></a>00442   <span class="keywordflow">if</span>(stat != DB_SUCCESS || size != table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a> * <span class="keyword">sizeof</span>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>)) {
<a name="l00443"></a>00443     cm_msg(MERROR, <span class="stringliteral">&quot;load_huffman&quot;</span>, <span class="stringliteral">&quot;Failed to load ODB key %s&quot;</span>, key_name);
<a name="l00444"></a>00444     <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00445"></a>00445   }
<a name="l00446"></a>00446 
<a name="l00447"></a>00447   sprintf(key_name, <span class="stringliteral">&quot;%s/code_length&quot;</span>, key_dir);
<a name="l00448"></a>00448   size = table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a> * <span class="keyword">sizeof</span>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>);
<a name="l00449"></a>00449   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, key_name, table-&gt;<a class="code" href="structhuffman__table.html#a7c3ba9d9d06ae04789db8ec7f487d232">code_length</a>, &amp;size, TID_DWORD, <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>); 
<a name="l00450"></a>00450   <span class="keywordflow">if</span>(stat != DB_SUCCESS || size != table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a> * <span class="keyword">sizeof</span>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>)) {
<a name="l00451"></a>00451     cm_msg(MERROR, <span class="stringliteral">&quot;load_huffman&quot;</span>, <span class="stringliteral">&quot;Failed to load ODB key %s&quot;</span>, key_name);
<a name="l00452"></a>00452     <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00453"></a>00453   }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455   <a class="code" href="huffman_8cpp.html#a0f7359f91e6e236e54aa5e3d8a6d33de">huffman_build_tree</a>(table);
<a name="l00456"></a>00456 
<a name="l00457"></a>00457   <span class="keywordflow">return</span> <a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00458"></a>00458 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9060a385e4d28af5f646fe51cc74e814"></a><!-- doxytag: member="mucap_compress.h::n2fadc_ndet_compress" ref="a9060a385e4d28af5f646fe51cc74e814" args="(unsigned char *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int n2fadc_ndet_compress </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00097">97</a> of file <a class="el" href="n2fadc__ndet__compress_8cpp_source.html">n2fadc_ndet_compress.cpp</a>.</p>

<p>References <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00031">encode_n2fadc_ndet()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, and <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00098"></a>00098 {
<a name="l00099"></a>00099   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101   <span class="comment">// store size of input data</span>
<a name="l00102"></a>00102   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00103"></a>00103   *uncompressed_size_p = input_size;
<a name="l00104"></a>00104   output += <span class="keyword">sizeof</span>(int);
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="comment">// compress samples</span>
<a name="l00107"></a>00107   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00108"></a>00108   <span class="keywordtype">int</span> compressed_size = <a class="code" href="n2fadc__ndet__compress_8cpp.html#a1348b6b669e1bae5379a3b2bb35cc6e4">encode_n2fadc_ndet</a>(input, input_size, &amp;output_buffer, userParam);
<a name="l00109"></a>00109   output += compressed_size;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111   <span class="keywordflow">return</span> compressed_size + <span class="keyword">sizeof</span>(int);
<a name="l00112"></a>00112 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a12b6cae2f43c25150ac744b029639959"></a><!-- doxytag: member="mucap_compress.h::n2fadc_ndet_expand" ref="a12b6cae2f43c25150ac744b029639959" args="(unsigned char *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int n2fadc_ndet_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00166">166</a> of file <a class="el" href="n2fadc__ndet__compress_8cpp_source.html">n2fadc_ndet_compress.cpp</a>.</p>

<p>References <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00114">decode_n2fadc_ndet()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00167"></a>00167 {
<a name="l00168"></a>00168   <span class="comment">// </span>
<a name="l00169"></a>00169   <span class="comment">// Uncompress the data produced by n2fadc_ndet_compress().</span>
<a name="l00170"></a>00170   <span class="comment">// </span>
<a name="l00171"></a>00171 
<a name="l00172"></a>00172   <span class="comment">// Get uncompressed data size</span>
<a name="l00173"></a>00173   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00174"></a>00174   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00175"></a>00175   input += <span class="keyword">sizeof</span>(int);
<a name="l00176"></a>00176   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <span class="comment">// Uncompress data</span>
<a name="l00179"></a>00179   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00180"></a>00180   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00181"></a>00181   <a class="code" href="n2fadc__ndet__compress_8cpp.html#a82d693dec1019e291be07b640b69de8a">decode_n2fadc_ndet</a>(&amp;input_buffer, output, uncompressed_size, userParam);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183   <span class="keywordflow">return</span> uncompressed_size; 
<a name="l00184"></a>00184 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaf9ead365e68c4c31d7fd320619c50a5"></a><!-- doxytag: member="mucap_compress.h::n2fadc_ndet_load" ref="aaf9ead365e68c4c31d7fd320619c50a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void n2fadc_ndet_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00024">24</a> of file <a class="el" href="n2fadc__ndet__compress_8cpp_source.html">n2fadc_ndet_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00014">should_compress_n2fadc_ndet</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00025"></a>00025 {
<a name="l00026"></a>00026   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00027"></a>00027   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/NFADC/Enabled&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a151c2cecd99176e9c48ba34d1c279658">should_compress_n2fadc_ndet</a>,
<a name="l00028"></a>00028     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00029"></a>00029 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2466c2fb04c759ac78a1dc9896acd942"></a><!-- doxytag: member="mucap_compress.h::n2fadc_ndet_optimize" ref="a2466c2fb04c759ac78a1dc9896acd942" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void n2fadc_ndet_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00020">20</a> of file <a class="el" href="n2fadc__ndet__compress_8cpp_source.html">n2fadc_ndet_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00390">compress_optimize_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00021"></a>00021 {
<a name="l00022"></a>00022 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0a87849d757dc54a5d625f65b0e3eb3a"></a><!-- doxytag: member="mucap_compress.h::n2fadc_tpc_compress" ref="a0a87849d757dc54a5d625f65b0e3eb3a" args="(unsigned char *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int n2fadc_tpc_compress </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00104">104</a> of file <a class="el" href="n2fadc__tpc__compress_8cpp_source.html">n2fadc_tpc_compress.cpp</a>.</p>

<p>References <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00031">encode_n2fadc_tpc()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, and <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00105"></a>00105 {
<a name="l00106"></a>00106   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   <span class="comment">// store size of input data</span>
<a name="l00109"></a>00109   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00110"></a>00110   *uncompressed_size_p = input_size;
<a name="l00111"></a>00111   output += <span class="keyword">sizeof</span>(int);
<a name="l00112"></a>00112 
<a name="l00113"></a>00113   <span class="comment">// compress samples</span>
<a name="l00114"></a>00114   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00115"></a>00115   <span class="keywordtype">int</span> compressed_size = <a class="code" href="n2fadc__tpc__compress_8cpp.html#ac7fc80c422a992fced716c7af744e681">encode_n2fadc_tpc</a>(input, input_size, &amp;output_buffer, userParam);
<a name="l00116"></a>00116   output += compressed_size;
<a name="l00117"></a>00117 
<a name="l00118"></a>00118   <span class="keywordflow">return</span> compressed_size + <span class="keyword">sizeof</span>(int);
<a name="l00119"></a>00119 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae06eddaa8d7752d09c7aeac6cc93a09d"></a><!-- doxytag: member="mucap_compress.h::n2fadc_tpc_expand" ref="ae06eddaa8d7752d09c7aeac6cc93a09d" args="(unsigned char *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int n2fadc_tpc_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00172">172</a> of file <a class="el" href="n2fadc__tpc__compress_8cpp_source.html">n2fadc_tpc_compress.cpp</a>.</p>

<p>References <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00121">decode_n2fadc_tpc()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 {
<a name="l00174"></a>00174   <span class="comment">// </span>
<a name="l00175"></a>00175   <span class="comment">// Uncompress the data produced by n2fadc_tpc_compress().</span>
<a name="l00176"></a>00176   <span class="comment">// </span>
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <span class="comment">// Get uncompressed data size</span>
<a name="l00179"></a>00179   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00180"></a>00180   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00181"></a>00181   input += <span class="keyword">sizeof</span>(int);
<a name="l00182"></a>00182   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="comment">// Uncompress data</span>
<a name="l00185"></a>00185   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00186"></a>00186   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00187"></a>00187   <a class="code" href="n2fadc__tpc__compress_8cpp.html#a3dd07f1e48aeee10dd1b2429aaffab59">decode_n2fadc_tpc</a>(&amp;input_buffer, output, uncompressed_size, userParam);
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="keywordflow">return</span> uncompressed_size; 
<a name="l00190"></a>00190 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a63eea1f9be10c30001f65168d6f4f7d7"></a><!-- doxytag: member="mucap_compress.h::n2fadc_tpc_load" ref="a63eea1f9be10c30001f65168d6f4f7d7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void n2fadc_tpc_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00024">24</a> of file <a class="el" href="n2fadc__tpc__compress_8cpp_source.html">n2fadc_tpc_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00014">should_compress_n2fadc_tpc</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00025"></a>00025 {
<a name="l00026"></a>00026   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00027"></a>00027   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/NFADC/Enabled&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a3e90d51c60a85540951186d31984ace1">should_compress_n2fadc_tpc</a>,
<a name="l00028"></a>00028     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00029"></a>00029 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a86a4ac76c7b6125175e9775feedb990e"></a><!-- doxytag: member="mucap_compress.h::n2fadc_tpc_optimize" ref="a86a4ac76c7b6125175e9775feedb990e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void n2fadc_tpc_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00020">20</a> of file <a class="el" href="n2fadc__tpc__compress_8cpp_source.html">n2fadc_tpc_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00390">compress_optimize_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00021"></a>00021 {
<a name="l00022"></a>00022 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa5e0a27761952c37263cdb9d2368a1bc"></a><!-- doxytag: member="mucap_compress.h::nfadc_compress" ref="aa5e0a27761952c37263cdb9d2368a1bc" args="(unsigned char *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfadc_compress </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfadc__compress_8cpp_source.html#l00108">108</a> of file <a class="el" href="nfadc__compress_8cpp_source.html">nfadc_compress.cpp</a>.</p>

<p>References <a class="el" href="nfadc__compress_8cpp_source.html#l00031">encode_nfadc()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, and <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00109"></a>00109 {
<a name="l00110"></a>00110   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <span class="comment">// store size of input data</span>
<a name="l00113"></a>00113   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00114"></a>00114   *uncompressed_size_p = input_size;
<a name="l00115"></a>00115   output += <span class="keyword">sizeof</span>(int);
<a name="l00116"></a>00116 
<a name="l00117"></a>00117   <span class="comment">// compress samples</span>
<a name="l00118"></a>00118   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00119"></a>00119   <span class="keywordtype">int</span> compressed_size = <a class="code" href="nfadc__compress_8cpp.html#a39e17a98b8838391c5469fdad9fc2039">encode_nfadc</a>(input, input_size, &amp;output_buffer, userParam);
<a name="l00120"></a>00120   output += compressed_size;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <span class="keywordflow">return</span> compressed_size + <span class="keyword">sizeof</span>(int);
<a name="l00123"></a>00123 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa3e17a1077be2fb193f8c62fa5971e64"></a><!-- doxytag: member="mucap_compress.h::nfadc_expand" ref="aa3e17a1077be2fb193f8c62fa5971e64" args="(unsigned char *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfadc_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfadc__compress_8cpp_source.html#l00181">181</a> of file <a class="el" href="nfadc__compress_8cpp_source.html">nfadc_compress.cpp</a>.</p>

<p>References <a class="el" href="nfadc__compress_8cpp_source.html#l00125">decode_nfadc()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00182"></a>00182 {
<a name="l00183"></a>00183   <span class="comment">// </span>
<a name="l00184"></a>00184   <span class="comment">// Uncompress the data produced by nfadc_compress().</span>
<a name="l00185"></a>00185   <span class="comment">// </span>
<a name="l00186"></a>00186 
<a name="l00187"></a>00187   <span class="comment">// Get uncompressed data size</span>
<a name="l00188"></a>00188   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00189"></a>00189   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00190"></a>00190   input += <span class="keyword">sizeof</span>(int);
<a name="l00191"></a>00191   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="comment">// Uncompress data</span>
<a name="l00194"></a>00194   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00195"></a>00195   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00196"></a>00196   <a class="code" href="nfadc__compress_8cpp.html#a2c029c4bf326140e50c3c4e2a45e1718">decode_nfadc</a>(&amp;input_buffer, output, uncompressed_size, userParam);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="keywordflow">return</span> uncompressed_size; 
<a name="l00199"></a>00199 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acaaf8d538e20571781d4da27ee0f0b1e"></a><!-- doxytag: member="mucap_compress.h::nfadc_load" ref="acaaf8d538e20571781d4da27ee0f0b1e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfadc_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfadc__compress_8cpp_source.html#l00024">24</a> of file <a class="el" href="nfadc__compress_8cpp_source.html">nfadc_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00014">should_compress_nfadc</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00025"></a>00025 {
<a name="l00026"></a>00026   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00027"></a>00027   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/NFADC/Enabled&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a0c56dade5ca8b94e1c62de9d3d5a57e2">should_compress_nfadc</a>,
<a name="l00028"></a>00028     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00029"></a>00029 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ade1cdb0dda78df6520064b5830a3e5c2"></a><!-- doxytag: member="mucap_compress.h::nfadc_optimize" ref="ade1cdb0dda78df6520064b5830a3e5c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfadc_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfadc__compress_8cpp_source.html#l00020">20</a> of file <a class="el" href="nfadc__compress_8cpp_source.html">nfadc_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00390">compress_optimize_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00021"></a>00021 {
<a name="l00022"></a>00022 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a493fa651aca557df06e41e2fd6519117"></a><!-- doxytag: member="mucap_compress.h::read_midas_event" ref="a493fa651aca557df06e41e2fd6519117" args="(FILE *fp, char *pevent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_midas_event </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>pevent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="overall_8cpp_source.html#l00024">24</a> of file <a class="el" href="overall_8cpp_source.html">overall.cpp</a>.</p>

<p>References <a class="el" href="v1724__module_8c_source.html#l00027">data_size</a>, <a class="el" href="overall_8cpp_source.html#l00016">le32_to_cpu</a>, and <a class="el" href="mvmestd_8h_source.html#l00045">SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="mucap__compress_8cpp_source.html#l00013">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00025"></a>00025 {
<a name="l00026"></a>00026   
<a name="l00027"></a>00027   <span class="keywordtype">int</span> event_size, size_read;
<a name="l00028"></a>00028 
<a name="l00029"></a>00029     size_read = fread(pevent, 1, <span class="keyword">sizeof</span>(EVENT_HEADER), fp);
<a name="l00030"></a>00030     <span class="keywordflow">if</span> (size_read != <span class="keyword">sizeof</span>(EVENT_HEADER))
<a name="l00031"></a>00031       <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00032"></a>00032 
<a name="l00033"></a>00033     event_size = <a class="code" href="overall_8cpp.html#a7f6018d3f6cae9b83e8a440054df76aa">le32_to_cpu</a>(((EVENT_HEADER *) pevent)-&gt;<a class="code" href="v1724__module_8c.html#af9bcc453896ea532710141c5a10fd347">data_size</a>);
<a name="l00034"></a>00034 
<a name="l00035"></a>00035     size_read = fread(pevent + <span class="keyword">sizeof</span>(EVENT_HEADER), 1, event_size, fp);
<a name="l00036"></a>00036     <span class="keywordflow">if</span> (size_read != event_size)
<a name="l00037"></a>00037       <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039     bk_swap(pevent, 0);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041     <span class="keywordflow">return</span> <a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00042"></a>00042 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad4f7da3874f62985302aa054ad7395e5"></a><!-- doxytag: member="mucap_compress.h::rle_bits_setup" ref="ad4f7da3874f62985302aa054ad7395e5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rle_bits_setup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rle_8cpp_source.html#l00041">41</a> of file <a class="el" href="rle_8cpp_source.html">rle.cpp</a>.</p>

<p>References <a class="el" href="mzdump_8c_source.html#l00129">i</a>, <a class="el" href="rle_8cpp_source.html#l00014">num_leading_0</a>, <a class="el" href="rle_8cpp_source.html#l00015">num_leading_1</a>, <a class="el" href="rle_8cpp_source.html#l00018">num_leading_bits()</a>, <a class="el" href="rle_8cpp_source.html#l00016">ones</a>, and <a class="el" href="rle_8cpp_source.html#l00013">rle_bits_setup_done</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00117">caen_compress()</a>, <a class="el" href="caen__compress_8cpp_source.html#l00219">caen_expand()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00133">cmp_compress()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00243">cmp_expand()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00092">fadc_compress()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00165">fadc_expand()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00077">hits_compress()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00148">hits_expand()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00220">stck_compress()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00269">stck_expand()</a>, <a class="el" href="tdc400__compress_8cpp_source.html#l00207">tdc400_compress()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00255">tdc400_expand()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00042"></a>00042 {
<a name="l00043"></a>00043   <span class="keywordflow">if</span>(<a class="code" href="rle_8cpp.html#a69b097088e165e8ad77f7401dc3d31ec">rle_bits_setup_done</a>) {
<a name="l00044"></a>00044     <span class="keywordflow">return</span>;
<a name="l00045"></a>00045   }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047   <span class="comment">// </span>
<a name="l00048"></a>00048   <span class="comment">// Cache the number of leading 0s and 1s for all 8-bit values.</span>
<a name="l00049"></a>00049   <span class="comment">// </span>
<a name="l00050"></a>00050   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> &lt; 256; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>++) {
<a name="l00051"></a>00051     <a class="code" href="rle_8cpp.html#aa89fe670931d25032f9194327ca6f527">num_leading_0</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>] = <a class="code" href="rle_8cpp.html#a465ac808716f5ef21f09138b1c81a7f5">num_leading_bits</a>(<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, 0);
<a name="l00052"></a>00052     <a class="code" href="rle_8cpp.html#aeabadf4206b4f1443e6e517bbdaea1ea">num_leading_1</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>] = <a class="code" href="rle_8cpp.html#a465ac808716f5ef21f09138b1c81a7f5">num_leading_bits</a>(<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>, 1);
<a name="l00053"></a>00053   }
<a name="l00054"></a>00054 
<a name="l00055"></a>00055   <span class="comment">// </span>
<a name="l00056"></a>00056   <span class="comment">// Cache the bit-strings consisting of all 1s, with lengths from 1 to</span>
<a name="l00057"></a>00057   <span class="comment">// 8.</span>
<a name="l00058"></a>00058   <span class="comment">// </span>
<a name="l00059"></a>00059   <span class="keywordtype">short</span> o = 0;
<a name="l00060"></a>00060   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> = 0; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a> &lt; 9; <a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>++) {
<a name="l00061"></a>00061     <a class="code" href="rle_8cpp.html#a021353416824ab69e2768f6e20dc1130">ones</a>[<a class="code" href="mzdump_8c.html#a65a8886d814fb9bf73f9d4f0fd64d162">i</a>] = o;
<a name="l00062"></a>00062     o = (o &lt;&lt; 1) | 1;
<a name="l00063"></a>00063   }
<a name="l00064"></a>00064 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a03a609e68b24e7234190414c2cb95408"></a><!-- doxytag: member="mucap_compress.h::rle_get" ref="a03a609e68b24e7234190414c2cb95408" args="(io_buffer *input, rle_state *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rle_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrle__state.html">rle_state</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rle_8cpp_source.html#l00117">117</a> of file <a class="el" href="rle_8cpp_source.html">rle.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00046">rle_state::huffman</a>, <a class="el" href="huffman_8cpp_source.html#l00087">huffman_get_symbol()</a>, <a class="el" href="mucap__compress_8h_source.html#l00044">rle_state::huffman_length</a>, <a class="el" href="io__buffer_8cpp_source.html#l00070">io_buffer_get()</a>, <a class="el" href="rle_8cpp_source.html#l00016">ones</a>, <a class="el" href="mucap__compress_8h_source.html#l00043">rle_state::run_length</a>, and <a class="el" href="mucap__compress_8h_source.html#l00042">rle_state::running_digit</a>.</p>

<p>Referenced by <a class="el" href="stck__compress_8cpp_source.html#l00178">decode_bits()</a>, and <a class="el" href="comp__compress_8cpp_source.html#l00225">decode_cmp_bits()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 {
<a name="l00119"></a>00119   <span class="comment">// </span>
<a name="l00120"></a>00120   <span class="comment">// Reverse the encoding performed by rle_bits.</span>
<a name="l00121"></a>00121   <span class="comment">// </span>
<a name="l00122"></a>00122 
<a name="l00123"></a>00123   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> output_word = 0;
<a name="l00124"></a>00124   <span class="keywordtype">int</span> output_bits = 8;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126   <span class="keywordflow">while</span> (1) {
<a name="l00127"></a>00127     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> == 0) {
<a name="l00128"></a>00128       s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a> = !s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>;
<a name="l00129"></a>00129       <span class="keywordtype">int</span> run_length =
<a name="l00130"></a>00130           <a class="code" href="huffman_8cpp.html#ad6be44228ca3e1de5375487dc336b73d">huffman_get_symbol</a>(&amp;s-&gt;<a class="code" href="structrle__state.html#a201e54d8a893857d6933bb7e9f2a0051">huffman</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>], input);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132       <span class="keywordflow">if</span> (run_length &lt; 0) {
<a name="l00133"></a>00133         <span class="keywordflow">return</span> -1;
<a name="l00134"></a>00134       } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(run_length == s-&gt;<a class="code" href="structrle__state.html#a05a8d5da678c963bd89d8f321b7381ba">huffman_length</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>]) {
<a name="l00135"></a>00135         s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> = <a class="code" href="io__buffer_8cpp.html#ad72a17b4cdcccfde3419ab0cfc3bdf0a">io_buffer_get</a>(input, 24);
<a name="l00136"></a>00136       } <span class="keywordflow">else</span> {
<a name="l00137"></a>00137         s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> = run_length;
<a name="l00138"></a>00138       }
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="keywordflow">while</span> (s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> &gt; 0) {
<a name="l00142"></a>00142 
<a name="l00143"></a>00143       <span class="keywordflow">if</span> (output_bits &gt; s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>) {
<a name="l00144"></a>00144         output_word = output_word &lt;&lt; s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>;
<a name="l00145"></a>00145         <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a> == 1) {
<a name="l00146"></a>00146           output_word |= <a class="code" href="rle_8cpp.html#a021353416824ab69e2768f6e20dc1130">ones</a>[s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>];
<a name="l00147"></a>00147         }
<a name="l00148"></a>00148         output_bits -= s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>;
<a name="l00149"></a>00149         s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> = 0;
<a name="l00150"></a>00150       } <span class="keywordflow">else</span> {
<a name="l00151"></a>00151         output_word = output_word &lt;&lt; output_bits;
<a name="l00152"></a>00152         <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a> == 1) {
<a name="l00153"></a>00153           output_word |= <a class="code" href="rle_8cpp.html#a021353416824ab69e2768f6e20dc1130">ones</a>[output_bits];
<a name="l00154"></a>00154         }
<a name="l00155"></a>00155         s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> -= output_bits;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157         <span class="keywordflow">return</span> output_word;
<a name="l00158"></a>00158       }
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   }
<a name="l00162"></a>00162 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7b2a49e299d8ab4bf7660a2dc15cbb3b"></a><!-- doxytag: member="mucap_compress.h::rle_put" ref="a7b2a49e299d8ab4bf7660a2dc15cbb3b" args="(unsigned char b, rle_state *s, io_buffer *output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rle_put </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrle__state.html">rle_state</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="rle_8cpp_source.html#l00066">66</a> of file <a class="el" href="rle_8cpp_source.html">rle.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00046">rle_state::huffman</a>, <a class="el" href="mucap__compress_8h_source.html#l00044">rle_state::huffman_length</a>, <a class="el" href="huffman_8cpp_source.html#l00028">huffman_put_symbol()</a>, <a class="el" href="io__buffer_8cpp_source.html#l00036">io_buffer_put()</a>, <a class="el" href="rle_8cpp_source.html#l00014">num_leading_0</a>, <a class="el" href="rle_8cpp_source.html#l00015">num_leading_1</a>, <a class="el" href="mucap__compress_8h_source.html#l00043">rle_state::run_length</a>, <a class="el" href="mucap__compress_8h_source.html#l00042">rle_state::running_digit</a>, and <a class="el" href="mucap__compress_8h_source.html#l00045">rle_state::use_extension_word</a>.</p>

<p>Referenced by <a class="el" href="stck__compress_8cpp_source.html#l00137">encode_bits()</a>, and <a class="el" href="comp__compress_8cpp_source.html#l00054">encode_cmp_bits()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00067"></a>00067 {
<a name="l00068"></a>00068   <span class="keywordtype">int</span> bits = 8;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="keywordflow">while</span> (bits &gt; 0) {
<a name="l00071"></a>00071     <span class="keywordtype">int</span> nr;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a> == 0) {
<a name="l00074"></a>00074       nr = <a class="code" href="rle_8cpp.html#aa89fe670931d25032f9194327ca6f527">num_leading_0</a>[b];
<a name="l00075"></a>00075     } <span class="keywordflow">else</span> {
<a name="l00076"></a>00076       nr = <a class="code" href="rle_8cpp.html#aeabadf4206b4f1443e6e517bbdaea1ea">num_leading_1</a>[b];
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <span class="keywordflow">if</span> (nr &gt; bits) {
<a name="l00080"></a>00080       nr = bits;
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> += nr;
<a name="l00084"></a>00084     bits -= nr;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <span class="keywordflow">if</span> (bits != 0 || (!s-&gt;<a class="code" href="structrle__state.html#a0165caf0c0f27ed53a0943ab8b64659b">use_extension_word</a> &amp;&amp; 
<a name="l00087"></a>00087                      s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> &gt;= s-&gt;<a class="code" href="structrle__state.html#a05a8d5da678c963bd89d8f321b7381ba">huffman_length</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>]-8)) {
<a name="l00088"></a>00088       b = b &lt;&lt; nr;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090       <span class="keywordflow">if</span>(s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> &lt; s-&gt;<a class="code" href="structrle__state.html#a05a8d5da678c963bd89d8f321b7381ba">huffman_length</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>]) {
<a name="l00091"></a>00091         <a class="code" href="huffman_8cpp.html#a81a23f1eabc888ce48ec931fb80b1179">huffman_put_symbol</a>(&amp;s-&gt;<a class="code" href="structrle__state.html#a201e54d8a893857d6933bb7e9f2a0051">huffman</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>], output, s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>);
<a name="l00092"></a>00092       } <span class="keywordflow">else</span> {
<a name="l00093"></a>00093         <a class="code" href="huffman_8cpp.html#a81a23f1eabc888ce48ec931fb80b1179">huffman_put_symbol</a>(&amp;s-&gt;<a class="code" href="structrle__state.html#a201e54d8a893857d6933bb7e9f2a0051">huffman</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>], output, s-&gt;<a class="code" href="structrle__state.html#a05a8d5da678c963bd89d8f321b7381ba">huffman_length</a>[s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>]);
<a name="l00094"></a>00094         <a class="code" href="io__buffer_8cpp.html#a7050a18b99c505bf329251c5dc435604">io_buffer_put</a>(output,s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a>, 24);
<a name="l00095"></a>00095        
<a name="l00096"></a>00096       }
<a name="l00097"></a>00097       s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a> = !s-&gt;<a class="code" href="structrle__state.html#ad9395020f0c9828da225cdff628ed269">running_digit</a>;
<a name="l00098"></a>00098       s-&gt;<a class="code" href="structrle__state.html#a9b72c88af0fee8f8bb0e6ce095ded8e4">run_length</a> = 0;
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100   }
<a name="l00101"></a>00101 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aeeab10e5c7b7a6c2643297477b516a37"></a><!-- doxytag: member="mucap_compress.h::save_huffman" ref="aeeab10e5c7b7a6c2643297477b516a37" args="(char *key_dir, huffman_table *table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL save_huffman </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhuffman__table.html">huffman_table</a> *&nbsp;</td>
          <td class="paramname"> <em>table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="huffman_8cpp_source.html#l00321">321</a> of file <a class="el" href="huffman_8cpp_source.html">huffman.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00025">huffman_table::code_bits</a>, <a class="el" href="mucap__compress_8h_source.html#l00026">huffman_table::code_length</a>, <a class="el" href="mucap__compress_8h_source.html#l00024">huffman_table::frequency</a>, <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="mucap__compress_8h_source.html#l00023">huffman_table::num_symbols</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="mvmestd_8h_source.html#l00045">SUCCESS</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00019">caen_optimize()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00018">comp_optimize()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00020">fadc_optimize()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00018">hits_optimize()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00022">stck_optimize()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00019">tdc400_optimize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00322"></a>00322 {
<a name="l00323"></a>00323   <span class="keywordtype">char</span> key_name[MAX_ODB_PATH];
<a name="l00324"></a>00324   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;
<a name="l00325"></a>00325 
<a name="l00326"></a>00326   sprintf(key_name, <span class="stringliteral">&quot;%s/code_bits&quot;</span>, key_dir);
<a name="l00327"></a>00327   size = table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a> * <span class="keyword">sizeof</span>(<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>);
<a name="l00328"></a>00328   <span class="keywordtype">int</span> stat = db_set_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, key_name, table-&gt;<a class="code" href="structhuffman__table.html#a4a10010f66a0d6bf532958c64c163773">code_bits</a>, size, 
<a name="l00329"></a>00329     table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>, TID_DWORD); 
<a name="l00330"></a>00330   <span class="keywordflow">if</span>(stat != DB_SUCCESS) {
<a name="l00331"></a>00331     cm_msg(MERROR, <span class="stringliteral">&quot;save_huffman&quot;</span>, <span class="stringliteral">&quot;Failed to save ODB key %s&quot;</span>, key_name);
<a name="l00332"></a>00332     <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00333"></a>00333   }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   sprintf(key_name, <span class="stringliteral">&quot;%s/code_length&quot;</span>, key_dir);
<a name="l00336"></a>00336   stat = db_set_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, key_name, table-&gt;<a class="code" href="structhuffman__table.html#a7c3ba9d9d06ae04789db8ec7f487d232">code_length</a>, size, 
<a name="l00337"></a>00337     table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>, TID_DWORD); 
<a name="l00338"></a>00338   <span class="keywordflow">if</span>(stat != DB_SUCCESS) {
<a name="l00339"></a>00339     cm_msg(MERROR, <span class="stringliteral">&quot;save_huffman&quot;</span>, <span class="stringliteral">&quot;Failed to save ODB key %s&quot;</span>, key_name);
<a name="l00340"></a>00340     <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00341"></a>00341   }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   sprintf(key_name, <span class="stringliteral">&quot;%s/frequency&quot;</span>, key_dir);
<a name="l00344"></a>00344   stat = db_set_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, key_name, table-&gt;<a class="code" href="structhuffman__table.html#afd9ab6266a0211dce30fdf9246c0a7df">frequency</a>, size, 
<a name="l00345"></a>00345     table-&gt;<a class="code" href="structhuffman__table.html#ab9c604fc1423786f1a5b79458fb496b1">num_symbols</a>, TID_DWORD); 
<a name="l00346"></a>00346   <span class="keywordflow">if</span>(stat != DB_SUCCESS) {
<a name="l00347"></a>00347     cm_msg(MERROR, <span class="stringliteral">&quot;save_huffman&quot;</span>, <span class="stringliteral">&quot;Failed to save ODB key %s&quot;</span>, key_name);
<a name="l00348"></a>00348     <span class="keywordflow">return</span> !<a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00349"></a>00349   }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="keywordflow">return</span> <a class="code" href="group__mvmestdinclude.html#gaa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>;
<a name="l00352"></a>00352 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7b69fe1993186bdfd05f841f3f430c5e"></a><!-- doxytag: member="mucap_compress.h::start_input_buffer" ref="a7b69fe1993186bdfd05f841f3f430c5e" args="(io_buffer *buffer, unsigned char *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void start_input_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="io__buffer_8cpp_source.html#l00061">61</a> of file <a class="el" href="io__buffer_8cpp_source.html">io_buffer.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00008">io_buffer::num_codes</a>, <a class="el" href="mucap__compress_8h_source.html#l00007">io_buffer::p</a>, <a class="el" href="mucap__compress_8h_source.html#l00006">io_buffer::start</a>, <a class="el" href="mucap__compress_8h_source.html#l00004">io_buffer::w</a>, and <a class="el" href="mucap__compress_8h_source.html#l00005">io_buffer::w_bits</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00219">caen_expand()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00243">cmp_expand()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00165">fadc_expand()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00148">hits_expand()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00166">n2fadc_ndet_expand()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00172">n2fadc_tpc_expand()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00181">nfadc_expand()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00269">stck_expand()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00255">tdc400_expand()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00062"></a>00062 {
<a name="l00063"></a>00063   buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = 0;
<a name="l00064"></a>00064   buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> = 0;
<a name="l00065"></a>00065   buffer-&gt;<a class="code" href="structio__buffer.html#a254d4c17decf53510bbe592463c0568b">start</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *) p;
<a name="l00066"></a>00066   buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a> = buffer-&gt;<a class="code" href="structio__buffer.html#a254d4c17decf53510bbe592463c0568b">start</a> + 1;
<a name="l00067"></a>00067   buffer-&gt;<a class="code" href="structio__buffer.html#ac161bad76549a663121121346d803ff7">num_codes</a> = *(buffer-&gt;<a class="code" href="structio__buffer.html#a254d4c17decf53510bbe592463c0568b">start</a>);
<a name="l00068"></a>00068 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad0824475526b68eb9cd6f97eb19577a7"></a><!-- doxytag: member="mucap_compress.h::start_output_buffer" ref="ad0824475526b68eb9cd6f97eb19577a7" args="(io_buffer *buffer, unsigned char *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void start_output_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structio__buffer.html">io_buffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="io__buffer_8cpp_source.html#l00014">14</a> of file <a class="el" href="io__buffer_8cpp_source.html">io_buffer.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8h_source.html#l00008">io_buffer::num_codes</a>, <a class="el" href="mucap__compress_8h_source.html#l00007">io_buffer::p</a>, <a class="el" href="mucap__compress_8h_source.html#l00006">io_buffer::start</a>, <a class="el" href="mucap__compress_8h_source.html#l00004">io_buffer::w</a>, and <a class="el" href="mucap__compress_8h_source.html#l00005">io_buffer::w_bits</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00117">caen_compress()</a>, <a class="el" href="comp__compress_8cpp_source.html#l00133">cmp_compress()</a>, <a class="el" href="fadc__compress_8cpp_source.html#l00092">fadc_compress()</a>, <a class="el" href="hits__compress_8cpp_source.html#l00077">hits_compress()</a>, <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00097">n2fadc_ndet_compress()</a>, <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00104">n2fadc_tpc_compress()</a>, <a class="el" href="nfadc__compress_8cpp_source.html#l00108">nfadc_compress()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00220">stck_compress()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00207">tdc400_compress()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00015"></a>00015 {
<a name="l00016"></a>00016   buffer-&gt;<a class="code" href="structio__buffer.html#a34724b97874befcd5ca965a52ab8dabd">w</a> = 0;
<a name="l00017"></a>00017   buffer-&gt;<a class="code" href="structio__buffer.html#af262c765358713cfa830651e308e3c29">w_bits</a> = 32;
<a name="l00018"></a>00018   buffer-&gt;<a class="code" href="structio__buffer.html#a254d4c17decf53510bbe592463c0568b">start</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *) p;
<a name="l00019"></a>00019   buffer-&gt;<a class="code" href="structio__buffer.html#a7e0c6fdef5990d506605e30ac7787153">p</a> = buffer-&gt;<a class="code" href="structio__buffer.html#a254d4c17decf53510bbe592463c0568b">start</a> + 1;
<a name="l00020"></a>00020   buffer-&gt;<a class="code" href="structio__buffer.html#ac161bad76549a663121121346d803ff7">num_codes</a> = 0;
<a name="l00021"></a>00021 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab0275c9f673671ab39ff22b231d2f1c9"></a><!-- doxytag: member="mucap_compress.h::stck_compress" ref="ab0275c9f673671ab39ff22b231d2f1c9" args="(stack_elt *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stck_compress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstack__elt.html">stack_elt</a> *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stck__compress_8cpp_source.html#l00220">220</a> of file <a class="el" href="stck__compress_8cpp_source.html">stck_compress.cpp</a>.</p>

<p>References <a class="el" href="stck__compress_8cpp_source.html#l00137">encode_bits()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00046">encode_times()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00222"></a>00222 {
<a name="l00223"></a>00223   <span class="comment">// </span>
<a name="l00224"></a>00224   <span class="comment">// Carry out lossless compression on the stacked TPC data.</span>
<a name="l00225"></a>00225   <span class="comment">// </span>
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   input_size /= <span class="keyword">sizeof</span>(<a class="code" href="structstack__elt.html">stack_elt</a>);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229   <span class="comment">//myprint_TPCstack_interval(input, 0, input_size-1);</span>
<a name="l00230"></a>00230  
<a name="l00231"></a>00231   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="comment">// store size of input data</span>
<a name="l00236"></a>00236   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00237"></a>00237   *uncompressed_size_p = input_size;
<a name="l00238"></a>00238   output += <span class="keyword">sizeof</span>(int);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240   <span class="comment">// reserve space for the size of the compressed times</span>
<a name="l00241"></a>00241   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00242"></a>00242   output += <span class="keyword">sizeof</span>(int);
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   <span class="comment">// compress times</span>
<a name="l00245"></a>00245   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00246"></a>00246   <span class="keywordtype">int</span> compressed_time_size =
<a name="l00247"></a>00247       <a class="code" href="stck__compress_8cpp.html#abd3b4c21240137305556bb4049a2b7b4">encode_times</a>(input, input_size, &amp;output_buffer);
<a name="l00248"></a>00248   output += compressed_time_size;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250   <span class="comment">// store size of compressed times</span>
<a name="l00251"></a>00251   *compressed_time_size_p = compressed_time_size;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   <span class="comment">// reserve space for the size of the compressed bit patterns</span>
<a name="l00254"></a>00254   <span class="keywordtype">int</span> *compressed_bits_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00255"></a>00255   output += <span class="keyword">sizeof</span>(int);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   <span class="comment">// compress bit patterns</span>
<a name="l00258"></a>00258   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00259"></a>00259   <span class="keywordtype">int</span> compressed_bits_size =
<a name="l00260"></a>00260       <a class="code" href="stck__compress_8cpp.html#a82b1a1a0c5f2ab1e193fb2f657a1873e">encode_bits</a>(input, input_size, &amp;output_buffer);
<a name="l00261"></a>00261   output += compressed_time_size;
<a name="l00262"></a>00262 
<a name="l00263"></a>00263   <span class="comment">// store size of compressed bit patterns </span>
<a name="l00264"></a>00264   *compressed_bits_size_p = compressed_bits_size;
<a name="l00265"></a>00265 
<a name="l00266"></a>00266   <span class="keywordflow">return</span> compressed_time_size + compressed_bits_size + 3 * <span class="keyword">sizeof</span>(int);
<a name="l00267"></a>00267 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7b238ff7c1c32f4d6a7a15a3a2b61357"></a><!-- doxytag: member="mucap_compress.h::stck_expand" ref="a7b238ff7c1c32f4d6a7a15a3a2b61357" args="(unsigned char *input, int input_size, stack_elt *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stck_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstack__elt.html">stack_elt</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stck__compress_8cpp_source.html#l00269">269</a> of file <a class="el" href="stck__compress_8cpp_source.html">stck_compress.cpp</a>.</p>

<p>References <a class="el" href="stck__compress_8cpp_source.html#l00178">decode_bits()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00101">decode_times()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00271"></a>00271 {
<a name="l00272"></a>00272   <span class="comment">// </span>
<a name="l00273"></a>00273   <span class="comment">// </span>
<a name="l00274"></a>00274   <span class="comment">// Uncompress the data produced by stck_compress().</span>
<a name="l00275"></a>00275   <span class="comment">// </span>
<a name="l00276"></a>00276 
<a name="l00277"></a>00277   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00278"></a>00278 
<a name="l00279"></a>00279   <span class="comment">// Get uncompressed data size</span>
<a name="l00280"></a>00280   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00281"></a>00281   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00282"></a>00282   input += <span class="keyword">sizeof</span>(int);
<a name="l00283"></a>00283   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00284"></a>00284 
<a name="l00285"></a>00285   <span class="comment">// Get size of compressed time data</span>
<a name="l00286"></a>00286   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00287"></a>00287   <span class="keywordtype">int</span> compressed_time_size = *compressed_time_size_p;
<a name="l00288"></a>00288   input += <span class="keyword">sizeof</span>(int);
<a name="l00289"></a>00289   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291   <span class="comment">// Uncompress times</span>
<a name="l00292"></a>00292   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00293"></a>00293   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00294"></a>00294   <a class="code" href="stck__compress_8cpp.html#aad92013678c5340b411d6363a42da5bd">decode_times</a>(&amp;input_buffer, output);
<a name="l00295"></a>00295   input += compressed_time_size;
<a name="l00296"></a>00296   input_size -= compressed_time_size;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298   <span class="comment">// Get size of compressed bit patterns</span>
<a name="l00299"></a>00299   <span class="keywordtype">int</span> *compressed_bits_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00300"></a>00300   <span class="keywordtype">int</span> compressed_bits_size = *compressed_bits_size_p;
<a name="l00301"></a>00301   input += <span class="keyword">sizeof</span>(int);
<a name="l00302"></a>00302   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00303"></a>00303 
<a name="l00304"></a>00304   <span class="comment">// Uncompress bit patterns</span>
<a name="l00305"></a>00305   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00306"></a>00306   <a class="code" href="stck__compress_8cpp.html#a4d1ad510e999ffa34b3f4b31d364c9c3">decode_bits</a>(&amp;input_buffer, output, uncompressed_size);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308   <span class="comment">//myprint_TPCstack_interval(output, 0, uncompressed_size-1);</span>
<a name="l00309"></a>00309 
<a name="l00310"></a>00310   <span class="keywordflow">return</span> uncompressed_size * <span class="keyword">sizeof</span>(<a class="code" href="structstack__elt.html">stack_elt</a>);
<a name="l00311"></a>00311 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa7bcf5584b002d0dcb024317bc49bad3"></a><!-- doxytag: member="mucap_compress.h::stck_load" ref="aa7bcf5584b002d0dcb024317bc49bad3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stck_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stck__compress_8cpp_source.html#l00032">32</a> of file <a class="el" href="stck__compress_8cpp_source.html">stck_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="huffman_8cpp_source.html#l00305">huffman_init_default()</a>, <a class="el" href="huffman_8cpp_source.html#l00429">load_huffman()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00020">should_compress_stck</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00033"></a>00033 {
<a name="l00034"></a>00034   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="stck__compress_8cpp.html#aa96198b73e661e2f2c5668a974a4c10d">stck_time_huffman</a>, 129);
<a name="l00035"></a>00035   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[0], 129);
<a name="l00036"></a>00036   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[1], 129);
<a name="l00037"></a>00037 
<a name="l00038"></a>00038   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/STCK/Huffman/Bits 0&quot;</span>, &amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[0]);
<a name="l00039"></a>00039   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/STCK/Huffman/Bits 1&quot;</span>, &amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[1]);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00042"></a>00042   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/STCK/Enabled&quot;</span>, &amp;<a class="code" href="stck__compress_8cpp.html#a50fa261f7803d6c03171390fcd1367b7">should_compress_stck</a>,
<a name="l00043"></a>00043     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00044"></a>00044 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6d6a1769960d561769d0240899336667"></a><!-- doxytag: member="mucap_compress.h::stck_optimize" ref="a6d6a1769960d561769d0240899336667" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stck_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stck__compress_8cpp_source.html#l00022">22</a> of file <a class="el" href="stck__compress_8cpp_source.html">stck_compress.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00200">huffman_optimize_tree()</a>, and <a class="el" href="huffman_8cpp_source.html#l00321">save_huffman()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00405">compress_optimize_skim()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00023"></a>00023 {
<a name="l00024"></a>00024   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="stck__compress_8cpp.html#aa96198b73e661e2f2c5668a974a4c10d">stck_time_huffman</a>);
<a name="l00025"></a>00025   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[0]);
<a name="l00026"></a>00026   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[1]);
<a name="l00027"></a>00027  
<a name="l00028"></a>00028   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/STCK/Huffman/Bits 0&quot;</span>, &amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[0]);
<a name="l00029"></a>00029   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/STCK/Huffman/Bits 1&quot;</span>, &amp;<a class="code" href="stck__compress_8cpp.html#a35798bbeae091096f520f90ab00a130e">stck_bits_huffman</a>[1]);
<a name="l00030"></a>00030 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abde84ecb3c3f08dfa302dec6574ba2f6"></a><!-- doxytag: member="mucap_compress.h::tdc400_compress" ref="abde84ecb3c3f08dfa302dec6574ba2f6" args="(tdc400_word *input, int input_size, unsigned char *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tdc400_compress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtdc400__word.html">tdc400_word</a> *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tdc400__compress_8cpp_source.html#l00207">207</a> of file <a class="el" href="tdc400__compress_8cpp_source.html">tdc400_compress.cpp</a>.</p>

<p>References <a class="el" href="stck__compress_8cpp_source.html#l00137">encode_bits()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00046">encode_times()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00014">start_output_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00209"></a>00209 {
<a name="l00210"></a>00210   <span class="comment">// </span>
<a name="l00211"></a>00211   <span class="comment">// Carry out lossless compression on the TPC data recorded by a</span>
<a name="l00212"></a>00212   <span class="comment">// single TDC400.</span>
<a name="l00213"></a>00213   <span class="comment">// </span>
<a name="l00214"></a>00214 
<a name="l00215"></a>00215   input_size /= <span class="keyword">sizeof</span>(<a class="code" href="structtdc400__word.html">tdc400_word</a>);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <a class="code" href="structio__buffer.html">io_buffer</a> output_buffer;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="comment">// store size of input data</span>
<a name="l00222"></a>00222   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00223"></a>00223   *uncompressed_size_p = input_size;
<a name="l00224"></a>00224   output += <span class="keyword">sizeof</span>(int);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226   <span class="comment">// reserve space for the size of the compressed times</span>
<a name="l00227"></a>00227   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00228"></a>00228   output += <span class="keyword">sizeof</span>(int);
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="comment">// compress times</span>
<a name="l00231"></a>00231   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00232"></a>00232   <span class="keywordtype">int</span> compressed_time_size =
<a name="l00233"></a>00233       <a class="code" href="stck__compress_8cpp.html#abd3b4c21240137305556bb4049a2b7b4">encode_times</a>(input, input_size, &amp;output_buffer);
<a name="l00234"></a>00234   output += compressed_time_size;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="comment">// store size of compressed times</span>
<a name="l00237"></a>00237   *compressed_time_size_p = compressed_time_size;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="comment">// reserve space for the size of the compressed bit patterns</span>
<a name="l00240"></a>00240   <span class="keywordtype">int</span> *compressed_bits_size_p = (<span class="keywordtype">int</span> *) output;
<a name="l00241"></a>00241   output += <span class="keyword">sizeof</span>(int);
<a name="l00242"></a>00242 
<a name="l00243"></a>00243   <span class="comment">// compress bit patterns</span>
<a name="l00244"></a>00244   <a class="code" href="io__buffer_8cpp.html#ad0824475526b68eb9cd6f97eb19577a7">start_output_buffer</a>(&amp;output_buffer, output);
<a name="l00245"></a>00245   <span class="keywordtype">int</span> compressed_bits_size =
<a name="l00246"></a>00246       <a class="code" href="stck__compress_8cpp.html#a82b1a1a0c5f2ab1e193fb2f657a1873e">encode_bits</a>(input, input_size, &amp;output_buffer);
<a name="l00247"></a>00247   output += compressed_time_size;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249   <span class="comment">// store size of compressed bit patterns </span>
<a name="l00250"></a>00250   *compressed_bits_size_p = compressed_bits_size;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252   <span class="keywordflow">return</span> compressed_time_size + compressed_bits_size + 3 * <span class="keyword">sizeof</span>(int);
<a name="l00253"></a>00253 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac27e28cf458c963278afad4320bab951"></a><!-- doxytag: member="mucap_compress.h::tdc400_expand" ref="ac27e28cf458c963278afad4320bab951" args="(unsigned char *input, int input_size, tdc400_word *output, int userParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tdc400_expand </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtdc400__word.html">tdc400_word</a> *&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>userParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tdc400__compress_8cpp_source.html#l00255">255</a> of file <a class="el" href="tdc400__compress_8cpp_source.html">tdc400_compress.cpp</a>.</p>

<p>References <a class="el" href="stck__compress_8cpp_source.html#l00178">decode_bits()</a>, <a class="el" href="stck__compress_8cpp_source.html#l00101">decode_times()</a>, <a class="el" href="rle_8cpp_source.html#l00041">rle_bits_setup()</a>, and <a class="el" href="io__buffer_8cpp_source.html#l00061">start_input_buffer()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00283">expand_event()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00257"></a>00257 {
<a name="l00258"></a>00258   <span class="comment">// </span>
<a name="l00259"></a>00259   <span class="comment">// Uncompress the data produced by tdc400_compress().</span>
<a name="l00260"></a>00260   <span class="comment">// </span>
<a name="l00261"></a>00261 
<a name="l00262"></a>00262   <a class="code" href="mucap__compress_8h.html#ad4f7da3874f62985302aa054ad7395e5">rle_bits_setup</a>();
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <span class="comment">// Get uncompressed data size</span>
<a name="l00265"></a>00265   <span class="keywordtype">int</span> *uncompressed_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00266"></a>00266   <span class="keywordtype">int</span> uncompressed_size = *uncompressed_size_p;
<a name="l00267"></a>00267   input += <span class="keyword">sizeof</span>(int);
<a name="l00268"></a>00268   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="comment">// Get size of compressed time data</span>
<a name="l00271"></a>00271   <span class="keywordtype">int</span> *compressed_time_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00272"></a>00272   <span class="keywordtype">int</span> compressed_time_size = *compressed_time_size_p;
<a name="l00273"></a>00273   input += <span class="keyword">sizeof</span>(int);
<a name="l00274"></a>00274   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <span class="comment">// Uncompress times</span>
<a name="l00277"></a>00277   <a class="code" href="structio__buffer.html">io_buffer</a> input_buffer;
<a name="l00278"></a>00278   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00279"></a>00279   <a class="code" href="stck__compress_8cpp.html#aad92013678c5340b411d6363a42da5bd">decode_times</a>(&amp;input_buffer, output);
<a name="l00280"></a>00280   input += compressed_time_size;
<a name="l00281"></a>00281   input_size -= compressed_time_size;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283   <span class="comment">// Get size of compressed bit patterns</span>
<a name="l00284"></a>00284   <span class="keywordtype">int</span> *compressed_bits_size_p = (<span class="keywordtype">int</span> *) input;
<a name="l00285"></a>00285   <span class="keywordtype">int</span> compressed_bits_size = *compressed_bits_size_p;
<a name="l00286"></a>00286   input += <span class="keyword">sizeof</span>(int);
<a name="l00287"></a>00287   input_size -= <span class="keyword">sizeof</span>(int);
<a name="l00288"></a>00288 
<a name="l00289"></a>00289   <span class="comment">// Uncompress bit patterns</span>
<a name="l00290"></a>00290   <a class="code" href="io__buffer_8cpp.html#a7b69fe1993186bdfd05f841f3f430c5e">start_input_buffer</a>(&amp;input_buffer, input);
<a name="l00291"></a>00291   <a class="code" href="stck__compress_8cpp.html#a4d1ad510e999ffa34b3f4b31d364c9c3">decode_bits</a>(&amp;input_buffer, output, uncompressed_size);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293   <span class="keywordflow">return</span> uncompressed_size * <span class="keyword">sizeof</span>(<a class="code" href="structtdc400__word.html">tdc400_word</a>);
<a name="l00294"></a>00294 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acc9f7c5053d3580a19c74dd259d4c3fc"></a><!-- doxytag: member="mucap_compress.h::tdc400_load" ref="acc9f7c5053d3580a19c74dd259d4c3fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tdc400_load </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tdc400__compress_8cpp_source.html#l00030">30</a> of file <a class="el" href="tdc400__compress_8cpp_source.html">tdc400_compress.cpp</a>.</p>

<p>References <a class="el" href="mucap__compress_8cpp_source.html#l00011">hDB</a>, <a class="el" href="huffman_8cpp_source.html#l00305">huffman_init_default()</a>, <a class="el" href="huffman_8cpp_source.html#l00429">load_huffman()</a>, <a class="el" href="tdc400__compress_8cpp_source.html#l00017">should_compress_tdc400</a>, <a class="el" href="separator_2frontend_8c_source.html#l00072">size</a>, and <a class="el" href="p30_8h_source.html#l00043">TRUE</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00373">compress_load_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00031"></a>00031 {
<a name="l00032"></a>00032   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="mucap__compress_8h.html#a119f5e1899fa0d99a4cf8cea6a18cb3f">time_huffman</a>, 128);
<a name="l00033"></a>00033   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[0], 128);
<a name="l00034"></a>00034   <a class="code" href="huffman_8cpp.html#aa1243022907f8d3c575a6a842eb8cff2">huffman_init_default</a>(&amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[1], 128);
<a name="l00035"></a>00035 
<a name="l00036"></a>00036   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/TDC400/Huffman/Time&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a119f5e1899fa0d99a4cf8cea6a18cb3f">time_huffman</a>);
<a name="l00037"></a>00037   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/TDC400/Huffman/Bits 0&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[0]);
<a name="l00038"></a>00038   <a class="code" href="huffman_8cpp.html#a5e92c1dfa160fcef488964550b48b79e">load_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/TDC400/Huffman/Bits 1&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[1]);
<a name="l00039"></a>00039 
<a name="l00040"></a>00040   <span class="keywordtype">int</span> <a class="code" href="separator_2frontend_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(BOOL);
<a name="l00041"></a>00041   db_get_value(<a class="code" href="mucap__compress_8cpp.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a>, 0, <span class="stringliteral">&quot;/Compression/Lossless/TDC400/Enabled&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a2dadd9a43c97d37b6b60f99b8c6e650f">should_compress_tdc400</a>,
<a name="l00042"></a>00042     &amp;size, TID_BOOL, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00043"></a>00043 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2be7c78e8f179774a3493583e306eb2d"></a><!-- doxytag: member="mucap_compress.h::tdc400_optimize" ref="a2be7c78e8f179774a3493583e306eb2d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tdc400_optimize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tdc400__compress_8cpp_source.html#l00019">19</a> of file <a class="el" href="tdc400__compress_8cpp_source.html">tdc400_compress.cpp</a>.</p>

<p>References <a class="el" href="huffman_8cpp_source.html#l00200">huffman_optimize_tree()</a>, and <a class="el" href="huffman_8cpp_source.html#l00321">save_huffman()</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00390">compress_optimize_all()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00020"></a>00020 {
<a name="l00021"></a>00021   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="mucap__compress_8h.html#a119f5e1899fa0d99a4cf8cea6a18cb3f">time_huffman</a>);
<a name="l00022"></a>00022   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[0]);
<a name="l00023"></a>00023   <a class="code" href="huffman_8cpp.html#a2d64cbf0373bf8d62a5ddbb6aa372170">huffman_optimize_tree</a>(&amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[1]);
<a name="l00024"></a>00024  
<a name="l00025"></a>00025   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/TDC400/Huffman/Time&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a119f5e1899fa0d99a4cf8cea6a18cb3f">time_huffman</a>);
<a name="l00026"></a>00026   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/TDC400/Huffman/Bits 0&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[0]);
<a name="l00027"></a>00027   <a class="code" href="huffman_8cpp.html#aeeab10e5c7b7a6c2643297477b516a37">save_huffman</a>(<span class="stringliteral">&quot;/Compression/Lossless/TDC400/Huffman/Bits 1&quot;</span>, &amp;<a class="code" href="mucap__compress_8h.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[1]);
<a name="l00028"></a>00028 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a89453e0e13e80d9a8298f79b8d49d30a"></a><!-- doxytag: member="mucap_compress.h::bits_huffman" ref="a89453e0e13e80d9a8298f79b8d49d30a" args="[2]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhuffman__table.html">huffman_table</a> <a class="el" href="tdc400__compress_8cpp.html#a89453e0e13e80d9a8298f79b8d49d30a">bits_huffman</a>[2]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tdc400__compress_8cpp_source.html#l00015">15</a> of file <a class="el" href="tdc400__compress_8cpp_source.html">tdc400_compress.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1e83b87d183358315fa4a171f364d347"></a><!-- doxytag: member="mucap_compress.h::caen_channel_huffman" ref="a1e83b87d183358315fa4a171f364d347" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhuffman__table.html">huffman_table</a> <a class="el" href="mucap__compress_8h.html#a1e83b87d183358315fa4a171f364d347">caen_channel_huffman</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="caen__compress_8cpp_source.html#l00014">14</a> of file <a class="el" href="caen__compress_8cpp_source.html">caen_compress.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6a679d50bb1ef8fbbfe7fdaccd641eb0"></a><!-- doxytag: member="mucap_compress.h::cmp_bits_huffman" ref="a6a679d50bb1ef8fbbfe7fdaccd641eb0" args="[2]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhuffman__table.html">huffman_table</a> <a class="el" href="mucap__compress_8h.html#a6a679d50bb1ef8fbbfe7fdaccd641eb0">cmp_bits_huffman</a>[2]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="comp__compress_8cpp_source.html#l00014">14</a> of file <a class="el" href="comp__compress_8cpp_source.html">comp_compress.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a63610c548aa468e4dfa414dd061e8205"></a><!-- doxytag: member="mucap_compress.h::cmp_channel_huffman" ref="a63610c548aa468e4dfa414dd061e8205" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhuffman__table.html">huffman_table</a> <a class="el" href="mucap__compress_8h.html#a63610c548aa468e4dfa414dd061e8205">cmp_channel_huffman</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="comp__compress_8cpp_source.html#l00015">15</a> of file <a class="el" href="comp__compress_8cpp_source.html">comp_compress.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a352b2a6a9acd731b42daa2987d513272"></a><!-- doxytag: member="mucap_compress.h::fadc_run_huffman" ref="a352b2a6a9acd731b42daa2987d513272" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhuffman__table.html">huffman_table</a> <a class="el" href="mucap__compress_8h.html#a352b2a6a9acd731b42daa2987d513272">fadc_run_huffman</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fadc__compress_8cpp_source.html#l00014">14</a> of file <a class="el" href="fadc__compress_8cpp_source.html">fadc_compress.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a46892afbe19f20dc7106961045e80932"></a><!-- doxytag: member="mucap_compress.h::fadc_small_huffman" ref="a46892afbe19f20dc7106961045e80932" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhuffman__table.html">huffman_table</a> <a class="el" href="mucap__compress_8h.html#a46892afbe19f20dc7106961045e80932">fadc_small_huffman</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fadc__compress_8cpp_source.html#l00015">15</a> of file <a class="el" href="fadc__compress_8cpp_source.html">fadc_compress.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab1f60c53f74e806a3b9f687af38d7421"></a><!-- doxytag: member="mucap_compress.h::hDB" ref="ab1f60c53f74e806a3b9f687af38d7421" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HNDLE <a class="el" href="vacuum__sensor_2frontend_8c.html#ab1f60c53f74e806a3b9f687af38d7421">hDB</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mucap__compress_8cpp_source.html#l00011">11</a> of file <a class="el" href="mucap__compress_8cpp_source.html">mucap_compress.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a020522a88f7970dfe1bcaf99f8847e68"></a><!-- doxytag: member="mucap_compress.h::should_compress_caen" ref="a020522a88f7970dfe1bcaf99f8847e68" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="mucap__compress_8h.html#a020522a88f7970dfe1bcaf99f8847e68">should_compress_caen</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="caen__compress_8cpp_source.html#l00015">15</a> of file <a class="el" href="caen__compress_8cpp_source.html">caen_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="caen__compress_8cpp_source.html#l00025">caen_load()</a>, and <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>.</p>

</div>
</div>
<a class="anchor" id="a2579964081d7e77b11b77695ea6625e5"></a><!-- doxytag: member="mucap_compress.h::should_compress_comp" ref="a2579964081d7e77b11b77695ea6625e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="mucap__compress_8h.html#a2579964081d7e77b11b77695ea6625e5">should_compress_comp</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="comp__compress_8cpp_source.html#l00016">16</a> of file <a class="el" href="comp__compress_8cpp_source.html">comp_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="comp__compress_8cpp_source.html#l00029">comp_load()</a>, and <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>.</p>

</div>
</div>
<a class="anchor" id="af6b7be055ab2104fefa3a1f3dc8644a2"></a><!-- doxytag: member="mucap_compress.h::should_compress_fadc" ref="af6b7be055ab2104fefa3a1f3dc8644a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="mucap__compress_8h.html#af6b7be055ab2104fefa3a1f3dc8644a2">should_compress_fadc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="fadc__compress_8cpp_source.html#l00016">16</a> of file <a class="el" href="fadc__compress_8cpp_source.html">fadc_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, and <a class="el" href="fadc__compress_8cpp_source.html#l00029">fadc_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a151c2cecd99176e9c48ba34d1c279658"></a><!-- doxytag: member="mucap_compress.h::should_compress_n2fadc_ndet" ref="a151c2cecd99176e9c48ba34d1c279658" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="n2fadc__ndet__compress_8cpp.html#a151c2cecd99176e9c48ba34d1c279658">should_compress_n2fadc_ndet</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00014">14</a> of file <a class="el" href="n2fadc__ndet__compress_8cpp_source.html">n2fadc_ndet_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>, and <a class="el" href="n2fadc__ndet__compress_8cpp_source.html#l00024">n2fadc_ndet_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a3e90d51c60a85540951186d31984ace1"></a><!-- doxytag: member="mucap_compress.h::should_compress_n2fadc_tpc" ref="a3e90d51c60a85540951186d31984ace1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="n2fadc__tpc__compress_8cpp.html#a3e90d51c60a85540951186d31984ace1">should_compress_n2fadc_tpc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00014">14</a> of file <a class="el" href="n2fadc__tpc__compress_8cpp_source.html">n2fadc_tpc_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>, and <a class="el" href="n2fadc__tpc__compress_8cpp_source.html#l00024">n2fadc_tpc_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c56dade5ca8b94e1c62de9d3d5a57e2"></a><!-- doxytag: member="mucap_compress.h::should_compress_nfadc" ref="a0c56dade5ca8b94e1c62de9d3d5a57e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="nfadc__compress_8cpp.html#a0c56dade5ca8b94e1c62de9d3d5a57e2">should_compress_nfadc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfadc__compress_8cpp_source.html#l00014">14</a> of file <a class="el" href="nfadc__compress_8cpp_source.html">nfadc_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, <a class="el" href="overall_8cpp_source.html#l00160">compress_event_skim()</a>, and <a class="el" href="nfadc__compress_8cpp_source.html#l00024">nfadc_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a2dadd9a43c97d37b6b60f99b8c6e650f"></a><!-- doxytag: member="mucap_compress.h::should_compress_tdc400" ref="a2dadd9a43c97d37b6b60f99b8c6e650f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL <a class="el" href="tdc400__compress_8cpp.html#a2dadd9a43c97d37b6b60f99b8c6e650f">should_compress_tdc400</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tdc400__compress_8cpp_source.html#l00017">17</a> of file <a class="el" href="tdc400__compress_8cpp_source.html">tdc400_compress.cpp</a>.</p>

<p>Referenced by <a class="el" href="overall_8cpp_source.html#l00069">compress_event()</a>, and <a class="el" href="tdc400__compress_8cpp_source.html#l00030">tdc400_load()</a>.</p>

</div>
</div>
<a class="anchor" id="a119f5e1899fa0d99a4cf8cea6a18cb3f"></a><!-- doxytag: member="mucap_compress.h::time_huffman" ref="a119f5e1899fa0d99a4cf8cea6a18cb3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhuffman__table.html">huffman_table</a> <a class="el" href="tdc400__compress_8cpp.html#a119f5e1899fa0d99a4cf8cea6a18cb3f">time_huffman</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tdc400__compress_8cpp_source.html#l00016">16</a> of file <a class="el" href="tdc400__compress_8cpp_source.html">tdc400_compress.cpp</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

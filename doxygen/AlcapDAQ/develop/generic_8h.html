<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: midas/drivers/class/generic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>midas/drivers/class/generic.h File Reference</h1>
<p><a href="generic_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="generic_8h.html#ab6cd1c77f292e6fe8b67a7b421d5840e">cd_gen</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, <a class="el" href="structeqpmnt.html">PEQUIPMENT</a> pequipment)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="generic_8h.html#ab1b2720c40aaf85716bb7f11edb93909">cd_gen_read</a> (char *pevent, int)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab6cd1c77f292e6fe8b67a7b421d5840e"></a><!-- doxytag: member="generic.h::cd_gen" ref="ab6cd1c77f292e6fe8b67a7b421d5840e" args="(INT cmd, PEQUIPMENT pequipment)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> cd_gen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structeqpmnt.html">PEQUIPMENT</a>&nbsp;</td>
          <td class="paramname"> <em>pequipment</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab1b2720c40aaf85716bb7f11edb93909"></a><!-- doxytag: member="generic.h::cd_gen_read" ref="ab1b2720c40aaf85716bb7f11edb93909" args="(char *pevent, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> cd_gen_read </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>pevent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="generic_8c_source.html#l00438">438</a> of file <a class="el" href="generic_8c_source.html">generic.c</a>.</p>

<p>References <a class="el" href="midas_8c_source.html#l12826">bk_close()</a>, <a class="el" href="midas_8c_source.html#l12705">bk_create()</a>, <a class="el" href="midas_8c_source.html#l12623">bk_init()</a>, <a class="el" href="midas_8c_source.html#l12678">bk_size()</a>, <a class="el" href="midas_8h_source.html#l01396">eqpmnt::cd_info</a>, <a class="el" href="generic_8c_source.html#l00070">GEN_INFO::demand</a>, <a class="el" href="midas_8h_source.html#l01210">EVENT_ID</a>, <a class="el" href="ybos_8h_source.html#l00348">F4_BKTYPE</a>, <a class="el" href="generic_8c_source.html#l00066">GEN_INFO::format</a>, <a class="el" href="midas_8h_source.html#l00721">FORMAT_FIXED</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="ybos_8h_source.html#l00347">I4_BKTYPE</a>, <a class="el" href="generate-MODULES_8h_source.html#l00003">if</a>, <a class="el" href="generic_8c_source.html#l00071">GEN_INFO::measured</a>, <a class="el" href="generic_8c_source.html#l00065">GEN_INFO::num_channels</a>, <a class="el" href="midas_8h_source.html#l01217">SERIAL_NUMBER</a>, <a class="el" href="midas_8h_source.html#l00743">TID_FLOAT</a>, <a class="el" href="midas_8h_source.html#l01224">TIME_STAMP</a>, <a class="el" href="ybos_8c_source.html#l00549">ybk_close()</a>, <a class="el" href="ybos_8c_source.html#l00438">ybk_create()</a>, <a class="el" href="ybos_8c_source.html#l00408">ybk_init()</a>, and <a class="el" href="ybos_8c_source.html#l00579">ybk_size()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00439"></a>00439 {
<a name="l00440"></a>00440    <span class="keywordtype">float</span> *pdata;
<a name="l00441"></a>00441    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pdw;
<a name="l00442"></a>00442    <a class="code" href="structGEN__INFO.html">GEN_INFO</a> *gen_info;
<a name="l00443"></a>00443    <a class="code" href="structeqpmnt.html">EQUIPMENT</a> *pequipment;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445    pequipment = *((<a class="code" href="structeqpmnt.html">EQUIPMENT</a> **) pevent);
<a name="l00446"></a>00446    gen_info = (<a class="code" href="structGEN__INFO.html">GEN_INFO</a> *) pequipment-&gt;<a class="code" href="group__midasincludecode.html#gac88537c1672f32d13a99ce6822fc4d46">cd_info</a>;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448    <a class="code" href="generate-MODULES_8h.html#aaac43492f2954cc70dd9a286b2b3ab02">if</a> (gen_info-&gt;<a class="code" href="structGEN__INFO.html#a0bcc953f18a33cd643faee94e37098f5">format</a> == <a class="code" href="group__mdefineh.html#ga44835dd4c169e13e0fedf8c01a54dc2b">FORMAT_FIXED</a>) {
<a name="l00449"></a>00449       memcpy(pevent, gen_info-&gt;<a class="code" href="structGEN__INFO.html#a3fd4cc71b76a5e10c5ff7a9d3d813542">demand</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>);
<a name="l00450"></a>00450       pevent += <span class="keyword">sizeof</span>(float) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>;
<a name="l00451"></a>00451 
<a name="l00452"></a>00452       memcpy(pevent, gen_info-&gt;<a class="code" href="structGEN__INFO.html#ae8f9697a501f2daea2b7c3d5f2e3f5a0">measured</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>);
<a name="l00453"></a>00453       pevent += <span class="keyword">sizeof</span>(float) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455       <span class="keywordflow">return</span> 2 * <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>;
<a name="l00456"></a>00456    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gen_info-&gt;<a class="code" href="structGEN__INFO.html#a0bcc953f18a33cd643faee94e37098f5">format</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l00457"></a>00457       <a class="code" href="group__msectionh.html#ga6a2d6aced3ec658234d4c6ab0ba043fb">bk_init</a>(pevent);
<a name="l00458"></a>00458 
<a name="l00459"></a>00459       <span class="comment">/* create DMND bank */</span>
<a name="l00460"></a>00460       <a class="code" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create</a>(pevent, <span class="stringliteral">&quot;DMND&quot;</span>, <a class="code" href="group__mdefineh.html#gae932ec1b283f6c4b9c30a6d489beea7f">TID_FLOAT</a>, &amp;pdata);
<a name="l00461"></a>00461       memcpy(pdata, gen_info-&gt;<a class="code" href="structGEN__INFO.html#a3fd4cc71b76a5e10c5ff7a9d3d813542">demand</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>);
<a name="l00462"></a>00462       pdata += gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>;
<a name="l00463"></a>00463       <a class="code" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close</a>(pevent, pdata);
<a name="l00464"></a>00464 
<a name="l00465"></a>00465       <span class="comment">/* create MSRD bank */</span>
<a name="l00466"></a>00466       <a class="code" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create</a>(pevent, <span class="stringliteral">&quot;MSRD&quot;</span>, <a class="code" href="group__mdefineh.html#gae932ec1b283f6c4b9c30a6d489beea7f">TID_FLOAT</a>, &amp;pdata);
<a name="l00467"></a>00467       memcpy(pdata, gen_info-&gt;<a class="code" href="structGEN__INFO.html#ae8f9697a501f2daea2b7c3d5f2e3f5a0">measured</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>);
<a name="l00468"></a>00468       pdata += gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>;
<a name="l00469"></a>00469       <a class="code" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close</a>(pevent, pdata);
<a name="l00470"></a>00470 
<a name="l00471"></a>00471       <span class="keywordflow">return</span> <a class="code" href="group__msectionh.html#ga825db64c9ef9b4656698c890fca37c05">bk_size</a>(pevent);
<a name="l00472"></a>00472    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gen_info-&gt;<a class="code" href="structGEN__INFO.html#a0bcc953f18a33cd643faee94e37098f5">format</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l00473"></a>00473       <a class="code" href="group__ybosincludecode.html#ga6ed49f74e7fd8e2105433bc664891d08">ybk_init</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent);
<a name="l00474"></a>00474 
<a name="l00475"></a>00475       <span class="comment">/* create EVID bank */</span>
<a name="l00476"></a>00476       <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, <span class="stringliteral">&quot;EVID&quot;</span>, <a class="code" href="group__ybosdefineh.html#gac78b656213d4a1fb1fd9bf9bd8c46f09">I4_BKTYPE</a>, (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (&amp;pdw));
<a name="l00477"></a>00477       *(pdw)++ = <a class="code" href="group__mbufferh.html#gaf42c9a1ac33cf459bfd366673f6a4d70">EVENT_ID</a>(pevent);      <span class="comment">/* Event_ID + Mask */</span>
<a name="l00478"></a>00478       *(pdw)++ = <a class="code" href="group__mbufferh.html#gadbb75a9d81e264e357bc5fc73dd4ebb8">SERIAL_NUMBER</a>(pevent); <span class="comment">/* Serial number */</span>
<a name="l00479"></a>00479       *(pdw)++ = <a class="code" href="group__mbufferh.html#gae8d2f03c283637c81cdcfd3fda065d53">TIME_STAMP</a>(pevent);    <span class="comment">/* Time Stamp */</span>
<a name="l00480"></a>00480       <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, pdw);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482       <span class="comment">/* create DMND bank */</span>
<a name="l00483"></a>00483       <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, <span class="stringliteral">&quot;DMND&quot;</span>, <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>, (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) &amp; pdata);
<a name="l00484"></a>00484       memcpy(pdata, gen_info-&gt;<a class="code" href="structGEN__INFO.html#a3fd4cc71b76a5e10c5ff7a9d3d813542">demand</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>);
<a name="l00485"></a>00485       pdata += gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>;
<a name="l00486"></a>00486       <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, pdata);
<a name="l00487"></a>00487 
<a name="l00488"></a>00488       <span class="comment">/* create MSRD bank */</span>
<a name="l00489"></a>00489       <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, <span class="stringliteral">&quot;MSRD&quot;</span>, <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>, (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) &amp; pdata);
<a name="l00490"></a>00490       memcpy(pdata, gen_info-&gt;<a class="code" href="structGEN__INFO.html#ae8f9697a501f2daea2b7c3d5f2e3f5a0">measured</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>);
<a name="l00491"></a>00491       pdata += gen_info-&gt;<a class="code" href="structGEN__INFO.html#a976a1562f355ad898ab105537c1b59a7">num_channels</a>;
<a name="l00492"></a>00492       <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, pdata);
<a name="l00493"></a>00493 
<a name="l00494"></a>00494       <span class="keywordflow">return</span> <a class="code" href="group__ybosincludecode.html#gab97b7d0d9ea164c791c36374826d19fe">ybk_size</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent);
<a name="l00495"></a>00495    } <span class="keywordflow">else</span>
<a name="l00496"></a>00496       <span class="keywordflow">return</span> 0;
<a name="l00497"></a>00497 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

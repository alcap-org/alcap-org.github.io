<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: midas/drivers/class/multi.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>midas/drivers/class/multi.h File Reference</h1>
<p><a href="multi_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_8h.html#ad19d95c8fb030b15e9ce516ffbca6dbc">cd_multi</a> (<a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> <a class="el" href="jorway73a_8c.html#a11d3b696651733f98e58d14ad8fa7a1d">cmd</a>, <a class="el" href="structeqpmnt.html">PEQUIPMENT</a> pequipment)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_8h.html#a1dd48a9bc5d90ec8c3404b3fe2efd67b">cd_multi_read</a> (char *pevent, int)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad19d95c8fb030b15e9ce516ffbca6dbc"></a><!-- doxytag: member="multi.h::cd_multi" ref="ad19d95c8fb030b15e9ce516ffbca6dbc" args="(INT cmd, PEQUIPMENT pequipment)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> cd_multi </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a>&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structeqpmnt.html">PEQUIPMENT</a>&nbsp;</td>
          <td class="paramname"> <em>pequipment</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1dd48a9bc5d90ec8c3404b3fe2efd67b"></a><!-- doxytag: member="multi.h::cd_multi_read" ref="a1dd48a9bc5d90ec8c3404b3fe2efd67b" args="(char *pevent, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="odbhist_8c.html#a392e62da233ed3e2f7c3fd4f487a3896">INT</a> cd_multi_read </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>pevent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="multi_8c_source.html#l00629">629</a> of file <a class="el" href="multi_8c_source.html">multi.c</a>.</p>

<p>References <a class="el" href="midas_8c_source.html#l12826">bk_close()</a>, <a class="el" href="midas_8c_source.html#l12705">bk_create()</a>, <a class="el" href="midas_8c_source.html#l12623">bk_init()</a>, <a class="el" href="midas_8c_source.html#l12678">bk_size()</a>, <a class="el" href="midas_8h_source.html#l01396">eqpmnt::cd_info</a>, <a class="el" href="midas_8h_source.html#l01210">EVENT_ID</a>, <a class="el" href="ybos_8h_source.html#l00348">F4_BKTYPE</a>, <a class="el" href="multi_8c_source.html#l00066">MULTI_INFO::format</a>, <a class="el" href="midas_8h_source.html#l00721">FORMAT_FIXED</a>, <a class="el" href="midas_8h_source.html#l00718">FORMAT_MIDAS</a>, <a class="el" href="midas_8h_source.html#l00719">FORMAT_YBOS</a>, <a class="el" href="ybos_8h_source.html#l00347">I4_BKTYPE</a>, <a class="el" href="generate-MODULES_8h_source.html#l00003">if</a>, <a class="el" href="multi_8c_source.html#l00065">MULTI_INFO::num_channels_input</a>, <a class="el" href="multi_8c_source.html#l00065">MULTI_INFO::num_channels_output</a>, <a class="el" href="midas_8h_source.html#l01217">SERIAL_NUMBER</a>, <a class="el" href="midas_8h_source.html#l00743">TID_FLOAT</a>, <a class="el" href="midas_8h_source.html#l01224">TIME_STAMP</a>, <a class="el" href="multi_8c_source.html#l00072">MULTI_INFO::var_input</a>, <a class="el" href="multi_8c_source.html#l00073">MULTI_INFO::var_output</a>, <a class="el" href="ybos_8c_source.html#l00549">ybk_close()</a>, <a class="el" href="ybos_8c_source.html#l00438">ybk_create()</a>, <a class="el" href="ybos_8c_source.html#l00408">ybk_init()</a>, and <a class="el" href="ybos_8c_source.html#l00579">ybk_size()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00630"></a>00630 {
<a name="l00631"></a>00631    <span class="keywordtype">float</span> *pdata;
<a name="l00632"></a>00632    <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *pdw;
<a name="l00633"></a>00633    <a class="code" href="structMULTI__INFO.html">MULTI_INFO</a> *m_info;
<a name="l00634"></a>00634    <a class="code" href="structeqpmnt.html">EQUIPMENT</a> *pequipment;
<a name="l00635"></a>00635 
<a name="l00636"></a>00636    pequipment = *((<a class="code" href="structeqpmnt.html">EQUIPMENT</a> **) pevent);
<a name="l00637"></a>00637    m_info = (<a class="code" href="structMULTI__INFO.html">MULTI_INFO</a> *) pequipment-&gt;<a class="code" href="group__midasincludecode.html#gac88537c1672f32d13a99ce6822fc4d46">cd_info</a>;
<a name="l00638"></a>00638 
<a name="l00639"></a>00639    <a class="code" href="generate-MODULES_8h.html#aaac43492f2954cc70dd9a286b2b3ab02">if</a> (m_info-&gt;<a class="code" href="structMULTI__INFO.html#ae1d73e317f8d6fde02c18accbae2cb54">format</a> == <a class="code" href="group__mdefineh.html#ga44835dd4c169e13e0fedf8c01a54dc2b">FORMAT_FIXED</a>) {
<a name="l00640"></a>00640       memcpy(pevent, m_info-&gt;<a class="code" href="structMULTI__INFO.html#a8a4932970190ffacb2db84f2494e29ea">var_input</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#a605ccf623ff9fea770a5c51cc67f3c03">num_channels_input</a>);
<a name="l00641"></a>00641       pevent += <span class="keyword">sizeof</span>(float) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#a605ccf623ff9fea770a5c51cc67f3c03">num_channels_input</a>;
<a name="l00642"></a>00642 
<a name="l00643"></a>00643       memcpy(pevent, m_info-&gt;<a class="code" href="structMULTI__INFO.html#a1016764a8579793d9bd4e259fb60148b">var_output</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#acd3698a1c4455d2900af32336daf0bd3">num_channels_output</a>);
<a name="l00644"></a>00644       pevent += <span class="keyword">sizeof</span>(float) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#acd3698a1c4455d2900af32336daf0bd3">num_channels_output</a>;
<a name="l00645"></a>00645 
<a name="l00646"></a>00646       <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * (m_info-&gt;<a class="code" href="structMULTI__INFO.html#a605ccf623ff9fea770a5c51cc67f3c03">num_channels_input</a> + m_info-&gt;<a class="code" href="structMULTI__INFO.html#acd3698a1c4455d2900af32336daf0bd3">num_channels_output</a>);
<a name="l00647"></a>00647    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_info-&gt;<a class="code" href="structMULTI__INFO.html#ae1d73e317f8d6fde02c18accbae2cb54">format</a> == <a class="code" href="group__mdefineh.html#gac7ef5b0cbb1fc1d26c3bfd4cc4a191a9">FORMAT_MIDAS</a>) {
<a name="l00648"></a>00648       <a class="code" href="group__msectionh.html#ga6a2d6aced3ec658234d4c6ab0ba043fb">bk_init</a>(pevent);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650       <span class="comment">/* create INPT bank */</span>
<a name="l00651"></a>00651       <a class="code" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create</a>(pevent, <span class="stringliteral">&quot;INPT&quot;</span>, <a class="code" href="group__mdefineh.html#gae932ec1b283f6c4b9c30a6d489beea7f">TID_FLOAT</a>, &amp;pdata);
<a name="l00652"></a>00652       memcpy(pdata, m_info-&gt;<a class="code" href="structMULTI__INFO.html#a8a4932970190ffacb2db84f2494e29ea">var_input</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#a605ccf623ff9fea770a5c51cc67f3c03">num_channels_input</a>);
<a name="l00653"></a>00653       pdata += m_info-&gt;<a class="code" href="structMULTI__INFO.html#a605ccf623ff9fea770a5c51cc67f3c03">num_channels_input</a>;
<a name="l00654"></a>00654       <a class="code" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close</a>(pevent, pdata);
<a name="l00655"></a>00655 
<a name="l00656"></a>00656       <span class="comment">/* create OUTP bank */</span>
<a name="l00657"></a>00657       <a class="code" href="group__msectionh.html#ga5d60ec9f544f56ab8170380ebe195584">bk_create</a>(pevent, <span class="stringliteral">&quot;OUTP&quot;</span>, <a class="code" href="group__mdefineh.html#gae932ec1b283f6c4b9c30a6d489beea7f">TID_FLOAT</a>, &amp;pdata);
<a name="l00658"></a>00658       memcpy(pdata, m_info-&gt;<a class="code" href="structMULTI__INFO.html#a1016764a8579793d9bd4e259fb60148b">var_output</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#acd3698a1c4455d2900af32336daf0bd3">num_channels_output</a>);
<a name="l00659"></a>00659       pdata += m_info-&gt;<a class="code" href="structMULTI__INFO.html#acd3698a1c4455d2900af32336daf0bd3">num_channels_output</a>;
<a name="l00660"></a>00660       <a class="code" href="group__msectionh.html#gab0314f08910a3950815d265d090656b7">bk_close</a>(pevent, pdata);
<a name="l00661"></a>00661 
<a name="l00662"></a>00662       <span class="keywordflow">return</span> <a class="code" href="group__msectionh.html#ga825db64c9ef9b4656698c890fca37c05">bk_size</a>(pevent);
<a name="l00663"></a>00663    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_info-&gt;<a class="code" href="structMULTI__INFO.html#ae1d73e317f8d6fde02c18accbae2cb54">format</a> == <a class="code" href="group__mdefineh.html#gaab9657af955d54be6cd05e0a726ad964">FORMAT_YBOS</a>) {
<a name="l00664"></a>00664       <a class="code" href="group__ybosincludecode.html#ga6ed49f74e7fd8e2105433bc664891d08">ybk_init</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent);
<a name="l00665"></a>00665 
<a name="l00666"></a>00666       <span class="comment">/* create EVID bank */</span>
<a name="l00667"></a>00667       <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, <span class="stringliteral">&quot;EVID&quot;</span>, <a class="code" href="group__ybosdefineh.html#gac78b656213d4a1fb1fd9bf9bd8c46f09">I4_BKTYPE</a>, (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) (&amp;pdw));
<a name="l00668"></a>00668       *(pdw)++ = <a class="code" href="group__mbufferh.html#gaf42c9a1ac33cf459bfd366673f6a4d70">EVENT_ID</a>(pevent);      <span class="comment">/* Event_ID + Mask */</span>
<a name="l00669"></a>00669       *(pdw)++ = <a class="code" href="group__mbufferh.html#gadbb75a9d81e264e357bc5fc73dd4ebb8">SERIAL_NUMBER</a>(pevent); <span class="comment">/* Serial number */</span>
<a name="l00670"></a>00670       *(pdw)++ = <a class="code" href="group__mbufferh.html#gae8d2f03c283637c81cdcfd3fda065d53">TIME_STAMP</a>(pevent);    <span class="comment">/* Time Stamp */</span>
<a name="l00671"></a>00671       <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, pdw);
<a name="l00672"></a>00672 
<a name="l00673"></a>00673       <span class="comment">/* create INPT bank */</span>
<a name="l00674"></a>00674       <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, <span class="stringliteral">&quot;INPT&quot;</span>, <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>, (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) &amp; pdata);
<a name="l00675"></a>00675       memcpy(pdata, m_info-&gt;<a class="code" href="structMULTI__INFO.html#a8a4932970190ffacb2db84f2494e29ea">var_input</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#a605ccf623ff9fea770a5c51cc67f3c03">num_channels_input</a>);
<a name="l00676"></a>00676       pdata += m_info-&gt;<a class="code" href="structMULTI__INFO.html#a605ccf623ff9fea770a5c51cc67f3c03">num_channels_input</a>;
<a name="l00677"></a>00677       <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, pdata);
<a name="l00678"></a>00678 
<a name="l00679"></a>00679       <span class="comment">/* create OUTP bank */</span>
<a name="l00680"></a>00680       <a class="code" href="group__ybosincludecode.html#gadbdf677c59a4be61da9286b807a5b2e2">ybk_create</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, <span class="stringliteral">&quot;OUTP&quot;</span>, <a class="code" href="group__ybosdefineh.html#ga07c32fd205319ee4bd3b6adde65058d6">F4_BKTYPE</a>, (<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) &amp; pdata);
<a name="l00681"></a>00681       memcpy(pdata, m_info-&gt;<a class="code" href="structMULTI__INFO.html#a1016764a8579793d9bd4e259fb60148b">var_output</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * m_info-&gt;<a class="code" href="structMULTI__INFO.html#acd3698a1c4455d2900af32336daf0bd3">num_channels_output</a>);
<a name="l00682"></a>00682       pdata += m_info-&gt;<a class="code" href="structMULTI__INFO.html#acd3698a1c4455d2900af32336daf0bd3">num_channels_output</a>;
<a name="l00683"></a>00683       <a class="code" href="group__ybosincludecode.html#gadfb143a50f37e70483da7e18cbc463ea">ybk_close</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent, pdata);
<a name="l00684"></a>00684 
<a name="l00685"></a>00685       <span class="keywordflow">return</span> <a class="code" href="group__ybosincludecode.html#gab97b7d0d9ea164c791c36374826d19fe">ybk_size</a>((<a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> *) pevent);
<a name="l00686"></a>00686    }
<a name="l00687"></a>00687 
<a name="l00688"></a>00688    <span class="keywordflow">return</span> 0;
<a name="l00689"></a>00689 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 6 Jun 2014 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

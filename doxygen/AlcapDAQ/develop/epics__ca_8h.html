<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>AlcapDAQ: slowcontrol/epics_beamline_frontend/epics_ca.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AlcapDAQ
   &#160;<span id="projectnumber">1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e7f6bcc07914a0304da59eb26466ac95.html">slowcontrol</a></li><li class="navelem"><a class="el" href="dir_1c9d52d699d14336256e715e46e7c1ca.html">epics_beamline_frontend</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">epics_ca.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="epics__ca_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a08c60fdeb4c4d04e92d2af32d7527982"><td class="memItemLeft" align="right" valign="top">INT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="epics__ca_8h.html#a08c60fdeb4c4d04e92d2af32d7527982">epics_ca</a> (INT cmd,...)</td></tr>
<tr class="separator:a08c60fdeb4c4d04e92d2af32d7527982"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a08c60fdeb4c4d04e92d2af32d7527982"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT epics_ca </td>
          <td>(</td>
          <td class="paramtype">INT&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="epics__ca_8c_source.html#l03134">3134</a> of file <a class="el" href="epics__ca_8c_source.html">epics_ca.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;                           {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;   va_list argptr;</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;   HNDLE <a class="code" href="mevb_8cpp.html#a8cd567d23219ba7fc83280cf20caf1c2">hKey</a>;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   INT <a class="code" href="ADCS_8h.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>, <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;   <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a> flags;</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;   <span class="keywordtype">float</span> <a class="code" href="ADCS_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, *pvalue;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;   <a class="code" href="structCA__INFO.html">CA_INFO</a> *info;</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;   <span class="keywordtype">char</span> *label;</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;   va_start(argptr, cmd);</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;   status = FE_SUCCESS;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="preprocessor">#ifdef MIDEBUG2</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="preprocessor"></span>   cm_msg(MLOG,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;++epics_ca(CMD=%d)&quot;</span>,cmd);</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">if</span> (cmd == CMD_INIT) {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;     <span class="keywordtype">void</span> *pinfo;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;     hKey    = va_arg(argptr, HNDLE);</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;     pinfo   = va_arg(argptr, <span class="keywordtype">void</span> *);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;     channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;     flags   = va_arg(argptr, <a class="code" href="group__mvmestdinclude.html#ga798af1e30bc65f319c1a246cecf59e39">DWORD</a>);</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;     status  = <a class="code" href="epics__ca_8c.html#a5bbff59bfc195ba6fcfbeb97191343dd">epics_ca_init</a>(hKey, pinfo, channel);</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;     <span class="keywordflow">if</span> (pinfo) {</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;       info = *(<a class="code" href="structCA__INFO.html">CA_INFO</a> **) pinfo;</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;       <span class="keywordflow">if</span> (info) info-&gt;<a class="code" href="structCA__INFO.html#ac943fd0ba005886849273e996697564e">flags</a> = flags;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;     }</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;   } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;     info = va_arg(argptr, <span class="keywordtype">void</span> *);</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;     <span class="comment">/* only execute command if enabled */</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;     <span class="keywordflow">if</span> (!info || info-&gt;<a class="code" href="structCA__INFO.html#a3f0103827dc76e28303dd8e96f04b9e3">cmd_disabled</a>) {</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;       ss_sleep(100);</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="preprocessor">#ifdef MIDEBUG2</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;<span class="preprocessor"></span>       cm_msg(MLOG,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;ss_sleep(100)&quot;</span>);</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;<span class="preprocessor"></span>       status = FE_ERR_DISABLED;</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;     } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;       <span class="keywordflow">switch</span> (cmd) {</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;         <span class="keywordflow">case</span> CMD_INIT:</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;         <span class="keywordflow">case</span> CMD_EXIT:</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;            status = <a class="code" href="epics__ca_8c.html#ab517c3d9884a69d36e0761bdcbe683c8">epics_ca_exit</a>(info);</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;         <span class="keywordflow">case</span> CMD_SET:</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            value = (float) va_arg(argptr, <span class="keywordtype">double</span>);</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;            status = <a class="code" href="epics__ca_8c.html#acf64cdaca044edd1e24ef8ea5aa3d080">epics_ca_set</a>(info, channel, value, <a class="code" href="p30_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="p30_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;         <span class="keywordflow">case</span> CMD_SET_ALL:</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;            value = (float) va_arg(argptr, <span class="keywordtype">double</span>);</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            status = <a class="code" href="epics__ca_8c.html#af6b6f79619a17afc1b5866c53c389aa5">epics_ca_set_all</a>(info, channel, value);</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;         <span class="keywordflow">case</span> CMD_SET_LABEL:</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;            label = va_arg(argptr, <span class="keywordtype">char</span> *);</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;            <span class="comment">//status = epics_ca_set_label(info, channel, label);</span></div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;            status = FE_SUCCESS;</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;         <span class="keywordflow">case</span> CMD_GET:</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;            pvalue = va_arg(argptr, <span class="keywordtype">float</span> *);</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            status = <a class="code" href="epics__ca_8c.html#a57fb460dbfc4333b90d38db4e95199f4">epics_ca_get</a>(info, channel, pvalue);</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;         <span class="keywordflow">case</span> CMD_GET_DEMAND:</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;            pvalue = va_arg(argptr, <span class="keywordtype">float</span> *);</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            status = <a class="code" href="epics__ca_8c.html#a5f44ed812149fe155d201809521e014a">epics_ca_get_demand</a>(info, channel, pvalue);</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;         <span class="keywordflow">case</span> CMD_GET_ALL:</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;            pvalue = va_arg(argptr, <span class="keywordtype">float</span> *);</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;            status = <a class="code" href="epics__ca_8c.html#a1de86e1c04908cfcee8ea66406f6dec0">epics_ca_get_all</a>(info, channel, pvalue);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;         <span class="keywordflow">case</span> CMD_GET_DEFAULT_NAME:</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            label = va_arg(argptr, <span class="keywordtype">char</span> *);</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;            status = <a class="code" href="epics__ca_8c.html#a670a395b55b713656d96c8da5d5152cd">epics_ca_get_default_name</a>(info, channel, label);</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;         <span class="keywordflow">case</span> CMD_GET_DEFAULT_THRESHOLD:</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            channel = va_arg(argptr, INT);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            pvalue = va_arg(argptr, <span class="keywordtype">float</span> *);</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            status = <a class="code" href="epics__ca_8c.html#a547abc54f80df2efece01028e4bf23d8">epics_ca_get_default_threshold</a>(info, channel, pvalue);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;         <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;<span class="preprocessor">#ifdef MIDEBUG</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;<span class="preprocessor"></span>   cm_msg(MLOG,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;**epics_ca(CMD=%d) is not handled&quot;</span>,cmd);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="preprocessor"></span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;       }</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;     }</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;   }</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;   va_end(argptr);</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;<span class="preprocessor">#ifdef MIDEBUG2</span></div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;<span class="preprocessor"></span>   cm_msg(MLOG,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;--epics_ca()&quot;</span>);</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">return</span> <a class="code" href="patch__mevb_8cpp.html#a015eb90e0de9f16e87bd149d4b9ce959">status</a>;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>

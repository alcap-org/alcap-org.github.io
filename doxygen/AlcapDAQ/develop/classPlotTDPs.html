<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: PlotTDPs Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PlotTDPs Class Reference<br/>
<small>
[<a class="el" href="group__rootana__modules.html">Modules</a>]</small>
</h1><!-- doxytag: class="PlotTDPs" --><!-- doxytag: inherits="BaseModule" -->
<p>Profile <a class="el" href="classTDetectorPulse.html">TDetectorPulse</a> s.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PlotTDPs:</div>
<div class="dynsection">
 <div class="center">
  <img src="classPlotTDPs.gif" usemap="#PlotTDPs_map" alt=""/>
  <map id="PlotTDPs_map" name="PlotTDPs_map">
<area href="classBaseModule.html" alt="BaseModule" shape="rect" coords="0,0,82,24"/>
</map>
 </div>
</div>

<p><a href="classPlotTDPs-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPlotTDPs_1_1Detector__t.html">Detector_t</a></td></tr>
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="classIDs_1_1source.html">IDs::source</a>, <br class="typebreak"/>
<a class="el" href="structPlotTDPs_1_1Detector__t.html">Detector_t</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#a6c92a9e7c0dc22c8621495a41a095844">PlotsList_t</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#a0fc6a0a559220943120f1e42ff3a0c3a">PlotTDPs</a> (<a class="el" href="classmodules_1_1options.html">modules::options</a> *opts)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#a0fc6a0a559220943120f1e42ff3a0c3a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#ab40145cd5ab6cf047a09daf6878d821b">~PlotTDPs</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#ab40145cd5ab6cf047a09daf6878d821b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#a204587ff6e1d967ab21d0cbbfea3b0fd">ProcessGenericEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ac24b7d3d359985742164399bb19bad76">Preprocess</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method called by the main pre-process loop.  <a href="#ac24b7d3d359985742164399bb19bad76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#a5f8dd6ba24c3cc68385eb540c17ae5de">Postprocess</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method called by the main pre-process loop.  <a href="#a5f8dd6ba24c3cc68385eb540c17ae5de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#aab50673c8ec954675da2664677abfab1">SetAlias</a> (const std::string &amp;alias)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ac3e4f013f5465813c9cfa2179788cbf3">GetAlias</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#af30c91fa2a3388325dd20b322de517ca">GetName</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the name of this module as given to the constructor of the base class.  <a href="#af30c91fa2a3388325dd20b322de517ca"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ac6227c641b46487b3deb287fd3ea2408">Debug</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TDirectory *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ae753140da9952cb8caea03082294ce5b">GetDirectory</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the TDirectory for this module.  <a href="#ae753140da9952cb8caea03082294ce5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TDirectory *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#a42cecf27b0fc6c68efa06630358ce66b">GetDirectory</a> (const std::string &amp;name=&quot;&quot;)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TDirectory *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#aa00f24e65a18c1d08149965da0fa1a22">dir</a></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#a8fbe4ffd26b9e7397d89c7975135b0b8">ProcessEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fill all histograms.  <a href="#a8fbe4ffd26b9e7397d89c7975135b0b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#a2d6e5c0adf86b4b251f364e18919ecee">BeforeFirstEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *setup)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup all histograms.  <a href="#a2d6e5c0adf86b4b251f364e18919ecee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#acc8aac00def41941edb1acaf6b653908">AfterLastEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *setup)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Draw and fit all desired histograms.  <a href="#acc8aac00def41941edb1acaf6b653908"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPlotTDPs.html#a6c92a9e7c0dc22c8621495a41a095844">PlotsList_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#a87b54e642caa4c66306dd317213a0a66">fFastCut</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#ae38c09ba00ef3606dd7e204c8b7fd80e">fSlowCut</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTDPs.html#aa044c287636c43794cf53249947bd927">fCutHists</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Profile <a class="el" href="classTDetectorPulse.html">TDetectorPulse</a> s. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Ben Krikler</dd></dl>
<p>Plot the relative amplitudes, efficiencies and times of paired pulses (TDetectorPulses, TDPs). </p>

<p>Definition at line <a class="el" href="PlotTDPs_8h_source.html#l00023">23</a> of file <a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a6c92a9e7c0dc22c8621495a41a095844"></a><!-- doxytag: member="PlotTDPs::PlotsList_t" ref="a6c92a9e7c0dc22c8621495a41a095844" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="classIDs_1_1source.html">IDs::source</a>,<a class="el" href="structPlotTDPs_1_1Detector__t.html">Detector_t</a>&gt; <a class="el" href="classPlotTDPs.html#a6c92a9e7c0dc22c8621495a41a095844">PlotTDPs::PlotsList_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PlotTDPs_8h_source.html#l00039">39</a> of file <a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0fc6a0a559220943120f1e42ff3a0c3a"></a><!-- doxytag: member="PlotTDPs::PlotTDPs" ref="a0fc6a0a559220943120f1e42ff3a0c3a" args="(modules::options *opts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PlotTDPs::PlotTDPs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmodules_1_1options.html">modules::options</a> *&nbsp;</td>
          <td class="paramname"> <em>opts</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="PlotTDPs_8cpp_source.html#l00031">31</a> of file <a class="el" href="PlotTDPs_8cpp_source.html">PlotTDPs.cpp</a>.</p>

<p>References <a class="el" href="PlotTDPs_8h_source.html#l00058">fCutHists</a>, <a class="el" href="PlotTDPs_8h_source.html#l00057">fFastCut</a>, <a class="el" href="PlotTDPs_8h_source.html#l00057">fSlowCut</a>, <a class="el" href="ModulesOptions_8cpp_source.html#l00057">modules::options::GetDouble()</a>, and <a class="el" href="ModulesOptions_8h_source.html#l00243">modules::options::GetFlag()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00031"></a>00031                                       :
<a name="l00032"></a>00032    <a class="code" href="classBaseModule.html#a828d4e27c72536894e03b3cf330ba8c6" title="Constructor of a module class. Provides several virtual methods that should be overloaded...">BaseModule</a>(<span class="stringliteral">&quot;PlotTDPs&quot;</span>,opts),<a class="code" href="classPlotTDPs.html#aa044c287636c43794cf53249947bd927">fCutHists</a>(<span class="keyword">false</span>){
<a name="l00033"></a>00033        <a class="code" href="classPlotTDPs.html#aa044c287636c43794cf53249947bd927">fCutHists</a>=!opts-&gt;<a class="code" href="classmodules_1_1options.html#afd85b5a7cd2ac4dbe59d5b07d83397d6" title="Check if a flag option has been set.">GetFlag</a>(<span class="stringliteral">&quot;no_cut_histos&quot;</span>);
<a name="l00034"></a>00034        <a class="code" href="classPlotTDPs.html#a87b54e642caa4c66306dd317213a0a66">fFastCut</a>=opts-&gt;<a class="code" href="classmodules_1_1options.html#ae5dc83034f14668946edafd54a7d3131" title="Get the named option as a double.">GetDouble</a>(<span class="stringliteral">&quot;fast_ch_cut&quot;</span>,0);
<a name="l00035"></a>00035        <a class="code" href="classPlotTDPs.html#ae38c09ba00ef3606dd7e204c8b7fd80e">fSlowCut</a>=opts-&gt;<a class="code" href="classmodules_1_1options.html#ae5dc83034f14668946edafd54a7d3131" title="Get the named option as a double.">GetDouble</a>(<span class="stringliteral">&quot;slow_ch_cut&quot;</span>,0);
<a name="l00036"></a>00036 }

</pre></div></p>

</div>
</div>
<a class="anchor" id="ab40145cd5ab6cf047a09daf6878d821b"></a><!-- doxytag: member="PlotTDPs::~PlotTDPs" ref="ab40145cd5ab6cf047a09daf6878d821b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PlotTDPs::~PlotTDPs </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="PlotTDPs_8cpp_source.html#l00038">38</a> of file <a class="el" href="PlotTDPs_8cpp_source.html">PlotTDPs.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00038"></a>00038                    {
<a name="l00039"></a>00039 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="acc8aac00def41941edb1acaf6b653908"></a><!-- doxytag: member="PlotTDPs::AfterLastEntry" ref="acc8aac00def41941edb1acaf6b653908" args="(TGlobalData *gData, const TSetupData *setup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PlotTDPs::AfterLastEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>setup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Draw and fit all desired histograms. </p>

<p>Implements <a class="el" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="PlotTDPs_8cpp_source.html#l00241">241</a> of file <a class="el" href="PlotTDPs_8cpp_source.html">PlotTDPs.cpp</a>.</p>

<p>References <a class="el" href="PlotTDPs_8h_source.html#l00037">PlotTDPs::Detector_t::amp_grad</a>, <a class="el" href="PlotTDPs_8h_source.html#l00037">PlotTDPs::Detector_t::amp_inter</a>, <a class="el" href="PlotTDPs_8h_source.html#l00036">PlotTDPs::Detector_t::amp_status</a>, <a class="el" href="PlotTDPs_8h_source.html#l00027">PlotTDPs::Detector_t::amplitudes</a>, <a class="el" href="BaseModule_8h_source.html#l00071">BaseModule::Debug()</a>, and <a class="el" href="PlotTDPs_8h_source.html#l00056">fPlotsList</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00241"></a>00241                                                                       {
<a name="l00242"></a>00242     <span class="comment">// Draw and save all histograms</span>
<a name="l00243"></a>00243     <span class="keywordflow">for</span>(<a class="code" href="namespacemodules.html#a5ce57c86284eadc5b573cfab0949bfdb">PlotsList_t::iterator</a> i_source=<a class="code" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a>.begin();
<a name="l00244"></a>00244             i_source!=<a class="code" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a>.end(); ++i_source){
<a name="l00245"></a>00245         <a class="code" href="namespaceIDs.html#aa179f67aeac8473d1a57daaa59b4e8ae">Detector_t</a>&amp; plots=i_source-&gt;second;
<a name="l00246"></a>00246         <span class="comment">//plots.amplitudes-&gt;Draw();</span>
<a name="l00247"></a>00247         <span class="comment">//plots.slow_only_amps-&gt;Draw();</span>
<a name="l00248"></a>00248         <span class="comment">//plots.fast_only_amps-&gt;Draw();</span>
<a name="l00249"></a>00249         <span class="comment">//plots.time_diff_fast-&gt;Draw();</span>
<a name="l00250"></a>00250         <span class="comment">//plots.time_diff_slow-&gt;Draw();</span>
<a name="l00251"></a>00251         <span class="comment">//if(fCutHists){</span>
<a name="l00252"></a>00252         <span class="comment">//    plots.fast_amps_slow_cut-&gt;Draw();</span>
<a name="l00253"></a>00253         <span class="comment">//    plots.slow_amps_fast_cut-&gt;Draw();</span>
<a name="l00254"></a>00254         <span class="comment">//}</span>
<a name="l00255"></a>00255         TProfile* profile=plots.amplitudes-&gt;ProfileX(Form(<span class="stringliteral">&quot;%s_fit&quot;</span>,plots.amplitudes-&gt;GetName()));
<a name="l00256"></a>00256         TFitResultPtr fit=profile-&gt;Fit(<span class="stringliteral">&quot;pol1&quot;</span>,<span class="stringliteral">&quot;QS&quot;</span>);
<a name="l00257"></a>00257         <span class="keywordflow">if</span>(((<span class="keywordtype">int</span>)fit)!=0){
<a name="l00258"></a>00258             cout&lt;&lt;<span class="stringliteral">&quot;PlotTDPs: Warning: fitting to 2D amplitude plots failed with status: &quot;</span>
<a name="l00259"></a>00259                 &lt;&lt; (int)fit &lt;&lt;<span class="stringliteral">&quot; for &quot;</span>&lt;&lt;i_source-&gt;first&lt;&lt;endl;
<a name="l00260"></a>00260         } <span class="keywordflow">else</span> {
<a name="l00261"></a>00261             plots.amp_inter=fit-&gt;Parameter(0);
<a name="l00262"></a>00262             plots.amp_grad=fit-&gt;Parameter(1);
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264         plots.amp_status=fit;
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266 
<a name="l00267"></a>00267     <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#ac6227c641b46487b3deb287fd3ea2408">Debug</a>()){
<a name="l00268"></a>00268         cout&lt;&lt;<span class="stringliteral">&quot;PlotTDPs: Fitted amplitude gradients:&quot;</span>&lt;&lt;endl;
<a name="l00269"></a>00269         cout&lt;&lt;<span class="stringliteral">&quot;   intercept\t| gradient\t| source&quot;</span>&lt;&lt;endl;
<a name="l00270"></a>00270         cout&lt;&lt;<span class="stringliteral">&quot;   ---------\t| --------\t| ------&quot;</span>&lt;&lt;endl;
<a name="l00271"></a>00271         <span class="keywordflow">for</span>(<a class="code" href="namespacemodules.html#aecc7811d5380ed9d9e903c9b71a396aa">PlotsList_t::const_iterator</a> i_source=<a class="code" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a>.begin();
<a name="l00272"></a>00272                 i_source!=<a class="code" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a>.end(); ++i_source){
<a name="l00273"></a>00273             <span class="keyword">const</span> <a class="code" href="namespaceIDs.html#aa179f67aeac8473d1a57daaa59b4e8ae">Detector_t</a>&amp; plots=i_source-&gt;second;
<a name="l00274"></a>00274             <span class="keywordflow">if</span>(!plots.amp_status)
<a name="l00275"></a>00275                 cout&lt;&lt; <span class="stringliteral">&quot;  &quot;</span>&lt;&lt;plots.amp_inter&lt;&lt;<span class="stringliteral">&quot;\t| &quot;</span>&lt;&lt;  plots.amp_grad&lt;&lt;<span class="stringliteral">&quot;\t| &quot;</span>&lt;&lt;i_source-&gt;first&lt;&lt;endl;
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <span class="keywordflow">return</span> 0;
<a name="l00281"></a>00281 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2d6e5c0adf86b4b251f364e18919ecee"></a><!-- doxytag: member="PlotTDPs::BeforeFirstEntry" ref="a2d6e5c0adf86b4b251f364e18919ecee" args="(TGlobalData *gData, const TSetupData *setup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PlotTDPs::BeforeFirstEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>setup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup all histograms. </p>

<p>Implements <a class="el" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="PlotTDPs_8cpp_source.html#l00041">41</a> of file <a class="el" href="PlotTDPs_8cpp_source.html">PlotTDPs.cpp</a>.</p>

<p>References <a class="el" href="PlotTDPs_8h_source.html#l00037">PlotTDPs::Detector_t::amp_grad</a>, <a class="el" href="PlotTDPs_8h_source.html#l00037">PlotTDPs::Detector_t::amp_inter</a>, <a class="el" href="PlotTDPs_8h_source.html#l00036">PlotTDPs::Detector_t::amp_status</a>, <a class="el" href="PlotTDPs_8h_source.html#l00027">PlotTDPs::Detector_t::amplitudes</a>, <a class="el" href="BaseModule_8h_source.html#l00071">BaseModule::Debug()</a>, <a class="el" href="PlotTDPs_8h_source.html#l00031">PlotTDPs::Detector_t::fast_amps_slow_cut</a>, <a class="el" href="PlotTDPs_8h_source.html#l00028">PlotTDPs::Detector_t::fast_only_amps</a>, <a class="el" href="PlotTDPs_8h_source.html#l00058">fCutHists</a>, <a class="el" href="PlotTDPs_8h_source.html#l00057">fFastCut</a>, <a class="el" href="PlotTDPs_8h_source.html#l00056">fPlotsList</a>, <a class="el" href="PlotTDPs_8h_source.html#l00057">fSlowCut</a>, <a class="el" href="main_8cpp_source.html#l00073">gDetectorPulseMap</a>, <a class="el" href="IdChannel_8cpp_source.html#l00109">IDs::channel::GetCorrespondingFastSlow()</a>, <a class="el" href="BaseModule_8h_source.html#l00074">BaseModule::GetDirectory()</a>, <a class="el" href="BaseModule_8h_source.html#l00066">BaseModule::GetName()</a>, <a class="el" href="TSetupData_8h_source.html#l00075">TSetupData::GetNBits()</a>, <a class="el" href="PassThroughDPGenerator_8h_source.html#l00012">PassThroughDPGenerator::GetStaticId()</a>, <a class="el" href="SetupNavigator_8h_source.html#l00105">SetupNavigator::Instance()</a>, <a class="el" href="ModulesNavigator_8h_source.html#l00102">modules::navigator::Instance()</a>, <a class="el" href="IdChannel_8h_source.html#l00037">IDs::kFast</a>, <a class="el" href="IdGenerator_8h_source.html#l00107">IDs::generator::matches()</a>, <a class="el" href="PlotTDPs_8h_source.html#l00029">PlotTDPs::Detector_t::scale_factor</a>, <a class="el" href="PlotTDPs_8h_source.html#l00031">PlotTDPs::Detector_t::slow_amps_fast_cut</a>, <a class="el" href="PlotTDPs_8h_source.html#l00028">PlotTDPs::Detector_t::slow_only_amps</a>, <a class="el" href="IdChannel_8h_source.html#l00076">IDs::channel::SlowFast()</a>, <a class="el" href="PlotTDPs_8h_source.html#l00033">PlotTDPs::Detector_t::time_diff_fast</a>, <a class="el" href="PlotTDPs_8h_source.html#l00033">PlotTDPs::Detector_t::time_diff_slow</a>, <a class="el" href="PlotTDPs_8h_source.html#l00034">PlotTDPs::Detector_t::times</a>, and <a class="el" href="ModulesParser_8cpp_source.html#l00077">modules::parser::ToCppValid()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00041"></a>00041                                                                         {
<a name="l00042"></a>00042     <span class="comment">// Change into this modules directory</span>
<a name="l00043"></a>00043     <a class="code" href="classBaseModule.html#ae753140da9952cb8caea03082294ce5b" title="Get the TDirectory for this module.">GetDirectory</a>()-&gt;cd();
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     <span class="comment">// Make sure we&apos;ve got MakeDetectorPulses being used</span>
<a name="l00046"></a>00046     <a class="code" href="classMakeDetectorPulses.html">MakeDetectorPulses</a>* makeTDPs=<a class="code" href="classmodules_1_1navigator.html#a7b9cc64f2131df1cb305c6e9c2256d5d" title="Static method to obtain the singleton instance of the navigator.">modules::navigator::Instance</a>()-&gt;GetModule&lt;<a class="code" href="classMakeDetectorPulses.html">MakeDetectorPulses</a>&gt;(<span class="stringliteral">&quot;MakeDetectorPulses&quot;</span>);
<a name="l00047"></a>00047     <span class="keywordflow">if</span>(!makeTDPs){
<a name="l00048"></a>00048         cout&lt;&lt;<span class="stringliteral">&quot;It&apos;s meaningless to use the PlotTDPs module without MakeDetectorPulses as well&quot;</span>&lt;&lt;endl;
<a name="l00049"></a>00049         <span class="keywordflow">return</span> 1;
<a name="l00050"></a>00050     }
<a name="l00051"></a>00051     <span class="comment">// Make sure MakeDetectorPulses is called before PlotTDPs</span>
<a name="l00052"></a>00052     <span class="keywordflow">if</span>(!<a class="code" href="classmodules_1_1navigator.html#a7b9cc64f2131df1cb305c6e9c2256d5d" title="Static method to obtain the singleton instance of the navigator.">modules::navigator::Instance</a>()-&gt;Before(<span class="stringliteral">&quot;MakeDetectorPulses&quot;</span>,<a class="code" href="classBaseModule.html#af30c91fa2a3388325dd20b322de517ca" title="Get the name of this module as given to the constructor of the base class.">GetName</a>())){
<a name="l00053"></a>00053         cout&lt;&lt;<span class="stringliteral">&quot;MakeDetectorPulses must be used before PlotTDPs&quot;</span>&lt;&lt;endl;
<a name="l00054"></a>00054         <span class="keywordflow">return</span> 2;
<a name="l00055"></a>00055     }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057     <span class="comment">// Init loop variables</span>
<a name="l00058"></a>00058     <a class="code" href="classIDs_1_1generator.html" title="Streamable identifier for an instance of a generator.">IDs::generator</a> passThruId=<a class="code" href="classPassThroughDPGenerator.html#ac6b9a91dc63ca07ca9299f0adc15dee3">PassThroughDPGenerator::GetStaticId</a>();
<a name="l00059"></a>00059     <a class="code" href="namespaceIDs.html#aa179f67aeac8473d1a57daaa59b4e8ae">Detector_t</a> tmp;
<a name="l00060"></a>00060     std::string name;
<a name="l00061"></a>00061     std::string title;
<a name="l00062"></a>00062     std::stringstream full_title;
<a name="l00063"></a>00063     <a class="code" href="classIDs_1_1channel.html">IDs::channel</a> fast_id;
<a name="l00064"></a>00064     <a class="code" href="classIDs_1_1channel.html">IDs::channel</a> slow_id;
<a name="l00065"></a>00065     <span class="keywordtype">int</span> n_bits;
<a name="l00066"></a>00066     <span class="keywordtype">double</span> fast_amp_max, slow_amp_max;
<a name="l00067"></a>00067     <span class="keywordtype">double</span> fast_amp_min=0, slow_amp_min=0;
<a name="l00068"></a>00068     <span class="keywordtype">double</span> tdiff_min=-1e6, tdiff_max=1e6;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="comment">// Loop over all TDP sources</span>
<a name="l00071"></a>00071     <span class="keywordflow">for</span>(<a class="code" href="namespacemodules.html#aecc7811d5380ed9d9e903c9b71a396aa">SourceDetPulseMap::const_iterator</a> i_source=<a class="code" href="main_8cpp.html#a3ad213dca772a240dafd128599ff2c2e">gDetectorPulseMap</a>.begin();
<a name="l00072"></a>00072             i_source!= <a class="code" href="main_8cpp.html#a3ad213dca772a240dafd128599ff2c2e">gDetectorPulseMap</a>.end(); ++i_source){
<a name="l00073"></a>00073 
<a name="l00074"></a>00074         <span class="comment">// Ignore TDP sources that use the pass-through generator (so only have</span>
<a name="l00075"></a>00075         <span class="comment">// one valid input channel, like a scintillator or the muScA)</span>
<a name="l00076"></a>00076         <span class="keywordflow">if</span>(passThruId.<a class="code" href="classIDs_1_1generator.html#a6ddf7a15ceb5087afdc3406f8fa23dfa">matches</a>(i_source-&gt;first.Generator())){
<a name="l00077"></a>00077             cout&lt;&lt;<span class="stringliteral">&quot;Skipping TDP source, &apos;&quot;</span>&lt;&lt;i_source-&gt;first&lt;&lt;<span class="stringliteral">&quot;&apos; as it was made with the pass-through generator&quot;</span>&lt;&lt;endl;
<a name="l00078"></a>00078             <span class="keywordflow">continue</span>;
<a name="l00079"></a>00079         }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081         <span class="comment">// make the name and title for the histogram</span>
<a name="l00082"></a>00082         name=<span class="charliteral">&apos;h&apos;</span>+i_source-&gt;first.str();
<a name="l00083"></a>00083         <a class="code" href="namespacemodules_1_1parser.html#a251ecfa397c10d7e2ba4709b46099260">modules::parser::ToCppValid</a>(name);
<a name="l00084"></a>00084         title=<span class="stringliteral">&quot; from &quot;</span>;
<a name="l00085"></a>00085         title+=i_source-&gt;first.str();
<a name="l00086"></a>00086         <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#ac6227c641b46487b3deb287fd3ea2408">Debug</a>()) {
<a name="l00087"></a>00087             cout&lt;&lt;<span class="stringliteral">&quot;Made histogram called &quot;</span>&lt;&lt;name&lt;&lt;<span class="stringliteral">&quot; with title &quot;</span>&lt;&lt; title&lt;&lt;endl;
<a name="l00088"></a>00088         }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090         <span class="comment">// Setup the Axis limits</span>
<a name="l00091"></a>00091         fast_id=i_source-&gt;first.Channel();
<a name="l00092"></a>00092         fast_id.<a class="code" href="classIDs_1_1channel.html#a412d1ebe2d4a25f46eb3e405f356ba1a" title="Get the SlowFast enum for this channel.">SlowFast</a>(<a class="code" href="namespaceIDs.html#aecc6c6a922921188b481adeeb91f2e31aed3c6c495b6b1d50820412dca0e1f0cd">IDs::kFast</a>);
<a name="l00093"></a>00093         slow_id=fast_id.<a class="code" href="classIDs_1_1channel.html#a63317dcc2c399021a518166357196bbb">GetCorrespondingFastSlow</a>();
<a name="l00094"></a>00094         <span class="keywordflow">try</span>{
<a name="l00095"></a>00095            n_bits = setup-&gt;<a class="code" href="classTSetupData.html#a40acabc9f8cf502c53ca88b8461bb64a">GetNBits</a>(<a class="code" href="classSetupNavigator.html#acc09765c4d2ca0e1205977075bd7eb49">SetupNavigator::Instance</a>()-&gt;GetBank(fast_id));
<a name="l00096"></a>00096            fast_amp_max = std::pow(2, n_bits);
<a name="l00097"></a>00097            n_bits = setup-&gt;<a class="code" href="classTSetupData.html#a40acabc9f8cf502c53ca88b8461bb64a">GetNBits</a>(<a class="code" href="classSetupNavigator.html#acc09765c4d2ca0e1205977075bd7eb49">SetupNavigator::Instance</a>()-&gt;GetBank(slow_id));
<a name="l00098"></a>00098            slow_amp_max = std::pow(2, n_bits);
<a name="l00099"></a>00099         }<span class="keywordflow">catch</span>(<a class="code" href="classExcept_1_1InvalidDetector.html">Except::InvalidDetector</a>&amp; e){
<a name="l00100"></a>00100            cout&lt;&lt;<span class="stringliteral">&quot;PlotTDPs::BeforeFirstEntry: Skipping channel &apos;&quot;</span>&lt;&lt;i_source-&gt;first.Channel()
<a name="l00101"></a>00101                &lt;&lt;<span class="stringliteral">&quot;&apos; due to an error querying the setup navigator.  This is probably casued by only 1 of &quot;</span>
<a name="l00102"></a>00102                  <span class="stringliteral">&quot;the fast/slow channels being connected for this run.&quot;</span>&lt;&lt;endl;
<a name="l00103"></a>00103            <span class="keywordflow">continue</span>;
<a name="l00104"></a>00104         }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106         <span class="comment">// Make a histogram of the relative amplitudes</span>
<a name="l00107"></a>00107         tmp.amplitudes=<span class="keyword">new</span> TH2F((name+<span class="stringliteral">&quot;_amp&quot;</span>).c_str(),(<span class="stringliteral">&quot;Amplitudes of TDPs &quot;</span>+title).c_str(),
<a name="l00108"></a>00108                 150,fast_amp_min,fast_amp_max,150,slow_amp_min,slow_amp_max);
<a name="l00109"></a>00109         tmp.amplitudes-&gt;SetXTitle(<span class="stringliteral">&quot;Amplitude in Fast channel&quot;</span>);
<a name="l00110"></a>00110         tmp.amplitudes-&gt;SetYTitle(<span class="stringliteral">&quot;Amplitude in Slow channel&quot;</span>);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112         <span class="comment">// Histogram amplitudes for pulses not in either channel</span>
<a name="l00113"></a>00113         tmp.fast_only_amps=<span class="keyword">new</span> TH1F((name+<span class="stringliteral">&quot;_fast_only_amp&quot;</span>).c_str(),
<a name="l00114"></a>00114                 (<span class="stringliteral">&quot;Amplitudes of hits with no corresponding slow pulse &quot;</span>+title).c_str(), 
<a name="l00115"></a>00115                 200,fast_amp_min,fast_amp_max);
<a name="l00116"></a>00116         tmp.fast_only_amps-&gt;SetXTitle(<span class="stringliteral">&quot;Amplitude in Fast channel&quot;</span>);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118         <span class="comment">// Histogram amplitudes for pulses not in either channel</span>
<a name="l00119"></a>00119         tmp.slow_only_amps=<span class="keyword">new</span> TH1F((name+<span class="stringliteral">&quot;_slow_only_amp&quot;</span>).c_str(),
<a name="l00120"></a>00120                 (<span class="stringliteral">&quot;Amplitudes of hits with no corresponding fast pulse &quot;</span>+title).c_str(), 
<a name="l00121"></a>00121                 200,slow_amp_min,slow_amp_max);
<a name="l00122"></a>00122         tmp.slow_only_amps-&gt;SetXTitle(<span class="stringliteral">&quot;Amplitude in Slow channel&quot;</span>);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124         <span class="comment">// Histogram of amplitude ratio to show the scale factor in paired</span>
<a name="l00125"></a>00125         <span class="comment">// channels</span>
<a name="l00126"></a>00126         tmp.scale_factor=<span class="keyword">new</span>  TH1F((name+<span class="stringliteral">&quot;_scale_factor&quot;</span>).c_str(),
<a name="l00127"></a>00127                 (<span class="stringliteral">&quot;Ratio of amplitudes &quot;</span>+title).c_str(), 
<a name="l00128"></a>00128                 200,0,10);
<a name="l00129"></a>00129         tmp.scale_factor-&gt;SetXTitle(<span class="stringliteral">&quot;Ratio of amplitudes, A_{Slow} / A_{Fast}&quot;</span>);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131         <span class="comment">// Make a histogram of the time difference between pulses</span>
<a name="l00132"></a>00132         full_title.str(<span class="stringliteral">&quot;Time difference vs. fast amplitude for pulses &quot;</span>);
<a name="l00133"></a>00133         full_title&lt;&lt;title;
<a name="l00134"></a>00134         tmp.time_diff_fast=<span class="keyword">new</span> TH2F((name+<span class="stringliteral">&quot;_fast_amp_tdiff&quot;</span>).c_str(),full_title.str().c_str(),
<a name="l00135"></a>00135                                     200,tdiff_min,tdiff_max,200,fast_amp_min,fast_amp_max);
<a name="l00136"></a>00136         tmp.time_diff_fast-&gt;SetXTitle(<span class="stringliteral">&quot;t_{Fast} - t_{Slow}&quot;</span>);
<a name="l00137"></a>00137         tmp.time_diff_fast-&gt;SetYTitle(<span class="stringliteral">&quot;Amplitude in Fast channel&quot;</span>);
<a name="l00138"></a>00138 
<a name="l00139"></a>00139         full_title.str(<span class="stringliteral">&quot;Time difference vs. slow amplitude for pulses &quot;</span>);
<a name="l00140"></a>00140         full_title&lt;&lt;title;
<a name="l00141"></a>00141         tmp.time_diff_slow=<span class="keyword">new</span> TH2F((name+<span class="stringliteral">&quot;_slow_amp_tdiff&quot;</span>).c_str(),full_title.str().c_str(),
<a name="l00142"></a>00142                 200,tdiff_min,tdiff_max,200,slow_amp_min,slow_amp_max);
<a name="l00143"></a>00143         tmp.time_diff_slow-&gt;SetXTitle(<span class="stringliteral">&quot;t_{Fast} - t_{Slow}&quot;</span>);
<a name="l00144"></a>00144         tmp.time_diff_slow-&gt;SetYTitle(<span class="stringliteral">&quot;Amplitude in Slow channel&quot;</span>);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         tmp.times=<span class="keyword">new</span> TH2F((name+<span class="stringliteral">&quot;_times&quot;</span>).c_str(),(<span class="stringliteral">&quot;Times of pulses &quot;</span>+title).c_str(),
<a name="l00147"></a>00147                 200,0,-1,200,0,-1);
<a name="l00148"></a>00148         tmp.times-&gt;SetXTitle(<span class="stringliteral">&quot;Time in Fast channel&quot;</span>);
<a name="l00149"></a>00149         tmp.times-&gt;SetYTitle(<span class="stringliteral">&quot;Time in Slow channel&quot;</span>);
<a name="l00150"></a>00150 
<a name="l00151"></a>00151         <span class="keywordflow">if</span>(<a class="code" href="classPlotTDPs.html#aa044c287636c43794cf53249947bd927">fCutHists</a>){
<a name="l00152"></a>00152             <span class="comment">// Histogram amplitudes for fast pulses with a slow pulse cut</span>
<a name="l00153"></a>00153             full_title.str(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00154"></a>00154             full_title&lt;&lt;<span class="stringliteral">&quot;Amplitudes in slow channel if paired to a fast pulse with amplitude above &quot;</span>;
<a name="l00155"></a>00155             full_title&lt;&lt;<a class="code" href="classPlotTDPs.html#a87b54e642caa4c66306dd317213a0a66">fFastCut</a>&lt;&lt;title;
<a name="l00156"></a>00156             tmp.slow_amps_fast_cut=<span class="keyword">new</span> TH1F((name+<span class="stringliteral">&quot;_slow_amp_fast_cut&quot;</span>).c_str(),
<a name="l00157"></a>00157                     full_title.str().c_str(), 200,slow_amp_min,slow_amp_max);
<a name="l00158"></a>00158             tmp.slow_amps_fast_cut-&gt;SetXTitle(<span class="stringliteral">&quot;Amplitude in Slow channel&quot;</span>);
<a name="l00159"></a>00159 
<a name="l00160"></a>00160             <span class="comment">// Histogram amplitudes for slow pulses with a fast pulse cut</span>
<a name="l00161"></a>00161             full_title.str(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00162"></a>00162             full_title&lt;&lt;<span class="stringliteral">&quot;Amplitudes in fast channel if paired to a slow pulse with amplitude above &quot;</span>;
<a name="l00163"></a>00163             full_title&lt;&lt;<a class="code" href="classPlotTDPs.html#ae38c09ba00ef3606dd7e204c8b7fd80e">fSlowCut</a>&lt;&lt;title;
<a name="l00164"></a>00164             tmp.fast_amps_slow_cut=<span class="keyword">new</span> TH1F((name+<span class="stringliteral">&quot;_fast_amps_slow_cut&quot;</span>).c_str(),
<a name="l00165"></a>00165                     full_title.str().c_str(), 200,fast_amp_min,fast_amp_max);
<a name="l00166"></a>00166             tmp.fast_amps_slow_cut-&gt;SetXTitle(<span class="stringliteral">&quot;Amplitude in Fast channel&quot;</span>);
<a name="l00167"></a>00167         } <span class="keywordflow">else</span>{
<a name="l00168"></a>00168             tmp.fast_amps_slow_cut=NULL;
<a name="l00169"></a>00169             tmp.slow_amps_fast_cut=NULL;
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172         tmp.amp_status=tmp.amp_inter=tmp.amp_grad=0;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         <span class="comment">// Add tmp to the list of TDPs to draw</span>
<a name="l00175"></a>00175         <a class="code" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a>[i_source-&gt;first]=tmp;
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <span class="comment">// Change back to the top level directory</span>
<a name="l00179"></a>00179     <a class="code" href="classBaseModule.html#ae753140da9952cb8caea03082294ce5b" title="Get the TDirectory for this module.">GetDirectory</a>()-&gt;cd(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00180"></a>00180   <span class="keywordflow">return</span> 0;
<a name="l00181"></a>00181 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac6227c641b46487b3deb287fd3ea2408"></a><!-- doxytag: member="PlotTDPs::Debug" ref="ac6227c641b46487b3deb287fd3ea2408" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseModule::Debug </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check whether this module was asked to print extra debug information </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if 'debug' was given in the <a class="el" href="namespacemodules.html">modules</a> file, false if not </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00071">71</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00089">BaseModule::fDebug</a>.</p>

<p>Referenced by <a class="el" href="MakeAnalysedPulses_8cpp_source.html#l00192">MakeAnalysedPulses::AddGenerator()</a>, <a class="el" href="ExportPulse_8h_source.html#l00149">ExportPulse::AddToExportList()</a>, <a class="el" href="PulseCandidateFinder__InvestigateParameters_8cpp_source.html#l00102">PulseCandidateFinder_InvestigateParameters::AfterLastEntry()</a>, <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00118">PlotTPI_PedestalAndNoise::AfterLastEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00241">AfterLastEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00100">PlotTDP_TDiff::AfterLastEntry()</a>, <a class="el" href="IslandLength_8cpp_source.html#l00086">IslandLength::AfterLastEntry()</a>, <a class="el" href="IslandAmplitude_8cpp_source.html#l00140">IslandAmplitude::AfterLastEntry()</a>, <a class="el" href="MakeDetectorPulses_8cpp_source.html#l00039">MakeDetectorPulses::BeforeFirstEntry()</a>, <a class="el" href="TemplateCreator_8cpp_source.html#l00081">TemplateCreator::BeforeFirstEntry()</a>, <a class="el" href="PulseCandidateFinder__InvestigateParameters_8cpp_source.html#l00027">PulseCandidateFinder_InvestigateParameters::BeforeFirstEntry()</a>, <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00034">PlotTPI_PedestalAndNoise::BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00041">BeforeFirstEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00035">PlotTDP_TDiff::BeforeFirstEntry()</a>, <a class="el" href="IslandLength_8cpp_source.html#l00032">IslandLength::BeforeFirstEntry()</a>, <a class="el" href="IslandAmplitude_8cpp_source.html#l00035">IslandAmplitude::BeforeFirstEntry()</a>, <a class="el" href="PulseViewer_8cpp_source.html#l00253">PulseViewer::ConsiderDrawing()</a>, <a class="el" href="MakeAnalysedPulses_8cpp_source.html#l00021">MakeAnalysedPulses::MakeAnalysedPulses()</a>, <a class="el" href="MakeDetectorPulses_8cpp_source.html#l00190">MakeDetectorPulses::MakeGenerator()</a>, <a class="el" href="ExportPulse_8cpp_source.html#l00224">ExportPulse::PlotTPI()</a>, <a class="el" href="MakeDetectorPulses_8cpp_source.html#l00100">MakeDetectorPulses::ProcessEntry()</a>, <a class="el" href="TemplateCreator_8cpp_source.html#l00109">TemplateCreator::ProcessEntry()</a>, <a class="el" href="PulseCandidateFinder__InvestigateParameters_8cpp_source.html#l00038">PulseCandidateFinder_InvestigateParameters::ProcessEntry()</a>, <a class="el" href="MakeAnalysedPulses_8cpp_source.html#l00105">MakeAnalysedPulses::ProcessEntry()</a>, <a class="el" href="PulseViewer_8cpp_source.html#l00146">PulseViewer::ProcessEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00062">PlotTDP_TDiff::ProcessEntry()</a>, and <a class="el" href="TemplateCreator_8cpp_source.html#l00322">TemplateCreator::StartTemplate()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00071"></a>00071 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#adb0c35fcbccea0bc732476b59c5b64ca">fDebug</a>;};
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3e4f013f5465813c9cfa2179788cbf3"></a><!-- doxytag: member="PlotTDPs::GetAlias" ref="ac3e4f013f5465813c9cfa2179788cbf3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string BaseModule::GetAlias </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a string for the alias of this module. May be empty if no alias was given in the <a class="el" href="namespacemodules.html">modules</a> file. </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00063">63</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00092">BaseModule::fAlias</a>.</p>

<p>Referenced by <a class="el" href="BaseModule_8cpp_source.html#l00007">BaseModule::BaseModule()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00063"></a>00063 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#ae19cdbdf544a783be4cdd4505ae31fb9">fAlias</a>;};
</pre></div></p>

</div>
</div>
<a class="anchor" id="a42cecf27b0fc6c68efa06630358ce66b"></a><!-- doxytag: member="PlotTDPs::GetDirectory" ref="a42cecf27b0fc6c68efa06630358ce66b" args="(const std::string &amp;name=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TDirectory * BaseModule::GetDirectory </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em> = <code>&quot;&quot;</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00077">77</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00098">BaseModule::dir</a>, and <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00077"></a>00077                                                          {
<a name="l00078"></a>00078   <span class="keywordflow">if</span>(name.empty()) <span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>;
<a name="l00079"></a>00079   TDirectory* <a class="code" href="classBaseModule.html#aa00f24e65a18c1d08149965da0fa1a22">dir</a>=<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;GetDirectory(name.c_str());
<a name="l00080"></a>00080   <span class="keywordflow">if</span>(dir) <span class="keywordflow">return</span> dir;
<a name="l00081"></a>00081   <span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;mkdir(name.c_str());
<a name="l00082"></a>00082 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae753140da9952cb8caea03082294ce5b"></a><!-- doxytag: member="PlotTDPs::GetDirectory" ref="ae753140da9952cb8caea03082294ce5b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TDirectory* BaseModule::GetDirectory </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the TDirectory for this module. </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00074">74</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p>Referenced by <a class="el" href="TemplateCreator_8cpp_source.html#l00272">TemplateCreator::AfterLastEntry()</a>, <a class="el" href="SavePulses_8cpp_source.html#l00076">SavePulses::AfterLastEntry()</a>, <a class="el" href="TemplateCreator_8cpp_source.html#l00081">TemplateCreator::BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00041">BeforeFirstEntry()</a>, <a class="el" href="ExportPulse_8cpp_source.html#l00034">ExportPulse::ExportPulse()</a>, and <a class="el" href="TemplateCreator_8cpp_source.html#l00109">TemplateCreator::ProcessEntry()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af30c91fa2a3388325dd20b322de517ca"></a><!-- doxytag: member="PlotTDPs::GetName" ref="af30c91fa2a3388325dd20b322de517ca" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* BaseModule::GetName </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the name of this module as given to the constructor of the base class. </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00066">66</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00090">BaseModule::fName</a>.</p>

<p>Referenced by <a class="el" href="SavePulses_8cpp_source.html#l00030">SavePulses::BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00041">BeforeFirstEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00035">PlotTDP_TDiff::BeforeFirstEntry()</a>, <a class="el" href="PlotTAP__Time_8cpp_source.html#l00033">PlotTAP_Time::ProcessEntry()</a>, <a class="el" href="PlotTAP__Energy_8cpp_source.html#l00037">PlotTAP_Energy::ProcessEntry()</a>, <a class="el" href="PlotTAP__Amplitude_8cpp_source.html#l00037">PlotTAP_Amplitude::ProcessEntry()</a>, and <a class="el" href="LoopSequence_8cpp_source.html#l00135">LoopSequence::Run()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a743cac6481efcd5dea914e1d28813dfe">fName</a>.c_str();};
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5f8dd6ba24c3cc68385eb540c17ae5de"></a><!-- doxytag: member="PlotTDPs::Postprocess" ref="a5f8dd6ba24c3cc68385eb540c17ae5de" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseModule::Postprocess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method called by the main pre-process loop. </p>
<p>Does some simple work, then hooks into the derived class through AfterLastEntry. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on sucess and non-zero if a problem occurred </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00066">66</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">BaseModule::AfterLastEntry()</a>, and <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p>Referenced by <a class="el" href="LoopSequence_8cpp_source.html#l00120">LoopSequence::Postprocess()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066                                                                        {
<a name="l00067"></a>00067   <span class="comment">// This is called by our main routine and would allow later to split into different </span>
<a name="l00068"></a>00068   <span class="comment">// process routines if we have more than one Tree and hence different tpyes of data input.</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>) <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;cd();
<a name="l00071"></a>00071   <span class="keywordtype">int</span> ret = <a class="code" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">AfterLastEntry</a>(gData, gSetup);
<a name="l00072"></a>00072   gDirectory-&gt;cd(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074   <span class="keywordflow">return</span> ret;
<a name="l00075"></a>00075 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac24b7d3d359985742164399bb19bad76"></a><!-- doxytag: member="PlotTDPs::Preprocess" ref="ac24b7d3d359985742164399bb19bad76" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseModule::Preprocess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method called by the main pre-process loop. </p>
<p>Does some simple work, then hooks into the derived class through BeforeFirstEntry. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on sucess and non-zero if a problem occurred </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00055">55</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BaseModule::BeforeFirstEntry()</a>, and <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p>Referenced by <a class="el" href="LoopSequence_8cpp_source.html#l00075">LoopSequence::Preprocess()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00055"></a>00055                                                                       {
<a name="l00056"></a>00056   <span class="comment">// This is called by our main routine and would allow later to split into different </span>
<a name="l00057"></a>00057   <span class="comment">// process routines if we have more than one Tree and hence different tpyes of data input.</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>) <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;cd();
<a name="l00060"></a>00060   <span class="keywordtype">int</span> ret = <a class="code" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BeforeFirstEntry</a>(gData, gSetup);
<a name="l00061"></a>00061   gDirectory-&gt;cd(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   <span class="keywordflow">return</span> ret;
<a name="l00064"></a>00064 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8fbe4ffd26b9e7397d89c7975135b0b8"></a><!-- doxytag: member="PlotTDPs::ProcessEntry" ref="a8fbe4ffd26b9e7397d89c7975135b0b8" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PlotTDPs::ProcessEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fill all histograms. </p>

<p>Implements <a class="el" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="PlotTDPs_8cpp_source.html#l00183">183</a> of file <a class="el" href="PlotTDPs_8cpp_source.html">PlotTDPs.cpp</a>.</p>

<p>References <a class="el" href="PlotTDPs_8h_source.html#l00027">PlotTDPs::Detector_t::amplitudes</a>, <a class="el" href="definitions_8h_source.html#l00043">definitions::DefaultValue</a>, <a class="el" href="PlotTDPs_8h_source.html#l00031">PlotTDPs::Detector_t::fast_amps_slow_cut</a>, <a class="el" href="PlotTDPs_8h_source.html#l00028">PlotTDPs::Detector_t::fast_only_amps</a>, <a class="el" href="PlotTDPs_8h_source.html#l00058">fCutHists</a>, <a class="el" href="PlotTDPs_8h_source.html#l00057">fFastCut</a>, <a class="el" href="PlotTDPs_8h_source.html#l00056">fPlotsList</a>, <a class="el" href="PlotTDPs_8h_source.html#l00057">fSlowCut</a>, <a class="el" href="main_8cpp_source.html#l00073">gDetectorPulseMap</a>, <a class="el" href="TDetectorPulse_8h_source.html#l00021">TDetectorPulse::kFast</a>, <a class="el" href="TDetectorPulse_8h_source.html#l00021">TDetectorPulse::kSlow</a>, <a class="el" href="PlotTDPs_8h_source.html#l00029">PlotTDPs::Detector_t::scale_factor</a>, <a class="el" href="PlotTDPs_8h_source.html#l00031">PlotTDPs::Detector_t::slow_amps_fast_cut</a>, <a class="el" href="PlotTDPs_8h_source.html#l00028">PlotTDPs::Detector_t::slow_only_amps</a>, <a class="el" href="PlotTDPs_8h_source.html#l00033">PlotTDPs::Detector_t::time_diff_fast</a>, <a class="el" href="PlotTDPs_8h_source.html#l00033">PlotTDPs::Detector_t::time_diff_slow</a>, and <a class="el" href="PlotTDPs_8h_source.html#l00034">PlotTDPs::Detector_t::times</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00183"></a>00183                                                                     {
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="comment">// For each TDP source of interest (defined in BeforeFirstEntry)</span>
<a name="l00186"></a>00186     <span class="keyword">const</span> <a class="code" href="definitions_8h.html#a9ef160c68f1bd90227fdb260ff89f6da">DetectorPulseList</a>* pulseList;
<a name="l00187"></a>00187     <a class="code" href="namespacemodules.html#aecc7811d5380ed9d9e903c9b71a396aa">SourceDetPulseMap::const_iterator</a> i_pulse_list;
<a name="l00188"></a>00188     <span class="keywordtype">double</span> fast_amp, slow_amp, fast_time, slow_time;
<a name="l00189"></a>00189     <a class="code" href="namespaceIDs.html#aa179f67aeac8473d1a57daaa59b4e8ae">Detector_t</a> plots;
<a name="l00190"></a>00190     <span class="keywordflow">for</span>(<a class="code" href="namespacemodules.html#a5ce57c86284eadc5b573cfab0949bfdb">PlotsList_t::iterator</a> i_source=<a class="code" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a>.begin();
<a name="l00191"></a>00191             i_source!=<a class="code" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">fPlotsList</a>.end(); ++i_source){
<a name="l00192"></a>00192         <span class="comment">// Get the desired pulse list</span>
<a name="l00193"></a>00193         i_pulse_list=<a class="code" href="main_8cpp.html#a3ad213dca772a240dafd128599ff2c2e">gDetectorPulseMap</a>.find(i_source-&gt;first);
<a name="l00194"></a>00194         <span class="keywordflow">if</span>(i_pulse_list== <a class="code" href="main_8cpp.html#a3ad213dca772a240dafd128599ff2c2e">gDetectorPulseMap</a>.end()){
<a name="l00195"></a>00195             cout&lt;&lt;<span class="stringliteral">&quot;Unable to find TDP list for source, &quot;</span>&lt;&lt;i_source-&gt;first&lt;&lt;endl;
<a name="l00196"></a>00196             <span class="keywordflow">return</span> 1;
<a name="l00197"></a>00197         }
<a name="l00198"></a>00198         pulseList=&amp;i_pulse_list-&gt;second;
<a name="l00199"></a>00199         plots=i_source-&gt;second;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         <span class="comment">// Loop over the pulse list</span>
<a name="l00202"></a>00202         <span class="keywordflow">for</span>(<a class="code" href="namespacemodules.html#aecc7811d5380ed9d9e903c9b71a396aa">DetectorPulseList::const_iterator</a> i_pulse=pulseList-&gt;begin();
<a name="l00203"></a>00203                 i_pulse!=pulseList-&gt;end(); ++i_pulse){
<a name="l00204"></a>00204 
<a name="l00205"></a>00205             <span class="comment">// get the amplitudes for each pulse</span>
<a name="l00206"></a>00206             fast_amp=(*i_pulse)-&gt;GetAmplitude(<a class="code" href="classTDetectorPulse.html#a9f412d042408deee0d6801e8cac4b47aafd477646f6d125e1850594e974b25932">TDetectorPulse::kFast</a>);
<a name="l00207"></a>00207             slow_amp=(*i_pulse)-&gt;GetAmplitude(<a class="code" href="classTDetectorPulse.html#a9f412d042408deee0d6801e8cac4b47aabb973a1a3960c8d48fc93aabf8752755">TDetectorPulse::kSlow</a>);
<a name="l00208"></a>00208             fast_time=(*i_pulse)-&gt;GetTime(<a class="code" href="classTDetectorPulse.html#a9f412d042408deee0d6801e8cac4b47aafd477646f6d125e1850594e974b25932">TDetectorPulse::kFast</a>);
<a name="l00209"></a>00209             slow_time=(*i_pulse)-&gt;GetTime(<a class="code" href="classTDetectorPulse.html#a9f412d042408deee0d6801e8cac4b47aabb973a1a3960c8d48fc93aabf8752755">TDetectorPulse::kSlow</a>);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211             <span class="comment">// If one of the channels is the default value then fill the</span>
<a name="l00212"></a>00212             <span class="comment">// histogram for channels that weren&apos;t matched</span>
<a name="l00213"></a>00213             <span class="keywordflow">if</span>(fast_amp==<a class="code" href="namespacedefinitions.html#a8c37d3c2a778ef71b48da7f894d3de4ba1652c8432d984e035a5cf9333367fb94">definitions::DefaultValue</a>){
<a name="l00214"></a>00214                 plots.slow_only_amps-&gt;Fill(slow_amp);
<a name="l00215"></a>00215             }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(slow_amp==<a class="code" href="namespacedefinitions.html#a8c37d3c2a778ef71b48da7f894d3de4ba1652c8432d984e035a5cf9333367fb94">definitions::DefaultValue</a>){
<a name="l00216"></a>00216                 plots.fast_only_amps-&gt;Fill(fast_amp);
<a name="l00217"></a>00217             }<span class="keywordflow">else</span> {
<a name="l00218"></a>00218                 <span class="comment">// Both channels saw hits, fill the 2d plot</span>
<a name="l00219"></a>00219                 plots.amplitudes-&gt;Fill(slow_amp,fast_amp);
<a name="l00220"></a>00220                 plots.time_diff_fast-&gt;Fill(slow_time - fast_time ,fast_amp);
<a name="l00221"></a>00221                 plots.time_diff_slow-&gt;Fill(slow_time - fast_time ,slow_amp);
<a name="l00222"></a>00222                 plots.times-&gt;Fill(slow_time, fast_time);
<a name="l00223"></a>00223                 plots.scale_factor-&gt;Fill(slow_amp/fast_amp);
<a name="l00224"></a>00224             }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226             <span class="keywordflow">if</span>(!<a class="code" href="classPlotTDPs.html#aa044c287636c43794cf53249947bd927">fCutHists</a>) <span class="keywordflow">continue</span>;
<a name="l00227"></a>00227             <span class="comment">// Fill the cut histograms</span>
<a name="l00228"></a>00228             <span class="keywordflow">if</span>(fast_amp&gt; <a class="code" href="classPlotTDPs.html#a87b54e642caa4c66306dd317213a0a66">fFastCut</a> &amp;&amp; slow_amp!=<a class="code" href="namespacedefinitions.html#a8c37d3c2a778ef71b48da7f894d3de4ba1652c8432d984e035a5cf9333367fb94">definitions::DefaultValue</a>){
<a name="l00229"></a>00229                 plots.slow_amps_fast_cut-&gt;Fill(slow_amp);
<a name="l00230"></a>00230             }
<a name="l00231"></a>00231             <span class="keywordflow">if</span>(slow_amp&gt; <a class="code" href="classPlotTDPs.html#ae38c09ba00ef3606dd7e204c8b7fd80e">fSlowCut</a> &amp;&amp; fast_amp!=<a class="code" href="namespacedefinitions.html#a8c37d3c2a778ef71b48da7f894d3de4ba1652c8432d984e035a5cf9333367fb94">definitions::DefaultValue</a>){
<a name="l00232"></a>00232                 plots.fast_amps_slow_cut-&gt;Fill(fast_amp);
<a name="l00233"></a>00233             }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235         }
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="keywordflow">return</span> 0;
<a name="l00239"></a>00239 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a204587ff6e1d967ab21d0cbbfea3b0fd"></a><!-- doxytag: member="PlotTDPs::ProcessGenericEntry" ref="a204587ff6e1d967ab21d0cbbfea3b0fd" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseModule::ProcessGenericEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Method called by the main event loop for each entry in the input root tree. Does some simple work, then hooks into the derived class through ProcessEntry. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on sucess and non-zero if a problem occurred </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00044">44</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>, and <a class="el" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f">BaseModule::ProcessEntry()</a>.</p>

<p>Referenced by <a class="el" href="LoopSequence_8cpp_source.html#l00091">LoopSequence::Process()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00044"></a>00044                                                                                {
<a name="l00045"></a>00045   <span class="comment">// This is called by our main routine and would allow later to split into different </span>
<a name="l00046"></a>00046   <span class="comment">// process routines if we have more than one Tree and hence different tpyes of data input.</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>) <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;cd();
<a name="l00049"></a>00049   <span class="keywordtype">int</span> ret = <a class="code" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f" title="The big kahuna. Overload this in the derived class and it will be called for each...">ProcessEntry</a>(gData, gSetup);
<a name="l00050"></a>00050   gDirectory-&gt;cd(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   <span class="keywordflow">return</span> ret;
<a name="l00053"></a>00053 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab50673c8ec954675da2664677abfab1"></a><!-- doxytag: member="PlotTDPs::SetAlias" ref="aab50673c8ec954675da2664677abfab1" args="(const std::string &amp;alias)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseModule::SetAlias </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>alias</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the alias for this module, which should be provided in the <a class="el" href="namespacemodules.html">modules</a> file </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00059">59</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00092">BaseModule::fAlias</a>.</p>

<p>Referenced by <a class="el" href="BaseModule_8cpp_source.html#l00007">BaseModule::BaseModule()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00059"></a>00059 {<a class="code" href="classBaseModule.html#ae19cdbdf544a783be4cdd4505ae31fb9">fAlias</a>=alias;};
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aa00f24e65a18c1d08149965da0fa1a22"></a><!-- doxytag: member="PlotTDPs::dir" ref="aa00f24e65a18c1d08149965da0fa1a22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TDirectory* <a class="el" href="classBaseModule.html#aa00f24e65a18c1d08149965da0fa1a22">BaseModule::dir</a><code> [protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Many <a class="el" href="namespacemodules.html">modules</a> use 'dir' still which was the old protected pointer to the <a class="el" href="namespacemodules.html">modules</a> directory. To prevent things being broken so soon, we keep this pointer available, but be warned that it will be removed shortly... </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00098">98</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>Referenced by <a class="el" href="BaseModule_8cpp_source.html#l00007">BaseModule::BaseModule()</a>, <a class="el" href="FastSlowCompare_8cpp_source.html#l00026">FastSlowCompare::FastSlowCompare()</a>, <a class="el" href="GeSpectrum_8cpp_source.html#l00030">GeSpectrum::GeSpectrum()</a>, <a class="el" href="BaseModule_8cpp_source.html#l00077">BaseModule::GetDirectory()</a>, <a class="el" href="MakeMuonEvents_8cpp_source.html#l00023">MakeMuonEvents::MakeMuonEvents()</a>, and <a class="el" href="PlotAmpVsTDiff_8cpp_source.html#l00025">PlotAmpVsTDiff::PlotAmpVsTDiff()</a>.</p>

</div>
</div>
<a class="anchor" id="aa044c287636c43794cf53249947bd927"></a><!-- doxytag: member="PlotTDPs::fCutHists" ref="aa044c287636c43794cf53249947bd927" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classPlotTDPs.html#aa044c287636c43794cf53249947bd927">PlotTDPs::fCutHists</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PlotTDPs_8h_source.html#l00058">58</a> of file <a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a>.</p>

<p>Referenced by <a class="el" href="PlotTDPs_8cpp_source.html#l00041">BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00031">PlotTDPs()</a>, and <a class="el" href="PlotTDPs_8cpp_source.html#l00183">ProcessEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="a87b54e642caa4c66306dd317213a0a66"></a><!-- doxytag: member="PlotTDPs::fFastCut" ref="a87b54e642caa4c66306dd317213a0a66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classPlotTDPs.html#a87b54e642caa4c66306dd317213a0a66">PlotTDPs::fFastCut</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PlotTDPs_8h_source.html#l00057">57</a> of file <a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a>.</p>

<p>Referenced by <a class="el" href="PlotTDPs_8cpp_source.html#l00041">BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00031">PlotTDPs()</a>, and <a class="el" href="PlotTDPs_8cpp_source.html#l00183">ProcessEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f2f6ca8a4d5ff7d62cc556f814e1c6b"></a><!-- doxytag: member="PlotTDPs::fPlotsList" ref="a7f2f6ca8a4d5ff7d62cc556f814e1c6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPlotTDPs.html#a6c92a9e7c0dc22c8621495a41a095844">PlotsList_t</a> <a class="el" href="classPlotTDPs.html#a7f2f6ca8a4d5ff7d62cc556f814e1c6b">PlotTDPs::fPlotsList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PlotTDPs_8h_source.html#l00056">56</a> of file <a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a>.</p>

<p>Referenced by <a class="el" href="PlotTDPs_8cpp_source.html#l00241">AfterLastEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00041">BeforeFirstEntry()</a>, and <a class="el" href="PlotTDPs_8cpp_source.html#l00183">ProcessEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="ae38c09ba00ef3606dd7e204c8b7fd80e"></a><!-- doxytag: member="PlotTDPs::fSlowCut" ref="ae38c09ba00ef3606dd7e204c8b7fd80e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classPlotTDPs.html#ae38c09ba00ef3606dd7e204c8b7fd80e">PlotTDPs::fSlowCut</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PlotTDPs_8h_source.html#l00057">57</a> of file <a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a>.</p>

<p>Referenced by <a class="el" href="PlotTDPs_8cpp_source.html#l00041">BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00031">PlotTDPs()</a>, and <a class="el" href="PlotTDPs_8cpp_source.html#l00183">ProcessEntry()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rootana/src/plotters/<a class="el" href="PlotTDPs_8h_source.html">PlotTDPs.h</a></li>
<li>rootana/src/plotters/<a class="el" href="PlotTDPs_8cpp_source.html">PlotTDPs.cpp</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 7 Jun 2015 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

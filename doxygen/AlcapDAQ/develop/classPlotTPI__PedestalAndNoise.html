<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: PlotTPI_PedestalAndNoise Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PlotTPI_PedestalAndNoise Class Reference<br/>
<small>
[<a class="el" href="group__rootana__modules.html">Modules</a>]</small>
</h1><!-- doxytag: class="PlotTPI_PedestalAndNoise" --><!-- doxytag: inherits="BaseModule" -->
<p>Plots the pedestal and noise of each <a class="el" href="classTPulseIsland.html" title="A uniform format for data from many different detectors.">TPulseIsland</a> and writes these to an SQLite database.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html">PlotTPI_PedestalAndNoise.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PlotTPI_PedestalAndNoise:</div>
<div class="dynsection">
 <div class="center">
  <img src="classPlotTPI__PedestalAndNoise.gif" usemap="#PlotTPI_PedestalAndNoise_map" alt=""/>
  <map id="PlotTPI_PedestalAndNoise_map" name="PlotTPI_PedestalAndNoise_map">
<area href="classBaseModule.html" alt="BaseModule" shape="rect" coords="0,0,161,24"/>
</map>
 </div>
</div>

<p><a href="classPlotTPI__PedestalAndNoise-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#a170394fd3674f3622661730c921c5af1">PlotTPI_PedestalAndNoise</a> (<a class="el" href="classmodules_1_1options.html">modules::options</a> *opts)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The constructor.  <a href="#a170394fd3674f3622661730c921c5af1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#aeec32581d1f7286179d57723f6b785e7">~PlotTPI_PedestalAndNoise</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Empty destructor.  <a href="#aeec32581d1f7286179d57723f6b785e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#a204587ff6e1d967ab21d0cbbfea3b0fd">ProcessGenericEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ac24b7d3d359985742164399bb19bad76">Preprocess</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method called by the main pre-process loop.  <a href="#ac24b7d3d359985742164399bb19bad76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#a5f8dd6ba24c3cc68385eb540c17ae5de">Postprocess</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method called by the main pre-process loop.  <a href="#a5f8dd6ba24c3cc68385eb540c17ae5de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#aab50673c8ec954675da2664677abfab1">SetAlias</a> (const std::string &amp;alias)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ac3e4f013f5465813c9cfa2179788cbf3">GetAlias</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#af30c91fa2a3388325dd20b322de517ca">GetName</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the name of this module as given to the constructor of the base class.  <a href="#af30c91fa2a3388325dd20b322de517ca"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ac6227c641b46487b3deb287fd3ea2408">Debug</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TDirectory *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ae753140da9952cb8caea03082294ce5b">GetDirectory</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the TDirectory for this module.  <a href="#ae753140da9952cb8caea03082294ce5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TDirectory *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#a42cecf27b0fc6c68efa06630358ce66b">GetDirectory</a> (const std::string &amp;name=&quot;&quot;)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TDirectory *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#aa00f24e65a18c1d08149965da0fa1a22">dir</a></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#a40f1c2f9066dc2a84cd210689951f898">ProcessEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *<a class="el" href="group__MV1724ProcessRaw.html#gaad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In every event, we loop over all the detectors and all the TPulseIslands and calculate the RMS and mean of the first fNSamples samples in the digitised pulse (i.e. the noise and the pedestal respectively).  <a href="#a40f1c2f9066dc2a84cd210689951f898"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#a4704acad83779c6d5038ca6043c4a7bb">BeforeFirstEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *setup)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Nothing is done before each run.  <a href="#a4704acad83779c6d5038ca6043c4a7bb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#a8424cf0b70778a15f70068a79a54f9f0">AfterLastEntry</a> (<a class="el" href="classTGlobalData.html">TGlobalData</a> *<a class="el" href="group__MV1724ProcessRaw.html#ga69cb952a194ddefc6004dd96e70ccd62">gData</a>, const <a class="el" href="classTSetupData.html">TSetupData</a> *setup)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">After each run, we write the mean and RMS of the first fNSamples to an SQLite database via <a class="el" href="classSetupNavigator.html">SetupNavigator</a>.  <a href="#a8424cf0b70778a15f70068a79a54f9f0"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, TH2D * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349">fPedestalVsNoiseHistograms</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The map that we store the pedestal vs. noise histograms for each channel.  <a href="#ae9c34f1d9d3826ed70103310fdcfe349"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#a3d22a2ecd3a4ada8e723373b11d1b40e">fNSamples</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of samples we will look at in the <a class="el" href="classTPulseIsland.html" title="A uniform format for data from many different detectors.">TPulseIsland</a> to calculate the mean and RMS (opt = "n_samples").  <a href="#a3d22a2ecd3a4ada8e723373b11d1b40e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlotTPI__PedestalAndNoise.html#a154e6e0f5f92d0fb042554c26581e335">fExportSQL</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A bool to decide whether we export the pedestal and noise to the SQLite database (opt = "export_sql", default = false).  <a href="#a154e6e0f5f92d0fb042554c26581e335"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Plots the pedestal and noise of each <a class="el" href="classTPulseIsland.html" title="A uniform format for data from many different detectors.">TPulseIsland</a> and writes these to an SQLite database. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Andrew Edmonds</dd></dl>
<p>This module loops over <a class="el" href="classTPulseIsland.html" title="A uniform format for data from many different detectors.">TPulseIsland</a> and plots the mean and RMS of the first n_samples into a 2D histogram. At the end of the run, it writes the mean values of each axis to an SQLite database along with the channel and bank names. This SQLite database can then be used by <a class="el" href="classPulseCandidateFinder.html" title="Utility class to find pulse candidates on a TPulseIsland.">PulseCandidateFinder</a> to set parameter values based on a certain number of sigma. </p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00025">25</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html">PlotTPI_PedestalAndNoise.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a170394fd3674f3622661730c921c5af1"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::PlotTPI_PedestalAndNoise" ref="a170394fd3674f3622661730c921c5af1" args="(modules::options *opts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PlotTPI_PedestalAndNoise::PlotTPI_PedestalAndNoise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmodules_1_1options.html">modules::options</a> *&nbsp;</td>
          <td class="paramname"> <em>opts</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The constructor. </p>
<p>The constructor looks in the opts for "n_samples" and sets the fNSamples variable (default = 5).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>opts</em>&nbsp;</td><td>Describe the options this module takes. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00022">22</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html">PlotTPI_PedestalAndNoise.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00022"></a>00022                                                                       :
<a name="l00023"></a>00023   <a class="code" href="classBaseModule.html#a828d4e27c72536894e03b3cf330ba8c6" title="Constructor of a module class. Provides several virtual methods that should be overloaded...">BaseModule</a>(<span class="stringliteral">&quot;PlotTPI_PedestalAndNoise&quot;</span>,opts), 
<a name="l00024"></a>00024   <a class="code" href="classPlotTPI__PedestalAndNoise.html#a3d22a2ecd3a4ada8e723373b11d1b40e" title="The number of samples we will look at in the TPulseIsland to calculate the mean and...">fNSamples</a>(opts-&gt;<a class="code" href="classmodules_1_1options.html#a2077430d97f034189c3f775ceefb8191" title="Get the named option as an int.">GetInt</a>(<span class="stringliteral">&quot;n_samples&quot;</span>)),
<a name="l00025"></a>00025   <a class="code" href="classPlotTPI__PedestalAndNoise.html#a154e6e0f5f92d0fb042554c26581e335" title="A bool to decide whether we export the pedestal and noise to the SQLite database...">fExportSQL</a>(opts-&gt;<a class="code" href="classmodules_1_1options.html#afd05ff40baf1d5b42f47da2521615f58" title="Get the named option as a bool.">GetBool</a>(<span class="stringliteral">&quot;export_sql&quot;</span>, <span class="keyword">false</span>)) {
<a name="l00026"></a>00026 }

</pre></div></p>

</div>
</div>
<a class="anchor" id="aeec32581d1f7286179d57723f6b785e7"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::~PlotTPI_PedestalAndNoise" ref="aeec32581d1f7286179d57723f6b785e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PlotTPI_PedestalAndNoise::~PlotTPI_PedestalAndNoise </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Empty destructor. </p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00028">28</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html">PlotTPI_PedestalAndNoise.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00028"></a>00028                                                    {
<a name="l00029"></a>00029 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8424cf0b70778a15f70068a79a54f9f0"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::AfterLastEntry" ref="a8424cf0b70778a15f70068a79a54f9f0" args="(TGlobalData *gData, const TSetupData *setup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PlotTPI_PedestalAndNoise::AfterLastEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>setup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>After each run, we write the mean and RMS of the first fNSamples to an SQLite database via <a class="el" href="classSetupNavigator.html">SetupNavigator</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>gData</em>&nbsp;</td><td>See <a class="el" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">BaseModule::AfterLastEntry</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>setup</em>&nbsp;</td><td>See <a class="el" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">BaseModule::AfterLastEntry</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Non-zero to indicate a problem. </dd></dl>

<p>Implements <a class="el" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00118">118</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html">PlotTPI_PedestalAndNoise.cpp</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00071">BaseModule::Debug()</a>, <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00080">fExportSQL</a>, <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00070">fPedestalVsNoiseHistograms</a>, <a class="el" href="SetupNavigator_8h_source.html#l00105">SetupNavigator::Instance()</a>, and <a class="el" href="SetupNavigator_8cpp_source.html#l00232">SetupNavigator::SetPedestalAndNoise()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118                                                                                       {
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   <span class="comment">// Print extra info if we&apos;re debugging this module:</span>
<a name="l00121"></a>00121   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#ac6227c641b46487b3deb287fd3ea2408">Debug</a>()){
<a name="l00122"></a>00122      cout&lt;&lt;<span class="stringliteral">&quot;-----PlotTPI_PedestalAndNoise::AfterLastEntry(): I&apos;m debugging!&quot;</span>&lt;&lt;endl;
<a name="l00123"></a>00123   }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125   <span class="keywordflow">if</span> (<a class="code" href="classPlotTPI__PedestalAndNoise.html#a154e6e0f5f92d0fb042554c26581e335" title="A bool to decide whether we export the pedestal and noise to the SQLite database...">fExportSQL</a>) {
<a name="l00126"></a>00126       
<a name="l00127"></a>00127     <span class="comment">// Now loop through the histograms and record the channel, mean and RMS of first fNSamples</span>
<a name="l00128"></a>00128     <span class="keywordflow">for</span> (<a class="code" href="namespacemodules.html#a5ce57c86284eadc5b573cfab0949bfdb">std::map&lt;std::string, TH2D*&gt;::iterator</a> histIter = <a class="code" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349" title="The map that we store the pedestal vs. noise histograms for each channel.">fPedestalVsNoiseHistograms</a>.begin(); histIter != <a class="code" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349" title="The map that we store the pedestal vs. noise histograms for each channel.">fPedestalVsNoiseHistograms</a>.end(); ++histIter) {
<a name="l00129"></a>00129       std::string detname = histIter-&gt;first;
<a name="l00130"></a>00130       <a class="code" href="classIDs_1_1channel.html">IDs::channel</a> channel(detname);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132       TH2D* pedestal_vs_noise_histogram = histIter-&gt;second;
<a name="l00133"></a>00133       
<a name="l00134"></a>00134       <span class="keywordtype">double</span> pedestal = pedestal_vs_noise_histogram-&gt;GetMean(1);
<a name="l00135"></a>00135       <span class="keywordtype">double</span> noise = pedestal_vs_noise_histogram-&gt;GetMean(2);
<a name="l00136"></a>00136 
<a name="l00137"></a>00137       <a class="code" href="classSetupNavigator.html#acc09765c4d2ca0e1205977075bd7eb49">SetupNavigator::Instance</a>()-&gt;<a class="code" href="classSetupNavigator.html#a4f23792f6016431e960a372a355d0ae0">SetPedestalAndNoise</a>(channel, pedestal, noise);
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139   }
<a name="l00140"></a>00140   
<a name="l00141"></a>00141   <span class="keywordflow">return</span> 0;
<a name="l00142"></a>00142 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4704acad83779c6d5038ca6043c4a7bb"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::BeforeFirstEntry" ref="a4704acad83779c6d5038ca6043c4a7bb" args="(TGlobalData *gData, const TSetupData *setup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PlotTPI_PedestalAndNoise::BeforeFirstEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>setup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Nothing is done before each run. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>gData</em>&nbsp;</td><td>See <a class="el" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BaseModule::BeforeFirstEntry</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>setup</em>&nbsp;</td><td>See <a class="el" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BaseModule::BeforeFirstEntry</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Non-zero to indicate a problem. </dd></dl>

<p>Implements <a class="el" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00034">34</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html">PlotTPI_PedestalAndNoise.cpp</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00071">BaseModule::Debug()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00034"></a>00034                                                                                         {
<a name="l00035"></a>00035   <span class="comment">// Print extra info if we&apos;re debugging this module:</span>
<a name="l00036"></a>00036   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#ac6227c641b46487b3deb287fd3ea2408">Debug</a>()){
<a name="l00037"></a>00037      cout&lt;&lt;<span class="stringliteral">&quot;-----PlotTPI_PedestalAndNoise::BeforeFirstEntry(): I&apos;m debugging!&quot;</span>&lt;&lt;endl;
<a name="l00038"></a>00038   }
<a name="l00039"></a>00039 
<a name="l00040"></a>00040   <span class="keywordflow">return</span> 0;
<a name="l00041"></a>00041 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac6227c641b46487b3deb287fd3ea2408"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::Debug" ref="ac6227c641b46487b3deb287fd3ea2408" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseModule::Debug </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check whether this module was asked to print extra debug information </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if 'debug' was given in the <a class="el" href="namespacemodules.html">modules</a> file, false if not </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00071">71</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00089">BaseModule::fDebug</a>.</p>

<p>Referenced by <a class="el" href="MakeAnalysedPulses_8cpp_source.html#l00192">MakeAnalysedPulses::AddGenerator()</a>, <a class="el" href="ExportPulse_8h_source.html#l00149">ExportPulse::AddToExportList()</a>, <a class="el" href="PulseCandidateFinder__InvestigateParameters_8cpp_source.html#l00102">PulseCandidateFinder_InvestigateParameters::AfterLastEntry()</a>, <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00118">AfterLastEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00241">PlotTDPs::AfterLastEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00100">PlotTDP_TDiff::AfterLastEntry()</a>, <a class="el" href="IslandLength_8cpp_source.html#l00086">IslandLength::AfterLastEntry()</a>, <a class="el" href="IslandAmplitude_8cpp_source.html#l00140">IslandAmplitude::AfterLastEntry()</a>, <a class="el" href="MakeDetectorPulses_8cpp_source.html#l00039">MakeDetectorPulses::BeforeFirstEntry()</a>, <a class="el" href="TemplateCreator_8cpp_source.html#l00081">TemplateCreator::BeforeFirstEntry()</a>, <a class="el" href="PulseCandidateFinder__InvestigateParameters_8cpp_source.html#l00027">PulseCandidateFinder_InvestigateParameters::BeforeFirstEntry()</a>, <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00034">BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00041">PlotTDPs::BeforeFirstEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00035">PlotTDP_TDiff::BeforeFirstEntry()</a>, <a class="el" href="IslandLength_8cpp_source.html#l00032">IslandLength::BeforeFirstEntry()</a>, <a class="el" href="IslandAmplitude_8cpp_source.html#l00035">IslandAmplitude::BeforeFirstEntry()</a>, <a class="el" href="PulseViewer_8cpp_source.html#l00253">PulseViewer::ConsiderDrawing()</a>, <a class="el" href="MakeAnalysedPulses_8cpp_source.html#l00021">MakeAnalysedPulses::MakeAnalysedPulses()</a>, <a class="el" href="MakeDetectorPulses_8cpp_source.html#l00190">MakeDetectorPulses::MakeGenerator()</a>, <a class="el" href="ExportPulse_8cpp_source.html#l00224">ExportPulse::PlotTPI()</a>, <a class="el" href="MakeDetectorPulses_8cpp_source.html#l00100">MakeDetectorPulses::ProcessEntry()</a>, <a class="el" href="TemplateCreator_8cpp_source.html#l00109">TemplateCreator::ProcessEntry()</a>, <a class="el" href="PulseCandidateFinder__InvestigateParameters_8cpp_source.html#l00038">PulseCandidateFinder_InvestigateParameters::ProcessEntry()</a>, <a class="el" href="MakeAnalysedPulses_8cpp_source.html#l00105">MakeAnalysedPulses::ProcessEntry()</a>, <a class="el" href="PulseViewer_8cpp_source.html#l00146">PulseViewer::ProcessEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00062">PlotTDP_TDiff::ProcessEntry()</a>, and <a class="el" href="TemplateCreator_8cpp_source.html#l00322">TemplateCreator::StartTemplate()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00071"></a>00071 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#adb0c35fcbccea0bc732476b59c5b64ca">fDebug</a>;};
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3e4f013f5465813c9cfa2179788cbf3"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::GetAlias" ref="ac3e4f013f5465813c9cfa2179788cbf3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string BaseModule::GetAlias </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a string for the alias of this module. May be empty if no alias was given in the <a class="el" href="namespacemodules.html">modules</a> file. </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00063">63</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00092">BaseModule::fAlias</a>.</p>

<p>Referenced by <a class="el" href="BaseModule_8cpp_source.html#l00007">BaseModule::BaseModule()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00063"></a>00063 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#ae19cdbdf544a783be4cdd4505ae31fb9">fAlias</a>;};
</pre></div></p>

</div>
</div>
<a class="anchor" id="a42cecf27b0fc6c68efa06630358ce66b"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::GetDirectory" ref="a42cecf27b0fc6c68efa06630358ce66b" args="(const std::string &amp;name=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TDirectory * BaseModule::GetDirectory </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em> = <code>&quot;&quot;</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00077">77</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00098">BaseModule::dir</a>, and <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00077"></a>00077                                                          {
<a name="l00078"></a>00078   <span class="keywordflow">if</span>(name.empty()) <span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>;
<a name="l00079"></a>00079   TDirectory* <a class="code" href="classBaseModule.html#aa00f24e65a18c1d08149965da0fa1a22">dir</a>=<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;GetDirectory(name.c_str());
<a name="l00080"></a>00080   <span class="keywordflow">if</span>(dir) <span class="keywordflow">return</span> dir;
<a name="l00081"></a>00081   <span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;mkdir(name.c_str());
<a name="l00082"></a>00082 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae753140da9952cb8caea03082294ce5b"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::GetDirectory" ref="ae753140da9952cb8caea03082294ce5b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TDirectory* BaseModule::GetDirectory </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the TDirectory for this module. </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00074">74</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p>Referenced by <a class="el" href="TemplateCreator_8cpp_source.html#l00272">TemplateCreator::AfterLastEntry()</a>, <a class="el" href="SavePulses_8cpp_source.html#l00076">SavePulses::AfterLastEntry()</a>, <a class="el" href="TemplateCreator_8cpp_source.html#l00081">TemplateCreator::BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00041">PlotTDPs::BeforeFirstEntry()</a>, <a class="el" href="ExportPulse_8cpp_source.html#l00034">ExportPulse::ExportPulse()</a>, and <a class="el" href="TemplateCreator_8cpp_source.html#l00109">TemplateCreator::ProcessEntry()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af30c91fa2a3388325dd20b322de517ca"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::GetName" ref="af30c91fa2a3388325dd20b322de517ca" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* BaseModule::GetName </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the name of this module as given to the constructor of the base class. </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00066">66</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00090">BaseModule::fName</a>.</p>

<p>Referenced by <a class="el" href="SavePulses_8cpp_source.html#l00030">SavePulses::BeforeFirstEntry()</a>, <a class="el" href="PlotTDPs_8cpp_source.html#l00041">PlotTDPs::BeforeFirstEntry()</a>, <a class="el" href="PlotTDP__TDiff_8cpp_source.html#l00035">PlotTDP_TDiff::BeforeFirstEntry()</a>, <a class="el" href="PlotTAP__Time_8cpp_source.html#l00033">PlotTAP_Time::ProcessEntry()</a>, <a class="el" href="PlotTAP__Energy_8cpp_source.html#l00037">PlotTAP_Energy::ProcessEntry()</a>, <a class="el" href="PlotTAP__Amplitude_8cpp_source.html#l00037">PlotTAP_Amplitude::ProcessEntry()</a>, and <a class="el" href="LoopSequence_8cpp_source.html#l00135">LoopSequence::Run()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066 {<span class="keywordflow">return</span> <a class="code" href="classBaseModule.html#a743cac6481efcd5dea914e1d28813dfe">fName</a>.c_str();};
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5f8dd6ba24c3cc68385eb540c17ae5de"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::Postprocess" ref="a5f8dd6ba24c3cc68385eb540c17ae5de" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseModule::Postprocess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method called by the main pre-process loop. </p>
<p>Does some simple work, then hooks into the derived class through AfterLastEntry. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on sucess and non-zero if a problem occurred </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00066">66</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">BaseModule::AfterLastEntry()</a>, and <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p>Referenced by <a class="el" href="LoopSequence_8cpp_source.html#l00120">LoopSequence::Postprocess()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066                                                                        {
<a name="l00067"></a>00067   <span class="comment">// This is called by our main routine and would allow later to split into different </span>
<a name="l00068"></a>00068   <span class="comment">// process routines if we have more than one Tree and hence different tpyes of data input.</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>) <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;cd();
<a name="l00071"></a>00071   <span class="keywordtype">int</span> ret = <a class="code" href="classBaseModule.html#adce5c0d504fe9daf1d4d77b8c0522a7c">AfterLastEntry</a>(gData, gSetup);
<a name="l00072"></a>00072   gDirectory-&gt;cd(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074   <span class="keywordflow">return</span> ret;
<a name="l00075"></a>00075 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac24b7d3d359985742164399bb19bad76"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::Preprocess" ref="ac24b7d3d359985742164399bb19bad76" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseModule::Preprocess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method called by the main pre-process loop. </p>
<p>Does some simple work, then hooks into the derived class through BeforeFirstEntry. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on sucess and non-zero if a problem occurred </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00055">55</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BaseModule::BeforeFirstEntry()</a>, and <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>.</p>

<p>Referenced by <a class="el" href="LoopSequence_8cpp_source.html#l00075">LoopSequence::Preprocess()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00055"></a>00055                                                                       {
<a name="l00056"></a>00056   <span class="comment">// This is called by our main routine and would allow later to split into different </span>
<a name="l00057"></a>00057   <span class="comment">// process routines if we have more than one Tree and hence different tpyes of data input.</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>) <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;cd();
<a name="l00060"></a>00060   <span class="keywordtype">int</span> ret = <a class="code" href="classBaseModule.html#a2c043d991a87450829025075284f5519">BeforeFirstEntry</a>(gData, gSetup);
<a name="l00061"></a>00061   gDirectory-&gt;cd(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   <span class="keywordflow">return</span> ret;
<a name="l00064"></a>00064 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a40f1c2f9066dc2a84cd210689951f898"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::ProcessEntry" ref="a40f1c2f9066dc2a84cd210689951f898" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PlotTPI_PedestalAndNoise::ProcessEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>In every event, we loop over all the detectors and all the TPulseIslands and calculate the RMS and mean of the first fNSamples samples in the digitised pulse (i.e. the noise and the pedestal respectively). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>gData</em>&nbsp;</td><td>See <a class="el" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f" title="The big kahuna. Overload this in the derived class and it will be called for each...">BaseModule::ProcessEntry</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>gSetup</em>&nbsp;</td><td>See <a class="el" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f" title="The big kahuna. Overload this in the derived class and it will be called for each...">BaseModule::ProcessEntry</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Non-zero to indicate a problem. </dd></dl>

<p>Implements <a class="el" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00045">45</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html">PlotTPI_PedestalAndNoise.cpp</a>.</p>

<p>References <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00075">fNSamples</a>, <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00070">fPedestalVsNoiseHistograms</a>, <a class="el" href="TGlobalData_8h_source.html#l00037">TGlobalData::fPulseIslandToChannelMap</a>, <a class="el" href="TSetupData_8h_source.html#l00058">TSetupData::GetDetectorName()</a>, <a class="el" href="TSetupData_8h_source.html#l00075">TSetupData::GetNBits()</a>, and <a class="el" href="analyzer_8cpp_source.html#l00085">TSetupData::Instance()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00045"></a>00045                                                                                     {
<a name="l00046"></a>00046 
<a name="l00047"></a>00047   <span class="comment">// Prepare a few variables</span>
<a name="l00048"></a>00048   std::string bankname, detname;
<a name="l00049"></a>00049   <a class="code" href="definitions_8h.html#a3c0940832f8741b0c226a24e3dbd62a8">PulseIslandList</a> thePulseIslands;
<a name="l00050"></a>00050   <a class="code" href="namespacemodules.html#aecc7811d5380ed9d9e903c9b71a396aa">StringPulseIslandMap::const_iterator</a> it;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 
<a name="l00053"></a>00053   <span class="comment">// Loop over each detector</span>
<a name="l00054"></a>00054   <span class="keywordflow">for</span>(it = gData-&gt;<a class="code" href="classTGlobalData.html#af871aca81ed72f5b05f063cfb471d9e8" title="Map of bank names to vectors of TPIs.">fPulseIslandToChannelMap</a>.begin(); it != gData-&gt;<a class="code" href="classTGlobalData.html#af871aca81ed72f5b05f063cfb471d9e8" title="Map of bank names to vectors of TPIs.">fPulseIslandToChannelMap</a>.end(); ++it){
<a name="l00055"></a>00055     
<a name="l00056"></a>00056     <span class="comment">// Get the bank and detector names for this detector</span>
<a name="l00057"></a>00057     bankname = it-&gt;first;
<a name="l00058"></a>00058     detname = setup-&gt;GetDetectorName(bankname);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060     <span class="comment">// Get the TPIs</span>
<a name="l00061"></a>00061     thePulseIslands = it-&gt;second;
<a name="l00062"></a>00062     <span class="keywordflow">if</span> (thePulseIslands.size() == 0) <span class="keywordflow">continue</span>; <span class="comment">// no pulses here..</span>
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     <span class="comment">// Create the histogram that will store all the average RMS noises from each event</span>
<a name="l00065"></a>00065     <span class="keywordflow">if</span> (<a class="code" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349" title="The map that we store the pedestal vs. noise histograms for each channel.">fPedestalVsNoiseHistograms</a>.find(detname) == <a class="code" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349" title="The map that we store the pedestal vs. noise histograms for each channel.">fPedestalVsNoiseHistograms</a>.end()) {
<a name="l00066"></a>00066       <span class="keywordtype">int</span> n_bits = <a class="code" href="group__alcapana__main.html#ga96d8c48f8693f69adda6aac005d17589" title="(Quasi-)Singleton interface">TSetupData::Instance</a>()-&gt;<a class="code" href="classTSetupData.html#a40acabc9f8cf502c53ca88b8461bb64a">GetNBits</a>(bankname);
<a name="l00067"></a>00067       <span class="keywordtype">int</span> x_min = 0;
<a name="l00068"></a>00068       <span class="keywordtype">int</span> x_max = std::pow(2, n_bits);
<a name="l00069"></a>00069       <span class="keywordtype">int</span> n_bins_x = 100;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071       <span class="keywordtype">int</span> y_min = 0;
<a name="l00072"></a>00072       <span class="keywordtype">int</span> y_max = 200;
<a name="l00073"></a>00073       <span class="keywordtype">int</span> n_bins_y = (y_max - y_min)*5;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075       std::string histname = <span class="stringliteral">&quot;fPedestalVsNoiseHistogram_&quot;</span> + detname;
<a name="l00076"></a>00076       std::stringstream histtitle;
<a name="l00077"></a>00077       histtitle &lt;&lt; <span class="stringliteral">&quot;Plot of the Pedestal vs Noise (mean and RMS of first &quot;</span> &lt;&lt; <a class="code" href="classPlotTPI__PedestalAndNoise.html#a3d22a2ecd3a4ada8e723373b11d1b40e" title="The number of samples we will look at in the TPulseIsland to calculate the mean and...">fNSamples</a> &lt;&lt; <span class="stringliteral">&quot; samples) in &quot;</span> &lt;&lt; detname;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079       TH2D* histogram = <span class="keyword">new</span> TH2D(histname.c_str(), histtitle.str().c_str(), n_bins_x,x_min,x_max, n_bins_y,y_min,y_max);
<a name="l00080"></a>00080       histogram-&gt;GetXaxis()-&gt;SetTitle(<span class="stringliteral">&quot;Pedestal [ADC]&quot;</span>);
<a name="l00081"></a>00081       histogram-&gt;GetYaxis()-&gt;SetTitle(<span class="stringliteral">&quot;Noise [ADC]&quot;</span>);
<a name="l00082"></a>00082       <a class="code" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349" title="The map that we store the pedestal vs. noise histograms for each channel.">fPedestalVsNoiseHistograms</a>[detname] = histogram;
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     TH2D* pedestal_vs_noise_histogram = <a class="code" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349" title="The map that we store the pedestal vs. noise histograms for each channel.">fPedestalVsNoiseHistograms</a>[detname];
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="comment">// Loop through all the pulses</span>
<a name="l00090"></a>00090     <span class="keywordflow">for</span> (<a class="code" href="namespacemodules.html#a5ce57c86284eadc5b573cfab0949bfdb">PulseIslandList::iterator</a> pulseIter = thePulseIslands.begin(); pulseIter != thePulseIslands.end(); ++pulseIter) {
<a name="l00091"></a>00091 
<a name="l00092"></a>00092       <span class="keyword">const</span> std::vector&lt;int&gt;&amp; theSamples = (*pulseIter)-&gt;GetSamples();
<a name="l00093"></a>00093       <span class="keywordtype">int</span> limit=<a class="code" href="classPlotTPI__PedestalAndNoise.html#a3d22a2ecd3a4ada8e723373b11d1b40e" title="The number of samples we will look at in the TPulseIsland to calculate the mean and...">fNSamples</a>;
<a name="l00094"></a>00094       <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)theSamples.size() &lt; <a class="code" href="classPlotTPI__PedestalAndNoise.html#a3d22a2ecd3a4ada8e723373b11d1b40e" title="The number of samples we will look at in the TPulseIsland to calculate the mean and...">fNSamples</a>) limit=theSamples.size();
<a name="l00095"></a>00095 
<a name="l00096"></a>00096       <span class="keywordtype">double</span> sum = 0;
<a name="l00097"></a>00097       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSample = 0; iSample &lt; limit; ++iSample) {
<a name="l00098"></a>00098           sum += theSamples.at(iSample);
<a name="l00099"></a>00099       }
<a name="l00100"></a>00100       <span class="keywordtype">double</span> mean = sum / limit;
<a name="l00101"></a>00101       
<a name="l00102"></a>00102       <span class="keywordtype">double</span> sum_of_deviations_squared = 0;
<a name="l00103"></a>00103       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iSample = 0; iSample &lt; limit; ++iSample) {
<a name="l00104"></a>00104           sum_of_deviations_squared += (theSamples.at(iSample) - mean)*(theSamples.at(iSample) - mean);
<a name="l00105"></a>00105       }
<a name="l00106"></a>00106       <span class="keywordtype">double</span> stdev = std::sqrt(sum_of_deviations_squared / limit);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108       pedestal_vs_noise_histogram-&gt;Fill(mean, stdev);
<a name="l00109"></a>00109     } <span class="comment">// end loop through pulses</span>
<a name="l00110"></a>00110   } <span class="comment">// end loop through detectors</span>
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <span class="keywordflow">return</span> 0;
<a name="l00113"></a>00113 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a204587ff6e1d967ab21d0cbbfea3b0fd"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::ProcessGenericEntry" ref="a204587ff6e1d967ab21d0cbbfea3b0fd" args="(TGlobalData *gData, const TSetupData *gSetup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseModule::ProcessGenericEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTGlobalData.html">TGlobalData</a> *&nbsp;</td>
          <td class="paramname"> <em>gData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTSetupData.html">TSetupData</a> *&nbsp;</td>
          <td class="paramname"> <em>gSetup</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Method called by the main event loop for each entry in the input root tree. Does some simple work, then hooks into the derived class through ProcessEntry. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on sucess and non-zero if a problem occurred </dd></dl>

<p>Definition at line <a class="el" href="BaseModule_8cpp_source.html#l00044">44</a> of file <a class="el" href="BaseModule_8cpp_source.html">BaseModule.cpp</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00091">BaseModule::fDirectory</a>, and <a class="el" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f">BaseModule::ProcessEntry()</a>.</p>

<p>Referenced by <a class="el" href="LoopSequence_8cpp_source.html#l00091">LoopSequence::Process()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00044"></a>00044                                                                                {
<a name="l00045"></a>00045   <span class="comment">// This is called by our main routine and would allow later to split into different </span>
<a name="l00046"></a>00046   <span class="comment">// process routines if we have more than one Tree and hence different tpyes of data input.</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="keywordflow">if</span>(<a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>) <a class="code" href="classBaseModule.html#a836fa9d2af26eb8a0041e0478c8fa9f0">fDirectory</a>-&gt;cd();
<a name="l00049"></a>00049   <span class="keywordtype">int</span> ret = <a class="code" href="classBaseModule.html#aa4f8e8bc97c131fa8a97091ac7b7232f" title="The big kahuna. Overload this in the derived class and it will be called for each...">ProcessEntry</a>(gData, gSetup);
<a name="l00050"></a>00050   gDirectory-&gt;cd(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   <span class="keywordflow">return</span> ret;
<a name="l00053"></a>00053 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aab50673c8ec954675da2664677abfab1"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::SetAlias" ref="aab50673c8ec954675da2664677abfab1" args="(const std::string &amp;alias)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseModule::SetAlias </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>alias</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the alias for this module, which should be provided in the <a class="el" href="namespacemodules.html">modules</a> file </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00059">59</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>References <a class="el" href="BaseModule_8h_source.html#l00092">BaseModule::fAlias</a>.</p>

<p>Referenced by <a class="el" href="BaseModule_8cpp_source.html#l00007">BaseModule::BaseModule()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00059"></a>00059 {<a class="code" href="classBaseModule.html#ae19cdbdf544a783be4cdd4505ae31fb9">fAlias</a>=alias;};
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aa00f24e65a18c1d08149965da0fa1a22"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::dir" ref="aa00f24e65a18c1d08149965da0fa1a22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TDirectory* <a class="el" href="classBaseModule.html#aa00f24e65a18c1d08149965da0fa1a22">BaseModule::dir</a><code> [protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Many <a class="el" href="namespacemodules.html">modules</a> use 'dir' still which was the old protected pointer to the <a class="el" href="namespacemodules.html">modules</a> directory. To prevent things being broken so soon, we keep this pointer available, but be warned that it will be removed shortly... </p>

<p>Definition at line <a class="el" href="BaseModule_8h_source.html#l00098">98</a> of file <a class="el" href="BaseModule_8h_source.html">BaseModule.h</a>.</p>

<p>Referenced by <a class="el" href="BaseModule_8cpp_source.html#l00007">BaseModule::BaseModule()</a>, <a class="el" href="FastSlowCompare_8cpp_source.html#l00026">FastSlowCompare::FastSlowCompare()</a>, <a class="el" href="GeSpectrum_8cpp_source.html#l00030">GeSpectrum::GeSpectrum()</a>, <a class="el" href="BaseModule_8cpp_source.html#l00077">BaseModule::GetDirectory()</a>, <a class="el" href="MakeMuonEvents_8cpp_source.html#l00023">MakeMuonEvents::MakeMuonEvents()</a>, and <a class="el" href="PlotAmpVsTDiff_8cpp_source.html#l00025">PlotAmpVsTDiff::PlotAmpVsTDiff()</a>.</p>

</div>
</div>
<a class="anchor" id="a154e6e0f5f92d0fb042554c26581e335"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::fExportSQL" ref="a154e6e0f5f92d0fb042554c26581e335" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool <a class="el" href="classPlotTPI__PedestalAndNoise.html#a154e6e0f5f92d0fb042554c26581e335">PlotTPI_PedestalAndNoise::fExportSQL</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A bool to decide whether we export the pedestal and noise to the SQLite database (opt = "export_sql", default = false). </p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00080">80</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html">PlotTPI_PedestalAndNoise.h</a>.</p>

<p>Referenced by <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00118">AfterLastEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d22a2ecd3a4ada8e723373b11d1b40e"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::fNSamples" ref="a3d22a2ecd3a4ada8e723373b11d1b40e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classPlotTPI__PedestalAndNoise.html#a3d22a2ecd3a4ada8e723373b11d1b40e">PlotTPI_PedestalAndNoise::fNSamples</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of samples we will look at in the <a class="el" href="classTPulseIsland.html" title="A uniform format for data from many different detectors.">TPulseIsland</a> to calculate the mean and RMS (opt = "n_samples"). </p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00075">75</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html">PlotTPI_PedestalAndNoise.h</a>.</p>

<p>Referenced by <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00045">ProcessEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="ae9c34f1d9d3826ed70103310fdcfe349"></a><!-- doxytag: member="PlotTPI_PedestalAndNoise::fPedestalVsNoiseHistograms" ref="ae9c34f1d9d3826ed70103310fdcfe349" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, TH2D*&gt; <a class="el" href="classPlotTPI__PedestalAndNoise.html#ae9c34f1d9d3826ed70103310fdcfe349">PlotTPI_PedestalAndNoise::fPedestalVsNoiseHistograms</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The map that we store the pedestal vs. noise histograms for each channel. </p>

<p>Definition at line <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html#l00070">70</a> of file <a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html">PlotTPI_PedestalAndNoise.h</a>.</p>

<p>Referenced by <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00118">AfterLastEntry()</a>, and <a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html#l00045">ProcessEntry()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>rootana/src/plotters/<a class="el" href="PlotTPI__PedestalAndNoise_8h_source.html">PlotTPI_PedestalAndNoise.h</a></li>
<li>rootana/src/plotters/<a class="el" href="PlotTPI__PedestalAndNoise_8cpp_source.html">PlotTPI_PedestalAndNoise.cpp</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 12 Jun 2015 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

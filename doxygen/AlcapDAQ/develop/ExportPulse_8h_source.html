<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AlcapDAQ: analyzer/rootana/src/plotters/ExportPulse.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>analyzer/rootana/src/plotters/ExportPulse.h</h1><a href="ExportPulse_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef ExportPulse_H__</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define ExportPulse_H__</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;set&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;<a class="code" href="definitions_8h.html">definitions.h</a>&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="FillHistBase_8h.html">FillHistBase.h</a>&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="TGlobalData_8h.html">TGlobalData.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="TSetupData_8h.html">TSetupData.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="ModulesOptions_8h.html">ModulesOptions.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="ModulesNavigator_8h.html">ModulesNavigator.h</a>&quot;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="keyword">class </span><a class="code" href="classTVAnalysedPulseGenerator.html">TVAnalysedPulseGenerator</a>;
<a name="l00017"></a>00017 <span class="keyword">class </span><a class="code" href="classTPulseIsland.html">TPulseIsland</a>;
<a name="l00018"></a>00018 <span class="keyword">class </span><a class="code" href="classTAnalysedPulse.html">TAnalysedPulse</a>;
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="classExportPulse.html">00020</a> <span class="keyword">class </span><a class="code" href="classExportPulse.html">ExportPulse</a> : <span class="keyword">public</span> <a class="code" href="classFillHistBase.html">FillHistBase</a>{
<a name="l00021"></a><a class="code" href="classExportPulse.html#a706a6a70d8d76ea11c010db2e0df1bc6">00021</a>   <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="classExportPulse.html#a706a6a70d8d76ea11c010db2e0df1bc6">PulseID_t</a>;
<a name="l00022"></a><a class="code" href="classExportPulse.html#a9d5b6a76cd5c6cda14623390d0f816ab">00022</a>   <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="classExportPulse.html#a9d5b6a76cd5c6cda14623390d0f816ab">EventID_t</a>;
<a name="l00023"></a><a class="code" href="classExportPulse.html#aaff050241842e7ec3c01b6a3cb2b1957">00023</a>   <span class="keyword">typedef</span> std::set&lt;PulseID_t&gt; <a class="code" href="classExportPulse.html#aaff050241842e7ec3c01b6a3cb2b1957">PulseIDList_t</a>;
<a name="l00024"></a><a class="code" href="classExportPulse.html#ab6abf76a80578aa7bc7c6f801dfb8d57">00024</a>   <span class="keyword">typedef</span> std::map&lt;std::string,PulseIDList_t&gt; <a class="code" href="classExportPulse.html#ab6abf76a80578aa7bc7c6f801dfb8d57">ChannelPulseIDs_t</a>;
<a name="l00025"></a><a class="code" href="classExportPulse.html#aa5a51342980212630bfa2eda655c05d5">00025</a>   <span class="keyword">typedef</span> std::map&lt;EventID_t,PulseIDList_t&gt; <a class="code" href="classExportPulse.html#aa5a51342980212630bfa2eda655c05d5">EventPulseIDList_t</a>;
<a name="l00026"></a><a class="code" href="classExportPulse.html#a02348484fe1875bca137ae370ac53e1f">00026</a>   <span class="keyword">typedef</span> std::map&lt;std::string,EventPulseIDList_t&gt; <a class="code" href="classExportPulse.html#a02348484fe1875bca137ae370ac53e1f">EventChannelPulseIDs_t</a>;
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="structExportPulse_1_1PulseInfo__t.html">00028</a>   <span class="keyword">struct </span><a class="code" href="structExportPulse_1_1PulseInfo__t.html">PulseInfo_t</a>{
<a name="l00029"></a><a class="code" href="structExportPulse_1_1PulseInfo__t.html#abaeaac6cc14033fded7d18be06d7556b">00029</a>           <span class="keywordtype">int</span> <a class="code" href="structExportPulse_1_1PulseInfo__t.html#abaeaac6cc14033fded7d18be06d7556b">ID</a>;
<a name="l00030"></a><a class="code" href="structExportPulse_1_1PulseInfo__t.html#a249e153d3372464b44d58e76f8787cc7">00030</a>           std::string <a class="code" href="structExportPulse_1_1PulseInfo__t.html#a249e153d3372464b44d58e76f8787cc7">bankname</a>;
<a name="l00031"></a><a class="code" href="structExportPulse_1_1PulseInfo__t.html#ac21c371a0076ed6ef9f7e8319562d388">00031</a>           std::string <a class="code" href="structExportPulse_1_1PulseInfo__t.html#ac21c371a0076ed6ef9f7e8319562d388">detname</a>;
<a name="l00032"></a>00032   };
<a name="l00033"></a>00033 
<a name="l00034"></a>00034  <span class="keyword">public</span>:
<a name="l00035"></a>00035   <a class="code" href="classExportPulse.html#ad6bd161c29b7963210dc75977a140370">ExportPulse</a>(<a class="code" href="classmodules_1_1options.html">modules::options</a>* opts);
<a name="l00036"></a>00036   <a class="code" href="classExportPulse.html#a9fd56e3f5b63a3d579e65d25b74336a8">~ExportPulse</a>();
<a name="l00037"></a>00037 
<a name="l00038"></a>00038   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#ad67e3a5fc2216c37e362e05af180ae1a">AddToExportList</a>(<span class="keyword">const</span> std::string&amp; detector,<a class="code" href="classExportPulse.html#a706a6a70d8d76ea11c010db2e0df1bc6">PulseID_t</a> pulse_id);
<a name="l00039"></a>00039   <span class="keyword">static</span> <a class="code" href="classExportPulse.html">ExportPulse</a>* <a class="code" href="classExportPulse.html#a8bd12c1f63c4f87d2570b6b397781f31">Instance</a>();
<a name="l00040"></a>00040 
<a name="l00041"></a>00041  <span class="keyword">private</span>:
<a name="l00042"></a>00042   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classExportPulse.html#a12182a18c102c1fc956f745c5d68787a">ProcessEntry</a>(<a class="code" href="classTGlobalData.html">TGlobalData</a> *<a class="code" href="analyzer_8cpp.html#a69cb952a194ddefc6004dd96e70ccd62">gData</a>, <a class="code" href="classTSetupData.html">TSetupData</a> *<a class="code" href="analyzer_8cpp.html#aad8aa5d5fe566b2f8f6ca3000b09f0e9">gSetup</a>);
<a name="l00043"></a>00043   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classExportPulse.html#acdccd3c975e204316594530f4192e27c">BeforeFirstEntry</a>(<a class="code" href="classTGlobalData.html">TGlobalData</a>* <a class="code" href="analyzer_8cpp.html#a69cb952a194ddefc6004dd96e70ccd62">gData</a>,<a class="code" href="classTSetupData.html">TSetupData</a> *setup);
<a name="l00044"></a>00044   <span class="comment">//virtual int AfterLastEntry(TGlobalData* gData){return 0;};</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046   <span class="keywordtype">int</span> <a class="code" href="classExportPulse.html#aaf1c24363eb087c014d099e08c90f22e">MakePlot</a>(<span class="keyword">const</span> <a class="code" href="classTPulseIsland.html">TPulseIsland</a>* pulse)<span class="keyword">const</span>;
<a name="l00047"></a>00047   <a class="code" href="definitions_8h.html#a3c0940832f8741b0c226a24e3dbd62a8">PulseIslandList</a>* <a class="code" href="classExportPulse.html#a8654fa200da8c9a782db8d4252b2a8b2">GetPulsesFromDetector</a>(std::string bank=<span class="stringliteral">&quot;&quot;</span>);
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="classExportPulse.html#a9f63fb038c58aba78f12cdce01289b72">00049</a>   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#a9f63fb038c58aba78f12cdce01289b72">SetCurrentPulseID</a>(<span class="keyword">const</span> <a class="code" href="classExportPulse.html#a706a6a70d8d76ea11c010db2e0df1bc6">PulseID_t</a>&amp; <span class="keywordtype">id</span>){<a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">fPulseInfo</a>.<a class="code" href="structExportPulse_1_1PulseInfo__t.html#abaeaac6cc14033fded7d18be06d7556b">ID</a>=id;};
<a name="l00050"></a><a class="code" href="classExportPulse.html#a841403fe90bbad6442416f4a9e60c778">00050</a>   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#a841403fe90bbad6442416f4a9e60c778">SetCurrentEventNumber</a>(<span class="keyword">const</span> Long64_t&amp; num){<a class="code" href="classExportPulse.html#a3cbd262f3cdd1a03ddf97e5ed49c7f97">fEventNumber</a>=num;};
<a name="l00051"></a>00051   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#abd765ef155c0284af9f2fb86b23464c4">SetCurrentDetectorName</a>(<span class="keyword">const</span> std::string&amp; detector);
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="classExportPulse.html#a3477b4a009e02a0a126ff1aae80de293">00053</a>   <a class="code" href="classExportPulse.html#a706a6a70d8d76ea11c010db2e0df1bc6">PulseID_t</a> <a class="code" href="classExportPulse.html#a3477b4a009e02a0a126ff1aae80de293">GetCurrentPulseID</a>()<span class="keyword">const</span>{<span class="keywordflow">return</span> <a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">fPulseInfo</a>.<a class="code" href="structExportPulse_1_1PulseInfo__t.html#abaeaac6cc14033fded7d18be06d7556b">ID</a>;};
<a name="l00054"></a><a class="code" href="classExportPulse.html#a2755c11aa842948fbf24f6de58912e2d">00054</a>   Long64_t <a class="code" href="classExportPulse.html#a2755c11aa842948fbf24f6de58912e2d">GetCurrentEventNumber</a>()<span class="keyword">const</span>{<span class="keywordflow">return</span> <a class="code" href="classExportPulse.html#a3cbd262f3cdd1a03ddf97e5ed49c7f97">fEventNumber</a>;};
<a name="l00055"></a><a class="code" href="classExportPulse.html#a9001dc972612c8805c3f3f8a017cb1a6">00055</a>   std::string <a class="code" href="classExportPulse.html#a9001dc972612c8805c3f3f8a017cb1a6">GetCurrentDetectorName</a>()<span class="keyword">const</span>{<span class="keywordflow">return</span> <a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">fPulseInfo</a>.<a class="code" href="structExportPulse_1_1PulseInfo__t.html#ac21c371a0076ed6ef9f7e8319562d388">detname</a>;};
<a name="l00056"></a><a class="code" href="classExportPulse.html#a60b34c0f740aea86b2970e94a38686c2">00056</a>   std::string <a class="code" href="classExportPulse.html#a60b34c0f740aea86b2970e94a38686c2">GetCurrentBankName</a>()<span class="keyword">const</span>{<span class="keywordflow">return</span> <a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">fPulseInfo</a>.<a class="code" href="structExportPulse_1_1PulseInfo__t.html#a249e153d3372464b44d58e76f8787cc7">bankname</a>;};
<a name="l00057"></a><a class="code" href="classExportPulse.html#a9787ddd6c6a36be4606a1a57f8f14383">00057</a>   Long64_t <a class="code" href="classExportPulse.html#a9787ddd6c6a36be4606a1a57f8f14383">GetTotalNumberOfEvents</a>()<span class="keyword">const</span>{<span class="keywordflow">return</span> <a class="code" href="classExportPulse.html#affc9c831a99016dffec5bc17bcecedb9">fTotalEvents</a>;};
<a name="l00058"></a>00058   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#a3140e14318cda27ccf0eaa442123175e">ClearPulsesToExport</a>();
<a name="l00059"></a>00059 
<a name="l00060"></a>00060   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#af04d1a8b004459e75684722d7172232a">AddToConfigRequestList</a>( <a class="code" href="classExportPulse.html#a9d5b6a76cd5c6cda14623390d0f816ab">EventID_t</a> event_id, <span class="keyword">const</span> std::string&amp; detector,<a class="code" href="classExportPulse.html#a706a6a70d8d76ea11c010db2e0df1bc6">PulseID_t</a> pulse_id);
<a name="l00061"></a>00061   <span class="keywordtype">bool</span> <a class="code" href="classExportPulse.html#a3f32fad51ae619ba86d2adcd8032e51c">ParseEventRequest</a>(std::string input, std::vector&lt;EventID_t&gt;&amp; event_list);
<a name="l00062"></a>00062   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#a7b3d0abfdb13c9a66a227f6bb109887b">ShowGuidance</a>();
<a name="l00063"></a>00063   <span class="keywordtype">bool</span> <a class="code" href="classExportPulse.html#aeae0b97ccbd4fc2718d2c3e603c63c3f">ParsePulseRequest</a>(std::string input, std::vector&lt;EventID_t&gt;&amp; <a class="code" href="namespacemodules.html#ad4b4c82a2af83370510aa8b5006283f3">list</a>);
<a name="l00064"></a>00064   <span class="keywordtype">bool</span> <a class="code" href="classExportPulse.html#ae664e836c3b95999aa97399a4e23ae98">ParseRequest</a>(std::string input, std::vector&lt;EventID_t&gt;&amp; <a class="code" href="namespacemodules.html#ad4b4c82a2af83370510aa8b5006283f3">list</a>,
<a name="l00065"></a>00065                   <span class="keyword">const</span> std::string&amp; type, Long64_t lower_limit, Long64_t upper_limit);
<a name="l00066"></a>00066   <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#a1c61871c9261b795b4538ae66345caa0">LoadPulsesRequestedByConfig</a>();
<a name="l00067"></a>00067 
<a name="l00068"></a>00068  <span class="keyword">private</span>:
<a name="l00069"></a>00069 
<a name="l00070"></a><a class="code" href="classExportPulse.html#aa9c3d0876e3ded105c46ae4431c58cd9">00070</a>   <span class="keywordtype">bool</span> <a class="code" href="classExportPulse.html#aa9c3d0876e3ded105c46ae4431c58cd9">fGuidanceShown</a>;
<a name="l00071"></a><a class="code" href="classExportPulse.html#affc9c831a99016dffec5bc17bcecedb9">00071</a>   Long64_t <a class="code" href="classExportPulse.html#a3cbd262f3cdd1a03ddf97e5ed49c7f97">fEventNumber</a>,<a class="code" href="classExportPulse.html#affc9c831a99016dffec5bc17bcecedb9">fTotalEvents</a>;
<a name="l00072"></a><a class="code" href="classExportPulse.html#a916cb9d162f2e94cab5b4663b5911dcd">00072</a>   <a class="code" href="classExportPulse.html#ab6abf76a80578aa7bc7c6f801dfb8d57">ChannelPulseIDs_t</a> <a class="code" href="classExportPulse.html#a916cb9d162f2e94cab5b4663b5911dcd">fPulsesToPlot</a>;
<a name="l00073"></a><a class="code" href="classExportPulse.html#a0a29ca7442e0577b107ddda547561971">00073</a>   <a class="code" href="classExportPulse.html#a02348484fe1875bca137ae370ac53e1f">EventChannelPulseIDs_t</a> <a class="code" href="classExportPulse.html#a0a29ca7442e0577b107ddda547561971">fRequestedByConfig</a>;
<a name="l00074"></a><a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">00074</a>   <a class="code" href="structExportPulse_1_1PulseInfo__t.html">PulseInfo_t</a> <a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">fPulseInfo</a>;
<a name="l00075"></a><a class="code" href="classExportPulse.html#a5901216fa58858127a2b72be55661c4d">00075</a>   <a class="code" href="classTSetupData.html">TSetupData</a>* <a class="code" href="classExportPulse.html#a5901216fa58858127a2b72be55661c4d">fSetup</a>;
<a name="l00076"></a><a class="code" href="classExportPulse.html#a1c30556d67a0b40990d214b72afd6595">00076</a>   <a class="code" href="classmodules_1_1options.html">modules::options</a>* <a class="code" href="classExportPulse.html#a1c30556d67a0b40990d214b72afd6595">fOptions</a>;
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="classExportPulse.html#a2f9e1ce7d5789234a235a726d3bc147a">00078</a>   <a class="code" href="classTGlobalData.html">TGlobalData</a>* <a class="code" href="classExportPulse.html#a2f9e1ce7d5789234a235a726d3bc147a">fGlobalData</a>; <span class="comment">// To be removed once Phill finishes the event navigator</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 };
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="classExportPulse.html#a8bd12c1f63c4f87d2570b6b397781f31">00082</a> <span class="keyword">inline</span> <a class="code" href="classExportPulse.html">ExportPulse</a>* <a class="code" href="classExportPulse.html#a8bd12c1f63c4f87d2570b6b397781f31">ExportPulse::Instance</a>() {
<a name="l00083"></a>00083   <span class="keywordflow">return</span> <a class="code" href="classExportPulse.html#a8bd12c1f63c4f87d2570b6b397781f31">modules::navigator::Instance</a>()-&gt;GetModule&lt;<a class="code" href="classExportPulse.html">ExportPulse</a>&gt;(<span class="stringliteral">&quot;ExportPulse&quot;</span>);
<a name="l00084"></a>00084 }
<a name="l00085"></a>00085 
<a name="l00086"></a><a class="code" href="classExportPulse.html#ad67e3a5fc2216c37e362e05af180ae1a">00086</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#ad67e3a5fc2216c37e362e05af180ae1a">ExportPulse::AddToExportList</a>(<span class="keyword">const</span> std::string&amp; detector,PulseID_t pulse_id) {
<a name="l00087"></a>00087   <a class="code" href="classExportPulse.html#a916cb9d162f2e94cab5b4663b5911dcd">fPulsesToPlot</a>[detector].insert(pulse_id);
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="classExportPulse.html#af04d1a8b004459e75684722d7172232a">00090</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#af04d1a8b004459e75684722d7172232a">ExportPulse::AddToConfigRequestList</a>(EventID_t event_id, <span class="keyword">const</span> std::string&amp; detector,PulseID_t pulse_id) {
<a name="l00091"></a>00091   <a class="code" href="classExportPulse.html#a0a29ca7442e0577b107ddda547561971">fRequestedByConfig</a>[detector][event_id].insert(pulse_id);
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="classExportPulse.html#abd765ef155c0284af9f2fb86b23464c4">00094</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classExportPulse.html#abd765ef155c0284af9f2fb86b23464c4">ExportPulse::SetCurrentDetectorName</a>(<span class="keyword">const</span> std::string&amp; detector){
<a name="l00095"></a>00095         <a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">fPulseInfo</a>.<a class="code" href="structExportPulse_1_1PulseInfo__t.html#ac21c371a0076ed6ef9f7e8319562d388">detname</a>=detector;
<a name="l00096"></a>00096         <a class="code" href="classExportPulse.html#a3d225be1343871e1d678f1ce0735dfa8">fPulseInfo</a>.<a class="code" href="structExportPulse_1_1PulseInfo__t.html#a249e153d3372464b44d58e76f8787cc7">bankname</a>=<a class="code" href="classExportPulse.html#a5901216fa58858127a2b72be55661c4d">fSetup</a>-&gt;<a class="code" href="classTSetupData.html#a796c2a3e638560318393713b4858a76e">GetBankName</a>(detector);
<a name="l00097"></a>00097 }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="preprocessor">#endif // ExportPulse_H__</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 8 Jun 2014 for AlcapDAQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>

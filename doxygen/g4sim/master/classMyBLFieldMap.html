<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>g4sim: MyBLFieldMap Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MyBLFieldMap Class Reference</h1><!-- doxytag: class="MyBLFieldMap" -->
<p><code>#include &lt;<a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>&gt;</code></p>

<p><a href="classMyBLFieldMap-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a6d40457764a1c56b06e26c2521b96512">MyBLFieldMap</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">default constructor.  <a href="#a6d40457764a1c56b06e26c2521b96512"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#abb9d1a38413c7594a166cbbc0cf56637">~MyBLFieldMap</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">destructor.  <a href="#abb9d1a38413c7594a166cbbc0cf56637"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#add2c2908a8df4c4e14c40ae27a46518e">readFile</a> (G4String filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a074c788e85310f2db605fb283940d223">writeFile</a> (G4String filename, G4String comment=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a73d69b5d145de5f49e99f1ab1aab2cc9">getFieldValue</a> (const G4double local[4], G4double field[6], G4double <a class="el" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a>=1.0, G4double <a class="el" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a>=1.0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a960b99301a56f912f15ad71221989ee0">getBoundingPoint</a> (int i, G4double point[4])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classMyBLFieldMap.html#a960b99301a56f912f15ad71221989ee0" title="getBoundingPoint() returns the i-th bounding point of the map.">getBoundingPoint()</a> returns the i-th bounding point of the map.  <a href="#a960b99301a56f912f15ad71221989ee0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#afd125ae39d8e5d885ae4da66367b79ef">hasB</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classMyBLFieldMap.html#afd125ae39d8e5d885ae4da66367b79ef" title="hasB() returns true if this map has a nonzero B field.">hasB()</a> returns true if this map has a nonzero B field.  <a href="#afd125ae39d8e5d885ae4da66367b79ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a9f6d9efe78c724e453b1d402a7bbda08">hasE</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classMyBLFieldMap.html#a9f6d9efe78c724e453b1d402a7bbda08" title="hasE() returns true if this map has a nonzero E field.">hasE()</a> returns true if this map has a nonzero E field.  <a href="#a9f6d9efe78c724e453b1d402a7bbda08"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a3a44f04672eb2630e3c4ad99ced6dc27">createGridMap</a> (G4double X0, G4double Y0, G4double Z0, G4double dX, G4double dY, G4double dZ, int nX, int nY, int nZ, class G4ElectroMagneticField *field)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a62fbb4ea188794183fdee406df4fa986">createCylinderMap</a> (G4double Z0, G4double dR, G4double dZ, int nR, int nZ, class G4ElectroMagneticField *field)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a0fe89451b898a2fb4b13e819bd5141ad">createTimeDependence</a> (int n, G4double t[], G4double b[], G4double e[]=0, G4double period=-1.0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#ad50cd8b0febfd219fd813ba247e5b47a">getTimeFactor</a> (G4double t, G4double *b, G4double *e)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">G4int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">G4double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">G4double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">G4double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">G4double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class <a class="el" href="classFieldMapImpl.html">FieldMapImpl</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class <a class="el" href="classTimeImpl.html">TimeImpl</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a></td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMyBLFieldMap.html#a53ba44089ab1c4c1cfeaa812bf684827">FieldMapPlacement</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>class <a class="el" href="classMyBLFieldMap.html">MyBLFieldMap</a> implements a general field map, both B and E.</p>
<p>Initially this class simply reads an input file to define the map. Eventually it will also generate a map automatically from a BLCoil, and from an arbitrary collection of magnets (to improve tracking efficiency for a large number of overlapping solenoids).</p>
<p>Field components are interpolated in the map; the values used are: Bx = (interpolated value)*normB*(element_current/current_param) Ex = (interpolated value)*normE*(element_gradient/gradient_param) [other components are similar] where element_current and element_gradient are from the element definition command in the input file, and normB, normE, curren_param, and gradient_param come from the input file. The presence of both norm and current/gradient in the input file is to accommodate diverse sources of input files and units.</p>
<p>Outside the map the fields are zero, so if the map is truncated you should ensure that no particles are tracked outside the map in that region. This happens, for instance, for a beam solenoid truncated in radius to the inside of the coil -- particles which enter the coil will see a zero field, so the coil should be set to kill them; particles outside the map along z but inside the bore will also see a zero field, but that is usually OK as long as the map extends far enough along Z to include the nonzero field region.</p>
<p>Input File format: Blank lines, and lines beginning with # or * are comments. Lines beginning with * are printed to stdout. Units are mm for coordinates, Tesla for B, and MegaVolts/meter for E; use normB and normE if the data points use different units.</p>
<p>The input file starts with a set of commands to define the parameters of the map, followed by blocks of lines containing the values of the field components. The field component names depend on the type of map (grid: Bx,By,Bz,Ex,Ey,Ez; cylinder: Br,Bz,Er,Ez). Each command has a specific list of arguments to define parameters of the map.</p>
<p>BEWARE: the parsing is not exhaustive. For instance, invalid arguments are silently ignored (which means you must verify the spelling and capitalization of argument names). Correct inputs will yield correct results, but invalid inputs may not be detected and may yield seemingly-correct but unintended results.</p>
<p>The first command is usually a param command, which has the following arguments: maxline The maximum number of characters per line (default=1023) current The current corresponding to this map (default=1.0) gradient The gradient corresponding to the map (default=1.0) normE A normalization factor for E components (default=1.0) normB A normalization factor for B components (default=1.0)</p>
<p>Two types of maps are implemented: grid and cylinder.</p>
<p>grid maps are a 3-D grid, with each block of data being a single X-Y plane; within a block the lines are Y and the columns of each line are values along X. The grid command has the following arguments: X0 The X value for the first value in each line Y0 The Y value for the first line in each block Z0 The Z value for the first block of each field component nX The number of columns per line nY The number of lines per block nZ The number of blocks per field component dX The X increment between values in each line dY The Y increment between lines dZ The Z increment between blocks tolerance The tolerance for pointwise data (default=0.01 mm) After the grid command, the following optional commands can be given: extendX flip=... extendY flip=... extendZ flip=... These commands permit a half-map to be extended to the full map around X=0, Y=0, or Z=0 respectively. The optional flip argument is a comma-separated list of field components whose signs will be inverted for negative values of the coordinate. For example, "extendZ flip=Bx,Ex" means the map from Z=0 to Z=(nZ-1)*dZ is extended symmetrically around Z=0 to negative Z values, flipping the signs of Bx and Ex when Z&lt;0. This could be followed by "extendX flip=Bx,Ex", and the field flips will be the products of both commands.</p>
<p>cylinder maps are a 2-D map with rotational symmetry around the Z axis. Each field component has a single block with lines being Z and the columns being R. The cylinder command has the following arguments: Z0 The Z value for the first line in each block nR The number of columns per line nZ The number of lines per block dR The R increment between colums dZ The Z increment between lines tolerance The tolerance for pointwise data (default=0.01 mm) After the cylinder command, the following optional commands can be given: extendZ flip=... This command behaves the same as for the grid map.</p>
<p>After the commands, each block consists of a line containing the name of the field component, followed by the lines of the block. The values within a line can be separated by whitespace or a ',' followed by optional whitespace. Field components that are not given are set to 0.0 everywhere. Missing values will be considered to be 0.0. For grid maps the first block is for Z=Z0, and successive blocks increment Z by dZ; the first line in a block is for Y=Y0 and the first column in each line is for X=X0. For cylinder maps, the first line in each block is for Z=Z0 and the first column in each line is for R=0.</p>
<p>Instead of the blocked input format, a pointwise data format can be used. This is introduced by a line containing the command "data", followed by the individual points of the map, one per line. for a grid field, each line contains values for X,Y,Z,Bx,By,Bz,Ex,Ey,Ez separated by either a comma and optional whitespece or by whitespace. for a cylinder field each line contains values for R,Z,Br,Bz,Er,Ez. The order of the points does not matter; omitted grid points will be 0.0, and for duplicates the last entry wins. If there is no E field, the Ex,Ey,Ez or Er,Ez entries should be omitted on every line. NOTE: every line's X,Y,Z or R,Z must be on a grid point as specified by the arguments to the grid or cylinder commands, to within the tolerance specified; if not, an error message is printed and the input line is ignored.</p>
<p>For time=dependent fields, the "time" command is used: time [period=12] period, if given, is in nanoseconds, and causes the interval [0,period) to be extended forever (before and after the values given). Because of the interpolation used, at least two points beyond the interval boundaries should be provided; there need not be a point at either boundary (but usually there are). Following the time command are lines containing 2 or 3 doubles: t B E where t is the time (nanoseconds), and B and E are factors for the fields. If E is omitted, the value for B is used. These values will be interpolated in time with a cubic spline that can handle either uniform or non-uniform spacing of points along t. The time command can come either before or after the cylinder or grid commands, but not within either of their sequences. Note a cubic spline is used to interpolate between points, and that can cause over/under-shoot near an abrupt change. Combined with period= this gives an excellent representation of sinewave/cosinewave.</p>
<p>Note that time dependence can currently only be specified via the time command in an input file (i.e. not programmable method exists).</p>
<p>Example block input file: * this is an example <a class="el" href="classMyBLFieldMap.html">MyBLFieldMap</a> input file, suitable for a solenoid # grid interval is 1 cm. # The region of validity is -390&lt;=Z&lt;=390 and 0&lt;=R&lt;=90 param normB=1.0 current=1.0 cylinder Z0=0.0 nR=10 nZ=40 dR=10.0 dZ=10.0 extendZ flip=Br Bz ... 40 lines of 10 values, Z=0 thru Z=390 Br ... 40 lines of 10 values, Z=0 thru Z=390 --EOF--</p>
<p>Example pointwise input file: * this is an example <a class="el" href="classMyBLFieldMap.html">MyBLFieldMap</a> input file, suitable for a solenoid # grid interval is 1 cm. # The region of validity is -390&lt;=Z&lt;=390 and 0&lt;=R&lt;=90 param normB=1.0 current=1.0 cylinder Z0=0.0 nR=10 nZ=40 dR=10.0 dZ=10.0 extendZ flip=Br data ... 400 lines of 4 values, giving R,Z,Br,Bz --EOF-- </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00196">196</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6d40457764a1c56b06e26c2521b96512"></a><!-- doxytag: member="MyBLFieldMap::MyBLFieldMap" ref="a6d40457764a1c56b06e26c2521b96512" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MyBLFieldMap::MyBLFieldMap </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>default constructor. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">267</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8hh_source.html#l00253">current</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00254">gradient</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00252">maxline</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00255">normB</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00256">normE</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00258">time</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00267"></a>00267                            {
<a name="l00268"></a>00268     <a class="code" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a> = 1024;
<a name="l00269"></a>00269     <a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a> = 1.0;
<a name="l00270"></a>00270     <a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a> = 1.0;
<a name="l00271"></a>00271     <a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a> = 1.0;
<a name="l00272"></a>00272     <a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a> = 1.0;
<a name="l00273"></a>00273     <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = 0;
<a name="l00274"></a>00274     <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a> = 0;
<a name="l00275"></a>00275 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abb9d1a38413c7594a166cbbc0cf56637"></a><!-- doxytag: member="MyBLFieldMap::~MyBLFieldMap" ref="abb9d1a38413c7594a166cbbc0cf56637" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MyBLFieldMap::~MyBLFieldMap </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>destructor. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00278">278</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00258">time</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00278"></a>00278                             {
<a name="l00279"></a>00279     <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>) <span class="keyword">delete</span> <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>;
<a name="l00280"></a>00280     <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = 0;
<a name="l00281"></a>00281     <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>) <span class="keyword">delete</span> <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>;
<a name="l00282"></a>00282     <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a> = 0;
<a name="l00283"></a>00283 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a62fbb4ea188794183fdee406df4fa986"></a><!-- doxytag: member="MyBLFieldMap::createCylinderMap" ref="a62fbb4ea188794183fdee406df4fa986" args="(G4double Z0, G4double dR, G4double dZ, int nR, int nZ, class G4ElectroMagneticField *field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::createCylinderMap </td>
          <td>(</td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>Z0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>dR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>dZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">class G4ElectroMagneticField *&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMyBLFieldMap.html#a62fbb4ea188794183fdee406df4fa986">createCylinderMap()</a> will create a 2-d map from a pre-defined cylindrically-symmetric field. NOTE: cylindrical symmetry is ASSUMED; the field in the Y=0,X&gt;=0 half-plane is used (Bx-&gt;Br...). returns false if error. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00481">481</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8hh_source.html#l00253">current</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00252">d2string()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00254">gradient</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00260">i2string()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00252">maxline</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00255">normB</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00256">normE</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l01155">CylinderImpl::setField()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00482"></a>00482                                                  {
<a name="l00483"></a>00483     <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>) {
<a name="l00484"></a>00484         <span class="keyword">delete</span> <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>;
<a name="l00485"></a>00485         <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = 0;
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487     <a class="code" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a> = 128;
<a name="l00488"></a>00488     <a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a> = 1.0;
<a name="l00489"></a>00489     <a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a> = 1.0;
<a name="l00490"></a>00490     <a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a> = 1.0;
<a name="l00491"></a>00491     <a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a> = 1.0;
<a name="l00492"></a>00492 
<a name="l00493"></a>00493     <a class="code" href="MyBLFuncs_8hh.html#a45a5a259e80c476628a7ded72fc4e485">MyBLArgumentVector</a> argv;
<a name="l00494"></a>00494     <a class="code" href="MyBLFuncs_8hh.html#a9fcb6f20bb3ea31b67993ee2a96c34e2">MyBLArgumentMap</a> args;
<a name="l00495"></a>00495     args[<span class="stringliteral">&quot;Z0&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(Z0);
<a name="l00496"></a>00496     args[<span class="stringliteral">&quot;dR&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(dR);
<a name="l00497"></a>00497     args[<span class="stringliteral">&quot;dZ&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(dZ);
<a name="l00498"></a>00498     args[<span class="stringliteral">&quot;nR&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a735916a9d0ccf0da5202177772147237" title="i2string converts an int to a G4String">i2string</a>(nR);
<a name="l00499"></a>00499     args[<span class="stringliteral">&quot;nZ&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a735916a9d0ccf0da5202177772147237" title="i2string converts an int to a G4String">i2string</a>(nZ);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <a class="code" href="classCylinderImpl.html">CylinderImpl</a> *cyl = <span class="keyword">new</span> <a class="code" href="classCylinderImpl.html">CylinderImpl</a>(argv,args);
<a name="l00502"></a>00502     <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = cyl;
<a name="l00503"></a>00503 
<a name="l00504"></a>00504     <span class="comment">// use the Y=0 plane for the R,Z plane</span>
<a name="l00505"></a>00505     <span class="keywordtype">bool</span> retval = <span class="keyword">true</span>;
<a name="l00506"></a>00506     G4double pos[4], field[6];
<a name="l00507"></a>00507     pos[3] = 0.0;
<a name="l00508"></a>00508     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nR; ++i) {
<a name="l00509"></a>00509         pos[0] = 0.0 + i*dR;
<a name="l00510"></a>00510         pos[1] = 0.0;
<a name="l00511"></a>00511         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nZ; ++k) {
<a name="l00512"></a>00512             pos[2] = Z0 + k*dZ;
<a name="l00513"></a>00513             emField-&gt;GetFieldValue(pos,field);
<a name="l00514"></a>00514             <span class="keywordflow">if</span>(!cyl-&gt;<a class="code" href="classCylinderImpl.html#a7fee92785ee9995f5c19a0a7d9976543">setField</a>(pos[0],pos[2],field[0],field[2],
<a name="l00515"></a>00515                 field[3],field[5],0))
<a name="l00516"></a>00516                 retval = <span class="keyword">false</span>;
<a name="l00517"></a>00517         }
<a name="l00518"></a>00518     }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00521"></a>00521 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3a44f04672eb2630e3c4ad99ced6dc27"></a><!-- doxytag: member="MyBLFieldMap::createGridMap" ref="a3a44f04672eb2630e3c4ad99ced6dc27" args="(G4double X0, G4double Y0, G4double Z0, G4double dX, G4double dY, G4double dZ, int nX, int nY, int nZ, class G4ElectroMagneticField *field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::createGridMap </td>
          <td>(</td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>X0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>Y0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>Z0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>dX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>dY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>dZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">class G4ElectroMagneticField *&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMyBLFieldMap.html#a3a44f04672eb2630e3c4ad99ced6dc27">createGridMap()</a> will create a 3-d map from a pre-defined field. returns false if error. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00431">431</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8hh_source.html#l00253">current</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00252">d2string()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00254">gradient</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00260">i2string()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00252">maxline</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00255">normB</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00256">normE</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00877">GridImpl::setField()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00433"></a>00433                                  {
<a name="l00434"></a>00434     <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>) {
<a name="l00435"></a>00435         <span class="keyword">delete</span> <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>;
<a name="l00436"></a>00436         <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = 0;
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438     <a class="code" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a> = 128;
<a name="l00439"></a>00439     <a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a> = 1.0;
<a name="l00440"></a>00440     <a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a> = 1.0;
<a name="l00441"></a>00441     <a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a> = 1.0;
<a name="l00442"></a>00442     <a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a> = 1.0;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     <a class="code" href="MyBLFuncs_8hh.html#a45a5a259e80c476628a7ded72fc4e485">MyBLArgumentVector</a> argv;
<a name="l00445"></a>00445     <a class="code" href="MyBLFuncs_8hh.html#a9fcb6f20bb3ea31b67993ee2a96c34e2">MyBLArgumentMap</a> args;
<a name="l00446"></a>00446     args[<span class="stringliteral">&quot;X0&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(X0);
<a name="l00447"></a>00447     args[<span class="stringliteral">&quot;Y0&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(Y0);
<a name="l00448"></a>00448     args[<span class="stringliteral">&quot;Z0&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(Z0);
<a name="l00449"></a>00449     args[<span class="stringliteral">&quot;dX&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(dX);
<a name="l00450"></a>00450     args[<span class="stringliteral">&quot;dY&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(dY);
<a name="l00451"></a>00451     args[<span class="stringliteral">&quot;dZ&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a27c599a634e5788f3dcbb21a5df7ef0c" title="d2string converts a double to a G4String">d2string</a>(dZ);
<a name="l00452"></a>00452     args[<span class="stringliteral">&quot;nX&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a735916a9d0ccf0da5202177772147237" title="i2string converts an int to a G4String">i2string</a>(nX);
<a name="l00453"></a>00453     args[<span class="stringliteral">&quot;nY&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a735916a9d0ccf0da5202177772147237" title="i2string converts an int to a G4String">i2string</a>(nY);
<a name="l00454"></a>00454     args[<span class="stringliteral">&quot;nZ&quot;</span>] = <a class="code" href="MyBLFieldMap_8cc.html#a735916a9d0ccf0da5202177772147237" title="i2string converts an int to a G4String">i2string</a>(nZ);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456     <a class="code" href="classGridImpl.html">GridImpl</a> *grid = <span class="keyword">new</span> <a class="code" href="classGridImpl.html">GridImpl</a>(argv,args);
<a name="l00457"></a>00457     <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = grid;
<a name="l00458"></a>00458 
<a name="l00459"></a>00459     <span class="keywordtype">bool</span> retval = <span class="keyword">true</span>;
<a name="l00460"></a>00460     G4double pos[4], field[6];
<a name="l00461"></a>00461     pos[3] = 0.0;
<a name="l00462"></a>00462     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nX; ++i) {
<a name="l00463"></a>00463         pos[0] = X0 + i*dX;
<a name="l00464"></a>00464         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;nY; ++j) {
<a name="l00465"></a>00465             pos[1] = Y0 + j*dY;
<a name="l00466"></a>00466             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nZ; ++k) {
<a name="l00467"></a>00467                 pos[2] = Z0 + k*dZ;
<a name="l00468"></a>00468                 emField-&gt;GetFieldValue(pos,field);
<a name="l00469"></a>00469                 <span class="keywordflow">if</span>(!grid-&gt;<a class="code" href="classGridImpl.html#aa8b7ee1460eb08f6b3e925b33dae6970">setField</a>(pos[0],pos[1],pos[2],
<a name="l00470"></a>00470                     field[0],field[1],field[2],
<a name="l00471"></a>00471                     field[3],field[4],field[5],0))
<a name="l00472"></a>00472                     retval = <span class="keyword">false</span>;
<a name="l00473"></a>00473             }
<a name="l00474"></a>00474         }
<a name="l00475"></a>00475     }
<a name="l00476"></a>00476 
<a name="l00477"></a>00477     <span class="keywordflow">return</span> retval;
<a name="l00478"></a>00478 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0fe89451b898a2fb4b13e819bd5141ad"></a><!-- doxytag: member="MyBLFieldMap::createTimeDependence" ref="a0fe89451b898a2fb4b13e819bd5141ad" args="(int n, G4double t[], G4double b[], G4double e[]=0, G4double period=&#45;1.0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::createTimeDependence </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>t</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>b</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>e</em>[] = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>period</em> = <code>-1.0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMyBLFieldMap.html#a0fe89451b898a2fb4b13e819bd5141ad">createTimeDependence()</a> will apply the time dependence given. n is the # elements in the arrays; t[] is the time value for each point, b[] is the factor for B, and e[] is the factor for E. returns false if error. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00552">552</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8cc_source.html#l00195">TimeImpl::setPeriod()</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00258">time</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00553"></a>00553                                {
<a name="l00554"></a>00554     <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00555"></a>00555     <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a> = <span class="keyword">new</span> <a class="code" href="classTimeImpl.html">TimeImpl</a>(n,t,b,e);
<a name="l00556"></a>00556     <span class="keywordflow">if</span>(period &gt; 0.0)
<a name="l00557"></a>00557         <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>-&gt;<a class="code" href="classTimeImpl.html#ab3bcb1fb69a8534ab09ba0aba82fda8f">setPeriod</a>(period);
<a name="l00558"></a>00558     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00559"></a>00559 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a960b99301a56f912f15ad71221989ee0"></a><!-- doxytag: member="MyBLFieldMap::getBoundingPoint" ref="a960b99301a56f912f15ad71221989ee0" args="(int i, G4double point[4])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MyBLFieldMap::getBoundingPoint </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>point</em>[4]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMyBLFieldMap.html#a960b99301a56f912f15ad71221989ee0" title="getBoundingPoint() returns the i-th bounding point of the map.">getBoundingPoint()</a> returns the i-th bounding point of the map. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00364">364</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="classFieldMapImpl.html#a0bbb5808f187a52b9dd2fa203e9a1c73">FieldMapImpl::getBoundingPoint()</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00364"></a>00364                                                             {
<a name="l00365"></a>00365     <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>-&gt;<a class="code" href="classFieldMapImpl.html#a0bbb5808f187a52b9dd2fa203e9a1c73">getBoundingPoint</a>(i,point);
<a name="l00366"></a>00366 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a73d69b5d145de5f49e99f1ab1aab2cc9"></a><!-- doxytag: member="MyBLFieldMap::getFieldValue" ref="a73d69b5d145de5f49e99f1ab1aab2cc9" args="(const G4double local[4], G4double field[6], G4double current=1.0, G4double gradient=1.0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MyBLFieldMap::getFieldValue </td>
          <td>(</td>
          <td class="paramtype">const G4double&nbsp;</td>
          <td class="paramname"> <em>local</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>field</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>current</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>gradient</em> = <code>1.0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMyBLFieldMap.html#a73d69b5d145de5f49e99f1ab1aab2cc9">getFieldValue()</a> gets the map's field to the field[] array. local[] must be LOCAL coordinates; local[3] (time) is ignored unless there is a time dependence specified. (elements using <a class="el" href="classMyBLFieldMap.html">MyBLFieldMap</a> perform the global-&gt;local conversion) </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00286">286</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8hh_source.html#l00253">current</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00196">TimeImpl::factorB()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00206">TimeImpl::factorE()</a>, <a class="el" href="classFieldMapImpl.html#a8d0d5931f34552ad3f5fe0ae9c330c5e">FieldMapImpl::getFieldValue()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00254">gradient</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00255">normB</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00256">normE</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00258">time</a>.</p>

<p>Referenced by <a class="el" href="MyFieldMap_8cc_source.html#l00054">MyFieldMap::addFieldValue()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00287"></a>00287                                        {
<a name="l00288"></a>00288     <span class="keywordflow">if</span>(!<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>)
<a name="l00289"></a>00289         <span class="keywordflow">throw</span> <span class="stringliteral">&quot;MyBLFieldMap::getFieldValue called, no implementation&quot;</span>;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     G4double thisField[6];
<a name="l00292"></a>00292     <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>-&gt;<a class="code" href="classFieldMapImpl.html#a8d0d5931f34552ad3f5fe0ae9c330c5e">getFieldValue</a>(local,thisField);
<a name="l00293"></a>00293     G4double timeB=1.0, timeE=1.0;
<a name="l00294"></a>00294     <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>) {
<a name="l00295"></a>00295         timeB = <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>-&gt;<a class="code" href="classTimeImpl.html#a219f5be1d5f3862d575679f2c2cf8781">factorB</a>(local[3]);
<a name="l00296"></a>00296         timeE = <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>-&gt;<a class="code" href="classTimeImpl.html#a8975b2f5e275f09e705bbe7837713a81">factorE</a>(local[3]);
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298     field[0] = thisField[0] * <a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a> * timeB * _current/<a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a>;
<a name="l00299"></a>00299     field[1] = thisField[1] * <a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a> * timeB * _current/<a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a>;
<a name="l00300"></a>00300     field[2] = thisField[2] * <a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a> * timeB * _current/<a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a>;
<a name="l00301"></a>00301     field[3] = thisField[3] * <a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a> * timeE * _gradient/<a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a>;
<a name="l00302"></a>00302     field[4] = thisField[4] * <a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a> * timeE * _gradient/<a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a>;
<a name="l00303"></a>00303     field[5] = thisField[5] * <a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a> * timeE * _gradient/<a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a>;
<a name="l00304"></a>00304 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad50cd8b0febfd219fd813ba247e5b47a"></a><!-- doxytag: member="MyBLFieldMap::getTimeFactor" ref="ad50cd8b0febfd219fd813ba247e5b47a" args="(G4double t, G4double *b, G4double *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::getTimeFactor </td>
          <td>(</td>
          <td class="paramtype">G4double&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double *&nbsp;</td>
          <td class="paramname"> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4double *&nbsp;</td>
          <td class="paramname"> <em>e</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMyBLFieldMap.html#ad50cd8b0febfd219fd813ba247e5b47a">getTimeFactor()</a> returns the time factors for B and E at time t. returns false if error. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00562">562</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8cc_source.html#l00196">TimeImpl::factorB()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00206">TimeImpl::factorE()</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00258">time</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00562"></a>00562                                                                      {
<a name="l00563"></a>00563     <span class="keywordflow">if</span>(b) *b = (<a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a> ? <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>-&gt;<a class="code" href="classTimeImpl.html#a219f5be1d5f3862d575679f2c2cf8781">factorB</a>(t) : 1.0);
<a name="l00564"></a>00564     <span class="keywordflow">if</span>(e) *e = (<a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a> ? <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>-&gt;<a class="code" href="classTimeImpl.html#a8975b2f5e275f09e705bbe7837713a81">factorE</a>(t) : 1.0);
<a name="l00565"></a>00565     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00566"></a>00566 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afd125ae39d8e5d885ae4da66367b79ef"></a><!-- doxytag: member="MyBLFieldMap::hasB" ref="afd125ae39d8e5d885ae4da66367b79ef" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::hasB </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMyBLFieldMap.html#afd125ae39d8e5d885ae4da66367b79ef" title="hasB() returns true if this map has a nonzero B field.">hasB()</a> returns true if this map has a nonzero B field. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00369">369</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="classFieldMapImpl.html#a37afc7ddbc6da1958312d2511bef4d90">FieldMapImpl::hasB()</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>.</p>

<p>Referenced by <a class="el" href="MyFieldMap_8cc_source.html#l00054">MyFieldMap::addFieldValue()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00369"></a>00369                         {
<a name="l00370"></a>00370     <span class="keywordflow">return</span> <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>-&gt;<a class="code" href="classFieldMapImpl.html#a37afc7ddbc6da1958312d2511bef4d90">hasB</a>();
<a name="l00371"></a>00371 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9f6d9efe78c724e453b1d402a7bbda08"></a><!-- doxytag: member="MyBLFieldMap::hasE" ref="a9f6d9efe78c724e453b1d402a7bbda08" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::hasE </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classMyBLFieldMap.html#a9f6d9efe78c724e453b1d402a7bbda08" title="hasE() returns true if this map has a nonzero E field.">hasE()</a> returns true if this map has a nonzero E field. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00374">374</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="classFieldMapImpl.html#a46e9dcf78b264fc17fa28775a8cab372">FieldMapImpl::hasE()</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>.</p>

<p>Referenced by <a class="el" href="MyFieldMap_8cc_source.html#l00054">MyFieldMap::addFieldValue()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00374"></a>00374                         {
<a name="l00375"></a>00375     <span class="keywordflow">return</span> <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>-&gt;<a class="code" href="classFieldMapImpl.html#a46e9dcf78b264fc17fa28775a8cab372">hasE</a>();
<a name="l00376"></a>00376 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="add2c2908a8df4c4e14c40ae27a46518e"></a><!-- doxytag: member="MyBLFieldMap::readFile" ref="add2c2908a8df4c4e14c40ae27a46518e" args="(G4String filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::readFile </td>
          <td>(</td>
          <td class="paramtype">G4String&nbsp;</td>
          <td class="paramname"> <em>filename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMyBLFieldMap.html#add2c2908a8df4c4e14c40ae27a46518e">readFile()</a> reads a file to initialize the map. Returns true if OK, false on error. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">307</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8cc_source.html#l00221">argDouble()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00237">argInt()</a>, <a class="el" href="MyBLFuncs_8cc_source.html#l00008">BLFuncs</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00077">InputFile::close()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00253">current</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00050">InputFile::filename()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00053">InputFile::getline()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00051">InputFile::good()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00254">gradient</a>, <a class="el" href="classFieldMapImpl.html#a5e8ea2b36409e6b8e8693da7c3598fd9">FieldMapImpl::handleCommand()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00052">InputFile::linenumber()</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00252">maxline</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00255">normB</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00256">normE</a>, <a class="el" href="MyBLFuncs_8cc_source.html#l00017">MyBLFuncs::parseArgs()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00379">TimeImpl::readTime()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00070">InputFile::setMaxline()</a>, and <a class="el" href="MyBLFieldMap_8hh_source.html#l00258">time</a>.</p>

<p>Referenced by <a class="el" href="MyFieldMap_8cc_source.html#l00017">MyFieldMap::MyFieldMap()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00307"></a>00307                                              {
<a name="l00308"></a>00308     <a class="code" href="classInputFile.html">InputFile</a> in(filename,<a class="code" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a>);
<a name="l00309"></a>00309     <span class="keywordflow">if</span>(!in.good()) {
<a name="l00310"></a>00310         <span class="keywordflow">throw</span> (G4String(<span class="stringliteral">&quot;MyBLFieldMap::readFile: cannot open file &quot;</span>) + in.filename());
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313     printf(<span class="stringliteral">&quot;MyBLFieldMap: reading file &apos;%s&apos;\n&quot;</span>,in.filename());
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="keywordtype">bool</span> retval = <span class="keyword">true</span>;
<a name="l00316"></a>00316 
<a name="l00317"></a>00317     <span class="keywordtype">char</span> *line;
<a name="l00318"></a>00318     <span class="keywordflow">while</span>((line=in.getline()) != 0) {
<a name="l00319"></a>00319         <a class="code" href="MyBLFuncs_8hh.html#a45a5a259e80c476628a7ded72fc4e485">MyBLArgumentVector</a> argv;
<a name="l00320"></a>00320         <a class="code" href="MyBLFuncs_8hh.html#a9fcb6f20bb3ea31b67993ee2a96c34e2">MyBLArgumentMap</a> namedArgs;
<a name="l00321"></a>00321         <span class="keywordflow">if</span>(<a class="code" href="MyBLFuncs_8cc.html#a0ac47456f756e383a007a9dc2fcf935d">BLFuncs</a>.<a class="code" href="classMyBLFuncs.html#aa0fb6138e5809970f57228ab6556da7d">parseArgs</a>(line,argv,namedArgs) &lt; 0)
<a name="l00322"></a>00322             <span class="keywordflow">goto</span> invalid;
<a name="l00323"></a>00323         <span class="keywordflow">if</span>(argv[0] == <span class="stringliteral">&quot;&quot;</span>) <span class="keywordflow">continue</span>;
<a name="l00324"></a>00324         <span class="keywordflow">if</span>(argv[0] == <span class="stringliteral">&quot;param&quot;</span>) {
<a name="l00325"></a>00325             <a class="code" href="MyBLFieldMap_8cc.html#ae66564ae3f7e0ac7eef7db1454820f3d" title="argInt handles an argument with a value of G4int">argInt</a>(<a class="code" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a>,<span class="stringliteral">&quot;maxline&quot;</span>,namedArgs);
<a name="l00326"></a>00326             <a class="code" href="MyBLFieldMap_8cc.html#ab1caeae46ad3d251611c56fae6cfd4af" title="argDouble handles an argument with a value of G4double">argDouble</a>(<a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a>,<span class="stringliteral">&quot;current&quot;</span>,namedArgs);
<a name="l00327"></a>00327             <a class="code" href="MyBLFieldMap_8cc.html#ab1caeae46ad3d251611c56fae6cfd4af" title="argDouble handles an argument with a value of G4double">argDouble</a>(<a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a>,<span class="stringliteral">&quot;gradient&quot;</span>,namedArgs);
<a name="l00328"></a>00328             <a class="code" href="MyBLFieldMap_8cc.html#ab1caeae46ad3d251611c56fae6cfd4af" title="argDouble handles an argument with a value of G4double">argDouble</a>(<a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a>,<span class="stringliteral">&quot;normB&quot;</span>,namedArgs);
<a name="l00329"></a>00329             <a class="code" href="MyBLFieldMap_8cc.html#ab1caeae46ad3d251611c56fae6cfd4af" title="argDouble handles an argument with a value of G4double">argDouble</a>(<a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a>,<span class="stringliteral">&quot;normE&quot;</span>,namedArgs);
<a name="l00330"></a>00330             in.setMaxline(<a class="code" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a>);
<a name="l00331"></a>00331         }
<a name="l00332"></a>00332         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(argv[0] == <span class="stringliteral">&quot;grid&quot;</span>) {
<a name="l00333"></a>00333             <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>) <span class="keywordflow">goto</span> invalid;
<a name="l00334"></a>00334             <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = <span class="keyword">new</span> <a class="code" href="classGridImpl.html">GridImpl</a>(argv,namedArgs);
<a name="l00335"></a>00335         }
<a name="l00336"></a>00336         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(argv[0] == <span class="stringliteral">&quot;cylinder&quot;</span>) {
<a name="l00337"></a>00337             <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>) <span class="keywordflow">goto</span> invalid;
<a name="l00338"></a>00338             <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a> = <span class="keyword">new</span> <a class="code" href="classCylinderImpl.html">CylinderImpl</a>(argv,namedArgs);
<a name="l00339"></a>00339         }
<a name="l00340"></a>00340         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(argv[0] == <span class="stringliteral">&quot;time&quot;</span>) {
<a name="l00341"></a>00341             <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>) <span class="keywordflow">goto</span> invalid;
<a name="l00342"></a>00342             <a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a> = <a class="code" href="classTimeImpl.html#acab16db5654243ed69fb3e34efe99249">TimeImpl::readTime</a>(in,argv,namedArgs);
<a name="l00343"></a>00343             <span class="keywordflow">if</span>(!<a class="code" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">time</a>) <span class="keywordflow">goto</span> invalid;
<a name="l00344"></a>00344         }
<a name="l00345"></a>00345         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>) {
<a name="l00346"></a>00346             <span class="keywordflow">if</span>(!<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>-&gt;<a class="code" href="classFieldMapImpl.html#a5e8ea2b36409e6b8e8693da7c3598fd9">handleCommand</a>(in,argv,namedArgs))
<a name="l00347"></a>00347                 <span class="keywordflow">goto</span> invalid;
<a name="l00348"></a>00348         }
<a name="l00349"></a>00349         <span class="keywordflow">else</span> {
<a name="l00350"></a>00350             invalid:        G4cerr &lt;&lt; <span class="stringliteral">&quot;MyBLFieldMap file &quot;</span>  &lt;&lt; in.filename()
<a name="l00351"></a>00351                 &lt;&lt; <span class="stringliteral">&quot; line &quot;</span> &lt;&lt; in.linenumber()
<a name="l00352"></a>00352                 &lt;&lt; <span class="stringliteral">&quot; invalid command &quot;</span> &lt;&lt; argv[0].c_str()
<a name="l00353"></a>00353                 &lt;&lt; G4endl;
<a name="l00354"></a>00354             retval = <span class="keyword">false</span>;
<a name="l00355"></a>00355             <span class="keywordflow">break</span>;
<a name="l00356"></a>00356         }
<a name="l00357"></a>00357     }
<a name="l00358"></a>00358     in.close();
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     <span class="keywordflow">return</span> retval;
<a name="l00361"></a>00361 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a074c788e85310f2db605fb283940d223"></a><!-- doxytag: member="MyBLFieldMap::writeFile" ref="a074c788e85310f2db605fb283940d223" args="(G4String filename, G4String comment=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MyBLFieldMap::writeFile </td>
          <td>(</td>
          <td class="paramtype">G4String&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">G4String&nbsp;</td>
          <td class="paramname"> <em>comment</em> = <code>&quot;&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classMyBLFieldMap.html#a074c788e85310f2db605fb283940d223">writeFile()</a> writes the map to a file. Returns true if OK, false on error. </p>

<p>Definition at line <a class="el" href="MyBLFieldMap_8cc_source.html#l00524">524</a> of file <a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a>.</p>

<p>References <a class="el" href="MyBLFieldMap_8hh_source.html#l00253">current</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00254">gradient</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">impl</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00252">maxline</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00255">normB</a>, <a class="el" href="MyBLFieldMap_8hh_source.html#l00256">normE</a>, and <a class="el" href="classFieldMapImpl.html#a4b3a20752c8e90f336861e1f2732ae49">FieldMapImpl::writeFile()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00524"></a>00524                                                                 {
<a name="l00525"></a>00525     <span class="keywordflow">if</span>(!<a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00526"></a>00526 
<a name="l00527"></a>00527     FILE *f = fopen(filename.c_str(),<span class="stringliteral">&quot;r&quot;</span>);
<a name="l00528"></a>00528     <span class="keywordflow">if</span>(f) {
<a name="l00529"></a>00529         fclose(f);
<a name="l00530"></a>00530         G4Exception(<span class="stringliteral">&quot;MyBLFieldMap&quot;</span>,<span class="stringliteral">&quot;Output File Exists&quot;</span>,FatalException,
<a name="l00531"></a>00531             filename.c_str());
<a name="l00532"></a>00532     }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534     f = fopen(filename,<span class="stringliteral">&quot;w&quot;</span>);
<a name="l00535"></a>00535     <span class="keywordflow">if</span>(!f) {
<a name="l00536"></a>00536         fprintf(stderr,<span class="stringliteral">&quot;MyBLFieldMap::writeFile CANNOT WRITE file &apos;%s&apos;\n&quot;</span>,
<a name="l00537"></a>00537             filename.c_str());
<a name="l00538"></a>00538         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541     fprintf(f,<span class="stringliteral">&quot;# %s\n&quot;</span>,comment.c_str());
<a name="l00542"></a>00542     fprintf(f,<span class="stringliteral">&quot;param maxline=%d current=%g gradient=%g normB=%g normE=%g\n&quot;</span>,
<a name="l00543"></a>00543         <a class="code" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">maxline</a>,<a class="code" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">current</a>,<a class="code" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">gradient</a>,<a class="code" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">normB</a>,<a class="code" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">normE</a>);
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     <span class="keywordtype">bool</span> retval = <a class="code" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">impl</a>-&gt;<a class="code" href="classFieldMapImpl.html#a4b3a20752c8e90f336861e1f2732ae49">writeFile</a>(f);
<a name="l00546"></a>00546 
<a name="l00547"></a>00547     fclose(f);
<a name="l00548"></a>00548     <span class="keywordflow">return</span> retval;
<a name="l00549"></a>00549 }
</pre></div></p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a53ba44089ab1c4c1cfeaa812bf684827"></a><!-- doxytag: member="MyBLFieldMap::FieldMapPlacement" ref="a53ba44089ab1c4c1cfeaa812bf684827" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class FieldMapPlacement<code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00259">259</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a7dde42149cd9a3c3e6744b73568d2aea"></a><!-- doxytag: member="MyBLFieldMap::current" ref="a7dde42149cd9a3c3e6744b73568d2aea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">G4double <a class="el" href="classMyBLFieldMap.html#a7dde42149cd9a3c3e6744b73568d2aea">MyBLFieldMap::current</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00253">253</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

<p>Referenced by <a class="el" href="MyBLFieldMap_8cc_source.html#l00481">createCylinderMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00431">createGridMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00286">getFieldValue()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">MyBLFieldMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">readFile()</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00524">writeFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f70e9287f110e6de65e2bffc916c470"></a><!-- doxytag: member="MyBLFieldMap::gradient" ref="a1f70e9287f110e6de65e2bffc916c470" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">G4double <a class="el" href="classMyBLFieldMap.html#a1f70e9287f110e6de65e2bffc916c470">MyBLFieldMap::gradient</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00254">254</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

<p>Referenced by <a class="el" href="MyBLFieldMap_8cc_source.html#l00481">createCylinderMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00431">createGridMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00286">getFieldValue()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">MyBLFieldMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">readFile()</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00524">writeFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a27ba0f2c036a9f1f55a6007ac44ac514"></a><!-- doxytag: member="MyBLFieldMap::impl" ref="a27ba0f2c036a9f1f55a6007ac44ac514" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">class <a class="el" href="classFieldMapImpl.html">FieldMapImpl</a>* <a class="el" href="classMyBLFieldMap.html#a27ba0f2c036a9f1f55a6007ac44ac514">MyBLFieldMap::impl</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00257">257</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

<p>Referenced by <a class="el" href="MyBLFieldMap_8cc_source.html#l00481">createCylinderMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00431">createGridMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00364">getBoundingPoint()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00286">getFieldValue()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00369">hasB()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00374">hasE()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">MyBLFieldMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">readFile()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00524">writeFile()</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00278">~MyBLFieldMap()</a>.</p>

</div>
</div>
<a class="anchor" id="a3928d96578cdb6b054bfd951e897c92a"></a><!-- doxytag: member="MyBLFieldMap::maxline" ref="a3928d96578cdb6b054bfd951e897c92a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">G4int <a class="el" href="classMyBLFieldMap.html#a3928d96578cdb6b054bfd951e897c92a">MyBLFieldMap::maxline</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00252">252</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

<p>Referenced by <a class="el" href="MyBLFieldMap_8cc_source.html#l00481">createCylinderMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00431">createGridMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">MyBLFieldMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">readFile()</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00524">writeFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a5971fcc5c76888fdd6897c7618c30d64"></a><!-- doxytag: member="MyBLFieldMap::normB" ref="a5971fcc5c76888fdd6897c7618c30d64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">G4double <a class="el" href="classMyBLFieldMap.html#a5971fcc5c76888fdd6897c7618c30d64">MyBLFieldMap::normB</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00255">255</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

<p>Referenced by <a class="el" href="MyBLFieldMap_8cc_source.html#l00481">createCylinderMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00431">createGridMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00286">getFieldValue()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">MyBLFieldMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">readFile()</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00524">writeFile()</a>.</p>

</div>
</div>
<a class="anchor" id="aaed3a786d88504b07a53d9f7b90add56"></a><!-- doxytag: member="MyBLFieldMap::normE" ref="aaed3a786d88504b07a53d9f7b90add56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">G4double <a class="el" href="classMyBLFieldMap.html#aaed3a786d88504b07a53d9f7b90add56">MyBLFieldMap::normE</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00256">256</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

<p>Referenced by <a class="el" href="MyBLFieldMap_8cc_source.html#l00481">createCylinderMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00431">createGridMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00286">getFieldValue()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">MyBLFieldMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">readFile()</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00524">writeFile()</a>.</p>

</div>
</div>
<a class="anchor" id="a737ce6036528a13ff1504a3191090fa8"></a><!-- doxytag: member="MyBLFieldMap::time" ref="a737ce6036528a13ff1504a3191090fa8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">class <a class="el" href="classTimeImpl.html">TimeImpl</a>* <a class="el" href="classMyBLFieldMap.html#a737ce6036528a13ff1504a3191090fa8">MyBLFieldMap::time</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MyBLFieldMap_8hh_source.html#l00258">258</a> of file <a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a>.</p>

<p>Referenced by <a class="el" href="MyBLFieldMap_8cc_source.html#l00552">createTimeDependence()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00286">getFieldValue()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00562">getTimeFactor()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00267">MyBLFieldMap()</a>, <a class="el" href="MyBLFieldMap_8cc_source.html#l00307">readFile()</a>, and <a class="el" href="MyBLFieldMap_8cc_source.html#l00278">~MyBLFieldMap()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="MyBLFieldMap_8hh_source.html">MyBLFieldMap.hh</a></li>
<li>src/<a class="el" href="MyBLFieldMap_8cc_source.html">MyBLFieldMap.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 29 Apr 2015 for g4sim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
